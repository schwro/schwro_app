var eS=Object.defineProperty;var tS=(t,e,r)=>e in t?eS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ir=(t,e,r)=>tS(t,typeof e!="symbol"?e+"":e,r);function aB(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var BH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var sB={exports:{}},qf={},iB={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yu=Symbol.for("react.element"),aS=Symbol.for("react.portal"),sS=Symbol.for("react.fragment"),iS=Symbol.for("react.strict_mode"),oS=Symbol.for("react.profiler"),lS=Symbol.for("react.provider"),AS=Symbol.for("react.context"),cS=Symbol.for("react.forward_ref"),dS=Symbol.for("react.suspense"),uS=Symbol.for("react.memo"),hS=Symbol.for("react.lazy"),yv=Symbol.iterator;function fS(t){return t===null||typeof t!="object"?null:(t=yv&&t[yv]||t["@@iterator"],typeof t=="function"?t:null)}var oB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lB=Object.assign,AB={};function tc(t,e,r){this.props=t,this.context=e,this.refs=AB,this.updater=r||oB}tc.prototype.isReactComponent={};tc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cB(){}cB.prototype=tc.prototype;function Vy(t,e,r){this.props=t,this.context=e,this.refs=AB,this.updater=r||oB}var Wy=Vy.prototype=new cB;Wy.constructor=Vy;lB(Wy,tc.prototype);Wy.isPureReactComponent=!0;var bv=Array.isArray,dB=Object.prototype.hasOwnProperty,qy={current:null},uB={key:!0,ref:!0,__self:!0,__source:!0};function hB(t,e,r){var n,a={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dB.call(e,n)&&!uB.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var A=Array(l),c=0;c<l;c++)A[c]=arguments[c+2];a.children=A}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:yu,type:t,key:i,ref:o,props:a,_owner:qy.current}}function gS(t,e){return{$$typeof:yu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jy(t){return typeof t=="object"&&t!==null&&t.$$typeof===yu}function pS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var wv=/\/+/g;function wp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pS(""+t.key):e.toString(36)}function N0(t,e,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yu:case aS:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+wp(o,0):n,bv(a)?(r="",t!=null&&(r=t.replace(wv,"$&/")+"/"),N0(a,e,r,"",function(c){return c})):a!=null&&(Jy(a)&&(a=gS(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(wv,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",bv(t))for(var l=0;l<t.length;l++){i=t[l];var A=n+wp(i,l);o+=N0(i,e,r,A,a)}else if(A=fS(t),typeof A=="function")for(t=A.call(t),l=0;!(i=t.next()).done;)i=i.value,A=n+wp(i,l++),o+=N0(i,e,r,A,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mh(t,e,r){if(t==null)return t;var n=[],a=0;return N0(t,n,"","",function(i){return e.call(r,i,a++)}),n}function mS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ra={current:null},_0={transition:null},xS={ReactCurrentDispatcher:ra,ReactCurrentBatchConfig:_0,ReactCurrentOwner:qy};function fB(){throw Error("act(...) is not supported in production builds of React.")}Ot.Children={map:mh,forEach:function(t,e,r){mh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return mh(t,function(){e++}),e},toArray:function(t){return mh(t,function(e){return e})||[]},only:function(t){if(!Jy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ot.Component=tc;Ot.Fragment=sS;Ot.Profiler=oS;Ot.PureComponent=Vy;Ot.StrictMode=iS;Ot.Suspense=dS;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;Ot.act=fB;Ot.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=lB({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qy.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(A in e)dB.call(e,A)&&!uB.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&l!==void 0?l[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){l=Array(A);for(var c=0;c<A;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:yu,type:t.type,key:a,ref:i,props:n,_owner:o}};Ot.createContext=function(t){return t={$$typeof:AS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lS,_context:t},t.Consumer=t};Ot.createElement=hB;Ot.createFactory=function(t){var e=hB.bind(null,t);return e.type=t,e};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(t){return{$$typeof:cS,render:t}};Ot.isValidElement=Jy;Ot.lazy=function(t){return{$$typeof:hS,_payload:{_status:-1,_result:t},_init:mS}};Ot.memo=function(t,e){return{$$typeof:uS,type:t,compare:e===void 0?null:e}};Ot.startTransition=function(t){var e=_0.transition;_0.transition={};try{t()}finally{_0.transition=e}};Ot.unstable_act=fB;Ot.useCallback=function(t,e){return ra.current.useCallback(t,e)};Ot.useContext=function(t){return ra.current.useContext(t)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(t){return ra.current.useDeferredValue(t)};Ot.useEffect=function(t,e){return ra.current.useEffect(t,e)};Ot.useId=function(){return ra.current.useId()};Ot.useImperativeHandle=function(t,e,r){return ra.current.useImperativeHandle(t,e,r)};Ot.useInsertionEffect=function(t,e){return ra.current.useInsertionEffect(t,e)};Ot.useLayoutEffect=function(t,e){return ra.current.useLayoutEffect(t,e)};Ot.useMemo=function(t,e){return ra.current.useMemo(t,e)};Ot.useReducer=function(t,e,r){return ra.current.useReducer(t,e,r)};Ot.useRef=function(t){return ra.current.useRef(t)};Ot.useState=function(t){return ra.current.useState(t)};Ot.useSyncExternalStore=function(t,e,r){return ra.current.useSyncExternalStore(t,e,r)};Ot.useTransition=function(){return ra.current.useTransition()};Ot.version="18.3.1";iB.exports=Ot;var C=iB.exports;const Sn=rS(C),yS=aB({__proto__:null,default:Sn},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bS=C,wS=Symbol.for("react.element"),vS=Symbol.for("react.fragment"),kS=Object.prototype.hasOwnProperty,BS=bS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CS={key:!0,ref:!0,__self:!0,__source:!0};function gB(t,e,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)kS.call(e,n)&&!CS.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:wS,type:t,key:i,ref:o,props:a,_owner:BS.current}}qf.Fragment=vS;qf.jsx=gB;qf.jsxs=gB;sB.exports=qf;var s=sB.exports,Xm={},pB={exports:{}},Ia={},mB={exports:{}},xB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,Ae){var fe=Y.length;Y.push(Ae);e:for(;0<fe;){var we=fe-1>>>1,E=Y[we];if(0<a(E,Ae))Y[we]=Ae,Y[fe]=E,fe=we;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var Ae=Y[0],fe=Y.pop();if(fe!==Ae){Y[0]=fe;e:for(var we=0,E=Y.length,z=E>>>1;we<z;){var K=2*(we+1)-1,W=Y[K],J=K+1,re=Y[J];if(0>a(W,fe))J<E&&0>a(re,W)?(Y[we]=re,Y[J]=fe,we=J):(Y[we]=W,Y[K]=fe,we=K);else if(J<E&&0>a(re,fe))Y[we]=re,Y[J]=fe,we=J;else break e}}return Ae}function a(Y,Ae){var fe=Y.sortIndex-Ae.sortIndex;return fe!==0?fe:Y.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var A=[],c=[],d=1,h=null,p=3,u=!1,y=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Y){for(var Ae=r(c);Ae!==null;){if(Ae.callback===null)n(c);else if(Ae.startTime<=Y)n(c),Ae.sortIndex=Ae.expirationTime,e(A,Ae);else break;Ae=r(c)}}function k(Y){if(b=!1,w(Y),!y)if(r(A)!==null)y=!0,ce(N);else{var Ae=r(c);Ae!==null&&ue(k,Ae.startTime-Y)}}function N(Y,Ae){y=!1,b&&(b=!1,g(Q),Q=-1),u=!0;var fe=p;try{for(w(Ae),h=r(A);h!==null&&(!(h.expirationTime>Ae)||Y&&!F());){var we=h.callback;if(typeof we=="function"){h.callback=null,p=h.priorityLevel;var E=we(h.expirationTime<=Ae);Ae=t.unstable_now(),typeof E=="function"?h.callback=E:h===r(A)&&n(A),w(Ae)}else n(A);h=r(A)}if(h!==null)var z=!0;else{var K=r(c);K!==null&&ue(k,K.startTime-Ae),z=!1}return z}finally{h=null,p=fe,u=!1}}var S=!1,U=null,Q=-1,L=5,V=-1;function F(){return!(t.unstable_now()-V<L)}function D(){if(U!==null){var Y=t.unstable_now();V=Y;var Ae=!0;try{Ae=U(!0,Y)}finally{Ae?T():(S=!1,U=null)}}else S=!1}var T;if(typeof m=="function")T=function(){m(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ne=G.port2;G.port1.onmessage=D,T=function(){ne.postMessage(null)}}else T=function(){v(D,0)};function ce(Y){U=Y,S||(S=!0,T())}function ue(Y,Ae){Q=v(function(){Y(t.unstable_now())},Ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){y||u||(y=!0,ce(N))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(Y){switch(p){case 1:case 2:case 3:var Ae=3;break;default:Ae=p}var fe=p;p=Ae;try{return Y()}finally{p=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,Ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var fe=p;p=Y;try{return Ae()}finally{p=fe}},t.unstable_scheduleCallback=function(Y,Ae,fe){var we=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?we+fe:we):fe=we,Y){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=fe+E,Y={id:d++,callback:Ae,priorityLevel:Y,startTime:fe,expirationTime:E,sortIndex:-1},fe>we?(Y.sortIndex=fe,e(c,Y),r(A)===null&&Y===r(c)&&(b?(g(Q),Q=-1):b=!0,ue(k,fe-we))):(Y.sortIndex=E,e(A,Y),y||u||(y=!0,ce(N))),Y},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(Y){var Ae=p;return function(){var fe=p;p=Ae;try{return Y.apply(this,arguments)}finally{p=fe}}}})(xB);mB.exports=xB;var jS=mB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS=C,Qa=jS;function Ze(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yB=new Set,Rd={};function Il(t,e){KA(t,e),KA(t+"Capture",e)}function KA(t,e){for(Rd[t]=e,t=0;t<e.length;t++)yB.add(e[t])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zm=Object.prototype.hasOwnProperty,_S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vv={},kv={};function SS(t){return Zm.call(kv,t)?!0:Zm.call(vv,t)?!1:_S.test(t)?kv[t]=!0:(vv[t]=!0,!1)}function ES(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FS(t,e,r,n){if(e===null||typeof e>"u"||ES(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function na(t,e,r,n,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ln[t]=new na(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ln[e]=new na(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ln[t]=new na(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ln[t]=new na(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ln[t]=new na(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ln[t]=new na(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ln[t]=new na(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ln[t]=new na(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ln[t]=new na(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yy=/[\-:]([a-z])/g;function Xy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yy,Xy);Ln[e]=new na(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yy,Xy);Ln[e]=new na(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yy,Xy);Ln[e]=new na(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ln[t]=new na(t,1,!1,t.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ln[t]=new na(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zy(t,e,r,n){var a=Ln.hasOwnProperty(e)?Ln[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FS(e,r,a,n)&&(r=null),n||a===null?SS(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Si=NS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xh=Symbol.for("react.element"),mA=Symbol.for("react.portal"),xA=Symbol.for("react.fragment"),eb=Symbol.for("react.strict_mode"),ex=Symbol.for("react.profiler"),bB=Symbol.for("react.provider"),wB=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),tx=Symbol.for("react.suspense"),rx=Symbol.for("react.suspense_list"),rb=Symbol.for("react.memo"),ro=Symbol.for("react.lazy"),vB=Symbol.for("react.offscreen"),Bv=Symbol.iterator;function $c(t){return t===null||typeof t!="object"?null:(t=Bv&&t[Bv]||t["@@iterator"],typeof t=="function"?t:null)}var Er=Object.assign,vp;function id(t){if(vp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);vp=e&&e[1]||""}return`
`+vp+t}var kp=!1;function Bp(t,e){if(!t||kp)return"";kp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var A=`
`+a[o].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=o&&0<=l);break}}}finally{kp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?id(t):""}function US(t){switch(t.tag){case 5:return id(t.type);case 16:return id("Lazy");case 13:return id("Suspense");case 19:return id("SuspenseList");case 0:case 2:case 15:return t=Bp(t.type,!1),t;case 11:return t=Bp(t.type.render,!1),t;case 1:return t=Bp(t.type,!0),t;default:return""}}function nx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xA:return"Fragment";case mA:return"Portal";case ex:return"Profiler";case eb:return"StrictMode";case tx:return"Suspense";case rx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wB:return(t.displayName||"Context")+".Consumer";case bB:return(t._context.displayName||"Context")+".Provider";case tb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rb:return e=t.displayName||null,e!==null?e:nx(t.type)||"Memo";case ro:e=t._payload,t=t._init;try{return nx(t(e))}catch{}}return null}function LS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nx(e);case 8:return e===eb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Eo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kB(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QS(t){var e=kB(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yh(t){t._valueTracker||(t._valueTracker=QS(t))}function BB(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=kB(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function J0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ax(t,e){var r=e.checked;return Er({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Cv(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Eo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CB(t,e){e=e.checked,e!=null&&Zy(t,"checked",e,!1)}function sx(t,e){CB(t,e);var r=Eo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ix(t,e.type,r):e.hasOwnProperty("defaultValue")&&ix(t,e.type,Eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jv(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ix(t,e,r){(e!=="number"||J0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var od=Array.isArray;function FA(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Eo(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function ox(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return Er({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nv(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ze(92));if(od(r)){if(1<r.length)throw Error(Ze(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Eo(r)}}function jB(t,e){var r=Eo(e.value),n=Eo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function _v(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NB(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NB(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bh,_B=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bh=bh||document.createElement("div"),bh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Md(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IS=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(t){IS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xd[e]=xd[t]})});function SB(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||xd.hasOwnProperty(t)&&xd[t]?(""+e).trim():e+"px"}function EB(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=SB(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var PS=Er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ax(t,e){if(e){if(PS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ze(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ze(62))}}function cx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dx=null;function nb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ux=null,UA=null,LA=null;function Sv(t){if(t=vu(t)){if(typeof ux!="function")throw Error(Ze(280));var e=t.stateNode;e&&(e=eg(e),ux(t.stateNode,t.type,e))}}function FB(t){UA?LA?LA.push(t):LA=[t]:UA=t}function UB(){if(UA){var t=UA,e=LA;if(LA=UA=null,Sv(t),e)for(t=0;t<e.length;t++)Sv(e[t])}}function LB(t,e){return t(e)}function QB(){}var Cp=!1;function IB(t,e,r){if(Cp)return t(e,r);Cp=!0;try{return LB(t,e,r)}finally{Cp=!1,(UA!==null||LA!==null)&&(QB(),UB())}}function Hd(t,e){var r=t.stateNode;if(r===null)return null;var n=eg(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ze(231,e,typeof r));return r}var hx=!1;if(ki)try{var Gc={};Object.defineProperty(Gc,"passive",{get:function(){hx=!0}}),window.addEventListener("test",Gc,Gc),window.removeEventListener("test",Gc,Gc)}catch{hx=!1}function TS(t,e,r,n,a,i,o,l,A){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var yd=!1,Y0=null,X0=!1,fx=null,DS={onError:function(t){yd=!0,Y0=t}};function zS(t,e,r,n,a,i,o,l,A){yd=!1,Y0=null,TS.apply(DS,arguments)}function OS(t,e,r,n,a,i,o,l,A){if(zS.apply(this,arguments),yd){if(yd){var c=Y0;yd=!1,Y0=null}else throw Error(Ze(198));X0||(X0=!0,fx=c)}}function Pl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function PB(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ev(t){if(Pl(t)!==t)throw Error(Ze(188))}function RS(t){var e=t.alternate;if(!e){if(e=Pl(t),e===null)throw Error(Ze(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Ev(a),t;if(i===n)return Ev(a),e;i=i.sibling}throw Error(Ze(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(Ze(189))}}if(r.alternate!==n)throw Error(Ze(190))}if(r.tag!==3)throw Error(Ze(188));return r.stateNode.current===r?t:e}function TB(t){return t=RS(t),t!==null?DB(t):null}function DB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=DB(t);if(e!==null)return e;t=t.sibling}return null}var zB=Qa.unstable_scheduleCallback,Fv=Qa.unstable_cancelCallback,MS=Qa.unstable_shouldYield,HS=Qa.unstable_requestPaint,Mr=Qa.unstable_now,KS=Qa.unstable_getCurrentPriorityLevel,ab=Qa.unstable_ImmediatePriority,OB=Qa.unstable_UserBlockingPriority,Z0=Qa.unstable_NormalPriority,$S=Qa.unstable_LowPriority,RB=Qa.unstable_IdlePriority,Jf=null,zs=null;function GS(t){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Jf,t,void 0,(t.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:qS,VS=Math.log,WS=Math.LN2;function qS(t){return t>>>=0,t===0?32:31-(VS(t)/WS|0)|0}var wh=64,vh=4194304;function ld(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ef(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=ld(l):(i&=o,i!==0&&(n=ld(i)))}else o=r&~a,o!==0?n=ld(o):i!==0&&(n=ld(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ms(e),a=1<<r,n|=t[r],e&=~a;return n}function JS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ms(i),l=1<<o,A=a[o];A===-1?(!(l&r)||l&n)&&(a[o]=JS(l,e)):A<=e&&(t.expiredLanes|=l),i&=~l}}function gx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function MB(){var t=wh;return wh<<=1,!(wh&4194240)&&(wh=64),t}function jp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function bu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ms(e),t[e]=r}function XS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-ms(r),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function sb(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ms(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var lr=0;function HB(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var KB,ib,$B,GB,VB,px=!1,kh=[],xo=null,yo=null,bo=null,Kd=new Map,$d=new Map,io=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uv(t,e){switch(t){case"focusin":case"focusout":xo=null;break;case"dragenter":case"dragleave":yo=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":Kd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(e.pointerId)}}function Vc(t,e,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=vu(e),e!==null&&ib(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function eE(t,e,r,n,a){switch(e){case"focusin":return xo=Vc(xo,t,e,r,n,a),!0;case"dragenter":return yo=Vc(yo,t,e,r,n,a),!0;case"mouseover":return bo=Vc(bo,t,e,r,n,a),!0;case"pointerover":var i=a.pointerId;return Kd.set(i,Vc(Kd.get(i)||null,t,e,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,$d.set(i,Vc($d.get(i)||null,t,e,r,n,a)),!0}return!1}function WB(t){var e=pl(t.target);if(e!==null){var r=Pl(e);if(r!==null){if(e=r.tag,e===13){if(e=PB(r),e!==null){t.blockedOn=e,VB(t.priority,function(){$B(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function S0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=mx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);dx=n,r.target.dispatchEvent(n),dx=null}else return e=vu(r),e!==null&&ib(e),t.blockedOn=r,!1;e.shift()}return!0}function Lv(t,e,r){S0(t)&&r.delete(e)}function tE(){px=!1,xo!==null&&S0(xo)&&(xo=null),yo!==null&&S0(yo)&&(yo=null),bo!==null&&S0(bo)&&(bo=null),Kd.forEach(Lv),$d.forEach(Lv)}function Wc(t,e){t.blockedOn===e&&(t.blockedOn=null,px||(px=!0,Qa.unstable_scheduleCallback(Qa.unstable_NormalPriority,tE)))}function Gd(t){function e(a){return Wc(a,t)}if(0<kh.length){Wc(kh[0],t);for(var r=1;r<kh.length;r++){var n=kh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(xo!==null&&Wc(xo,t),yo!==null&&Wc(yo,t),bo!==null&&Wc(bo,t),Kd.forEach(e),$d.forEach(e),r=0;r<io.length;r++)n=io[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<io.length&&(r=io[0],r.blockedOn===null);)WB(r),r.blockedOn===null&&io.shift()}var QA=Si.ReactCurrentBatchConfig,tf=!0;function rE(t,e,r,n){var a=lr,i=QA.transition;QA.transition=null;try{lr=1,ob(t,e,r,n)}finally{lr=a,QA.transition=i}}function nE(t,e,r,n){var a=lr,i=QA.transition;QA.transition=null;try{lr=4,ob(t,e,r,n)}finally{lr=a,QA.transition=i}}function ob(t,e,r,n){if(tf){var a=mx(t,e,r,n);if(a===null)Pp(t,e,n,rf,r),Uv(t,n);else if(eE(a,t,e,r,n))n.stopPropagation();else if(Uv(t,n),e&4&&-1<ZS.indexOf(t)){for(;a!==null;){var i=vu(a);if(i!==null&&KB(i),i=mx(t,e,r,n),i===null&&Pp(t,e,n,rf,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Pp(t,e,n,null,r)}}var rf=null;function mx(t,e,r,n){if(rf=null,t=nb(n),t=pl(t),t!==null)if(e=Pl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=PB(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rf=t,null}function qB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KS()){case ab:return 1;case OB:return 4;case Z0:case $S:return 16;case RB:return 536870912;default:return 16}default:return 16}}var co=null,lb=null,E0=null;function JB(){if(E0)return E0;var t,e=lb,r=e.length,n,a="value"in co?co.value:co.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[i-n];n++);return E0=a.slice(t,1<n?1-n:void 0)}function F0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bh(){return!0}function Qv(){return!1}function Pa(t){function e(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bh:Qv,this.isPropagationStopped=Qv,this}return Er(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bh)},persist:function(){},isPersistent:Bh}),e}var rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ab=Pa(rc),wu=Er({},rc,{view:0,detail:0}),aE=Pa(wu),Np,_p,qc,Yf=Er({},wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qc&&(qc&&t.type==="mousemove"?(Np=t.screenX-qc.screenX,_p=t.screenY-qc.screenY):_p=Np=0,qc=t),Np)},movementY:function(t){return"movementY"in t?t.movementY:_p}}),Iv=Pa(Yf),sE=Er({},Yf,{dataTransfer:0}),iE=Pa(sE),oE=Er({},wu,{relatedTarget:0}),Sp=Pa(oE),lE=Er({},rc,{animationName:0,elapsedTime:0,pseudoElement:0}),AE=Pa(lE),cE=Er({},rc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dE=Pa(cE),uE=Er({},rc,{data:0}),Pv=Pa(uE),hE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gE[t])?!!e[t]:!1}function cb(){return pE}var mE=Er({},wu,{key:function(t){if(t.key){var e=hE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=F0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cb,charCode:function(t){return t.type==="keypress"?F0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?F0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xE=Pa(mE),yE=Er({},Yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tv=Pa(yE),bE=Er({},wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cb}),wE=Pa(bE),vE=Er({},rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),kE=Pa(vE),BE=Er({},Yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CE=Pa(BE),jE=[9,13,27,32],db=ki&&"CompositionEvent"in window,bd=null;ki&&"documentMode"in document&&(bd=document.documentMode);var NE=ki&&"TextEvent"in window&&!bd,YB=ki&&(!db||bd&&8<bd&&11>=bd),Dv=" ",zv=!1;function XB(t,e){switch(t){case"keyup":return jE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yA=!1;function _E(t,e){switch(t){case"compositionend":return ZB(e);case"keypress":return e.which!==32?null:(zv=!0,Dv);case"textInput":return t=e.data,t===Dv&&zv?null:t;default:return null}}function SE(t,e){if(yA)return t==="compositionend"||!db&&XB(t,e)?(t=JB(),E0=lb=co=null,yA=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YB&&e.locale!=="ko"?null:e.data;default:return null}}var EE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!EE[t.type]:e==="textarea"}function e4(t,e,r,n){FB(n),e=nf(e,"onChange"),0<e.length&&(r=new Ab("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var wd=null,Vd=null;function FE(t){d4(t,0)}function Xf(t){var e=vA(t);if(BB(e))return t}function UE(t,e){if(t==="change")return e}var t4=!1;if(ki){var Ep;if(ki){var Fp="oninput"in document;if(!Fp){var Rv=document.createElement("div");Rv.setAttribute("oninput","return;"),Fp=typeof Rv.oninput=="function"}Ep=Fp}else Ep=!1;t4=Ep&&(!document.documentMode||9<document.documentMode)}function Mv(){wd&&(wd.detachEvent("onpropertychange",r4),Vd=wd=null)}function r4(t){if(t.propertyName==="value"&&Xf(Vd)){var e=[];e4(e,Vd,t,nb(t)),IB(FE,e)}}function LE(t,e,r){t==="focusin"?(Mv(),wd=e,Vd=r,wd.attachEvent("onpropertychange",r4)):t==="focusout"&&Mv()}function QE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xf(Vd)}function IE(t,e){if(t==="click")return Xf(e)}function PE(t,e){if(t==="input"||t==="change")return Xf(e)}function TE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ys=typeof Object.is=="function"?Object.is:TE;function Wd(t,e){if(ys(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Zm.call(e,a)||!ys(t[a],e[a]))return!1}return!0}function Hv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kv(t,e){var r=Hv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hv(r)}}function n4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a4(){for(var t=window,e=J0();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=J0(t.document)}return e}function ub(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DE(t){var e=a4(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&n4(r.ownerDocument.documentElement,r)){if(n!==null&&ub(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=Kv(r,i);var o=Kv(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zE=ki&&"documentMode"in document&&11>=document.documentMode,bA=null,xx=null,vd=null,yx=!1;function $v(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yx||bA==null||bA!==J0(n)||(n=bA,"selectionStart"in n&&ub(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),vd&&Wd(vd,n)||(vd=n,n=nf(xx,"onSelect"),0<n.length&&(e=new Ab("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=bA)))}function Ch(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wA={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionend:Ch("Transition","TransitionEnd")},Up={},s4={};ki&&(s4=document.createElement("div").style,"AnimationEvent"in window||(delete wA.animationend.animation,delete wA.animationiteration.animation,delete wA.animationstart.animation),"TransitionEvent"in window||delete wA.transitionend.transition);function Zf(t){if(Up[t])return Up[t];if(!wA[t])return t;var e=wA[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in s4)return Up[t]=e[r];return t}var i4=Zf("animationend"),o4=Zf("animationiteration"),l4=Zf("animationstart"),A4=Zf("transitionend"),c4=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(t,e){c4.set(t,e),Il(e,[t])}for(var Lp=0;Lp<Gv.length;Lp++){var Qp=Gv[Lp],OE=Qp.toLowerCase(),RE=Qp[0].toUpperCase()+Qp.slice(1);To(OE,"on"+RE)}To(i4,"onAnimationEnd");To(o4,"onAnimationIteration");To(l4,"onAnimationStart");To("dblclick","onDoubleClick");To("focusin","onFocus");To("focusout","onBlur");To(A4,"onTransitionEnd");KA("onMouseEnter",["mouseout","mouseover"]);KA("onMouseLeave",["mouseout","mouseover"]);KA("onPointerEnter",["pointerout","pointerover"]);KA("onPointerLeave",["pointerout","pointerover"]);Il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Il("onBeforeInput",["compositionend","keypress","textInput","paste"]);Il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ME=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ad));function Vv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,OS(n,e,void 0,t),t.currentTarget=null}function d4(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],A=l.instance,c=l.currentTarget;if(l=l.listener,A!==i&&a.isPropagationStopped())break e;Vv(a,l,c),i=A}else for(o=0;o<n.length;o++){if(l=n[o],A=l.instance,c=l.currentTarget,l=l.listener,A!==i&&a.isPropagationStopped())break e;Vv(a,l,c),i=A}}}if(X0)throw t=fx,X0=!1,fx=null,t}function br(t,e){var r=e[Bx];r===void 0&&(r=e[Bx]=new Set);var n=t+"__bubble";r.has(n)||(u4(e,t,2,!1),r.add(n))}function Ip(t,e,r){var n=0;e&&(n|=4),u4(r,t,n,e)}var jh="_reactListening"+Math.random().toString(36).slice(2);function qd(t){if(!t[jh]){t[jh]=!0,yB.forEach(function(r){r!=="selectionchange"&&(ME.has(r)||Ip(r,!1,t),Ip(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jh]||(e[jh]=!0,Ip("selectionchange",!1,e))}}function u4(t,e,r,n){switch(qB(e)){case 1:var a=rE;break;case 4:a=nE;break;default:a=ob}r=a.bind(null,e,r,t),a=void 0,!hx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Pp(t,e,r,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var A=o.tag;if((A===3||A===4)&&(A=o.stateNode.containerInfo,A===a||A.nodeType===8&&A.parentNode===a))return;o=o.return}for(;l!==null;){if(o=pl(l),o===null)return;if(A=o.tag,A===5||A===6){n=i=o;continue e}l=l.parentNode}}n=n.return}IB(function(){var c=i,d=nb(r),h=[];e:{var p=c4.get(t);if(p!==void 0){var u=Ab,y=t;switch(t){case"keypress":if(F0(r)===0)break e;case"keydown":case"keyup":u=xE;break;case"focusin":y="focus",u=Sp;break;case"focusout":y="blur",u=Sp;break;case"beforeblur":case"afterblur":u=Sp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=Iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=iE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=wE;break;case i4:case o4:case l4:u=AE;break;case A4:u=kE;break;case"scroll":u=aE;break;case"wheel":u=CE;break;case"copy":case"cut":case"paste":u=dE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tv}var b=(e&4)!==0,v=!b&&t==="scroll",g=b?p!==null?p+"Capture":null:p;b=[];for(var m=c,w;m!==null;){w=m;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,g!==null&&(k=Hd(m,g),k!=null&&b.push(Jd(m,k,w)))),v)break;m=m.return}0<b.length&&(p=new u(p,y,null,r,d),h.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",u=t==="mouseout"||t==="pointerout",p&&r!==dx&&(y=r.relatedTarget||r.fromElement)&&(pl(y)||y[Bi]))break e;if((u||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,u?(y=r.relatedTarget||r.toElement,u=c,y=y?pl(y):null,y!==null&&(v=Pl(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(u=null,y=c),u!==y)){if(b=Iv,k="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=Tv,k="onPointerLeave",g="onPointerEnter",m="pointer"),v=u==null?p:vA(u),w=y==null?p:vA(y),p=new b(k,m+"leave",u,r,d),p.target=v,p.relatedTarget=w,k=null,pl(d)===c&&(b=new b(g,m+"enter",y,r,d),b.target=w,b.relatedTarget=v,k=b),v=k,u&&y)t:{for(b=u,g=y,m=0,w=b;w;w=ql(w))m++;for(w=0,k=g;k;k=ql(k))w++;for(;0<m-w;)b=ql(b),m--;for(;0<w-m;)g=ql(g),w--;for(;m--;){if(b===g||g!==null&&b===g.alternate)break t;b=ql(b),g=ql(g)}b=null}else b=null;u!==null&&Wv(h,p,u,b,!1),y!==null&&v!==null&&Wv(h,v,y,b,!0)}}e:{if(p=c?vA(c):window,u=p.nodeName&&p.nodeName.toLowerCase(),u==="select"||u==="input"&&p.type==="file")var N=UE;else if(Ov(p))if(t4)N=PE;else{N=QE;var S=LE}else(u=p.nodeName)&&u.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=IE);if(N&&(N=N(t,c))){e4(h,N,r,d);break e}S&&S(t,p,c),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&ix(p,"number",p.value)}switch(S=c?vA(c):window,t){case"focusin":(Ov(S)||S.contentEditable==="true")&&(bA=S,xx=c,vd=null);break;case"focusout":vd=xx=bA=null;break;case"mousedown":yx=!0;break;case"contextmenu":case"mouseup":case"dragend":yx=!1,$v(h,r,d);break;case"selectionchange":if(zE)break;case"keydown":case"keyup":$v(h,r,d)}var U;if(db)e:{switch(t){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else yA?XB(t,r)&&(Q="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Q="onCompositionStart");Q&&(YB&&r.locale!=="ko"&&(yA||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&yA&&(U=JB()):(co=d,lb="value"in co?co.value:co.textContent,yA=!0)),S=nf(c,Q),0<S.length&&(Q=new Pv(Q,t,null,r,d),h.push({event:Q,listeners:S}),U?Q.data=U:(U=ZB(r),U!==null&&(Q.data=U)))),(U=NE?_E(t,r):SE(t,r))&&(c=nf(c,"onBeforeInput"),0<c.length&&(d=new Pv("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=U))}d4(h,e)})}function Jd(t,e,r){return{instance:t,listener:e,currentTarget:r}}function nf(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Hd(t,r),i!=null&&n.unshift(Jd(t,i,a)),i=Hd(t,e),i!=null&&n.push(Jd(t,i,a))),t=t.return}return n}function ql(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wv(t,e,r,n,a){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,A=l.alternate,c=l.stateNode;if(A!==null&&A===n)break;l.tag===5&&c!==null&&(l=c,a?(A=Hd(r,i),A!=null&&o.unshift(Jd(r,A,l))):a||(A=Hd(r,i),A!=null&&o.push(Jd(r,A,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var HE=/\r\n?/g,KE=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace(HE,`
`).replace(KE,"")}function Nh(t,e,r){if(e=qv(e),qv(t)!==e&&r)throw Error(Ze(425))}function af(){}var bx=null,wx=null;function vx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kx=typeof setTimeout=="function"?setTimeout:void 0,$E=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,GE=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(t){return Jv.resolve(null).then(t).catch(VE)}:kx;function VE(t){setTimeout(function(){throw t})}function Tp(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Gd(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Gd(e)}function wo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var nc=Math.random().toString(36).slice(2),Ts="__reactFiber$"+nc,Yd="__reactProps$"+nc,Bi="__reactContainer$"+nc,Bx="__reactEvents$"+nc,WE="__reactListeners$"+nc,qE="__reactHandles$"+nc;function pl(t){var e=t[Ts];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Bi]||r[Ts]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Yv(t);t!==null;){if(r=t[Ts])return r;t=Yv(t)}return e}t=r,r=t.parentNode}return null}function vu(t){return t=t[Ts]||t[Bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vA(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ze(33))}function eg(t){return t[Yd]||null}var Cx=[],kA=-1;function Do(t){return{current:t}}function vr(t){0>kA||(t.current=Cx[kA],Cx[kA]=null,kA--)}function xr(t,e){kA++,Cx[kA]=t.current,t.current=e}var Fo={},Gn=Do(Fo),ca=Do(!1),_l=Fo;function $A(t,e){var r=t.type.contextTypes;if(!r)return Fo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function da(t){return t=t.childContextTypes,t!=null}function sf(){vr(ca),vr(Gn)}function Xv(t,e,r){if(Gn.current!==Fo)throw Error(Ze(168));xr(Gn,e),xr(ca,r)}function h4(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(Ze(108,LS(t)||"Unknown",a));return Er({},r,n)}function of(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fo,_l=Gn.current,xr(Gn,t),xr(ca,ca.current),!0}function Zv(t,e,r){var n=t.stateNode;if(!n)throw Error(Ze(169));r?(t=h4(t,e,_l),n.__reactInternalMemoizedMergedChildContext=t,vr(ca),vr(Gn),xr(Gn,t)):vr(ca),xr(ca,r)}var mi=null,tg=!1,Dp=!1;function f4(t){mi===null?mi=[t]:mi.push(t)}function JE(t){tg=!0,f4(t)}function zo(){if(!Dp&&mi!==null){Dp=!0;var t=0,e=lr;try{var r=mi;for(lr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}mi=null,tg=!1}catch(a){throw mi!==null&&(mi=mi.slice(t+1)),zB(ab,zo),a}finally{lr=e,Dp=!1}}return null}var BA=[],CA=0,lf=null,Af=0,Va=[],Wa=0,Sl=null,yi=1,bi="";function ol(t,e){BA[CA++]=Af,BA[CA++]=lf,lf=t,Af=e}function g4(t,e,r){Va[Wa++]=yi,Va[Wa++]=bi,Va[Wa++]=Sl,Sl=t;var n=yi;t=bi;var a=32-ms(n)-1;n&=~(1<<a),r+=1;var i=32-ms(e)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,yi=1<<32-ms(e)+a|r<<a|n,bi=i+t}else yi=1<<i|r<<a|n,bi=t}function hb(t){t.return!==null&&(ol(t,1),g4(t,1,0))}function fb(t){for(;t===lf;)lf=BA[--CA],BA[CA]=null,Af=BA[--CA],BA[CA]=null;for(;t===Sl;)Sl=Va[--Wa],Va[Wa]=null,bi=Va[--Wa],Va[Wa]=null,yi=Va[--Wa],Va[Wa]=null}var La=null,Fa=null,Cr=!1,ps=null;function p4(t,e){var r=Ja(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function e1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,La=t,Fa=wo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,La=t,Fa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Sl!==null?{id:yi,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ja(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,La=t,Fa=null,!0):!1;default:return!1}}function jx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nx(t){if(Cr){var e=Fa;if(e){var r=e;if(!e1(t,e)){if(jx(t))throw Error(Ze(418));e=wo(r.nextSibling);var n=La;e&&e1(t,e)?p4(n,r):(t.flags=t.flags&-4097|2,Cr=!1,La=t)}}else{if(jx(t))throw Error(Ze(418));t.flags=t.flags&-4097|2,Cr=!1,La=t}}}function t1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;La=t}function _h(t){if(t!==La)return!1;if(!Cr)return t1(t),Cr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vx(t.type,t.memoizedProps)),e&&(e=Fa)){if(jx(t))throw m4(),Error(Ze(418));for(;e;)p4(t,e),e=wo(e.nextSibling)}if(t1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ze(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Fa=wo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Fa=null}}else Fa=La?wo(t.stateNode.nextSibling):null;return!0}function m4(){for(var t=Fa;t;)t=wo(t.nextSibling)}function GA(){Fa=La=null,Cr=!1}function gb(t){ps===null?ps=[t]:ps.push(t)}var YE=Si.ReactCurrentBatchConfig;function Jc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ze(309));var n=r.stateNode}if(!n)throw Error(Ze(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ze(284));if(!r._owner)throw Error(Ze(290,t))}return t}function Sh(t,e){throw t=Object.prototype.toString.call(e),Error(Ze(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r1(t){var e=t._init;return e(t._payload)}function x4(t){function e(g,m){if(t){var w=g.deletions;w===null?(g.deletions=[m],g.flags|=16):w.push(m)}}function r(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function a(g,m){return g=Co(g,m),g.index=0,g.sibling=null,g}function i(g,m,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<m?(g.flags|=2,m):w):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,m,w,k){return m===null||m.tag!==6?(m=$p(w,g.mode,k),m.return=g,m):(m=a(m,w),m.return=g,m)}function A(g,m,w,k){var N=w.type;return N===xA?d(g,m,w.props.children,k,w.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ro&&r1(N)===m.type)?(k=a(m,w.props),k.ref=Jc(g,m,w),k.return=g,k):(k=D0(w.type,w.key,w.props,null,g.mode,k),k.ref=Jc(g,m,w),k.return=g,k)}function c(g,m,w,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=Gp(w,g.mode,k),m.return=g,m):(m=a(m,w.children||[]),m.return=g,m)}function d(g,m,w,k,N){return m===null||m.tag!==7?(m=vl(w,g.mode,k,N),m.return=g,m):(m=a(m,w),m.return=g,m)}function h(g,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=$p(""+m,g.mode,w),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case xh:return w=D0(m.type,m.key,m.props,null,g.mode,w),w.ref=Jc(g,null,m),w.return=g,w;case mA:return m=Gp(m,g.mode,w),m.return=g,m;case ro:var k=m._init;return h(g,k(m._payload),w)}if(od(m)||$c(m))return m=vl(m,g.mode,w,null),m.return=g,m;Sh(g,m)}return null}function p(g,m,w,k){var N=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(g,m,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xh:return w.key===N?A(g,m,w,k):null;case mA:return w.key===N?c(g,m,w,k):null;case ro:return N=w._init,p(g,m,N(w._payload),k)}if(od(w)||$c(w))return N!==null?null:d(g,m,w,k,null);Sh(g,w)}return null}function u(g,m,w,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(w)||null,l(m,g,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case xh:return g=g.get(k.key===null?w:k.key)||null,A(m,g,k,N);case mA:return g=g.get(k.key===null?w:k.key)||null,c(m,g,k,N);case ro:var S=k._init;return u(g,m,w,S(k._payload),N)}if(od(k)||$c(k))return g=g.get(w)||null,d(m,g,k,N,null);Sh(m,k)}return null}function y(g,m,w,k){for(var N=null,S=null,U=m,Q=m=0,L=null;U!==null&&Q<w.length;Q++){U.index>Q?(L=U,U=null):L=U.sibling;var V=p(g,U,w[Q],k);if(V===null){U===null&&(U=L);break}t&&U&&V.alternate===null&&e(g,U),m=i(V,m,Q),S===null?N=V:S.sibling=V,S=V,U=L}if(Q===w.length)return r(g,U),Cr&&ol(g,Q),N;if(U===null){for(;Q<w.length;Q++)U=h(g,w[Q],k),U!==null&&(m=i(U,m,Q),S===null?N=U:S.sibling=U,S=U);return Cr&&ol(g,Q),N}for(U=n(g,U);Q<w.length;Q++)L=u(U,g,Q,w[Q],k),L!==null&&(t&&L.alternate!==null&&U.delete(L.key===null?Q:L.key),m=i(L,m,Q),S===null?N=L:S.sibling=L,S=L);return t&&U.forEach(function(F){return e(g,F)}),Cr&&ol(g,Q),N}function b(g,m,w,k){var N=$c(w);if(typeof N!="function")throw Error(Ze(150));if(w=N.call(w),w==null)throw Error(Ze(151));for(var S=N=null,U=m,Q=m=0,L=null,V=w.next();U!==null&&!V.done;Q++,V=w.next()){U.index>Q?(L=U,U=null):L=U.sibling;var F=p(g,U,V.value,k);if(F===null){U===null&&(U=L);break}t&&U&&F.alternate===null&&e(g,U),m=i(F,m,Q),S===null?N=F:S.sibling=F,S=F,U=L}if(V.done)return r(g,U),Cr&&ol(g,Q),N;if(U===null){for(;!V.done;Q++,V=w.next())V=h(g,V.value,k),V!==null&&(m=i(V,m,Q),S===null?N=V:S.sibling=V,S=V);return Cr&&ol(g,Q),N}for(U=n(g,U);!V.done;Q++,V=w.next())V=u(U,g,Q,V.value,k),V!==null&&(t&&V.alternate!==null&&U.delete(V.key===null?Q:V.key),m=i(V,m,Q),S===null?N=V:S.sibling=V,S=V);return t&&U.forEach(function(D){return e(g,D)}),Cr&&ol(g,Q),N}function v(g,m,w,k){if(typeof w=="object"&&w!==null&&w.type===xA&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case xh:e:{for(var N=w.key,S=m;S!==null;){if(S.key===N){if(N=w.type,N===xA){if(S.tag===7){r(g,S.sibling),m=a(S,w.props.children),m.return=g,g=m;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ro&&r1(N)===S.type){r(g,S.sibling),m=a(S,w.props),m.ref=Jc(g,S,w),m.return=g,g=m;break e}r(g,S);break}else e(g,S);S=S.sibling}w.type===xA?(m=vl(w.props.children,g.mode,k,w.key),m.return=g,g=m):(k=D0(w.type,w.key,w.props,null,g.mode,k),k.ref=Jc(g,m,w),k.return=g,g=k)}return o(g);case mA:e:{for(S=w.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){r(g,m.sibling),m=a(m,w.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else e(g,m);m=m.sibling}m=Gp(w,g.mode,k),m.return=g,g=m}return o(g);case ro:return S=w._init,v(g,m,S(w._payload),k)}if(od(w))return y(g,m,w,k);if($c(w))return b(g,m,w,k);Sh(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(r(g,m.sibling),m=a(m,w),m.return=g,g=m):(r(g,m),m=$p(w,g.mode,k),m.return=g,g=m),o(g)):r(g,m)}return v}var VA=x4(!0),y4=x4(!1),cf=Do(null),df=null,jA=null,pb=null;function mb(){pb=jA=df=null}function xb(t){var e=cf.current;vr(cf),t._currentValue=e}function _x(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function IA(t,e){df=t,pb=jA=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Aa=!0),t.firstContext=null)}function es(t){var e=t._currentValue;if(pb!==t)if(t={context:t,memoizedValue:e,next:null},jA===null){if(df===null)throw Error(Ze(308));jA=t,df.dependencies={lanes:0,firstContext:t}}else jA=jA.next=t;return e}var ml=null;function yb(t){ml===null?ml=[t]:ml.push(t)}function b4(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,yb(e)):(r.next=a.next,a.next=r),e.interleaved=r,Ci(t,n)}function Ci(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var no=!1;function bb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vo(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Xt&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Ci(t,r)}return a=n.interleaved,a===null?(e.next=e,yb(n)):(e.next=a.next,a.next=e),n.interleaved=e,Ci(t,r)}function U0(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,sb(t,r)}}function n1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function uf(t,e,r,n){var a=t.updateQueue;no=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var A=l,c=A.next;A.next=null,o===null?i=c:o.next=c,o=A;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=A))}if(i!==null){var h=a.baseState;o=0,d=c=A=null,l=i;do{var p=l.lane,u=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:u,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(p=e,u=r,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(u,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,p=typeof y=="function"?y.call(u,h,p):y,p==null)break e;h=Er({},h,p);break e;case 2:no=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else u={eventTime:u,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=u,A=h):d=d.next=u,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(d===null&&(A=h),a.baseState=A,a.firstBaseUpdate=c,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Fl|=o,t.lanes=o,t.memoizedState=h}}function a1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Ze(191,a));a.call(n)}}}var ku={},Os=Do(ku),Xd=Do(ku),Zd=Do(ku);function xl(t){if(t===ku)throw Error(Ze(174));return t}function wb(t,e){switch(xr(Zd,e),xr(Xd,t),xr(Os,ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lx(e,t)}vr(Os),xr(Os,e)}function WA(){vr(Os),vr(Xd),vr(Zd)}function v4(t){xl(Zd.current);var e=xl(Os.current),r=lx(e,t.type);e!==r&&(xr(Xd,t),xr(Os,r))}function vb(t){Xd.current===t&&(vr(Os),vr(Xd))}var _r=Do(0);function hf(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zp=[];function kb(){for(var t=0;t<zp.length;t++)zp[t]._workInProgressVersionPrimary=null;zp.length=0}var L0=Si.ReactCurrentDispatcher,Op=Si.ReactCurrentBatchConfig,El=0,Sr=null,cn=null,gn=null,ff=!1,kd=!1,eu=0,XE=0;function Pn(){throw Error(Ze(321))}function Bb(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ys(t[r],e[r]))return!1;return!0}function Cb(t,e,r,n,a,i){if(El=i,Sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,L0.current=t===null||t.memoizedState===null?r6:n6,t=r(n,a),kd){i=0;do{if(kd=!1,eu=0,25<=i)throw Error(Ze(301));i+=1,gn=cn=null,e.updateQueue=null,L0.current=a6,t=r(n,a)}while(kd)}if(L0.current=gf,e=cn!==null&&cn.next!==null,El=0,gn=cn=Sr=null,ff=!1,e)throw Error(Ze(300));return t}function jb(){var t=eu!==0;return eu=0,t}function Ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Sr.memoizedState=gn=t:gn=gn.next=t,gn}function ts(){if(cn===null){var t=Sr.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var e=gn===null?Sr.memoizedState:gn.next;if(e!==null)gn=e,cn=t;else{if(t===null)throw Error(Ze(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},gn===null?Sr.memoizedState=gn=t:gn=gn.next=t}return gn}function tu(t,e){return typeof e=="function"?e(t):e}function Rp(t){var e=ts(),r=e.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=t;var n=cn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,A=null,c=i;do{var d=c.lane;if((El&d)===d)A!==null&&(A=A.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};A===null?(l=A=h,o=n):A=A.next=h,Sr.lanes|=d,Fl|=d}c=c.next}while(c!==null&&c!==i);A===null?o=n:A.next=l,ys(n,e.memoizedState)||(Aa=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,Sr.lanes|=i,Fl|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Mp(t){var e=ts(),r=e.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);ys(i,e.memoizedState)||(Aa=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function k4(){}function B4(t,e){var r=Sr,n=ts(),a=e(),i=!ys(n.memoizedState,a);if(i&&(n.memoizedState=a,Aa=!0),n=n.queue,Nb(N4.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||gn!==null&&gn.memoizedState.tag&1){if(r.flags|=2048,ru(9,j4.bind(null,r,n,a,e),void 0,null),yn===null)throw Error(Ze(349));El&30||C4(r,e,a)}return a}function C4(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Sr.updateQueue,e===null?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function j4(t,e,r,n){e.value=r,e.getSnapshot=n,_4(e)&&S4(t)}function N4(t,e,r){return r(function(){_4(e)&&S4(t)})}function _4(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ys(t,r)}catch{return!0}}function S4(t){var e=Ci(t,1);e!==null&&xs(e,t,1,-1)}function s1(t){var e=Ps();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:t},e.queue=t,t=t.dispatch=t6.bind(null,Sr,t),[e.memoizedState,t]}function ru(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Sr.updateQueue,e===null?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function E4(){return ts().memoizedState}function Q0(t,e,r,n){var a=Ps();Sr.flags|=t,a.memoizedState=ru(1|e,r,void 0,n===void 0?null:n)}function rg(t,e,r,n){var a=ts();n=n===void 0?null:n;var i=void 0;if(cn!==null){var o=cn.memoizedState;if(i=o.destroy,n!==null&&Bb(n,o.deps)){a.memoizedState=ru(e,r,i,n);return}}Sr.flags|=t,a.memoizedState=ru(1|e,r,i,n)}function i1(t,e){return Q0(8390656,8,t,e)}function Nb(t,e){return rg(2048,8,t,e)}function F4(t,e){return rg(4,2,t,e)}function U4(t,e){return rg(4,4,t,e)}function L4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Q4(t,e,r){return r=r!=null?r.concat([t]):null,rg(4,4,L4.bind(null,e,t),r)}function _b(){}function I4(t,e){var r=ts();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Bb(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function P4(t,e){var r=ts();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Bb(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function T4(t,e,r){return El&21?(ys(r,e)||(r=MB(),Sr.lanes|=r,Fl|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Aa=!0),t.memoizedState=r)}function ZE(t,e){var r=lr;lr=r!==0&&4>r?r:4,t(!0);var n=Op.transition;Op.transition={};try{t(!1),e()}finally{lr=r,Op.transition=n}}function D4(){return ts().memoizedState}function e6(t,e,r){var n=Bo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},z4(t))O4(e,r);else if(r=b4(t,e,r,n),r!==null){var a=ea();xs(r,t,n,a),R4(r,e,n)}}function t6(t,e,r){var n=Bo(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(z4(t))O4(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,ys(l,o)){var A=e.interleaved;A===null?(a.next=a,yb(e)):(a.next=A.next,A.next=a),e.interleaved=a;return}}catch{}finally{}r=b4(t,e,a,n),r!==null&&(a=ea(),xs(r,t,n,a),R4(r,e,n))}}function z4(t){var e=t.alternate;return t===Sr||e!==null&&e===Sr}function O4(t,e){kd=ff=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function R4(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,sb(t,r)}}var gf={readContext:es,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},r6={readContext:es,useCallback:function(t,e){return Ps().memoizedState=[t,e===void 0?null:e],t},useContext:es,useEffect:i1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Q0(4194308,4,L4.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Q0(4194308,4,t,e)},useInsertionEffect:function(t,e){return Q0(4,2,t,e)},useMemo:function(t,e){var r=Ps();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ps();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=e6.bind(null,Sr,t),[n.memoizedState,t]},useRef:function(t){var e=Ps();return t={current:t},e.memoizedState=t},useState:s1,useDebugValue:_b,useDeferredValue:function(t){return Ps().memoizedState=t},useTransition:function(){var t=s1(!1),e=t[0];return t=ZE.bind(null,t[1]),Ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Sr,a=Ps();if(Cr){if(r===void 0)throw Error(Ze(407));r=r()}else{if(r=e(),yn===null)throw Error(Ze(349));El&30||C4(n,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,i1(N4.bind(null,n,i,t),[t]),n.flags|=2048,ru(9,j4.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ps(),e=yn.identifierPrefix;if(Cr){var r=bi,n=yi;r=(n&~(1<<32-ms(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=eu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=XE++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},n6={readContext:es,useCallback:I4,useContext:es,useEffect:Nb,useImperativeHandle:Q4,useInsertionEffect:F4,useLayoutEffect:U4,useMemo:P4,useReducer:Rp,useRef:E4,useState:function(){return Rp(tu)},useDebugValue:_b,useDeferredValue:function(t){var e=ts();return T4(e,cn.memoizedState,t)},useTransition:function(){var t=Rp(tu)[0],e=ts().memoizedState;return[t,e]},useMutableSource:k4,useSyncExternalStore:B4,useId:D4,unstable_isNewReconciler:!1},a6={readContext:es,useCallback:I4,useContext:es,useEffect:Nb,useImperativeHandle:Q4,useInsertionEffect:F4,useLayoutEffect:U4,useMemo:P4,useReducer:Mp,useRef:E4,useState:function(){return Mp(tu)},useDebugValue:_b,useDeferredValue:function(t){var e=ts();return cn===null?e.memoizedState=t:T4(e,cn.memoizedState,t)},useTransition:function(){var t=Mp(tu)[0],e=ts().memoizedState;return[t,e]},useMutableSource:k4,useSyncExternalStore:B4,useId:D4,unstable_isNewReconciler:!1};function us(t,e){if(t&&t.defaultProps){e=Er({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Sx(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Er({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ng={isMounted:function(t){return(t=t._reactInternals)?Pl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ea(),a=Bo(t),i=wi(n,a);i.payload=e,r!=null&&(i.callback=r),e=vo(t,i,a),e!==null&&(xs(e,t,a,n),U0(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ea(),a=Bo(t),i=wi(n,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=vo(t,i,a),e!==null&&(xs(e,t,a,n),U0(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ea(),n=Bo(t),a=wi(r,n);a.tag=2,e!=null&&(a.callback=e),e=vo(t,a,n),e!==null&&(xs(e,t,n,r),U0(e,t,n))}};function o1(t,e,r,n,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Wd(r,n)||!Wd(a,i):!0}function M4(t,e,r){var n=!1,a=Fo,i=e.contextType;return typeof i=="object"&&i!==null?i=es(i):(a=da(e)?_l:Gn.current,n=e.contextTypes,i=(n=n!=null)?$A(t,a):Fo),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ng,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function l1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ng.enqueueReplaceState(e,e.state,null)}function Ex(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},bb(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=es(i):(i=da(e)?_l:Gn.current,a.context=$A(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sx(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ng.enqueueReplaceState(a,a.state,null),uf(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function qA(t,e){try{var r="",n=e;do r+=US(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function Hp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Fx(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var s6=typeof WeakMap=="function"?WeakMap:Map;function H4(t,e,r){r=wi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){mf||(mf=!0,Rx=n),Fx(t,e)},r}function K4(t,e,r){r=wi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){Fx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Fx(t,e),typeof n!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function A1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new s6;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=y6.bind(null,t,e,r),e.then(t,t))}function c1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d1(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=wi(-1,1),e.tag=2,vo(r,e,1))),r.lanes|=1),t)}var i6=Si.ReactCurrentOwner,Aa=!1;function Xn(t,e,r,n){e.child=t===null?y4(e,null,r,n):VA(e,t.child,r,n)}function u1(t,e,r,n,a){r=r.render;var i=e.ref;return IA(e,a),n=Cb(t,e,r,n,i,a),r=jb(),t!==null&&!Aa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ji(t,e,a)):(Cr&&r&&hb(e),e.flags|=1,Xn(t,e,n,a),e.child)}function h1(t,e,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!Pb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,$4(t,e,i,n,a)):(t=D0(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Wd,r(o,n)&&t.ref===e.ref)return ji(t,e,a)}return e.flags|=1,t=Co(i,n),t.ref=e.ref,t.return=e,e.child=t}function $4(t,e,r,n,a){if(t!==null){var i=t.memoizedProps;if(Wd(i,n)&&t.ref===e.ref)if(Aa=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Aa=!0);else return e.lanes=t.lanes,ji(t,e,a)}return Ux(t,e,r,n,a)}function G4(t,e,r){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xr(_A,_a),_a|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xr(_A,_a),_a|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,xr(_A,_a),_a|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,xr(_A,_a),_a|=n;return Xn(t,e,a,r),e.child}function V4(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ux(t,e,r,n,a){var i=da(r)?_l:Gn.current;return i=$A(e,i),IA(e,a),r=Cb(t,e,r,n,i,a),n=jb(),t!==null&&!Aa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ji(t,e,a)):(Cr&&n&&hb(e),e.flags|=1,Xn(t,e,r,a),e.child)}function f1(t,e,r,n,a){if(da(r)){var i=!0;of(e)}else i=!1;if(IA(e,a),e.stateNode===null)I0(t,e),M4(e,r,n),Ex(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var A=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=es(c):(c=da(r)?_l:Gn.current,c=$A(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||A!==c)&&l1(e,o,n,c),no=!1;var p=e.memoizedState;o.state=p,uf(e,n,o,a),A=e.memoizedState,l!==n||p!==A||ca.current||no?(typeof d=="function"&&(Sx(e,r,d,n),A=e.memoizedState),(l=no||o1(e,r,l,n,p,A,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),o.props=n,o.state=A,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,w4(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:us(e.type,l),o.props=c,h=e.pendingProps,p=o.context,A=r.contextType,typeof A=="object"&&A!==null?A=es(A):(A=da(r)?_l:Gn.current,A=$A(e,A));var u=r.getDerivedStateFromProps;(d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==A)&&l1(e,o,n,A),no=!1,p=e.memoizedState,o.state=p,uf(e,n,o,a);var y=e.memoizedState;l!==h||p!==y||ca.current||no?(typeof u=="function"&&(Sx(e,r,u,n),y=e.memoizedState),(c=no||o1(e,r,c,n,p,y,A)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,A)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=A,n=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Lx(t,e,r,n,i,a)}function Lx(t,e,r,n,a,i){V4(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&Zv(e,r,!1),ji(t,e,i);n=e.stateNode,i6.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=VA(e,t.child,null,i),e.child=VA(e,null,l,i)):Xn(t,e,l,i),e.memoizedState=n.state,a&&Zv(e,r,!0),e.child}function W4(t){var e=t.stateNode;e.pendingContext?Xv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xv(t,e.context,!1),wb(t,e.containerInfo)}function g1(t,e,r,n,a){return GA(),gb(a),e.flags|=256,Xn(t,e,r,n),e.child}var Qx={dehydrated:null,treeContext:null,retryLane:0};function Ix(t){return{baseLanes:t,cachePool:null,transitions:null}}function q4(t,e,r){var n=e.pendingProps,a=_r.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),xr(_r,a&1),t===null)return Nx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ig(o,n,0,null),t=vl(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ix(r),e.memoizedState=Qx,t):Sb(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return o6(t,e,o,n,l,a,r);if(i){i=n.fallback,o=e.mode,a=t.child,l=a.sibling;var A={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=Co(a,A),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Co(l,i):(i=vl(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Ix(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Qx,n}return i=t.child,t=i.sibling,n=Co(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Sb(t,e){return e=ig({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eh(t,e,r,n){return n!==null&&gb(n),VA(e,t.child,null,r),t=Sb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function o6(t,e,r,n,a,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Hp(Error(Ze(422))),Eh(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=ig({mode:"visible",children:n.children},a,0,null),i=vl(i,a,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&VA(e,t.child,null,o),e.child.memoizedState=Ix(o),e.memoizedState=Qx,i);if(!(e.mode&1))return Eh(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Ze(419)),n=Hp(i,n,void 0),Eh(t,e,o,n)}if(l=(o&t.childLanes)!==0,Aa||l){if(n=yn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ci(t,a),xs(n,t,a,-1))}return Ib(),n=Hp(Error(Ze(421))),Eh(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=b6.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Fa=wo(a.nextSibling),La=e,Cr=!0,ps=null,t!==null&&(Va[Wa++]=yi,Va[Wa++]=bi,Va[Wa++]=Sl,yi=t.id,bi=t.overflow,Sl=e),e=Sb(e,n.children),e.flags|=4096,e)}function p1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),_x(t.return,e,r)}function Kp(t,e,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function J4(t,e,r){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Xn(t,e,n.children,r),n=_r.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p1(t,r,e);else if(t.tag===19)p1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(xr(_r,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&hf(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Kp(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&hf(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Kp(e,!0,r,null,i);break;case"together":Kp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function I0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ji(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Fl|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ze(153));if(e.child!==null){for(t=e.child,r=Co(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Co(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function l6(t,e,r){switch(e.tag){case 3:W4(e),GA();break;case 5:v4(e);break;case 1:da(e.type)&&of(e);break;case 4:wb(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;xr(cf,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(xr(_r,_r.current&1),e.flags|=128,null):r&e.child.childLanes?q4(t,e,r):(xr(_r,_r.current&1),t=ji(t,e,r),t!==null?t.sibling:null);xr(_r,_r.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return J4(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),xr(_r,_r.current),n)break;return null;case 22:case 23:return e.lanes=0,G4(t,e,r)}return ji(t,e,r)}var Y4,Px,X4,Z4;Y4=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Px=function(){};X4=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,xl(Os.current);var i=null;switch(r){case"input":a=ax(t,a),n=ax(t,n),i=[];break;case"select":a=Er({},a,{value:void 0}),n=Er({},n,{value:void 0}),i=[];break;case"textarea":a=ox(t,a),n=ox(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=af)}Ax(r,n);var o;r=null;for(c in a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var l=a[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var A=n[c];if(l=a!=null?a[c]:void 0,n.hasOwnProperty(c)&&A!==l&&(A!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||A&&A.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in A)A.hasOwnProperty(o)&&l[o]!==A[o]&&(r||(r={}),r[o]=A[o])}else r||(i||(i=[]),i.push(c,r)),r=A;else c==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,l=l?l.__html:void 0,A!=null&&l!==A&&(i=i||[]).push(c,A)):c==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(c,""+A):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(c)?(A!=null&&c==="onScroll"&&br("scroll",t),i||l===A||(i=[])):(i=i||[]).push(c,A))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Z4=function(t,e,r,n){r!==n&&(e.flags|=4)};function Yc(t,e){if(!Cr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function A6(t,e,r){var n=e.pendingProps;switch(fb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(e),null;case 1:return da(e.type)&&sf(),Tn(e),null;case 3:return n=e.stateNode,WA(),vr(ca),vr(Gn),kb(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(_h(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ps!==null&&(Kx(ps),ps=null))),Px(t,e),Tn(e),null;case 5:vb(e);var a=xl(Zd.current);if(r=e.type,t!==null&&e.stateNode!=null)X4(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ze(166));return Tn(e),null}if(t=xl(Os.current),_h(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Ts]=e,n[Yd]=i,t=(e.mode&1)!==0,r){case"dialog":br("cancel",n),br("close",n);break;case"iframe":case"object":case"embed":br("load",n);break;case"video":case"audio":for(a=0;a<Ad.length;a++)br(Ad[a],n);break;case"source":br("error",n);break;case"img":case"image":case"link":br("error",n),br("load",n);break;case"details":br("toggle",n);break;case"input":Cv(n,i),br("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},br("invalid",n);break;case"textarea":Nv(n,i),br("invalid",n)}Ax(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Nh(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Nh(n.textContent,l,t),a=["children",""+l]):Rd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&br("scroll",n)}switch(r){case"input":yh(n),jv(n,i,!0);break;case"textarea":yh(n),_v(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=af)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NB(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ts]=e,t[Yd]=n,Y4(t,e,!1,!1),e.stateNode=t;e:{switch(o=cx(r,n),r){case"dialog":br("cancel",t),br("close",t),a=n;break;case"iframe":case"object":case"embed":br("load",t),a=n;break;case"video":case"audio":for(a=0;a<Ad.length;a++)br(Ad[a],t);a=n;break;case"source":br("error",t),a=n;break;case"img":case"image":case"link":br("error",t),br("load",t),a=n;break;case"details":br("toggle",t),a=n;break;case"input":Cv(t,n),a=ax(t,n),br("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Er({},n,{value:void 0}),br("invalid",t);break;case"textarea":Nv(t,n),a=ox(t,n),br("invalid",t);break;default:a=n}Ax(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var A=l[i];i==="style"?EB(t,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&_B(t,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&Md(t,A):typeof A=="number"&&Md(t,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rd.hasOwnProperty(i)?A!=null&&i==="onScroll"&&br("scroll",t):A!=null&&Zy(t,i,A,o))}switch(r){case"input":yh(t),jv(t,n,!1);break;case"textarea":yh(t),_v(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Eo(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?FA(t,!!n.multiple,i,!1):n.defaultValue!=null&&FA(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=af)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tn(e),null;case 6:if(t&&e.stateNode!=null)Z4(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ze(166));if(r=xl(Zd.current),xl(Os.current),_h(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ts]=e,(i=n.nodeValue!==r)&&(t=La,t!==null))switch(t.tag){case 3:Nh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nh(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ts]=e,e.stateNode=n}return Tn(e),null;case 13:if(vr(_r),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Cr&&Fa!==null&&e.mode&1&&!(e.flags&128))m4(),GA(),e.flags|=98560,i=!1;else if(i=_h(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Ze(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ze(317));i[Ts]=e}else GA(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tn(e),i=!1}else ps!==null&&(Kx(ps),ps=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||_r.current&1?hn===0&&(hn=3):Ib())),e.updateQueue!==null&&(e.flags|=4),Tn(e),null);case 4:return WA(),Px(t,e),t===null&&qd(e.stateNode.containerInfo),Tn(e),null;case 10:return xb(e.type._context),Tn(e),null;case 17:return da(e.type)&&sf(),Tn(e),null;case 19:if(vr(_r),i=e.memoizedState,i===null)return Tn(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Yc(i,!1);else{if(hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hf(t),o!==null){for(e.flags|=128,Yc(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return xr(_r,_r.current&1|2),e.child}t=t.sibling}i.tail!==null&&Mr()>JA&&(e.flags|=128,n=!0,Yc(i,!1),e.lanes=4194304)}else{if(!n)if(t=hf(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Yc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Cr)return Tn(e),null}else 2*Mr()-i.renderingStartTime>JA&&r!==1073741824&&(e.flags|=128,n=!0,Yc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mr(),e.sibling=null,r=_r.current,xr(_r,n?r&1|2:r&1),e):(Tn(e),null);case 22:case 23:return Qb(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?_a&1073741824&&(Tn(e),e.subtreeFlags&6&&(e.flags|=8192)):Tn(e),null;case 24:return null;case 25:return null}throw Error(Ze(156,e.tag))}function c6(t,e){switch(fb(e),e.tag){case 1:return da(e.type)&&sf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return WA(),vr(ca),vr(Gn),kb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vb(e),null;case 13:if(vr(_r),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ze(340));GA()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vr(_r),null;case 4:return WA(),null;case 10:return xb(e.type._context),null;case 22:case 23:return Qb(),null;case 24:return null;default:return null}}var Fh=!1,$n=!1,d6=typeof WeakSet=="function"?WeakSet:Set,ft=null;function NA(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ir(t,e,n)}else r.current=null}function Tx(t,e,r){try{r()}catch(n){Ir(t,e,n)}}var m1=!1;function u6(t,e){if(bx=tf,t=a4(),ub(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,A=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var u;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(A=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(u=h.firstChild)!==null;)p=h,h=u;for(;;){if(h===t)break t;if(p===r&&++c===a&&(l=o),p===i&&++d===n&&(A=o),(u=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=u}r=l===-1||A===-1?null:{start:l,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(wx={focusedElem:t,selectionRange:r},tf=!1,ft=e;ft!==null;)if(e=ft,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ft=t;else for(;ft!==null;){e=ft;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,v=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:us(e.type,b),v);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(k){Ir(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ft=t;break}ft=e.return}return y=m1,m1=!1,y}function Bd(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Tx(e,r,i)}a=a.next}while(a!==n)}}function ag(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Dx(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function eC(t){var e=t.alternate;e!==null&&(t.alternate=null,eC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ts],delete e[Yd],delete e[Bx],delete e[WE],delete e[qE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tC(t){return t.tag===5||t.tag===3||t.tag===4}function x1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zx(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=af));else if(n!==4&&(t=t.child,t!==null))for(zx(t,e,r),t=t.sibling;t!==null;)zx(t,e,r),t=t.sibling}function Ox(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ox(t,e,r),t=t.sibling;t!==null;)Ox(t,e,r),t=t.sibling}var Nn=null,fs=!1;function Ji(t,e,r){for(r=r.child;r!==null;)rC(t,e,r),r=r.sibling}function rC(t,e,r){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Jf,r)}catch{}switch(r.tag){case 5:$n||NA(r,e);case 6:var n=Nn,a=fs;Nn=null,Ji(t,e,r),Nn=n,fs=a,Nn!==null&&(fs?(t=Nn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Nn.removeChild(r.stateNode));break;case 18:Nn!==null&&(fs?(t=Nn,r=r.stateNode,t.nodeType===8?Tp(t.parentNode,r):t.nodeType===1&&Tp(t,r),Gd(t)):Tp(Nn,r.stateNode));break;case 4:n=Nn,a=fs,Nn=r.stateNode.containerInfo,fs=!0,Ji(t,e,r),Nn=n,fs=a;break;case 0:case 11:case 14:case 15:if(!$n&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tx(r,e,o),a=a.next}while(a!==n)}Ji(t,e,r);break;case 1:if(!$n&&(NA(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ir(r,e,l)}Ji(t,e,r);break;case 21:Ji(t,e,r);break;case 22:r.mode&1?($n=(n=$n)||r.memoizedState!==null,Ji(t,e,r),$n=n):Ji(t,e,r);break;default:Ji(t,e,r)}}function y1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new d6),e.forEach(function(n){var a=w6.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ls(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Nn=l.stateNode,fs=!1;break e;case 3:Nn=l.stateNode.containerInfo,fs=!0;break e;case 4:Nn=l.stateNode.containerInfo,fs=!0;break e}l=l.return}if(Nn===null)throw Error(Ze(160));rC(i,o,a),Nn=null,fs=!1;var A=a.alternate;A!==null&&(A.return=null),a.return=null}catch(c){Ir(a,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nC(e,t),e=e.sibling}function nC(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(e,t),Fs(t),n&4){try{Bd(3,t,t.return),ag(3,t)}catch(b){Ir(t,t.return,b)}try{Bd(5,t,t.return)}catch(b){Ir(t,t.return,b)}}break;case 1:ls(e,t),Fs(t),n&512&&r!==null&&NA(r,r.return);break;case 5:if(ls(e,t),Fs(t),n&512&&r!==null&&NA(r,r.return),t.flags&32){var a=t.stateNode;try{Md(a,"")}catch(b){Ir(t,t.return,b)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&CB(a,i),cx(l,o);var c=cx(l,i);for(o=0;o<A.length;o+=2){var d=A[o],h=A[o+1];d==="style"?EB(a,h):d==="dangerouslySetInnerHTML"?_B(a,h):d==="children"?Md(a,h):Zy(a,d,h,c)}switch(l){case"input":sx(a,i);break;case"textarea":jB(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var u=i.value;u!=null?FA(a,!!i.multiple,u,!1):p!==!!i.multiple&&(i.defaultValue!=null?FA(a,!!i.multiple,i.defaultValue,!0):FA(a,!!i.multiple,i.multiple?[]:"",!1))}a[Yd]=i}catch(b){Ir(t,t.return,b)}}break;case 6:if(ls(e,t),Fs(t),n&4){if(t.stateNode===null)throw Error(Ze(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(b){Ir(t,t.return,b)}}break;case 3:if(ls(e,t),Fs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gd(e.containerInfo)}catch(b){Ir(t,t.return,b)}break;case 4:ls(e,t),Fs(t);break;case 13:ls(e,t),Fs(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Ub=Mr())),n&4&&y1(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?($n=(c=$n)||d,ls(e,t),$n=c):ls(e,t),Fs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ft=t,d=t.child;d!==null;){for(h=ft=d;ft!==null;){switch(p=ft,u=p.child,p.tag){case 0:case 11:case 14:case 15:Bd(4,p,p.return);break;case 1:NA(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){Ir(n,r,b)}}break;case 5:NA(p,p.return);break;case 22:if(p.memoizedState!==null){w1(h);continue}}u!==null?(u.return=p,ft=u):w1(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,A=h.memoizedProps.style,o=A!=null&&A.hasOwnProperty("display")?A.display:null,l.style.display=SB("display",o))}catch(b){Ir(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(b){Ir(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ls(e,t),Fs(t),n&4&&y1(t);break;case 21:break;default:ls(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(tC(r)){var n=r;break e}r=r.return}throw Error(Ze(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Md(a,""),n.flags&=-33);var i=x1(t);Ox(t,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=x1(t);zx(t,l,o);break;default:throw Error(Ze(161))}}catch(A){Ir(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h6(t,e,r){ft=t,aC(t)}function aC(t,e,r){for(var n=(t.mode&1)!==0;ft!==null;){var a=ft,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Fh;if(!o){var l=a.alternate,A=l!==null&&l.memoizedState!==null||$n;l=Fh;var c=$n;if(Fh=o,($n=A)&&!c)for(ft=a;ft!==null;)o=ft,A=o.child,o.tag===22&&o.memoizedState!==null?v1(a):A!==null?(A.return=o,ft=A):v1(a);for(;i!==null;)ft=i,aC(i),i=i.sibling;ft=a,Fh=l,$n=c}b1(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ft=i):b1(t)}}function b1(t){for(;ft!==null;){var e=ft;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$n||ag(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!$n)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:us(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&a1(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}a1(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Gd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}$n||e.flags&512&&Dx(e)}catch(p){Ir(e,e.return,p)}}if(e===t){ft=null;break}if(r=e.sibling,r!==null){r.return=e.return,ft=r;break}ft=e.return}}function w1(t){for(;ft!==null;){var e=ft;if(e===t){ft=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ft=r;break}ft=e.return}}function v1(t){for(;ft!==null;){var e=ft;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ag(4,e)}catch(A){Ir(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(A){Ir(e,a,A)}}var i=e.return;try{Dx(e)}catch(A){Ir(e,i,A)}break;case 5:var o=e.return;try{Dx(e)}catch(A){Ir(e,o,A)}}}catch(A){Ir(e,e.return,A)}if(e===t){ft=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ft=l;break}ft=e.return}}var f6=Math.ceil,pf=Si.ReactCurrentDispatcher,Eb=Si.ReactCurrentOwner,Za=Si.ReactCurrentBatchConfig,Xt=0,yn=null,Xr=null,Fn=0,_a=0,_A=Do(0),hn=0,nu=null,Fl=0,sg=0,Fb=0,Cd=null,la=null,Ub=0,JA=1/0,gi=null,mf=!1,Rx=null,ko=null,Uh=!1,uo=null,xf=0,jd=0,Mx=null,P0=-1,T0=0;function ea(){return Xt&6?Mr():P0!==-1?P0:P0=Mr()}function Bo(t){return t.mode&1?Xt&2&&Fn!==0?Fn&-Fn:YE.transition!==null?(T0===0&&(T0=MB()),T0):(t=lr,t!==0||(t=window.event,t=t===void 0?16:qB(t.type)),t):1}function xs(t,e,r,n){if(50<jd)throw jd=0,Mx=null,Error(Ze(185));bu(t,r,n),(!(Xt&2)||t!==yn)&&(t===yn&&(!(Xt&2)&&(sg|=r),hn===4&&oo(t,Fn)),ua(t,n),r===1&&Xt===0&&!(e.mode&1)&&(JA=Mr()+500,tg&&zo()))}function ua(t,e){var r=t.callbackNode;YS(t,e);var n=ef(t,t===yn?Fn:0);if(n===0)r!==null&&Fv(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Fv(r),e===1)t.tag===0?JE(k1.bind(null,t)):f4(k1.bind(null,t)),GE(function(){!(Xt&6)&&zo()}),r=null;else{switch(HB(n)){case 1:r=ab;break;case 4:r=OB;break;case 16:r=Z0;break;case 536870912:r=RB;break;default:r=Z0}r=uC(r,sC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function sC(t,e){if(P0=-1,T0=0,Xt&6)throw Error(Ze(327));var r=t.callbackNode;if(PA()&&t.callbackNode!==r)return null;var n=ef(t,t===yn?Fn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=yf(t,n);else{e=n;var a=Xt;Xt|=2;var i=oC();(yn!==t||Fn!==e)&&(gi=null,JA=Mr()+500,wl(t,e));do try{m6();break}catch(l){iC(t,l)}while(!0);mb(),pf.current=i,Xt=a,Xr!==null?e=0:(yn=null,Fn=0,e=hn)}if(e!==0){if(e===2&&(a=gx(t),a!==0&&(n=a,e=Hx(t,a))),e===1)throw r=nu,wl(t,0),oo(t,n),ua(t,Mr()),r;if(e===6)oo(t,n);else{if(a=t.current.alternate,!(n&30)&&!g6(a)&&(e=yf(t,n),e===2&&(i=gx(t),i!==0&&(n=i,e=Hx(t,i))),e===1))throw r=nu,wl(t,0),oo(t,n),ua(t,Mr()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(Ze(345));case 2:ll(t,la,gi);break;case 3:if(oo(t,n),(n&130023424)===n&&(e=Ub+500-Mr(),10<e)){if(ef(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){ea(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=kx(ll.bind(null,t,la,gi),e);break}ll(t,la,gi);break;case 4:if(oo(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-ms(n);i=1<<o,o=e[o],o>a&&(a=o),n&=~i}if(n=a,n=Mr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*f6(n/1960))-n,10<n){t.timeoutHandle=kx(ll.bind(null,t,la,gi),n);break}ll(t,la,gi);break;case 5:ll(t,la,gi);break;default:throw Error(Ze(329))}}}return ua(t,Mr()),t.callbackNode===r?sC.bind(null,t):null}function Hx(t,e){var r=Cd;return t.current.memoizedState.isDehydrated&&(wl(t,e).flags|=256),t=yf(t,e),t!==2&&(e=la,la=r,e!==null&&Kx(e)),t}function Kx(t){la===null?la=t:la.push.apply(la,t)}function g6(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!ys(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function oo(t,e){for(e&=~Fb,e&=~sg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ms(e),n=1<<r;t[r]=-1,e&=~n}}function k1(t){if(Xt&6)throw Error(Ze(327));PA();var e=ef(t,0);if(!(e&1))return ua(t,Mr()),null;var r=yf(t,e);if(t.tag!==0&&r===2){var n=gx(t);n!==0&&(e=n,r=Hx(t,n))}if(r===1)throw r=nu,wl(t,0),oo(t,e),ua(t,Mr()),r;if(r===6)throw Error(Ze(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ll(t,la,gi),ua(t,Mr()),null}function Lb(t,e){var r=Xt;Xt|=1;try{return t(e)}finally{Xt=r,Xt===0&&(JA=Mr()+500,tg&&zo())}}function Ul(t){uo!==null&&uo.tag===0&&!(Xt&6)&&PA();var e=Xt;Xt|=1;var r=Za.transition,n=lr;try{if(Za.transition=null,lr=1,t)return t()}finally{lr=n,Za.transition=r,Xt=e,!(Xt&6)&&zo()}}function Qb(){_a=_A.current,vr(_A)}function wl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$E(r)),Xr!==null)for(r=Xr.return;r!==null;){var n=r;switch(fb(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sf();break;case 3:WA(),vr(ca),vr(Gn),kb();break;case 5:vb(n);break;case 4:WA();break;case 13:vr(_r);break;case 19:vr(_r);break;case 10:xb(n.type._context);break;case 22:case 23:Qb()}r=r.return}if(yn=t,Xr=t=Co(t.current,null),Fn=_a=e,hn=0,nu=null,Fb=sg=Fl=0,la=Cd=null,ml!==null){for(e=0;e<ml.length;e++)if(r=ml[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ml=null}return t}function iC(t,e){do{var r=Xr;try{if(mb(),L0.current=gf,ff){for(var n=Sr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ff=!1}if(El=0,gn=cn=Sr=null,kd=!1,eu=0,Eb.current=null,r===null||r.return===null){hn=1,nu=e,Xr=null;break}e:{var i=t,o=r.return,l=r,A=e;if(e=Fn,l.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var c=A,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var u=c1(o);if(u!==null){u.flags&=-257,d1(u,o,l,i,e),u.mode&1&&A1(i,c,e),e=u,A=c;var y=e.updateQueue;if(y===null){var b=new Set;b.add(A),e.updateQueue=b}else y.add(A);break e}else{if(!(e&1)){A1(i,c,e),Ib();break e}A=Error(Ze(426))}}else if(Cr&&l.mode&1){var v=c1(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),d1(v,o,l,i,e),gb(qA(A,l));break e}}i=A=qA(A,l),hn!==4&&(hn=2),Cd===null?Cd=[i]:Cd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=H4(i,A,e);n1(i,g);break e;case 1:l=A;var m=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ko===null||!ko.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=K4(i,l,e);n1(i,k);break e}}i=i.return}while(i!==null)}AC(r)}catch(N){e=N,Xr===r&&r!==null&&(Xr=r=r.return);continue}break}while(!0)}function oC(){var t=pf.current;return pf.current=gf,t===null?gf:t}function Ib(){(hn===0||hn===3||hn===2)&&(hn=4),yn===null||!(Fl&268435455)&&!(sg&268435455)||oo(yn,Fn)}function yf(t,e){var r=Xt;Xt|=2;var n=oC();(yn!==t||Fn!==e)&&(gi=null,wl(t,e));do try{p6();break}catch(a){iC(t,a)}while(!0);if(mb(),Xt=r,pf.current=n,Xr!==null)throw Error(Ze(261));return yn=null,Fn=0,hn}function p6(){for(;Xr!==null;)lC(Xr)}function m6(){for(;Xr!==null&&!MS();)lC(Xr)}function lC(t){var e=dC(t.alternate,t,_a);t.memoizedProps=t.pendingProps,e===null?AC(t):Xr=e,Eb.current=null}function AC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=c6(r,e),r!==null){r.flags&=32767,Xr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hn=6,Xr=null;return}}else if(r=A6(r,e,_a),r!==null){Xr=r;return}if(e=e.sibling,e!==null){Xr=e;return}Xr=e=t}while(e!==null);hn===0&&(hn=5)}function ll(t,e,r){var n=lr,a=Za.transition;try{Za.transition=null,lr=1,x6(t,e,r,n)}finally{Za.transition=a,lr=n}return null}function x6(t,e,r,n){do PA();while(uo!==null);if(Xt&6)throw Error(Ze(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ze(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(XS(t,i),t===yn&&(Xr=yn=null,Fn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Uh||(Uh=!0,uC(Z0,function(){return PA(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Za.transition,Za.transition=null;var o=lr;lr=1;var l=Xt;Xt|=4,Eb.current=null,u6(t,r),nC(r,t),DE(wx),tf=!!bx,wx=bx=null,t.current=r,h6(r),HS(),Xt=l,lr=o,Za.transition=i}else t.current=r;if(Uh&&(Uh=!1,uo=t,xf=a),i=t.pendingLanes,i===0&&(ko=null),GS(r.stateNode),ua(t,Mr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(mf)throw mf=!1,t=Rx,Rx=null,t;return xf&1&&t.tag!==0&&PA(),i=t.pendingLanes,i&1?t===Mx?jd++:(jd=0,Mx=t):jd=0,zo(),null}function PA(){if(uo!==null){var t=HB(xf),e=Za.transition,r=lr;try{if(Za.transition=null,lr=16>t?16:t,uo===null)var n=!1;else{if(t=uo,uo=null,xf=0,Xt&6)throw Error(Ze(331));var a=Xt;for(Xt|=4,ft=t.current;ft!==null;){var i=ft,o=i.child;if(ft.flags&16){var l=i.deletions;if(l!==null){for(var A=0;A<l.length;A++){var c=l[A];for(ft=c;ft!==null;){var d=ft;switch(d.tag){case 0:case 11:case 15:Bd(8,d,i)}var h=d.child;if(h!==null)h.return=d,ft=h;else for(;ft!==null;){d=ft;var p=d.sibling,u=d.return;if(eC(d),d===c){ft=null;break}if(p!==null){p.return=u,ft=p;break}ft=u}}}var y=i.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var v=b.sibling;b.sibling=null,b=v}while(b!==null)}}ft=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ft=o;else e:for(;ft!==null;){if(i=ft,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bd(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ft=g;break e}ft=i.return}}var m=t.current;for(ft=m;ft!==null;){o=ft;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ft=w;else e:for(o=m;ft!==null;){if(l=ft,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ag(9,l)}}catch(N){Ir(l,l.return,N)}if(l===o){ft=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ft=k;break e}ft=l.return}}if(Xt=a,zo(),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Jf,t)}catch{}n=!0}return n}finally{lr=r,Za.transition=e}}return!1}function B1(t,e,r){e=qA(r,e),e=H4(t,e,1),t=vo(t,e,1),e=ea(),t!==null&&(bu(t,1,e),ua(t,e))}function Ir(t,e,r){if(t.tag===3)B1(t,t,r);else for(;e!==null;){if(e.tag===3){B1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ko===null||!ko.has(n))){t=qA(r,t),t=K4(e,t,1),e=vo(e,t,1),t=ea(),e!==null&&(bu(e,1,t),ua(e,t));break}}e=e.return}}function y6(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ea(),t.pingedLanes|=t.suspendedLanes&r,yn===t&&(Fn&r)===r&&(hn===4||hn===3&&(Fn&130023424)===Fn&&500>Mr()-Ub?wl(t,0):Fb|=r),ua(t,e)}function cC(t,e){e===0&&(t.mode&1?(e=vh,vh<<=1,!(vh&130023424)&&(vh=4194304)):e=1);var r=ea();t=Ci(t,e),t!==null&&(bu(t,e,r),ua(t,r))}function b6(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),cC(t,r)}function w6(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ze(314))}n!==null&&n.delete(e),cC(t,r)}var dC;dC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ca.current)Aa=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Aa=!1,l6(t,e,r);Aa=!!(t.flags&131072)}else Aa=!1,Cr&&e.flags&1048576&&g4(e,Af,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;I0(t,e),t=e.pendingProps;var a=$A(e,Gn.current);IA(e,r),a=Cb(null,e,n,t,a,r);var i=jb();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,da(n)?(i=!0,of(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,bb(e),a.updater=ng,e.stateNode=a,a._reactInternals=e,Ex(e,n,t,r),e=Lx(null,e,n,!0,i,r)):(e.tag=0,Cr&&i&&hb(e),Xn(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(I0(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=k6(n),t=us(n,t),a){case 0:e=Ux(null,e,n,t,r);break e;case 1:e=f1(null,e,n,t,r);break e;case 11:e=u1(null,e,n,t,r);break e;case 14:e=h1(null,e,n,us(n.type,t),r);break e}throw Error(Ze(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:us(n,a),Ux(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:us(n,a),f1(t,e,n,a,r);case 3:e:{if(W4(e),t===null)throw Error(Ze(387));n=e.pendingProps,i=e.memoizedState,a=i.element,w4(t,e),uf(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=qA(Error(Ze(423)),e),e=g1(t,e,n,r,a);break e}else if(n!==a){a=qA(Error(Ze(424)),e),e=g1(t,e,n,r,a);break e}else for(Fa=wo(e.stateNode.containerInfo.firstChild),La=e,Cr=!0,ps=null,r=y4(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(GA(),n===a){e=ji(t,e,r);break e}Xn(t,e,n,r)}e=e.child}return e;case 5:return v4(e),t===null&&Nx(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,vx(n,a)?o=null:i!==null&&vx(n,i)&&(e.flags|=32),V4(t,e),Xn(t,e,o,r),e.child;case 6:return t===null&&Nx(e),null;case 13:return q4(t,e,r);case 4:return wb(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=VA(e,null,n,r):Xn(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:us(n,a),u1(t,e,n,a,r);case 7:return Xn(t,e,e.pendingProps,r),e.child;case 8:return Xn(t,e,e.pendingProps.children,r),e.child;case 12:return Xn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,xr(cf,n._currentValue),n._currentValue=o,i!==null)if(ys(i.value,o)){if(i.children===a.children&&!ca.current){e=ji(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var A=l.firstContext;A!==null;){if(A.context===n){if(i.tag===1){A=wi(-1,r&-r),A.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?A.next=A:(A.next=d.next,d.next=A),c.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),_x(i.return,r,e),l.lanes|=r;break}A=A.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ze(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),_x(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Xn(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,IA(e,r),a=es(a),n=n(a),e.flags|=1,Xn(t,e,n,r),e.child;case 14:return n=e.type,a=us(n,e.pendingProps),a=us(n.type,a),h1(t,e,n,a,r);case 15:return $4(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:us(n,a),I0(t,e),e.tag=1,da(n)?(t=!0,of(e)):t=!1,IA(e,r),M4(e,n,a),Ex(e,n,a,r),Lx(null,e,n,!0,t,r);case 19:return J4(t,e,r);case 22:return G4(t,e,r)}throw Error(Ze(156,e.tag))};function uC(t,e){return zB(t,e)}function v6(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(t,e,r,n){return new v6(t,e,r,n)}function Pb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function k6(t){if(typeof t=="function")return Pb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tb)return 11;if(t===rb)return 14}return 2}function Co(t,e){var r=t.alternate;return r===null?(r=Ja(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function D0(t,e,r,n,a,i){var o=2;if(n=t,typeof t=="function")Pb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xA:return vl(r.children,a,i,e);case eb:o=8,a|=8;break;case ex:return t=Ja(12,r,e,a|2),t.elementType=ex,t.lanes=i,t;case tx:return t=Ja(13,r,e,a),t.elementType=tx,t.lanes=i,t;case rx:return t=Ja(19,r,e,a),t.elementType=rx,t.lanes=i,t;case vB:return ig(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bB:o=10;break e;case wB:o=9;break e;case tb:o=11;break e;case rb:o=14;break e;case ro:o=16,n=null;break e}throw Error(Ze(130,t==null?t:typeof t,""))}return e=Ja(o,r,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function vl(t,e,r,n){return t=Ja(7,t,n,e),t.lanes=r,t}function ig(t,e,r,n){return t=Ja(22,t,n,e),t.elementType=vB,t.lanes=r,t.stateNode={isHidden:!1},t}function $p(t,e,r){return t=Ja(6,t,null,e),t.lanes=r,t}function Gp(t,e,r){return e=Ja(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function B6(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jp(0),this.expirationTimes=jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Tb(t,e,r,n,a,i,o,l,A){return t=new B6(t,e,r,l,A),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ja(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bb(i),t}function C6(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mA,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function hC(t){if(!t)return Fo;t=t._reactInternals;e:{if(Pl(t)!==t||t.tag!==1)throw Error(Ze(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(da(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ze(171))}if(t.tag===1){var r=t.type;if(da(r))return h4(t,r,e)}return e}function fC(t,e,r,n,a,i,o,l,A){return t=Tb(r,n,!0,t,a,i,o,l,A),t.context=hC(null),r=t.current,n=ea(),a=Bo(r),i=wi(n,a),i.callback=e??null,vo(r,i,a),t.current.lanes=a,bu(t,a,n),ua(t,n),t}function og(t,e,r,n){var a=e.current,i=ea(),o=Bo(a);return r=hC(r),e.context===null?e.context=r:e.pendingContext=r,e=wi(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=vo(a,e,o),t!==null&&(xs(t,a,o,i),U0(t,a,o)),o}function bf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Db(t,e){C1(t,e),(t=t.alternate)&&C1(t,e)}function j6(){return null}var gC=typeof reportError=="function"?reportError:function(t){console.error(t)};function zb(t){this._internalRoot=t}lg.prototype.render=zb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ze(409));og(t,e,null,null)};lg.prototype.unmount=zb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ul(function(){og(null,t,null,null)}),e[Bi]=null}};function lg(t){this._internalRoot=t}lg.prototype.unstable_scheduleHydration=function(t){if(t){var e=GB();t={blockedOn:null,target:t,priority:e};for(var r=0;r<io.length&&e!==0&&e<io[r].priority;r++);io.splice(r,0,t),r===0&&WB(t)}};function Ob(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ag(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j1(){}function N6(t,e,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var c=bf(o);i.call(c)}}var o=fC(e,n,t,0,null,!1,!1,"",j1);return t._reactRootContainer=o,t[Bi]=o.current,qd(t.nodeType===8?t.parentNode:t),Ul(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var c=bf(A);l.call(c)}}var A=Tb(t,0,!1,null,null,!1,!1,"",j1);return t._reactRootContainer=A,t[Bi]=A.current,qd(t.nodeType===8?t.parentNode:t),Ul(function(){og(e,A,r,n)}),A}function cg(t,e,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var A=bf(o);l.call(A)}}og(e,o,t,a)}else o=N6(r,e,t,a,n);return bf(o)}KB=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ld(e.pendingLanes);r!==0&&(sb(e,r|1),ua(e,Mr()),!(Xt&6)&&(JA=Mr()+500,zo()))}break;case 13:Ul(function(){var n=Ci(t,1);if(n!==null){var a=ea();xs(n,t,1,a)}}),Db(t,1)}};ib=function(t){if(t.tag===13){var e=Ci(t,134217728);if(e!==null){var r=ea();xs(e,t,134217728,r)}Db(t,134217728)}};$B=function(t){if(t.tag===13){var e=Bo(t),r=Ci(t,e);if(r!==null){var n=ea();xs(r,t,e,n)}Db(t,e)}};GB=function(){return lr};VB=function(t,e){var r=lr;try{return lr=t,e()}finally{lr=r}};ux=function(t,e,r){switch(e){case"input":if(sx(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=eg(n);if(!a)throw Error(Ze(90));BB(n),sx(n,a)}}}break;case"textarea":jB(t,r);break;case"select":e=r.value,e!=null&&FA(t,!!r.multiple,e,!1)}};LB=Lb;QB=Ul;var _6={usingClientEntryPoint:!1,Events:[vu,vA,eg,FB,UB,Lb]},Xc={findFiberByHostInstance:pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S6={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TB(t),t===null?null:t.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||j6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Jf=Lh.inject(S6),zs=Lh}catch{}}Ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_6;Ia.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ob(e))throw Error(Ze(200));return C6(t,e,null,r)};Ia.createRoot=function(t,e){if(!Ob(t))throw Error(Ze(299));var r=!1,n="",a=gC;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Tb(t,1,!1,null,null,r,!1,n,a),t[Bi]=e.current,qd(t.nodeType===8?t.parentNode:t),new zb(e)};Ia.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ze(188)):(t=Object.keys(t).join(","),Error(Ze(268,t)));return t=TB(e),t=t===null?null:t.stateNode,t};Ia.flushSync=function(t){return Ul(t)};Ia.hydrate=function(t,e,r){if(!Ag(e))throw Error(Ze(200));return cg(null,t,e,!0,r)};Ia.hydrateRoot=function(t,e,r){if(!Ob(t))throw Error(Ze(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=gC;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=fC(e,null,t,1,r??null,a,!1,i,o),t[Bi]=e.current,qd(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new lg(e)};Ia.render=function(t,e,r){if(!Ag(e))throw Error(Ze(200));return cg(null,t,e,!1,r)};Ia.unmountComponentAtNode=function(t){if(!Ag(t))throw Error(Ze(40));return t._reactRootContainer?(Ul(function(){cg(null,null,t,!1,function(){t._reactRootContainer=null,t[Bi]=null})}),!0):!1};Ia.unstable_batchedUpdates=Lb;Ia.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ag(r))throw Error(Ze(200));if(t==null||t._reactInternals===void 0)throw Error(Ze(38));return cg(t,e,r,!1,n)};Ia.version="18.3.1-next-f1338f8080-20240426";function pC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pC)}catch(t){console.error(t)}}pC(),pB.exports=Ia;var Ht=pB.exports,N1=Ht;Xm.createRoot=N1.createRoot,Xm.hydrateRoot=N1.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function au(){return au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},au.apply(this,arguments)}var ho;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ho||(ho={}));const _1="popstate";function E6(t){t===void 0&&(t={});function e(n,a){let{pathname:i,search:o,hash:l}=n.location;return $x("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:wf(a)}return U6(e,r,null,t)}function Gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F6(){return Math.random().toString(36).substr(2,8)}function S1(t,e){return{usr:t.state,key:t.key,idx:e}}function $x(t,e,r,n){return r===void 0&&(r=null),au({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ac(e):e,{state:r,key:e&&e.key||n||F6()})}function wf(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ac(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function U6(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=ho.Pop,A=null,c=d();c==null&&(c=0,o.replaceState(au({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=ho.Pop;let v=d(),g=v==null?null:v-c;c=v,A&&A({action:l,location:b.location,delta:g})}function p(v,g){l=ho.Push;let m=$x(b.location,v,g);c=d()+1;let w=S1(m,c),k=b.createHref(m);try{o.pushState(w,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(k)}i&&A&&A({action:l,location:b.location,delta:1})}function u(v,g){l=ho.Replace;let m=$x(b.location,v,g);c=d();let w=S1(m,c),k=b.createHref(m);o.replaceState(w,"",k),i&&A&&A({action:l,location:b.location,delta:0})}function y(v){let g=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof v=="string"?v:wf(v);return m=m.replace(/ $/,"%20"),Gr(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let b={get action(){return l},get location(){return t(a,o)},listen(v){if(A)throw new Error("A history only accepts one active listener");return a.addEventListener(_1,h),A=v,()=>{a.removeEventListener(_1,h),A=null}},createHref(v){return e(a,v)},createURL:y,encodeLocation(v){let g=y(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:u,go(v){return o.go(v)}};return b}var E1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(E1||(E1={}));function L6(t,e,r){return r===void 0&&(r="/"),Q6(t,e,r)}function Q6(t,e,r,n){let a=typeof e=="string"?ac(e):e,i=Mb(a.pathname||"/",r);if(i==null)return null;let o=mC(t);I6(o);let l=null;for(let A=0;l==null&&A<o.length;++A){let c=V6(i);l=K6(o[A],c)}return l}function mC(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let A={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};A.relativePath.startsWith("/")&&(Gr(A.relativePath.startsWith(n),'Absolute route path "'+A.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),A.relativePath=A.relativePath.slice(n.length));let c=jo([n,A.relativePath]),d=r.concat(A);i.children&&i.children.length>0&&(Gr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:M6(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let A of xC(i.path))a(i,o,A)}),e}function xC(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=xC(n.join("/")),l=[];return l.push(...o.map(A=>A===""?i:[i,A].join("/"))),a&&l.push(...o),l.map(A=>t.startsWith("/")&&A===""?"/":A)}function I6(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:H6(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const P6=/^:[\w-]+$/,T6=3,D6=2,z6=1,O6=10,R6=-2,F1=t=>t==="*";function M6(t,e){let r=t.split("/"),n=r.length;return r.some(F1)&&(n+=R6),e&&(n+=D6),r.filter(a=>!F1(a)).reduce((a,i)=>a+(P6.test(i)?T6:i===""?z6:O6),n)}function H6(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function K6(t,e,r){let{routesMeta:n}=t,a={},i="/",o=[];for(let l=0;l<n.length;++l){let A=n[l],c=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=$6({path:A.relativePath,caseSensitive:A.caseSensitive,end:c},d),p=A.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:jo([i,h.pathname]),pathnameBase:X6(jo([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=jo([i,h.pathnameBase]))}return o}function $6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=G6(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:p,isOptional:u}=d;if(p==="*"){let b=l[h]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=l[h];return u&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function G6(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Rb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,A)=>(n.push({paramName:l,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function V6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const W6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q6=t=>W6.test(t);function J6(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?ac(t):t,i;if(r)if(q6(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Rb(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=U1(r.substring(1),"/"):i=U1(r,e)}else i=e;return{pathname:i,search:Z6(n),hash:eF(a)}}function U1(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Vp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y6(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Hb(t,e){let r=Y6(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Kb(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=ac(t):(a=au({},t),Gr(!a.pathname||!a.pathname.includes("?"),Vp("?","pathname","search",a)),Gr(!a.pathname||!a.pathname.includes("#"),Vp("#","pathname","hash",a)),Gr(!a.search||!a.search.includes("#"),Vp("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}l=h>=0?e[h]:"/"}let A=J6(a,l),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!A.pathname.endsWith("/")&&(c||d)&&(A.pathname+="/"),A}const jo=t=>t.join("/").replace(/\/\/+/g,"/"),X6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yC=["post","put","patch","delete"];new Set(yC);const rF=["get",...yC];new Set(rF);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},su.apply(this,arguments)}const $b=C.createContext(null),nF=C.createContext(null),Oo=C.createContext(null),dg=C.createContext(null),Ro=C.createContext({outlet:null,matches:[],isDataRoute:!1}),bC=C.createContext(null);function aF(t,e){let{relative:r}=e===void 0?{}:e;sc()||Gr(!1);let{basename:n,navigator:a}=C.useContext(Oo),{hash:i,pathname:o,search:l}=kC(t,{relative:r}),A=o;return n!=="/"&&(A=o==="/"?n:jo([n,o])),a.createHref({pathname:A,search:l,hash:i})}function sc(){return C.useContext(dg)!=null}function ic(){return sc()||Gr(!1),C.useContext(dg).location}function wC(t){C.useContext(Oo).static||C.useLayoutEffect(t)}function vC(){let{isDataRoute:t}=C.useContext(Ro);return t?mF():sF()}function sF(){sc()||Gr(!1);let t=C.useContext($b),{basename:e,future:r,navigator:n}=C.useContext(Oo),{matches:a}=C.useContext(Ro),{pathname:i}=ic(),o=JSON.stringify(Hb(a,r.v7_relativeSplatPath)),l=C.useRef(!1);return wC(()=>{l.current=!0}),C.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let h=Kb(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:jo([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,i,t])}function kC(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=C.useContext(Oo),{matches:a}=C.useContext(Ro),{pathname:i}=ic(),o=JSON.stringify(Hb(a,n.v7_relativeSplatPath));return C.useMemo(()=>Kb(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function iF(t,e){return oF(t,e)}function oF(t,e,r,n){sc()||Gr(!1);let{navigator:a}=C.useContext(Oo),{matches:i}=C.useContext(Ro),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let A=o?o.pathnameBase:"/";o&&o.route;let c=ic(),d;if(e){var h;let v=typeof e=="string"?ac(e):e;A==="/"||(h=v.pathname)!=null&&h.startsWith(A)||Gr(!1),d=v}else d=c;let p=d.pathname||"/",u=p;if(A!=="/"){let v=A.replace(/^\//,"").split("/");u="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=L6(t,{pathname:u}),b=uF(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:jo([A,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?A:jo([A,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return e&&b?C.createElement(dg.Provider,{value:{location:su({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ho.Pop}},b):b}function lF(){let t=pF(),e=tF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),r?C.createElement("pre",{style:a},r):null,null)}const AF=C.createElement(lF,null);class cF extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?C.createElement(Ro.Provider,{value:this.props.routeContext},C.createElement(bC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dF(t){let{routeContext:e,match:r,children:n}=t,a=C.useContext($b);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(Ro.Provider,{value:e},n)}function uF(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Gr(!1),o=o.slice(0,Math.min(o.length,d+1))}let A=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:u}=r,y=h.route.loader&&p[h.route.id]===void 0&&(!u||u[h.route.id]===void 0);if(h.route.lazy||y){A=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let u,y=!1,b=null,v=null;r&&(u=l&&h.route.id?l[h.route.id]:void 0,b=h.route.errorElement||AF,A&&(c<0&&p===0?(xF("route-fallback"),y=!0,v=null):c===p&&(y=!0,v=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),m=()=>{let w;return u?w=b:y?w=v:h.route.Component?w=C.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,C.createElement(dF,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?C.createElement(cF,{location:r.location,revalidation:r.revalidation,component:b,error:u,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var BC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BC||{}),CC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(CC||{});function hF(t){let e=C.useContext($b);return e||Gr(!1),e}function fF(t){let e=C.useContext(nF);return e||Gr(!1),e}function gF(t){let e=C.useContext(Ro);return e||Gr(!1),e}function jC(t){let e=gF(),r=e.matches[e.matches.length-1];return r.route.id||Gr(!1),r.route.id}function pF(){var t;let e=C.useContext(bC),r=fF(),n=jC();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function mF(){let{router:t}=hF(BC.UseNavigateStable),e=jC(CC.UseNavigateStable),r=C.useRef(!1);return wC(()=>{r.current=!0}),C.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,su({fromRouteId:e},i)))},[t,e])}const L1={};function xF(t,e,r){L1[t]||(L1[t]=!0)}function yF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function NC(t){let{to:e,replace:r,state:n,relative:a}=t;sc()||Gr(!1);let{future:i,static:o}=C.useContext(Oo),{matches:l}=C.useContext(Ro),{pathname:A}=ic(),c=vC(),d=Kb(e,Hb(l,i.v7_relativeSplatPath),A,a==="path"),h=JSON.stringify(d);return C.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:a}),[c,h,a,r,n]),null}function Mn(t){Gr(!1)}function bF(t){let{basename:e="/",children:r=null,location:n,navigationType:a=ho.Pop,navigator:i,static:o=!1,future:l}=t;sc()&&Gr(!1);let A=e.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:A,navigator:i,static:o,future:su({v7_relativeSplatPath:!1},l)}),[A,l,i,o]);typeof n=="string"&&(n=ac(n));let{pathname:d="/",search:h="",hash:p="",state:u=null,key:y="default"}=n,b=C.useMemo(()=>{let v=Mb(d,A);return v==null?null:{location:{pathname:v,search:h,hash:p,state:u,key:y},navigationType:a}},[A,d,h,p,u,y,a]);return b==null?null:C.createElement(Oo.Provider,{value:c},C.createElement(dg.Provider,{children:r,value:b}))}function Q1(t){let{children:e,location:r}=t;return iF(Gx(e),r)}new Promise(()=>{});function Gx(t,e){e===void 0&&(e=[]);let r=[];return C.Children.forEach(t,(n,a)=>{if(!C.isValidElement(n))return;let i=[...e,a];if(n.type===C.Fragment){r.push.apply(r,Gx(n.props.children,i));return}n.type!==Mn&&Gr(!1),!n.props.index||!n.props.children||Gr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Gx(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vx(){return Vx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vx.apply(this,arguments)}function wF(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function vF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kF(t,e){return t.button===0&&(!e||e==="_self")&&!vF(t)}const BF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CF="6";try{window.__reactRouterVersion=CF}catch{}const jF="startTransition",I1=yS[jF];function P1(t){let{basename:e,children:r,future:n,window:a}=t,i=C.useRef();i.current==null&&(i.current=E6({window:a,v5Compat:!0}));let o=i.current,[l,A]=C.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=C.useCallback(h=>{c&&I1?I1(()=>A(h)):A(h)},[A,c]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>yF(n),[n]),C.createElement(bF,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const NF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_F=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T1=C.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:A,to:c,preventScrollReset:d,viewTransition:h}=e,p=wF(e,BF),{basename:u}=C.useContext(Oo),y,b=!1;if(typeof c=="string"&&_F.test(c)&&(y=c,NF))try{let w=new URL(window.location.href),k=c.startsWith("//")?new URL(w.protocol+c):new URL(c),N=Mb(k.pathname,u);k.origin===w.origin&&N!=null?c=N+k.search+k.hash:b=!0}catch{}let v=aF(c,{relative:a}),g=SF(c,{replace:o,state:l,target:A,preventScrollReset:d,relative:a,viewTransition:h});function m(w){n&&n(w),w.defaultPrevented||g(w)}return C.createElement("a",Vx({},p,{href:y||v,onClick:b||i?n:m,ref:r,target:A}))});var D1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(D1||(D1={}));var z1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(z1||(z1={}));function SF(t,e){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,A=vC(),c=ic(),d=kC(t,{relative:o});return C.useCallback(h=>{if(kF(h,r)){h.preventDefault();let p=n!==void 0?n:wf(c)===wf(d);A(t,{replace:p,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[c,A,d,n,a,r,t,i,o,l])}var Wx=function(t,e){return Wx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Wx(t,e)};function _C(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wx(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vf=function(){return vf=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},vf.apply(this,arguments)};function oc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function SC(t,e,r,n){var a=arguments.length,i=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function EC(t,e){return function(r,n){e(r,n,t)}}function FC(t,e,r,n,a,i){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var l=n.kind,A=l==="getter"?"get":l==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h,p=!1,u=r.length-1;u>=0;u--){var y={};for(var b in n)y[b]=b==="access"?{}:n[b];for(var b in n.access)y.access[b]=n.access[b];y.addInitializer=function(g){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(g||null))};var v=(0,r[u])(l==="accessor"?{get:d.get,set:d.set}:d[A],y);if(l==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(h=o(v.get))&&(d.get=h),(h=o(v.set))&&(d.set=h),(h=o(v.init))&&a.unshift(h)}else(h=o(v))&&(l==="field"?a.unshift(h):d[A]=h)}c&&Object.defineProperty(c,n.name,d),p=!0}function UC(t,e,r){for(var n=arguments.length>2,a=0;a<e.length;a++)r=n?e[a].call(t,r):e[a].call(t);return n?r:void 0}function LC(t){return typeof t=="symbol"?t:"".concat(t)}function QC(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function IC(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function kt(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function A(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):a(d.value).then(l,A)}c((n=n.apply(t,e||[])).next())})}function PC(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return A([c,d])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ug=Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function TC(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ug(e,t,r)}function kf(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gb(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function DC(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Gb(arguments[e]));return t}function zC(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,a++)n[a]=i[o];return n}function OC(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function YA(t){return this instanceof YA?(this.v=t,this):new YA(t)}function RC(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(u){return function(y){return Promise.resolve(y).then(u,h)}}function l(u,y){n[u]&&(a[u]=function(b){return new Promise(function(v,g){i.push([u,b,v,g])>1||A(u,b)})},y&&(a[u]=y(a[u])))}function A(u,y){try{c(n[u](y))}catch(b){p(i[0][3],b)}}function c(u){u.value instanceof YA?Promise.resolve(u.value.v).then(d,h):p(i[0][2],u)}function d(u){A("next",u)}function h(u){A("throw",u)}function p(u,y){u(y),i.shift(),i.length&&A(i[0][0],i[0][1])}}function MC(t){var e,r;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,i){e[a]=t[a]?function(o){return(r=!r)?{value:YA(t[a](o)),done:!1}:i?i(o):o}:i}}function HC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof kf=="function"?kf(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(l,A){o=t[i](o),a(l,A,o.done,o.value)})}}function a(i,o,l,A){Promise.resolve(A).then(function(c){i({value:c,done:l})},o)}}function KC(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var EF=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},qx=function(t){return qx=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},qx(t)};function $C(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=qx(t),n=0;n<r.length;n++)r[n]!=="default"&&ug(e,t,r[n]);return EF(e,t),e}function GC(t){return t&&t.__esModule?t:{default:t}}function VC(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function WC(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function qC(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function JC(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var FF=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function YC(t){function e(i){t.error=t.hasError?new FF(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(o){return e(o),a()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function XC(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,o){return n?e?".jsx":".js":a&&(!i||!o)?r:a+i+"."+o.toLowerCase()+"js"}):t}const UF={__extends:_C,__assign:vf,__rest:oc,__decorate:SC,__param:EC,__esDecorate:FC,__runInitializers:UC,__propKey:LC,__setFunctionName:QC,__metadata:IC,__awaiter:kt,__generator:PC,__createBinding:ug,__exportStar:TC,__values:kf,__read:Gb,__spread:DC,__spreadArrays:zC,__spreadArray:OC,__await:YA,__asyncGenerator:RC,__asyncDelegator:MC,__asyncValues:HC,__makeTemplateObject:KC,__importStar:$C,__importDefault:GC,__classPrivateFieldGet:VC,__classPrivateFieldSet:WC,__classPrivateFieldIn:qC,__addDisposableResource:JC,__disposeResources:YC,__rewriteRelativeImportExtension:XC},LF=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:JC,get __assign(){return vf},__asyncDelegator:MC,__asyncGenerator:RC,__asyncValues:HC,__await:YA,__awaiter:kt,__classPrivateFieldGet:VC,__classPrivateFieldIn:qC,__classPrivateFieldSet:WC,__createBinding:ug,__decorate:SC,__disposeResources:YC,__esDecorate:FC,__exportStar:TC,__extends:_C,__generator:PC,__importDefault:GC,__importStar:$C,__makeTemplateObject:KC,__metadata:IC,__param:EC,__propKey:LC,__read:Gb,__rest:oc,__rewriteRelativeImportExtension:XC,__runInitializers:UC,__setFunctionName:QC,__spread:DC,__spreadArray:OC,__spreadArrays:zC,__values:kf,default:UF},Symbol.toStringTag,{value:"Module"})),QF=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Vb extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class IF extends Vb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class O1 extends Vb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class R1 extends Vb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jx||(Jx={}));class PF{constructor(e,{headers:r={},customFetch:n,region:a=Jx.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=QF(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return kt(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:A,body:c,signal:d,timeout:h}=n;let p={},{region:u}=n;u||(u=this.region);const y=new URL(`${this.url}/${r}`);u&&u!=="any"&&(p["x-region"]=u,y.searchParams.set("forceFunctionRegion",u));let b;c&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",b=c):typeof c=="string"?(p["Content-Type"]="text/plain",b=c):typeof FormData<"u"&&c instanceof FormData?b=c:(p["Content-Type"]="application/json",b=JSON.stringify(c)):b=c;let v=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(v=o.signal,d.addEventListener("abort",()=>o.abort())):v=o.signal);const g=yield this.fetch(y.toString(),{method:A||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:b,signal:v}).catch(N=>{throw new IF(N)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new O1(g);if(!g.ok)throw new R1(g);let w=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return w==="application/json"?k=yield g.json():w==="application/octet-stream"||w==="application/pdf"?k=yield g.blob():w==="text/event-stream"?k=g:w==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(l){return{data:null,error:l,response:l instanceof R1||l instanceof O1?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Zn={};const lc=nS(LF);var Qh={},Ih={},Ph={},Th={},Dh={},zh={},M1;function ZC(){if(M1)return zh;M1=1,Object.defineProperty(zh,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return zh.default=t,zh}var H1;function ej(){if(H1)return Dh;H1=1,Object.defineProperty(Dh,"__esModule",{value:!0});const e=lc.__importDefault(ZC());class r{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async A=>{var c,d,h,p;let u=null,y=null,b=null,v=A.status,g=A.statusText;if(A.ok){if(this.method!=="HEAD"){const N=await A.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?y=N:y=JSON.parse(N))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),k=(h=A.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&k&&k.length>1&&(b=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(u={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,b=null,v=406,g="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const w=await A.text();try{u=JSON.parse(w),Array.isArray(u)&&A.status===404&&(y=[],u=null,v=200,g="OK")}catch{A.status===404&&w===""?(v=204,g="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((p=u==null?void 0:u.details)===null||p===void 0)&&p.includes("0 rows"))&&(u=null,v=200,g="OK"),u&&this.shouldThrowOnError)throw new e.default(u)}return{error:u,data:y,count:b,status:v,statusText:g}});return this.shouldThrowOnError||(l=l.catch(A=>{var c,d,h,p,u,y;let b="";const v=A==null?void 0:A.cause;if(v){const g=(c=v==null?void 0:v.message)!==null&&c!==void 0?c:"",m=(d=v==null?void 0:v.code)!==null&&d!==void 0?d:"";b=`${(h=A==null?void 0:A.name)!==null&&h!==void 0?h:"FetchError"}: ${A==null?void 0:A.message}`,b+=`

Caused by: ${(p=v==null?void 0:v.name)!==null&&p!==void 0?p:"Error"}: ${g}`,m&&(b+=` (${m})`),v!=null&&v.stack&&(b+=`
${v.stack}`)}else b=(u=A==null?void 0:A.stack)!==null&&u!==void 0?u:"";return{error:{message:`${(y=A==null?void 0:A.name)!==null&&y!==void 0?y:"FetchError"}: ${A==null?void 0:A.message}`,details:b,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return Dh.default=r,Dh}var K1;function tj(){if(K1)return Th;K1=1,Object.defineProperty(Th,"__esModule",{value:!0});const e=lc.__importDefault(ej());class r extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:A=l}={}){const c=A?`${A}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const A=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(A,`${a}`),this.url.searchParams.set(c,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:A=!1,format:c="text"}={}){var d;const h=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,A?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Th.default=r,Th}var $1;function Wb(){if($1)return Ph;$1=1,Object.defineProperty(Ph,"__esModule",{value:!0});const e=lc.__importDefault(tj()),r=new RegExp("[,()]");class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(A=>typeof A=="string"&&r.test(A)?`"${A}"`:`${A}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:A}={}){let c="";A==="plain"?c="pl":A==="phrase"?c="ph":A==="websearch"&&(c="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const A=l?`${l}.or`:"or";return this.url.searchParams.append(A,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return Ph.default=n,Ph}var G1;function rj(){if(G1)return Ih;G1=1,Object.defineProperty(Ih,"__esModule",{value:!0});const e=lc.__importDefault(Wb());class r{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},A=o?"HEAD":"GET";let c=!1;const d=(a??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:A,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const A="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const c=a.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:A=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),A||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((p,u)=>p.concat(Object.keys(u)),[]);if(h.length>0){const p=[...new Set(h)].map(u=>`"${u}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Ih.default=r,Ih}var V1;function TF(){if(V1)return Qh;V1=1,Object.defineProperty(Qh,"__esModule",{value:!0});const t=lc,e=t.__importDefault(rj()),r=t.__importDefault(Wb());class n{constructor(i,{headers:o={},schema:l,fetch:A}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=A}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:A=!1,count:c}={}){var d;let h;const p=new URL(`${this.url}/rpc/${i}`);let u;l||A?(h=l?"HEAD":"GET",Object.entries(o).filter(([b,v])=>v!==void 0).map(([b,v])=>[b,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([b,v])=>{p.searchParams.append(b,v)})):(h="POST",u=o);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new r.default({method:h,url:p,headers:y,schema:this.schemaName,body:u,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Qh.default=n,Qh}Object.defineProperty(Zn,"__esModule",{value:!0});var nj=Zn.PostgrestError=hj=Zn.PostgrestBuilder=dj=Zn.PostgrestTransformBuilder=Aj=Zn.PostgrestFilterBuilder=oj=Zn.PostgrestQueryBuilder=sj=Zn.PostgrestClient=void 0;const Ac=lc,aj=Ac.__importDefault(TF());var sj=Zn.PostgrestClient=aj.default;const ij=Ac.__importDefault(rj());var oj=Zn.PostgrestQueryBuilder=ij.default;const lj=Ac.__importDefault(Wb());var Aj=Zn.PostgrestFilterBuilder=lj.default;const cj=Ac.__importDefault(tj());var dj=Zn.PostgrestTransformBuilder=cj.default;const uj=Ac.__importDefault(ej());var hj=Zn.PostgrestBuilder=uj.default;const fj=Ac.__importDefault(ZC());nj=Zn.PostgrestError=fj.default;var gj=Zn.default={PostgrestClient:aj.default,PostgrestQueryBuilder:ij.default,PostgrestFilterBuilder:lj.default,PostgrestTransformBuilder:cj.default,PostgrestBuilder:uj.default,PostgrestError:fj.default};const DF=aB({__proto__:null,get PostgrestBuilder(){return hj},get PostgrestClient(){return sj},get PostgrestError(){return nj},get PostgrestFilterBuilder(){return Aj},get PostgrestQueryBuilder(){return oj},get PostgrestTransformBuilder(){return dj},default:gj},[Zn]),{PostgrestClient:zF,PostgrestQueryBuilder:CH,PostgrestFilterBuilder:jH,PostgrestTransformBuilder:NH,PostgrestBuilder:_H,PostgrestError:SH}=gj||DF;class OF{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const RF="2.84.0",MF=`realtime-js/${RF}`,pj="1.0.0",HF="2.0.0",W1=pj,Yx=1e4,KF=1e3,$F=100;var dl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(dl||(dl={}));var An;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(An||(An={}));var gs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gs||(gs={}));var Xx;(function(t){t.websocket="websocket"})(Xx||(Xx={}));var ul;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ul||(ul={}));class GF{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n,a,i;const o=e.topic,l=(r=e.ref)!==null&&r!==void 0?r:"",A=(n=e.join_ref)!==null&&n!==void 0?n:"",c=e.payload.event,d=(i=(a=e.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+A.length+l.length+o.length+c.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let u=new DataView(p),y=0;u.setUint8(y++,this.KINDS.userBroadcastPush),u.setUint8(y++,A.length),u.setUint8(y++,l.length),u.setUint8(y++,o.length),u.setUint8(y++,c.length),u.setUint8(y++,this.BINARY_ENCODING),Array.from(A,v=>u.setUint8(y++,v.charCodeAt(0))),Array.from(l,v=>u.setUint8(y++,v.charCodeAt(0))),Array.from(o,v=>u.setUint8(y++,v.charCodeAt(0))),Array.from(c,v=>u.setUint8(y++,v.charCodeAt(0)));var b=new Uint8Array(p.byteLength+d.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(d),p.byteLength),b.buffer}_encodeJsonUserBroadcastPush(e){var r,n,a,i;const o=e.topic,l=(r=e.ref)!==null&&r!==void 0?r:"",A=(n=e.join_ref)!==null&&n!==void 0?n:"",c=e.payload.event,d=(i=(a=e.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},p=new TextEncoder().encode(JSON.stringify(d)).buffer,u=this.USER_BROADCAST_PUSH_META_LENGTH+A.length+l.length+o.length+c.length,y=new ArrayBuffer(this.HEADER_LENGTH+u);let b=new DataView(y),v=0;b.setUint8(v++,this.KINDS.userBroadcastPush),b.setUint8(v++,A.length),b.setUint8(v++,l.length),b.setUint8(v++,o.length),b.setUint8(v++,c.length),b.setUint8(v++,this.JSON_ENCODING),Array.from(A,m=>b.setUint8(v++,m.charCodeAt(0))),Array.from(l,m=>b.setUint8(v++,m.charCodeAt(0))),Array.from(o,m=>b.setUint8(v++,m.charCodeAt(0))),Array.from(c,m=>b.setUint8(v++,m.charCodeAt(0)));var g=new Uint8Array(y.byteLength+p.byteLength);return g.set(new Uint8Array(y),0),g.set(new Uint8Array(p),y.byteLength),g.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[a,i,o,l,A]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:A})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodeUserBroadcast(e,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let A=this.HEADER_LENGTH+4;const c=n.decode(e.slice(A,A+a));A=A+a;const d=n.decode(e.slice(A,A+i));A=A+i;const h=n.decode(e.slice(A,A+o));A=A+o;const p=e.slice(A,e.byteLength),u=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,y={type:this.BROADCAST_EVENT,event:d,payload:u};return o>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class mj{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pr||(pr={}));const q1=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=VF(o,t,e,a),i),{}):{}},VF=(t,e,r,n)=>{const a=e.find(l=>l.name===t),i=a==null?void 0:a.type,o=r[t];return i&&!n.includes(i)?xj(i,o):Zx(o)},xj=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return YF(e,r)}switch(t){case pr.bool:return WF(e);case pr.float4:case pr.float8:case pr.int2:case pr.int4:case pr.int8:case pr.numeric:case pr.oid:return qF(e);case pr.json:case pr.jsonb:return JF(e);case pr.timestamp:return XF(e);case pr.abstime:case pr.date:case pr.daterange:case pr.int4range:case pr.int8range:case pr.money:case pr.reltime:case pr.text:case pr.time:case pr.timestamptz:case pr.timetz:case pr.tsrange:case pr.tstzrange:return Zx(e);default:return Zx(e)}},Zx=t=>t,WF=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},qF=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},JF=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},YF=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>xj(e,l))}return t},XF=t=>typeof t=="string"?t.replace(" ","T"):t,yj=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Wp{constructor(e,r,n={},a=Yx){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var J1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(J1||(J1={}));class Nd{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nd.syncState(this.state,a,i,o),this.pendingDiffs.forEach(A=>{this.state=Nd.syncDiff(this.state,A,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Nd.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},A={};return this.map(i,(c,d)=>{o[c]||(A[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const p=d.map(v=>v.presence_ref),u=h.map(v=>v.presence_ref),y=d.filter(v=>u.indexOf(v.presence_ref)<0),b=h.filter(v=>p.indexOf(v.presence_ref)<0);y.length>0&&(l[c]=y),b.length>0&&(A[c]=b)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:A},n,a)}static syncDiff(e,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,A)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(A),d.length>0){const h=e[l].map(u=>u.presence_ref),p=d.filter(u=>h.indexOf(u.presence_ref)<0);e[l].unshift(...p)}n(l,d,A)}),this.map(o,(l,A)=>{let c=e[l];if(!c)return;const d=A.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,a(l,c,A),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Y1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Y1||(Y1={}));var _d;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_d||(_d={}));var pi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pi||(pi={}));class qb{constructor(e,r={config:{}},n){var a,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=An.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Wp(this,gs.join,this.params,this.timeout),this.rejoinTimer=new mj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=An.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=An.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gs.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Nd(this),this.broadcastEndpointURL=yj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==An.closed){const{config:{broadcast:o,presence:l,private:A}}=this.params,c=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[_d.PRESENCE]&&this.bindings[_d.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:A};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(u=>e==null?void 0:e(pi.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(pi.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var y;if(this.socket.setAuth(),u===void 0){e==null||e(pi.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,v=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,g=[];for(let m=0;m<v;m++){const w=b[m],{filter:{event:k,schema:N,table:S,filter:U}}=w,Q=u&&u[m];if(Q&&Q.event===k&&Q.schema===N&&Q.table===S&&Q.filter===U)g.push(Object.assign(Object.assign({},w),{id:Q.id}));else{this.unsubscribe(),this.state=An.errored,e==null||e(pi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(pi.SUBSCRIBED);return}}).receive("error",u=>{this.state=An.errored,e==null||e(pi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===An.joined&&e===_d.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let A=l.statusText;try{const c=await l.json();A=c.error||c.message||A}catch{}return Promise.reject(new Error(A))}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,A;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||A===void 0)&&A.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=An.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gs.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Wp(this,gs.leave,{},e),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=An.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Wp(this,e,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$F){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:A,leave:c,join:d}=gs;if(n&&[l,A,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(u=>{var y,b,v;return((y=u.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(b=u.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(u=>u.callback(p,n)):(i=this.bindings[o])===null||i===void 0||i.filter(u=>{var y,b,v,g,m,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in u){const k=u.id,N=(y=u.filter)===null||y===void 0?void 0:y.event;return k&&((b=r.ids)===null||b===void 0?void 0:b.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(m=(g=u==null?void 0:u.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return k==="*"||k===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return u.type.toLocaleLowerCase()===o}).map(u=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:b,table:v,commit_timestamp:g,type:m,errors:w}=y;p=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:g,eventType:m,new:{},old:{},errors:w}),this._getPayloadRecords(y))}u.callback(p,n)})}_isClosed(){return this.state===An.closed}_isJoined(){return this.state===An.joined}_isJoining(){return this.state===An.joining}_isLeaving(){return this.state===An.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&qb.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gs.close,{},e)}_onError(e){this._on(gs.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=An.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=q1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=q1(e.columns,e.old_record)),r}}const qp=()=>{},Oh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZF=[1e3,2e3,5e3,1e4],eU=1e4,tU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rU{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yx,this.transport=null,this.heartbeatIntervalMs=Oh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qp,this.ref=0,this.reconnectTimer=null,this.vsn=W1,this.logger=qp,this.conn=null,this.sendBuffer=[],this.serializer=new GF,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Xx.websocket}`,this.httpEndpoint=yj(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=OF.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case dl.connecting:return ul.Connecting;case dl.open:return ul.Open;case dl.closing:return ul.Closing;default:return ul.Closed}}isConnected(){return this.connectionState()===ul.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new qb(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var A;(A=this.conn)===null||A===void 0||A.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(KF,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Oh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",A=i.status||"";this.log("receive",`${A} ${n} ${a} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===dl.open||this.conn.readyState===dl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gs.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([tU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:MF};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(gs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new mj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,a,i,o,l,A,c,d,h,p,u;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Yx,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Oh.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:qp,this.vsn=(A=e==null?void 0:e.vsn)!==null&&A!==void 0?A:W1,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:y=>ZF[y-1]||eU,this.vsn){case pj:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(y,b)=>b(JSON.stringify(y)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(y,b)=>b(JSON.parse(y));break;case HF:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Jb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class nU extends Jb{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ey extends Jb{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Yb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),aU=()=>Response,ty=t=>{if(Array.isArray(t))return t.map(r=>ty(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=ty(n)}),e},sU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Jp=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},iU=(t,e,r)=>kt(void 0,void 0,void 0,function*(){const n=yield aU();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const i=t.status||500,o=(a==null?void 0:a.statusCode)||i+"";e(new nU(Jp(a),i,o))}).catch(a=>{e(new ey(Jp(a),a))}):e(new ey(Jp(t),t))}),oU=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?a:(sU(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function Bu(t,e,r,n,a,i){return kt(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,oU(e,n,a,i)).then(A=>{if(!A.ok)throw A;return n!=null&&n.noResolveJson?A:A.json()}).then(A=>o(A)).catch(A=>iU(A,l,n))})})}function iu(t,e,r,n){return kt(this,void 0,void 0,function*(){return Bu(t,"GET",e,r,n)})}function hs(t,e,r,n,a){return kt(this,void 0,void 0,function*(){return Bu(t,"POST",e,n,a,r)})}function ry(t,e,r,n,a){return kt(this,void 0,void 0,function*(){return Bu(t,"PUT",e,n,a,r)})}function lU(t,e,r,n){return kt(this,void 0,void 0,function*(){return Bu(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Xb(t,e,r,n,a){return kt(this,void 0,void 0,function*(){return Bu(t,"DELETE",e,n,a,r)})}class AU{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return kt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nr(e))return{data:null,error:e};throw e}})}}var bj;class cU{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[bj]="BlobDownloadBuilder",this.promise=null}asStream(){return new AU(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return kt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nr(e))return{data:null,error:e};throw e}})}}bj=Symbol.toStringTag;const dU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},X1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class uU{constructor(e,r={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Yb(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,a){return kt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},X1),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const A=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),A&&i.append("metadata",this.encodeMetadata(A)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),A&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(A))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,A&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(A))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),h=yield(e=="PUT"?ry:hs)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}upload(e,r,n){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return kt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let A;const c=Object.assign({upsert:X1.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(A=new FormData,A.append("cacheControl",c.cacheControl),A.append("",n)):typeof FormData<"u"&&n instanceof FormData?(A=n,A.append("cacheControl",c.cacheControl)):(A=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield ry(this.fetch,l.toString(),A,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(Nr(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(e,r){return kt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield hs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Jb("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}update(e,r,n){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return kt(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}copy(e,r,n){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield hs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return kt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield hs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return kt(this,void 0,void 0,function*(){try{const a=yield hs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),A=()=>iu(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new cU(A,this.shouldThrowOnError)}info(e){return kt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield iu(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ty(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}exists(e){return kt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield lU(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n)&&n instanceof ey){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});A!==""&&a.push(A);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}list(e,r,n){return kt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},dU),r),{prefix:e||""});return{data:yield hs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}listV2(e,r){return kt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield hs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const wj="2.84.0",vj={"X-Client-Info":`storage-js/${wj}`};class hU{constructor(e,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vj),r),this.fetch=Yb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return kt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield iu(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}getBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield iu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}createBucket(e){return kt(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield hs(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return kt(this,void 0,void 0,function*(){try{return{data:yield ry(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class fU{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vj),r),this.fetch=Yb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBuckets(e){return kt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield iu(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}}const Zb={"X-Client-Info":`storage-js/${wj}`,"Content-Type":"application/json"};class kj extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Sa(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Yp extends kj{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gU extends kj{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Z1;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Z1||(Z1={}));const ew=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),pU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},e2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),mU=(t,e,r)=>kt(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";e(new Yp(e2(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new Yp(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new Yp(l,a,o))}}else e(new gU(e2(t),t))}),xU=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(pU(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function yU(t,e,r,n,a,i){return kt(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,xU(e,n,a,i)).then(A=>{if(!A.ok)throw A;if(n!=null&&n.noResolveJson)return A;const c=A.headers.get("content-type");return!c||!c.includes("application/json")?{}:A.json()}).then(A=>o(A)).catch(A=>mU(A,l,n))})})}function Ea(t,e,r,n,a){return kt(this,void 0,void 0,function*(){return yU(t,"POST",e,n,a,r)})}class bU{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zb),r),this.fetch=ew(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return kt(this,void 0,void 0,function*(){try{return{data:(yield Ea(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}getIndex(e,r){return kt(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sa(n))return{data:null,error:n};throw n}})}listIndexes(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return kt(this,void 0,void 0,function*(){try{return{data:(yield Ea(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sa(n))return{data:null,error:n};throw n}})}}class wU{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zb),r),this.fetch=ew(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return kt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ea(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}getVectors(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}listVectors(e){return kt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ea(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}queryVectors(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}deleteVectors(e){return kt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ea(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}}class vU{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zb),r),this.fetch=ew(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:(yield Ea(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}getBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}listBuckets(){return kt(this,arguments,void 0,function*(e={}){try{return{data:yield Ea(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}deleteBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:(yield Ea(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sa(r))return{data:null,error:r};throw r}})}}class kU extends vU{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new BU(this.url,this.headers,e,this.fetch)}}class BU extends bU{constructor(e,r,n,a){super(e,r,a),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return kt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return kt(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return kt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return kt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new CU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class CU extends wU{constructor(e,r,n,a,i){super(e,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return kt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return kt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return kt(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return kt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return kt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class jU extends hU{constructor(e,r={},n,a){super(e,r,n,a)}from(e){return new uU(this.url,this.headers,e,this.fetch)}get vectors(){return new kU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fU(this.url+"/iceberg",this.headers,this.fetch)}}const NU="2.84.0";let cd="";typeof Deno<"u"?cd="deno":typeof document<"u"?cd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cd="react-native":cd="node";const _U={"X-Client-Info":`supabase-js-${cd}/${NU}`},SU={headers:_U},EU={schema:"public"},FU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UU={},LU=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),QU=()=>Headers,IU=(t,e,r)=>{const n=LU(r),a=QU();return async(i,o)=>{var l;const A=(l=await e())!==null&&l!==void 0?l:t;let c=new a(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${A}`),n(i,Object.assign(Object.assign({},o),{headers:c}))}};function PU(t){return t.endsWith("/")?t:t+"/"}function TU(t,e){var r,n;const{db:a,auth:i,realtime:o,global:l}=t,{db:A,auth:c,realtime:d,global:h}=e,p={db:Object.assign(Object.assign({},A),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function DU(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(PU(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Bj="2.84.0",dA=30*1e3,ny=3,Xp=ny*dA,zU="http://localhost:9999",OU="supabase.auth.token",RU={"X-Client-Info":`gotrue-js/${Bj}`},ay="X-Supabase-Api-Version",Cj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},MU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HU=10*60*1e3;class ou extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function jt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class KU extends ou{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function $U(t){return jt(t)&&t.name==="AuthApiError"}class hl extends ou{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Mo extends ou{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class ja extends Mo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GU(t){return jt(t)&&t.name==="AuthSessionMissingError"}class Jl extends Mo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rh extends Mo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mh extends Mo{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function VU(t){return jt(t)&&t.name==="AuthImplicitGrantRedirectError"}class t2 extends Mo{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sy extends Mo{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Zp(t){return jt(t)&&t.name==="AuthRetryableFetchError"}class r2 extends Mo{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class iy extends Mo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),n2=` 	
\r=`.split(""),WU=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<n2.length;e+=1)t[n2[e].charCodeAt(0)]=-2;for(let e=0;e<Bf.length;e+=1)t[Bf[e].charCodeAt(0)]=e;return t})();function a2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bf[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bf[n]),e.queuedBits-=6}}function jj(t,e,r){const n=WU[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function s2(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{YU(o,n,r)};for(let o=0;o<t.length;o+=1)jj(t.charCodeAt(o),a,i);return e.join("")}function qU(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function JU(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}qU(n,e)}}function YU(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function TA(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)jj(t.charCodeAt(a),r,n);return new Uint8Array(e)}function XU(t){const e=[];return JU(t,r=>e.push(r)),new Uint8Array(e)}function yl(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>a2(a,r,n)),a2(null,r,n),e.join("")}function ZU(t){return Math.round(Date.now()/1e3)+t}function e8(){return Symbol("auth-callback")}const jn=()=>typeof window<"u"&&typeof document<"u",al={tested:!1,writable:!1},Nj=()=>{if(!jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(al.tested)return al.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),al.tested=!0,al.writable=!0}catch{al.tested=!0,al.writable=!1}return al.writable};function t8(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const _j=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),r8=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",uA=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},sl=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Yi=async(t,e)=>{await t.removeItem(e)};class hg{constructor(){this.promise=new hg.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}hg.promiseConstructor=Promise;function em(t){const e=t.split(".");if(e.length!==3)throw new iy("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!MU.test(e[n]))throw new iy("JWT not in base64url format");return{header:JSON.parse(s2(e[0])),payload:JSON.parse(s2(e[1])),signature:TA(e[2]),raw:{header:e[0],payload:e[1]}}}async function n8(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function a8(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function s8(t){return("0"+t.toString(16)).substr(-2)}function i8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,s8).join("")}async function o8(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function l8(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await o8(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yl(t,e,r=!1){const n=i8();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await uA(t,`${e}-code-verifier`,a);const i=await l8(n);return[i,n===i?"plain":"s256"]}const A8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c8(t){const e=t.headers.get(ay);if(!e||!e.match(A8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function d8(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function u8(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xl(t){if(!h8.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tm(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function f8(t,e){return new Proxy(t,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,a)}})}function i2(t){return JSON.parse(JSON.stringify(t))}const Al=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g8=[502,503,504];async function o2(t){var e;if(!r8(t))throw new sy(Al(t),0);if(g8.includes(t.status))throw new sy(Al(t),t.status);let r;try{r=await t.json()}catch(i){throw new hl(Al(i),i)}let n;const a=c8(t);if(a&&a.getTime()>=Cj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new r2(Al(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ja}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new r2(Al(r),t.status,r.weak_password.reasons);throw new KU(Al(r),t.status||500,n)}const p8=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function _t(t,e,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[ay]||(i[ay]=Cj["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",A=await m8(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(A):{data:Object.assign({},A),error:null}}async function m8(t,e,r,n,a,i){const o=p8(e,n,a,i);let l;try{l=await t(r,Object.assign({},o))}catch(A){throw console.error(A),new sy(Al(A),0)}if(l.ok||await o2(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(A){await o2(A)}}function cs(t){var e;let r=null;b8(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ZU(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function l2(t){const e=cs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function lo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function x8(t){return{data:t,error:null}}function y8(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=t,o=oc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},A=Object.assign({},o);return{data:{properties:l,user:A},error:null}}function A2(t){return t}function b8(t){return t.access_token&&t.refresh_token&&t.expires_in}const rm=["global","local","others"];class w8{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=_j(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=rm[0]){if(rm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rm.join(", ")}`);try{return await _t(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(jt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await _t(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:lo})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=oc(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await _t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:y8,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(jt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await _t(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:lo})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,i,o,l,A;try{const c={nextPage:null,lastPage:0,total:0},d=await _t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:A2});if(d.error)throw d.error;const h=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(A=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&A!==void 0?A:[];return u.length>0&&(u.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=b}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(jt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Xl(e);try{return await _t(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:lo})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Xl(e);try{return await _t(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:lo})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Xl(e);try{return await _t(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:lo})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Xl(e.userId);try{const{data:r,error:n}=await _t(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Xl(e.userId),Xl(e.id);try{return{data:await _t(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,a,i,o,l,A;try{const c={nextPage:null,lastPage:0,total:0},d=await _t(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:A2});if(d.error)throw d.error;const h=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(A=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&A!==void 0?A:[];return u.length>0&&(u.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=b}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(jt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await _t(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await _t(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await _t(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await _t(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await _t(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}}function c2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Zl={debug:!!(globalThis&&Nj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class v8 extends Sj{}async function k8(t,e,r){Zl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Zl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Zl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{Zl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Zl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new v8(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Zl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function B8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ej(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function C8(t){return parseInt(t,16)}function j8(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function N8(t){var e;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:A,resources:c,scheme:d,uri:h,version:p}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const u=Ej(t.address),y=d?`${d}://${n}`:n,b=t.statement?`${t.statement}
`:"",v=`${y} wants you to sign in with your Ethereum account:
${u}

${b}`;let g=`URI: ${h}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(g+=`
Expiration Time: ${a.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),A&&(g+=`
Request ID: ${A}`),c){let m=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);m+=`
- ${w}`}g+=m}return`${v}
${g}`}class Jr extends Error{constructor({message:e,code:r,cause:n,name:a}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Cf extends Jr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function _8({error:t,options:e}){var r,n,a;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Jr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Jr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Jr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Jr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Jr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Jr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Jr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Fj(o)){if(i.rp.id!==o)return new Jr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Jr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function S8({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Jr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Fj(n)){if(r.rpId!==n)return new Jr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class E8{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const F8=new E8;function U8(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,a=oc(t,["challenge","user","excludeCredentials"]),i=TA(e).buffer,o=Object.assign(Object.assign({},r),{id:TA(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let A=0;A<n.length;A++){const c=n[A];l.excludeCredentials[A]=Object.assign(Object.assign({},c),{id:TA(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function L8(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=oc(t,["challenge","allowCredentials"]),a=TA(e).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:TA(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Q8(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:yl(new Uint8Array(t.response.attestationObject)),clientDataJSON:yl(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I8(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:yl(new Uint8Array(a.authenticatorData)),clientDataJSON:yl(new Uint8Array(a.clientDataJSON)),signature:yl(new Uint8Array(a.signature)),userHandle:a.userHandle?yl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Fj(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function d2(){var t,e;return!!(jn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function P8(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cf("Browser returned unexpected credential type",e)}:{data:null,error:new Cf("Empty credential response",e)}}catch(e){return{data:null,error:_8({error:e,options:t})}}}async function T8(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cf("Browser returned unexpected credential type",e)}:{data:null,error:new Cf("Empty credential response",e)}}catch(e){return{data:null,error:S8({error:e,options:t})}}}const D8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},z8={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function jf(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of t)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const l=n[i];e(l)?n[i]=jf(l,o):n[i]=jf(o)}else n[i]=o}return n}function O8(t,e){return jf(D8,t,e||{})}function R8(t,e){return jf(z8,t,e||{})}class M8{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const A=a??F8.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=O8(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await P8({publicKey:c,signal:A});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=R8(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await T8(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:A}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return jt(o)?{data:null,error:o}:{data:null,error:new hl("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new ou("rpId is required for WebAuthn authentication")};try{if(!d2())return{data:null,error:new hl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:A}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:A.type,rpId:r,rpOrigins:n,credential_response:A.credential_response}})}catch(o){return jt(o)?{data:null,error:o}:{data:null,error:new hl("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new ou("rpId is required for WebAuthn registration")};try{if(!d2())return{data:null,error:new hl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:A,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return A?this._verify({factorId:o.id,challengeId:A.challengeId,webauthn:{rpId:r,rpOrigins:n,type:A.webauthn.type,credential_response:A.webauthn.credential_response}}):{data:null,error:c}}catch(o){return jt(o)?{data:null,error:o}:{data:null,error:new hl("Unexpected error in register",o)}}}}B8();const H8={url:zU,storageKey:OU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function u2(t,e,r){return await r()}const eA={};class lu{get jwks(){var e,r;return(r=(e=eA[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){eA[this.storageKey]=Object.assign(Object.assign({},eA[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=eA[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){eA[this.storageKey]=Object.assign(Object.assign({},eA[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},H8),e);if(this.storageKey=i.storageKey,this.instanceID=(r=lu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,lu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&jn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new w8({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=_j(i.fetch),this.lock=i.lock||u2,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:jn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=k8:this.lock=u2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new M8(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Nj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=c2(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=c2(this.memoryStorage)),jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Bj}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(jn()&&(r=t8(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),jn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),VU(i)){const A=(e=i.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return jt(r)?this._returnResult({error:r}):this._returnResult({error:new hl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const i=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:cs}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const A=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:c,session:A},error:null})}catch(i){if(jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,a;try{let i;if("email"in e){const{email:d,password:h,options:p}=e;let u=null,y=null;this.flowType==="pkce"&&([u,y]=await Yl(this.storage,this.storageKey)),i=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:u,code_challenge_method:y},xform:cs})}else if("phone"in e){const{phone:d,password:h,options:p}=e;i=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:cs})}else throw new Rh("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const A=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:c,session:A},error:null})}catch(i){if(jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:l2})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:l2})}else throw new Rh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Jl;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,a,i,o,l,A,c,d,h,p;let u,y;if("message"in e)u=e.message,y=e.signature;else{const{chain:b,wallet:v,statement:g,options:m}=e;let w;if(jn())if(typeof v=="object")w=v;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")w=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const k=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),N=await w.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Ej(N[0]);let U=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!U){const L=await w.request({method:"eth_chainId"});U=C8(L)}const Q={domain:k.host,address:S,statement:g,uri:k.href,version:"1",chainId:U,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(A=m==null?void 0:m.signInWithEthereum)===null||A===void 0?void 0:A.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};u=N8(Q),y=await w.request({method:"personal_sign",params:[j8(u),S]})}try{const{data:b,error:v}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:u,signature:y},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:cs});if(v)throw v;if(!b||!b.session||!b.user){const g=new Jl;return this._returnResult({data:{user:null,session:null},error:g})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:v})}catch(b){if(jt(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var r,n,a,i,o,l,A,c,d,h,p,u;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:v,wallet:g,statement:m,options:w}=e;let k;if(jn())if(typeof g=="object")k=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))k=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const N=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const S=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),m?{statement:m}:null));let U;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")U=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)U=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)y=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),b=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((A=w==null?void 0:w.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const S=await k.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:v,error:g}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:yl(b)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(u=e.options)===null||u===void 0?void 0:u.captchaToken}}:null),xform:cs});if(g)throw g;if(!v||!v.session||!v.user){const m=new Jl;return this._returnResult({data:{user:null,session:null},error:m})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:g})}catch(v){if(jt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const r=await sl(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:cs});if(await Yi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Jl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(jt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=e,l=await _t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:cs}),{data:A,error:c}=l;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!A||!A.session||!A.user){const d=new Jl;return this._returnResult({data:{user:null,session:null},error:d})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:A,error:c})}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,a,i,o;try{if("email"in e){const{email:l,options:A}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Yl(this.storage,this.storageKey));const{error:h}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},create_user:(n=A==null?void 0:A.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:A==null?void 0:A.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:A}=e,{data:c,error:d}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=A==null?void 0:A.data)!==null&&a!==void 0?a:{},create_user:(i=A==null?void 0:A.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(o=A==null?void 0:A.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Rh("You must provide either an email or phone number.")}catch(l){if(jt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await _t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:cs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const A=o.session,c=o.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),this._returnResult({data:{user:c,session:A},error:null})}catch(a){if(jt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,n,a,i,o;try{let l=null,A=null;this.flowType==="pkce"&&([l,A]=await Yl(this.storage,this.storageKey));const c=await _t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:A}),headers:this.headers,xform:x8});return!((i=c.data)===null||i===void 0)&&i.url&&jn()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(l){if(jt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new ja;const{error:a}=await _t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(jt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:o}=await _t(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:o,error:l}=await _t(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Rh("You must provide either an email or phone number and a type")}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Xp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await sl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=tm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=f8(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:lo}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ja}:await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:lo})})}catch(r){if(jt(r))return GU(r)&&(await this._removeSession(),await Yi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new ja;const o=a.session;let l=null,A=null;this.flowType==="pkce"&&e.email!=null&&([l,A]=await Yl(this.storage,this.storageKey));const{data:c,error:d}=await _t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:A}),jwt:o.access_token,xform:lo});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(jt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ja;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=em(e.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return this._returnResult({data:{user:null,session:null},error:A});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:A}=await this._getUser(e.access_token);if(A)throw A;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(jt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ja;const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!jn())throw new Mh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new t2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new t2("No code detected.");const{data:m,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:A,token_type:c}=e;if(!i||!l||!o||!c)throw new Mh("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;A&&(p=parseInt(A));const u=p-d;u*1e3<=dA&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${u}s, should have been closer to ${h}s`);const y=p-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,d);const{data:b,error:v}=await this._getUser(i);if(v)throw v;const g={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:p,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(jt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await sl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!($U(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await Yi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=e8(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Yl(this.storage,this.storageKey,!0));try{return await _t(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(jt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,A,c,d;const{data:h,error:p}=i;if(p)throw p;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await _t(this.fetch,"GET",u,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return jn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(jt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:A,access_token:c,nonce:d}=e,h=await _t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:A,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:cs}),{data:p,error:u}=h;return u?this._returnResult({data:{user:null,session:null},error:u}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Jl}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:u}))}catch(a){if(jt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await _t(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await a8(async a=>(a>0&&await n8(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await _t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cs})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Zp(i)&&Date.now()+o-n<dA})}catch(n){if(this._debug(r,"error",n),jt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),jn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await sl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await uA(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:tm()}else if(a&&!a.user&&!a.user){const o=await sl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Yi(this.storage,this.storageKey+"-user"),await uA(this.storage,this.storageKey,a)):a.user=tm()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xp;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Xp}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Zp(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new ja;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new hg;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ja;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),jt(i)){const o={data:null,error:i};return Zp(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(A){i.push(A)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await uA(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=i2(a);await uA(this.storage,this.storageKey,i)}else{const a=i2(r);await uA(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Yi(this.storage,this.storageKey),await Yi(this.storage,this.storageKey+"-code-verifier"),await Yi(this.storage,this.storageKey+"-user"),this.userStorage&&await Yi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dA);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/dA);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${dA}ms, refresh threshold is ${ny} ticks`),a<=ny&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Sj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Yl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await _t(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:A,error:c}=await _t(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&A.type==="totp"&&(!((a=A==null?void 0:A.totp)===null||a===void 0)&&a.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),this._returnResult({data:A,error:null}))})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Q8(e.webauthn.credential_response):I8(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:A}=await _t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return A?this._returnResult({data:null,error:A}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:A}))})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await _t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:U8(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:L8(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=em(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await _t(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ja})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ja});const o=await _t(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&jn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ja});const o=await _t(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&jn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await _t(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ja})})}catch(e){if(jt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await _t(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new ja})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+HU>a)return n;const{data:i,error:o}=await _t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:u,error:y}=await this.getSession();if(y||!u.session)return this._returnResult({data:null,error:y});n=u.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:A}}=em(n);r!=null&&r.allowExpired||d8(i.exp);const c=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:u}=await this.getUser(n);if(u)throw u;return{data:{claims:i,header:a,signature:o},error:null}}const d=u8(a.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,XU(`${l}.${A}`)))throw new iy("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}}lu.nextInstanceID={};const K8=lu;class $8 extends K8{constructor(e){super(e)}}class G8{constructor(e,r,n){var a,i,o;this.supabaseUrl=e,this.supabaseKey=r;const l=DU(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const A=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:EU,realtime:UU,auth:Object.assign(Object.assign({},FU),{storageKey:A}),global:SU},d=TU(n??{},c);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=IU(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new zF(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new jU(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new PF(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:A,debug:c,throwOnError:d},h,p){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $8({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),h),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:A,debug:c,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new rU(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const V8=(t,e,r)=>new G8(t,e,r);function W8(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}W8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const q8="https://vsyxhwfnjznrmkgcinyx.supabase.co",J8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzeXhod2Zuanpucm1rZ2Npbnl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4Mzc1NjEsImV4cCI6MjA3OTQxMzU2MX0.GF4Iy9k-J6pBSwWKh2-HXc7bP7N9BSHjvnbXjc3BzKE",le=V8(q8,J8),Uj=C.createContext({permissions:[],appSettings:{},logoUrl:null,loading:!0});function Y8({children:t}){const[e,r]=C.useState([]),[n,a]=C.useState({members:!0,worship:!0,media:!0,atmosfera:!0,kids:!0,groups:!0}),[i,o]=C.useState(null),[l,A]=C.useState(!0);return C.useEffect(()=>{(async()=>{var d;try{const[h,p]=await Promise.all([le.from("app_settings").select("key, value"),le.from("app_permissions").select("role, resource, can_read")]);if(h.data){const u=h.data,y=(d=u.find(v=>v.key==="org_logo_url"))==null?void 0:d.value;y&&o(y);const b={...n};u.forEach(v=>{v.key==="module_members_enabled"&&(b.members=v.value==="true"),v.key==="module_worship_enabled"&&(b.worship=v.value==="true"),v.key==="module_media_enabled"&&(b.media=v.value==="true"),v.key==="module_atmosfera_enabled"&&(b.atmosfera=v.value==="true"),v.key==="module_kids_enabled"&&(b.kids=v.value==="true"),v.key==="module_groups_enabled"&&(b.groups=v.value==="true")}),a(b)}p.data&&r(p.data)}catch(h){console.error("Error fetching permissions:",h)}finally{A(!1)}})()},[]),s.jsx(Uj.Provider,{value:{permissions:e,appSettings:n,logoUrl:i,loading:l},children:t})}function Lj(){return C.useContext(Uj)}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),tt=(t,e)=>{const r=C.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:A,...c},d)=>C.createElement("svg",{ref:d,...X8,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Z8(t)}`,l].join(" "),...c},[...e.map(([h,p])=>C.createElement(h,p)),...Array.isArray(A)?A:[A]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=tt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=tt("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=tt("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=tt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=tt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=tt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=tt("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=tt("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=tt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=tt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=tt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=tt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=tt("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=tt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=tt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=tt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=tt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=tt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=tt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=tt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=tt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=tt("Columns",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"12",x2:"12",y1:"3",y2:"21",key:"1efggb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=tt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=tt("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=tt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=tt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=tt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=tt("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=tt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=tt("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=tt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=tt("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=tt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=tt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=tt("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=tt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=tt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=tt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=tt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=tt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=tt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=tt("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=tt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=tt("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=tt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=tt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=tt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=tt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=tt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=tt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=tt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=tt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=tt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=tt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=tt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=tt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=tt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=tt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=tt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=tt("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=tt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=tt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=tt("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=tt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=tt("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=tt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=tt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=tt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=tt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=tt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=tt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=tt("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=tt("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=tt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=tt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=tt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=tt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=tt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=tt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=tt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=tt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ho(){const[t,e]=C.useState(null),[r,n]=C.useState(!0);return C.useEffect(()=>{async function a(){try{const{data:{user:i}}=await le.auth.getUser();if(!i){e(null),n(!1);return}const o=localStorage.getItem("userRole");o&&(e(o),n(!1));const{data:l,error:A}=await le.from("app_users").select("role").eq("email",i.email).single();if(A)console.error("Error fetching user role:",A),o?e(o):(e("czlonek"),localStorage.setItem("userRole","czlonek"));else{const c=(l==null?void 0:l.role)||"czlonek";e(c),localStorage.setItem("userRole",c)}}catch(i){console.error("Error fetching user role:",i);const o=localStorage.getItem("userRole");e(o||"czlonek"),o||localStorage.setItem("userRole","czlonek")}finally{n(!1)}}a()},[]),{userRole:t,loading:r}}function UL(){const e=ic().pathname,{userRole:r}=Ho(),{permissions:n,appSettings:a,logoUrl:i}=Lj(),o=d=>{if(r==="superadmin"||r==="rada_starszych"&&d==="module:settings")return!0;const h=n.find(p=>p.role===r&&p.resource===d);return h?h.can_read===!0:!1},l={members:"module:members",worship:"module:worship",media:"module:media",atmosfera:"module:atmosfera",kids:"module:kids",groups:"module:homegroups",finance:"module:finance",teaching:"module:teaching",settings:"module:settings"},A=d=>a[d]&&o(l[d]),c=[{path:"/",icon:nw,label:"Programy",show:!0},{path:"/calendar",icon:en,label:"Kalendarz",show:!0},{path:"/members",icon:ta,label:"Czonkowie",show:A("members")},{path:"/worship",icon:Ms,label:"Grupa Uwielbienia",show:A("worship")},{path:"/media",icon:Mj,label:"MediaTeam",show:A("media")},{path:"/atmosfera",icon:rw,label:"Atmosfera Team",show:A("atmosfera")},{path:"/kids",icon:Nf,label:"Mae SchWro",show:A("kids")},{path:"/home-groups",icon:lL,label:"Grupy domowe",show:A("groups")},{path:"/finance",icon:Uo,label:"Finanse",show:o("module:finance")},{path:"/teaching",icon:Rs,label:"Nauczanie",show:o("module:teaching")}];return s.jsxs("div",{className:"w-64 bg-white/80 dark:bg-gray-800/90 backdrop-blur-xl border-r border-gray-200/50 dark:border-gray-700 shadow-lg flex flex-col transition-colors duration-300 h-full relative z-40",children:[s.jsx("div",{className:"p-6 border-b border-gray-200/50 dark:border-gray-700 flex justify-center items-center shrink-0",children:i?s.jsx("img",{src:i,alt:"Logo",className:"w-full max-h-32 object-contain rounded-md",onError:d=>{d.target.style.display="none"}}):s.jsx("div",{className:"w-full aspect-video bg-gradient-to-br from-pink-100 to-orange-100 dark:from-pink-900 dark:to-orange-900 rounded-xl flex items-center justify-center text-pink-600 dark:text-pink-300 font-bold text-4xl shadow-sm",children:"S"})}),s.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar mt-2",children:c.filter(d=>d.show).map(d=>{const h=e===d.path;return s.jsxs(T1,{to:d.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all group ${h?"bg-gradient-to-r from-pink-500 to-orange-500 text-white shadow-lg shadow-pink-500/30 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-gray-700 hover:text-pink-600 dark:hover:text-white"}`,children:[s.jsx(d.icon,{size:20,className:h?"text-white":"text-gray-400 group-hover:text-pink-500 dark:group-hover:text-white transition-colors"}),s.jsx("span",{className:"text-sm",children:d.label})]},d.path)})}),o("module:settings")&&s.jsx("div",{className:"p-4 border-t border-gray-200/50 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 shrink-0",children:s.jsxs(T1,{to:"/settings",className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all w-full ${e==="/settings"?"bg-gray-800 dark:bg-gray-900 text-white shadow-lg":"text-gray-600 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[s.jsx(Rj,{size:20}),s.jsx("span",{className:"text-sm font-medium",children:"Ustawienia"})]})})]})}function LL({user:t,darkMode:e,toggleTheme:r}){const[n,a]=C.useState(null);C.useEffect(()=>{(async()=>{if(t!=null&&t.email)try{const{data:A}=await le.from("app_users").select("full_name, avatar_url").eq("email",t.email).single();A&&a(A)}catch(A){console.error("Error fetching user profile:",A)}})()},[t==null?void 0:t.email]);const i=async()=>{await le.auth.signOut(),window.location.href="/"},o=(n==null?void 0:n.full_name)||(t==null?void 0:t.email);return s.jsxs("div",{className:"relative z-40 h-16 bg-white/80 dark:bg-gray-800/90 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700 flex items-center justify-between px-6 transition-colors duration-300",children:[s.jsx("div",{className:"flex items-center gap-4"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors",title:"Zmie motyw",children:e?s.jsx(CL,{size:20}):s.jsx(xL,{size:20})}),s.jsxs("button",{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors relative",children:[s.jsx(sL,{size:20}),s.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"})]}),s.jsx("div",{className:"h-8 w-[1px] bg-gray-200 dark:bg-gray-700 mx-1"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right hidden md:block",children:[s.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 leading-none",children:o}),s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium mt-1",children:"Online"})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("button",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-pink-500 to-orange-600 p-[2px] cursor-pointer shadow-md hover:shadow-lg transition-all block",children:n!=null&&n.avatar_url?s.jsx("img",{src:n.avatar_url,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):s.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-800 flex items-center justify-center",children:s.jsx("span",{className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-600 to-orange-600 uppercase",children:(o==null?void 0:o.charAt(0))||"U"})})}),s.jsx("div",{className:"absolute right-0 top-full pt-2 w-48 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0 z-[1000]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:"Konto"})}),s.jsxs("a",{href:"/profile",className:"flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-gray-700 hover:text-pink-600 transition-colors cursor-pointer",children:[s.jsx(Ni,{size:16})," Mj Profil"]}),s.jsxs("button",{onClick:i,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:[s.jsx(pL,{size:16})," Wyloguj"]})]})})]})]})]})]})}function ci({children:t,resource:e}){const{userRole:r,loading:n}=Ho(),{permissions:a,loading:i}=Lj();if(n||i)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"})});if(r==="superadmin"||r==="rada_starszych"&&e==="module:settings")return t;const o=a.find(A=>A.role===r&&A.resource===e);return(o==null?void 0:o.can_read)===!0?t:s.jsx(NC,{to:"/",replace:!0})}function QL(){const[t,e]=C.useState(""),[r,n]=C.useState(""),[a,i]=C.useState(!1),[o,l]=C.useState(""),[A,c]=C.useState(null),[d,h]=C.useState(!1),[p,u]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const{data:g}=await le.from("app_settings").select("value").eq("key","org_logo_url").single();g!=null&&g.value&&c(g.value)}catch(g){console.error("Bd pobierania logo:",g)}})()},[]);const y=async v=>{v.preventDefault(),i(!0),l("");const{error:g}=await le.auth.signInWithPassword({email:t,password:r});g&&(l(g.message||"Bdny e-mail lub haso."),i(!1))},b=async v=>{if(v.preventDefault(),!t){l("Wprowad adres e-mail");return}i(!0),l("");const{error:g}=await le.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});i(!1),g?l(g.message||"Bd wysyania emaila"):u(!0)};return s.jsxs("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-pink-400/20 dark:bg-pink-600/10 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute top-[20%] -right-[5%] w-[30%] h-[30%] bg-orange-400/20 dark:bg-orange-600/10 rounded-full blur-3xl"})]}),s.jsxs("form",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl p-8 shadow-2xl rounded-2xl max-w-md w-full border border-white/20 dark:border-gray-700/50 relative z-10 animate-in fade-in zoom-in duration-300",onSubmit:y,children:[s.jsx("div",{className:"flex justify-center mb-6",children:A?s.jsx("img",{src:A,alt:"Logo organizacji",className:"max-h-24 object-contain"}):s.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-pink-600 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:"S"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2 text-center",children:d?"Resetuj haso":"Witaj ponownie"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm mb-8",children:d?"Podaj adres e-mail, a wylemy Ci link do zresetowania hasa":"Zaloguj si do Church Manager"}),s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{className:"block mb-1.5 text-sm font-bold text-gray-700 dark:text-gray-300 uppercase",children:"E-mail"}),s.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 outline-none transition",value:t,onChange:v=>e(v.target.value),required:!0,autoFocus:!0,placeholder:"jan@example.com"})]}),!d&&s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block mb-1.5 text-sm font-bold text-gray-700 dark:text-gray-300 uppercase",children:"Haso"}),s.jsx("input",{type:"password",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 outline-none transition",value:r,onChange:v=>n(v.target.value),required:!0,placeholder:""})]}),o&&s.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-600 dark:text-red-400 text-sm text-center",children:o}),d?s.jsxs(s.Fragment,{children:[p?s.jsxs("div",{className:"p-4 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 text-center",children:[s.jsx("p",{className:"font-bold mb-1",children:"Email zosta wysany!"}),s.jsx("p",{className:"text-sm",children:"Sprawd swoj skrzynk i kliknij link, aby zresetowa haso."})]}):s.jsx("button",{type:"button",onClick:b,className:"w-full bg-gradient-to-r from-pink-600 to-orange-600 hover:from-pink-700 hover:to-orange-700 text-white font-bold py-3.5 rounded-xl shadow-lg hover:shadow-pink-500/25 transition transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed",disabled:a,children:a?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Wysyanie..."]}):"Wylij link do resetu hasa"}),s.jsx("button",{type:"button",onClick:()=>{h(!1),l(""),u(!1)},className:"w-full mt-4 text-sm text-gray-500 dark:text-gray-400 hover:text-pink-600 dark:hover:text-pink-400 transition",children:" Powrt do logowania"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-pink-600 to-orange-600 hover:from-pink-700 hover:to-orange-700 text-white font-bold py-3.5 rounded-xl shadow-lg hover:shadow-pink-500/25 transition transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed",disabled:a,children:a?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Logowanie..."]}):"Zaloguj si"}),s.jsx("button",{type:"button",onClick:()=>{h(!0),l(""),u(!1)},className:"w-full mt-4 text-sm text-gray-500 dark:text-gray-400 hover:text-pink-600 dark:hover:text-pink-400 transition",children:"Nie pamitam hasa"})]})]})]})}function y2(){const[t,e]=C.useState(""),[r,n]=C.useState(""),[a,i]=C.useState(!1),[o,l]=C.useState(""),[A,c]=C.useState(!1),[d,h]=C.useState(null);C.useEffect(()=>{(async()=>{try{const{data:y}=await le.from("app_settings").select("value").eq("key","org_logo_url").single();y!=null&&y.value&&h(y.value)}catch(y){console.error("Bd pobierania logo:",y)}})()},[]);const p=async u=>{if(u.preventDefault(),l(""),t.length<6){l("Haso musi mie minimum 6 znakw");return}if(t!==r){l("Hasa nie s identyczne");return}i(!0);const{error:y}=await le.auth.updateUser({password:t});if(y){l(y.message||"Bd ustawiania hasa"),i(!1);return}c(!0),setTimeout(()=>{window.location.href="/"},2e3)};return s.jsxs("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-pink-400/20 dark:bg-pink-600/10 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute top-[20%] -right-[5%] w-[30%] h-[30%] bg-orange-400/20 dark:bg-orange-600/10 rounded-full blur-3xl"})]}),s.jsxs("form",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl p-8 shadow-2xl rounded-2xl max-w-md w-full border border-white/20 dark:border-gray-700/50 relative z-10 animate-in fade-in zoom-in duration-300",onSubmit:p,children:[s.jsx("div",{className:"flex justify-center mb-6",children:d?s.jsx("img",{src:d,alt:"Logo organizacji",className:"max-h-24 object-contain"}):s.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-pink-600 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:"S"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2 text-center",children:"Ustaw haso"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm mb-8",children:"Twoje konto zostao utworzone. Ustaw haso, aby si zalogowa."}),A?s.jsxs("div",{className:"p-4 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 text-center",children:[s.jsx("p",{className:"font-bold mb-1",children:"Haso zostao ustawione!"}),s.jsx("p",{className:"text-sm",children:"Za chwil zostaniesz przekierowany..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{className:"block mb-1.5 text-sm font-bold text-gray-700 dark:text-gray-300 uppercase",children:"Nowe haso"}),s.jsx("input",{type:"password",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 outline-none transition",value:t,onChange:u=>e(u.target.value),required:!0,autoFocus:!0,placeholder:"Minimum 6 znakw"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block mb-1.5 text-sm font-bold text-gray-700 dark:text-gray-300 uppercase",children:"Powtrz haso"}),s.jsx("input",{type:"password",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 outline-none transition",value:r,onChange:u=>n(u.target.value),required:!0,placeholder:""})]}),o&&s.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-600 dark:text-red-400 text-sm text-center",children:o}),s.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-pink-600 to-orange-600 hover:from-pink-700 hover:to-orange-700 text-white font-bold py-3.5 rounded-xl shadow-lg hover:shadow-pink-500/25 transition transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed",disabled:a,children:a?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Zapisywanie..."]}):"Ustaw haso"})]})]})]})}const IL="modulepreload",PL=function(t){return"/"+t},b2={},am=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(A=>{if(A=PL(A),A in b2)return;b2[A]=!0;const c=A.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":IL,c||(h.as="script"),h.crossOrigin="",h.href=A,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((p,u)=>{h.addEventListener("load",p),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${A}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function or(t){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(t)}var bs=Uint8Array,Ua=Uint16Array,sw=Int32Array,iw=new bs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ow=new bs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w2=new bs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hj=function(t,e){for(var r=new Ua(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new sw(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},Kj=Hj(iw,2),TL=Kj.b,ly=Kj.r;TL[28]=258,ly[258]=28;var DL=Hj(ow,0),v2=DL.r,Ay=new Ua(32768);for(var wr=0;wr<32768;++wr){var Xi=(wr&43690)>>1|(wr&21845)<<1;Xi=(Xi&52428)>>2|(Xi&13107)<<2,Xi=(Xi&61680)>>4|(Xi&3855)<<4,Ay[wr]=((Xi&65280)>>8|(Xi&255)<<8)>>1}var Ed=function(t,e,r){for(var n=t.length,a=0,i=new Ua(e);a<n;++a)t[a]&&++i[t[a]-1];var o=new Ua(e);for(a=1;a<e;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new Ua(1<<e);var A=15-e;for(a=0;a<n;++a)if(t[a])for(var c=a<<4|t[a],d=e-t[a],h=o[t[a]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)l[Ay[h]>>A]=c}else for(l=new Ua(n),a=0;a<n;++a)t[a]&&(l[a]=Ay[o[t[a]-1]++]>>15-t[a]);return l},Ll=new bs(288);for(var wr=0;wr<144;++wr)Ll[wr]=8;for(var wr=144;wr<256;++wr)Ll[wr]=9;for(var wr=256;wr<280;++wr)Ll[wr]=7;for(var wr=280;wr<288;++wr)Ll[wr]=8;var Ef=new bs(32);for(var wr=0;wr<32;++wr)Ef[wr]=5;var zL=Ed(Ll,9,0),OL=Ed(Ef,5,0),$j=function(t){return(t+7)/8|0},RL=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new bs(t.subarray(e,r))},di=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Zc=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},sm=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,i=r.slice();if(!a)return{t:Vj,l:0};if(a==1){var o=new bs(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(N,S){return N.f-S.f}),r.push({s:-1,f:25001});var l=r[0],A=r[1],c=0,d=1,h=2;for(r[0]={s:-1,f:l.f+A.f,l,r:A};d!=a-1;)l=r[r[c].f<r[h].f?c++:h++],A=r[c!=d&&r[c].f<r[h].f?c++:h++],r[d++]={s:-1,f:l.f+A.f,l,r:A};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var u=new Ua(p+1),y=cy(r[d-1],u,0);if(y>e){var n=0,b=0,v=y-e,g=1<<v;for(i.sort(function(S,U){return u[U.s]-u[S.s]||S.f-U.f});n<a;++n){var m=i[n].s;if(u[m]>e)b+=g-(1<<y-u[m]),u[m]=e;else break}for(b>>=v;b>0;){var w=i[n].s;u[w]<e?b-=1<<e-u[w]++-1:++n}for(;n>=0&&b;--n){var k=i[n].s;u[k]==e&&(--u[k],++b)}y=e}return{t:new bs(u),l:y}},cy=function(t,e,r){return t.s==-1?Math.max(cy(t.l,e,r+1),cy(t.r,e,r+1)):e[t.s]=r},k2=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Ua(++e),n=0,a=t[0],i=1,o=function(A){r[n++]=A},l=1;l<=e;++l)if(t[l]==a&&l!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=t[l]}return{c:r.subarray(0,n),n:e}},ed=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Gj=function(t,e,r){var n=r.length,a=$j(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var i=0;i<n;++i)t[a+i+4]=r[i];return(a+4+n)*8},B2=function(t,e,r,n,a,i,o,l,A,c,d){di(e,d++,r),++a[256];for(var h=sm(a,15),p=h.t,u=h.l,y=sm(i,15),b=y.t,v=y.l,g=k2(p),m=g.c,w=g.n,k=k2(b),N=k.c,S=k.n,U=new Ua(19),Q=0;Q<m.length;++Q)++U[m[Q]&31];for(var Q=0;Q<N.length;++Q)++U[N[Q]&31];for(var L=sm(U,7),V=L.t,F=L.l,D=19;D>4&&!V[w2[D-1]];--D);var T=c+5<<3,G=ed(a,Ll)+ed(i,Ef)+o,ne=ed(a,p)+ed(i,b)+o+14+3*D+ed(U,V)+2*U[16]+3*U[17]+7*U[18];if(A>=0&&T<=G&&T<=ne)return Gj(e,d,t.subarray(A,A+c));var ce,ue,Y,Ae;if(di(e,d,1+(ne<G)),d+=2,ne<G){ce=Ed(p,u,0),ue=p,Y=Ed(b,v,0),Ae=b;var fe=Ed(V,F,0);di(e,d,w-257),di(e,d+5,S-1),di(e,d+10,D-4),d+=14;for(var Q=0;Q<D;++Q)di(e,d+3*Q,V[w2[Q]]);d+=3*D;for(var we=[m,N],E=0;E<2;++E)for(var z=we[E],Q=0;Q<z.length;++Q){var K=z[Q]&31;di(e,d,fe[K]),d+=V[K],K>15&&(di(e,d,z[Q]>>5&127),d+=z[Q]>>12)}}else ce=zL,ue=Ll,Y=OL,Ae=Ef;for(var Q=0;Q<l;++Q){var W=n[Q];if(W>255){var K=W>>18&31;Zc(e,d,ce[K+257]),d+=ue[K+257],K>7&&(di(e,d,W>>23&31),d+=iw[K]);var J=W&31;Zc(e,d,Y[J]),d+=Ae[J],J>3&&(Zc(e,d,W>>5&8191),d+=ow[J])}else Zc(e,d,ce[W]),d+=ue[W]}return Zc(e,d,ce[256]),d+ue[256]},ML=new sw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Vj=new bs(0),HL=function(t,e,r,n,a,i){var o=i.z||t.length,l=new bs(n+o+5*(1+Math.ceil(o/7e3))+a),A=l.subarray(n,l.length-a),c=i.l,d=(i.r||0)&7;if(e){d&&(A[0]=i.r>>3);for(var h=ML[e-1],p=h>>13,u=h&8191,y=(1<<r)-1,b=i.p||new Ua(32768),v=i.h||new Ua(y+1),g=Math.ceil(r/3),m=2*g,w=function(Oe){return(t[Oe]^t[Oe+1]<<g^t[Oe+2]<<m)&y},k=new sw(25e3),N=new Ua(288),S=new Ua(32),U=0,Q=0,L=i.i||0,V=0,F=i.w||0,D=0;L+2<o;++L){var T=w(L),G=L&32767,ne=v[T];if(b[G]=ne,v[T]=G,F<=L){var ce=o-L;if((U>7e3||V>24576)&&(ce>423||!c)){d=B2(t,A,0,k,N,S,Q,V,D,L-D,d),V=U=Q=0,D=L;for(var ue=0;ue<286;++ue)N[ue]=0;for(var ue=0;ue<30;++ue)S[ue]=0}var Y=2,Ae=0,fe=u,we=G-ne&32767;if(ce>2&&T==w(L-we))for(var E=Math.min(p,ce)-1,z=Math.min(32767,L),K=Math.min(258,ce);we<=z&&--fe&&G!=ne;){if(t[L+Y]==t[L+Y-we]){for(var W=0;W<K&&t[L+W]==t[L+W-we];++W);if(W>Y){if(Y=W,Ae=we,W>E)break;for(var J=Math.min(we,W-2),re=0,ue=0;ue<J;++ue){var be=L-we+ue&32767,me=b[be],ae=be-me&32767;ae>re&&(re=ae,ne=be)}}}G=ne,ne=b[G],we+=G-ne&32767}if(Ae){k[V++]=268435456|ly[Y]<<18|v2[Ae];var X=ly[Y]&31,ye=v2[Ae]&31;Q+=iw[X]+ow[ye],++N[257+X],++S[ye],F=L+Y,++U}else k[V++]=t[L],++N[t[L]]}}for(L=Math.max(L,F);L<o;++L)k[V++]=t[L],++N[t[L]];d=B2(t,A,c,k,N,S,Q,V,D,L-D,d),c||(i.r=d&7|A[d/8|0]<<3,d-=7,i.h=v,i.p=b,i.i=L,i.w=F)}else{for(var L=i.w||0;L<o+c;L+=65535){var xe=L+65535;xe>=o&&(A[d/8|0]=c,xe=o),d=Gj(A,d+1,t.subarray(L,xe))}i.i=o}return RL(l,0,n+$j(d)+a)},Wj=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},KL=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new bs(i.length+t.length);o.set(i),o.set(t,i.length),t=o,a.w=i.length}return HL(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},qj=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},$L=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Wj();a.p(e.dictionary),qj(t,2,a.d())}};function dy(t,e){e||(e={});var r=Wj();r.p(t);var n=KL(t,e,e.dictionary?6:2,4);return $L(n,e),qj(n,n.length-4,r.d()),n}var GL=typeof TextDecoder<"u"&&new TextDecoder,VL=0;try{GL.decode(Vj,{stream:!0}),VL=1}catch{}function WL(t){if(Array.isArray(t))return t}function qL(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],A=!0,c=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(A=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);A=!0);}catch(d){c=!0,a=d}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}function C2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function JL(t,e){if(t){if(typeof t=="string")return C2(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C2(t,e):void 0}}function YL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j2(t,e){return WL(t)||qL(t,e)||JL(t,e)||YL()}function N2(t,e="utf8"){return new TextDecoder(e).decode(t)}const XL=new TextEncoder;function ZL(t){return XL.encode(t)}const eQ=1024*8,tQ=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),im={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class lw{constructor(e=eQ,r={}){ir(this,"buffer");ir(this,"byteLength");ir(this,"byteOffset");ir(this,"length");ir(this,"offset");ir(this,"lastWrittenByte");ir(this,"littleEndian");ir(this,"_data");ir(this,"_mark");ir(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,i=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof lw)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=im[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===tQ&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const A=new im[r](l.buffer);return this.offset+=n,A.reverse(),A}const o=new im[r](i);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return N2(this.readBytes(e))}decodeText(e=1,r="utf8"){return N2(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(ZL(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function cc(t){let e=t.length;for(;--e>=0;)t[e]=0}const rQ=3,nQ=258,Jj=29,aQ=256,sQ=aQ+1+Jj,Yj=30,iQ=512,oQ=new Array((sQ+2)*2);cc(oQ);const lQ=new Array(Yj*2);cc(lQ);const AQ=new Array(iQ);cc(AQ);const cQ=new Array(nQ-rQ+1);cc(cQ);const dQ=new Array(Jj);cc(dQ);const uQ=new Array(Yj);cc(uQ);const hQ=(t,e,r,n)=>{let a=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var uy=hQ;const fQ=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},gQ=new Uint32Array(fQ()),pQ=(t,e,r,n)=>{const a=gQ,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var Us=pQ,hy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xj={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const mQ=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var xQ=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)mQ(r,n)&&(t[n]=r[n])}}return t},yQ=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,i=t.length;n<i;n++){let o=t[n];r.set(o,a),a+=o.length}return r},Zj={assign:xQ,flattenChunks:yQ};let eN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eN=!1}const cu=new Uint8Array(256);for(let t=0;t<256;t++)cu[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;cu[254]=cu[254]=1;var bQ=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,i,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),i=0,a=0;i<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const wQ=(t,e)=>{if(e<65534&&t.subarray&&eN)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var vQ=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){i[a++]=o;continue}let l=cu[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return wQ(i,a)},kQ=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+cu[t[r]]>e?r:e},fy={string2buf:bQ,buf2string:vQ,utf8border:kQ};function BQ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var CQ=BQ;const $h=16209,jQ=16191;var NQ=function(e,r){let n,a,i,o,l,A,c,d,h,p,u,y,b,v,g,m,w,k,N,S,U,Q,L,V;const F=e.state;n=e.next_in,L=e.input,a=n+(e.avail_in-5),i=e.next_out,V=e.output,o=i-(r-e.avail_out),l=i+(e.avail_out-257),A=F.dmax,c=F.wsize,d=F.whave,h=F.wnext,p=F.window,u=F.hold,y=F.bits,b=F.lencode,v=F.distcode,g=(1<<F.lenbits)-1,m=(1<<F.distbits)-1;e:do{y<15&&(u+=L[n++]<<y,y+=8,u+=L[n++]<<y,y+=8),w=b[u&g];t:for(;;){if(k=w>>>24,u>>>=k,y-=k,k=w>>>16&255,k===0)V[i++]=w&65535;else if(k&16){N=w&65535,k&=15,k&&(y<k&&(u+=L[n++]<<y,y+=8),N+=u&(1<<k)-1,u>>>=k,y-=k),y<15&&(u+=L[n++]<<y,y+=8,u+=L[n++]<<y,y+=8),w=v[u&m];r:for(;;){if(k=w>>>24,u>>>=k,y-=k,k=w>>>16&255,k&16){if(S=w&65535,k&=15,y<k&&(u+=L[n++]<<y,y+=8,y<k&&(u+=L[n++]<<y,y+=8)),S+=u&(1<<k)-1,S>A){e.msg="invalid distance too far back",F.mode=$h;break e}if(u>>>=k,y-=k,k=i-o,S>k){if(k=S-k,k>d&&F.sane){e.msg="invalid distance too far back",F.mode=$h;break e}if(U=0,Q=p,h===0){if(U+=c-k,k<N){N-=k;do V[i++]=p[U++];while(--k);U=i-S,Q=V}}else if(h<k){if(U+=c+h-k,k-=h,k<N){N-=k;do V[i++]=p[U++];while(--k);if(U=0,h<N){k=h,N-=k;do V[i++]=p[U++];while(--k);U=i-S,Q=V}}}else if(U+=h-k,k<N){N-=k;do V[i++]=p[U++];while(--k);U=i-S,Q=V}for(;N>2;)V[i++]=Q[U++],V[i++]=Q[U++],V[i++]=Q[U++],N-=3;N&&(V[i++]=Q[U++],N>1&&(V[i++]=Q[U++]))}else{U=i-S;do V[i++]=V[U++],V[i++]=V[U++],V[i++]=V[U++],N-=3;while(N>2);N&&(V[i++]=V[U++],N>1&&(V[i++]=V[U++]))}}else if(k&64){e.msg="invalid distance code",F.mode=$h;break e}else{w=v[(w&65535)+(u&(1<<k)-1)];continue r}break}}else if(k&64)if(k&32){F.mode=jQ;break e}else{e.msg="invalid literal/length code",F.mode=$h;break e}else{w=b[(w&65535)+(u&(1<<k)-1)];continue t}break}}while(n<a&&i<l);N=y>>3,n-=N,y-=N<<3,u&=(1<<y)-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=i<l?257+(l-i):257-(i-l),F.hold=u,F.bits=y};const tA=15,_2=852,S2=592,E2=0,om=1,F2=2,_Q=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),SQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),EQ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),FQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),UQ=(t,e,r,n,a,i,o,l)=>{const A=l.bits;let c=0,d=0,h=0,p=0,u=0,y=0,b=0,v=0,g=0,m=0,w,k,N,S,U,Q=null,L;const V=new Uint16Array(tA+1),F=new Uint16Array(tA+1);let D=null,T,G,ne;for(c=0;c<=tA;c++)V[c]=0;for(d=0;d<n;d++)V[e[r+d]]++;for(u=A,p=tA;p>=1&&V[p]===0;p--);if(u>p&&(u=p),p===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<p&&V[h]===0;h++);for(u<h&&(u=h),v=1,c=1;c<=tA;c++)if(v<<=1,v-=V[c],v<0)return-1;if(v>0&&(t===E2||p!==1))return-1;for(F[1]=0,c=1;c<tA;c++)F[c+1]=F[c]+V[c];for(d=0;d<n;d++)e[r+d]!==0&&(o[F[e[r+d]]++]=d);if(t===E2?(Q=D=o,L=20):t===om?(Q=_Q,D=SQ,L=257):(Q=EQ,D=FQ,L=0),m=0,d=0,c=h,U=i,y=u,b=0,N=-1,g=1<<u,S=g-1,t===om&&g>_2||t===F2&&g>S2)return 1;for(;;){T=c-b,o[d]+1<L?(G=0,ne=o[d]):o[d]>=L?(G=D[o[d]-L],ne=Q[o[d]-L]):(G=96,ne=0),w=1<<c-b,k=1<<y,h=k;do k-=w,a[U+(m>>b)+k]=T<<24|G<<16|ne|0;while(k!==0);for(w=1<<c-1;m&w;)w>>=1;if(w!==0?(m&=w-1,m+=w):m=0,d++,--V[c]===0){if(c===p)break;c=e[r+o[d]]}if(c>u&&(m&S)!==N){for(b===0&&(b=u),U+=h,y=c-b,v=1<<y;y+b<p&&(v-=V[y+b],!(v<=0));)y++,v<<=1;if(g+=1<<y,t===om&&g>_2||t===F2&&g>S2)return 1;N=m&S,a[N]=u<<24|y<<16|U-i|0}}return m!==0&&(a[U+m]=c-b<<24|64<<16|0),l.bits=u,0};var Fd=UQ;const LQ=0,tN=1,rN=2,{Z_FINISH:U2,Z_BLOCK:QQ,Z_TREES:Gh,Z_OK:Ql,Z_STREAM_END:IQ,Z_NEED_DICT:PQ,Z_STREAM_ERROR:rs,Z_DATA_ERROR:nN,Z_MEM_ERROR:aN,Z_BUF_ERROR:TQ,Z_DEFLATED:L2}=Xj,yg=16180,Q2=16181,I2=16182,P2=16183,T2=16184,D2=16185,z2=16186,O2=16187,R2=16188,M2=16189,Ff=16190,ui=16191,lm=16192,H2=16193,Am=16194,K2=16195,$2=16196,G2=16197,V2=16198,Vh=16199,Wh=16200,W2=16201,q2=16202,J2=16203,Y2=16204,X2=16205,cm=16206,Z2=16207,ek=16208,kr=16209,sN=16210,iN=16211,DQ=852,zQ=592,OQ=15,RQ=OQ,tk=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function MQ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Tl=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<yg||e.mode>iN?1:0},oN=t=>{if(Tl(t))return rs;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=yg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(DQ),e.distcode=e.distdyn=new Int32Array(zQ),e.sane=1,e.back=-1,Ql},lN=t=>{if(Tl(t))return rs;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,oN(t)},AN=(t,e)=>{let r;if(Tl(t))return rs;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?rs:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,lN(t))},cN=(t,e)=>{if(!t)return rs;const r=new MQ;t.state=r,r.strm=t,r.window=null,r.mode=yg;const n=AN(t,e);return n!==Ql&&(t.state=null),n},HQ=t=>cN(t,RQ);let rk=!0,dm,um;const KQ=t=>{if(rk){dm=new Int32Array(512),um=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Fd(tN,t.lens,0,288,dm,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Fd(rN,t.lens,0,32,um,0,t.work,{bits:5}),rk=!1}t.lencode=dm,t.lenbits=9,t.distcode=um,t.distbits=5},dN=(t,e,r,n)=>{let a;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(e.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},$Q=(t,e)=>{let r,n,a,i,o,l,A,c,d,h,p,u,y,b,v=0,g,m,w,k,N,S,U,Q;const L=new Uint8Array(4);let V,F;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Tl(t)||!t.output||!t.input&&t.avail_in!==0)return rs;r=t.state,r.mode===ui&&(r.mode=lm),o=t.next_out,a=t.output,A=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,c=r.hold,d=r.bits,h=l,p=A,Q=Ql;e:for(;;)switch(r.mode){case yg:if(r.wrap===0){r.mode=lm;break}for(;d<16;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,L[0]=c&255,L[1]=c>>>8&255,r.check=Us(r.check,L,2,0),c=0,d=0,r.mode=Q2;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=kr;break}if((c&15)!==L2){t.msg="unknown compression method",r.mode=kr;break}if(c>>>=4,d-=4,U=(c&15)+8,r.wbits===0&&(r.wbits=U),U>15||U>r.wbits){t.msg="invalid window size",r.mode=kr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?M2:ui,c=0,d=0;break;case Q2:for(;d<16;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(r.flags=c,(r.flags&255)!==L2){t.msg="unknown compression method",r.mode=kr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=kr;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,r.check=Us(r.check,L,2,0)),c=0,d=0,r.mode=I2;case I2:for(;d<32;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,L[2]=c>>>16&255,L[3]=c>>>24&255,r.check=Us(r.check,L,4,0)),c=0,d=0,r.mode=P2;case P2:for(;d<16;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,r.check=Us(r.check,L,2,0)),c=0,d=0,r.mode=T2;case T2:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,r.check=Us(r.check,L,2,0)),c=0,d=0}else r.head&&(r.head.extra=null);r.mode=D2;case D2:if(r.flags&1024&&(u=r.length,u>l&&(u=l),u&&(r.head&&(U=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+u),U)),r.flags&512&&r.wrap&4&&(r.check=Us(r.check,n,u,i)),l-=u,i+=u,r.length-=u),r.length))break e;r.length=0,r.mode=z2;case z2:if(r.flags&2048){if(l===0)break e;u=0;do U=n[i+u++],r.head&&U&&r.length<65536&&(r.head.name+=String.fromCharCode(U));while(U&&u<l);if(r.flags&512&&r.wrap&4&&(r.check=Us(r.check,n,u,i)),l-=u,i+=u,U)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=O2;case O2:if(r.flags&4096){if(l===0)break e;u=0;do U=n[i+u++],r.head&&U&&r.length<65536&&(r.head.comment+=String.fromCharCode(U));while(U&&u<l);if(r.flags&512&&r.wrap&4&&(r.check=Us(r.check,n,u,i)),l-=u,i+=u,U)break e}else r.head&&(r.head.comment=null);r.mode=R2;case R2:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=kr;break}c=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ui;break;case M2:for(;d<32;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}t.adler=r.check=tk(c),c=0,d=0,r.mode=Ff;case Ff:if(r.havedict===0)return t.next_out=o,t.avail_out=A,t.next_in=i,t.avail_in=l,r.hold=c,r.bits=d,PQ;t.adler=r.check=1,r.mode=ui;case ui:if(e===QQ||e===Gh)break e;case lm:if(r.last){c>>>=d&7,d-=d&7,r.mode=cm;break}for(;d<3;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}switch(r.last=c&1,c>>>=1,d-=1,c&3){case 0:r.mode=H2;break;case 1:if(KQ(r),r.mode=Vh,e===Gh){c>>>=2,d-=2;break e}break;case 2:r.mode=$2;break;case 3:t.msg="invalid block type",r.mode=kr}c>>>=2,d-=2;break;case H2:for(c>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=kr;break}if(r.length=c&65535,c=0,d=0,r.mode=Am,e===Gh)break e;case Am:r.mode=K2;case K2:if(u=r.length,u){if(u>l&&(u=l),u>A&&(u=A),u===0)break e;a.set(n.subarray(i,i+u),o),l-=u,i+=u,A-=u,o+=u,r.length-=u;break}r.mode=ui;break;case $2:for(;d<14;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(r.nlen=(c&31)+257,c>>>=5,d-=5,r.ndist=(c&31)+1,c>>>=5,d-=5,r.ncode=(c&15)+4,c>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=kr;break}r.have=0,r.mode=G2;case G2:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}r.lens[D[r.have++]]=c&7,c>>>=3,d-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,V={bits:r.lenbits},Q=Fd(LQ,r.lens,0,19,r.lencode,0,r.work,V),r.lenbits=V.bits,Q){t.msg="invalid code lengths set",r.mode=kr;break}r.have=0,r.mode=V2;case V2:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[c&(1<<r.lenbits)-1],g=v>>>24,m=v>>>16&255,w=v&65535,!(g<=d);){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(w<16)c>>>=g,d-=g,r.lens[r.have++]=w;else{if(w===16){for(F=g+2;d<F;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(c>>>=g,d-=g,r.have===0){t.msg="invalid bit length repeat",r.mode=kr;break}U=r.lens[r.have-1],u=3+(c&3),c>>>=2,d-=2}else if(w===17){for(F=g+3;d<F;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}c>>>=g,d-=g,U=0,u=3+(c&7),c>>>=3,d-=3}else{for(F=g+7;d<F;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}c>>>=g,d-=g,U=0,u=11+(c&127),c>>>=7,d-=7}if(r.have+u>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=kr;break}for(;u--;)r.lens[r.have++]=U}}if(r.mode===kr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=kr;break}if(r.lenbits=9,V={bits:r.lenbits},Q=Fd(tN,r.lens,0,r.nlen,r.lencode,0,r.work,V),r.lenbits=V.bits,Q){t.msg="invalid literal/lengths set",r.mode=kr;break}if(r.distbits=6,r.distcode=r.distdyn,V={bits:r.distbits},Q=Fd(rN,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,V),r.distbits=V.bits,Q){t.msg="invalid distances set",r.mode=kr;break}if(r.mode=Vh,e===Gh)break e;case Vh:r.mode=Wh;case Wh:if(l>=6&&A>=258){t.next_out=o,t.avail_out=A,t.next_in=i,t.avail_in=l,r.hold=c,r.bits=d,NQ(t,p),o=t.next_out,a=t.output,A=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,c=r.hold,d=r.bits,r.mode===ui&&(r.back=-1);break}for(r.back=0;v=r.lencode[c&(1<<r.lenbits)-1],g=v>>>24,m=v>>>16&255,w=v&65535,!(g<=d);){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(m&&!(m&240)){for(k=g,N=m,S=w;v=r.lencode[S+((c&(1<<k+N)-1)>>k)],g=v>>>24,m=v>>>16&255,w=v&65535,!(k+g<=d);){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}c>>>=k,d-=k,r.back+=k}if(c>>>=g,d-=g,r.back+=g,r.length=w,m===0){r.mode=X2;break}if(m&32){r.back=-1,r.mode=ui;break}if(m&64){t.msg="invalid literal/length code",r.mode=kr;break}r.extra=m&15,r.mode=W2;case W2:if(r.extra){for(F=r.extra;d<F;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=q2;case q2:for(;v=r.distcode[c&(1<<r.distbits)-1],g=v>>>24,m=v>>>16&255,w=v&65535,!(g<=d);){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(!(m&240)){for(k=g,N=m,S=w;v=r.distcode[S+((c&(1<<k+N)-1)>>k)],g=v>>>24,m=v>>>16&255,w=v&65535,!(k+g<=d);){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}c>>>=k,d-=k,r.back+=k}if(c>>>=g,d-=g,r.back+=g,m&64){t.msg="invalid distance code",r.mode=kr;break}r.offset=w,r.extra=m&15,r.mode=J2;case J2:if(r.extra){for(F=r.extra;d<F;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=kr;break}r.mode=Y2;case Y2:if(A===0)break e;if(u=p-A,r.offset>u){if(u=r.offset-u,u>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=kr;break}u>r.wnext?(u-=r.wnext,y=r.wsize-u):y=r.wnext-u,u>r.length&&(u=r.length),b=r.window}else b=a,y=o-r.offset,u=r.length;u>A&&(u=A),A-=u,r.length-=u;do a[o++]=b[y++];while(--u);r.length===0&&(r.mode=Wh);break;case X2:if(A===0)break e;a[o++]=r.length,A--,r.mode=Wh;break;case cm:if(r.wrap){for(;d<32;){if(l===0)break e;l--,c|=n[i++]<<d,d+=8}if(p-=A,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Us(r.check,a,p,o-p):uy(r.check,a,p,o-p)),p=A,r.wrap&4&&(r.flags?c:tk(c))!==r.check){t.msg="incorrect data check",r.mode=kr;break}c=0,d=0}r.mode=Z2;case Z2:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,c+=n[i++]<<d,d+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=kr;break}c=0,d=0}r.mode=ek;case ek:Q=IQ;break e;case kr:Q=nN;break e;case sN:return aN;case iN:default:return rs}return t.next_out=o,t.avail_out=A,t.next_in=i,t.avail_in=l,r.hold=c,r.bits=d,(r.wsize||p!==t.avail_out&&r.mode<kr&&(r.mode<cm||e!==U2))&&dN(t,t.output,t.next_out,p-t.avail_out),h-=t.avail_in,p-=t.avail_out,t.total_in+=h,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Us(r.check,a,p,t.next_out-p):uy(r.check,a,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ui?128:0)+(r.mode===Vh||r.mode===Am?256:0),(h===0&&p===0||e===U2)&&Q===Ql&&(Q=TQ),Q},GQ=t=>{if(Tl(t))return rs;let e=t.state;return e.window&&(e.window=null),t.state=null,Ql},VQ=(t,e)=>{if(Tl(t))return rs;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Ql):rs},WQ=(t,e)=>{const r=e.length;let n,a,i;return Tl(t)||(n=t.state,n.wrap!==0&&n.mode!==Ff)?rs:n.mode===Ff&&(a=1,a=uy(a,e,r,0),a!==n.check)?nN:(i=dN(t,e,r,r),i?(n.mode=sN,aN):(n.havedict=1,Ql))};var qQ=lN,JQ=AN,YQ=oN,XQ=HQ,ZQ=cN,eI=$Q,tI=GQ,rI=VQ,nI=WQ,aI="pako inflate (from Nodeca project)",xi={inflateReset:qQ,inflateReset2:JQ,inflateResetKeep:YQ,inflateInit:XQ,inflateInit2:ZQ,inflate:eI,inflateEnd:tI,inflateGetHeader:rI,inflateSetDictionary:nI,inflateInfo:aI};function sI(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var iI=sI;const uN=Object.prototype.toString,{Z_NO_FLUSH:oI,Z_FINISH:lI,Z_OK:du,Z_STREAM_END:hm,Z_NEED_DICT:fm,Z_STREAM_ERROR:AI,Z_DATA_ERROR:nk,Z_MEM_ERROR:cI}=Xj;function Nu(t){this.options=Zj.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new CQ,this.strm.avail_out=0;let r=xi.inflateInit2(this.strm,e.windowBits);if(r!==du)throw new Error(hy[r]);if(this.header=new iI,xi.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=fy.string2buf(e.dictionary):uN.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=xi.inflateSetDictionary(this.strm,e.dictionary),r!==du)))throw new Error(hy[r])}Nu.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?lI:oI,uN.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=xi.inflate(r,o),i===fm&&a&&(i=xi.inflateSetDictionary(r,a),i===du?i=xi.inflate(r,o):i===nk&&(i=fm));r.avail_in>0&&i===hm&&r.state.wrap>0&&t[r.next_in]!==0;)xi.inflateReset(r),i=xi.inflate(r,o);switch(i){case AI:case nk:case fm:case cI:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===hm))if(this.options.to==="string"){let A=fy.utf8border(r.output,r.next_out),c=r.next_out-A,d=fy.buf2string(r.output,A);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(A,A+c),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===du&&l===0)){if(i===hm)return i=xi.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Nu.prototype.onData=function(t){this.chunks.push(t)};Nu.prototype.onEnd=function(t){t===du&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Zj.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function dI(t,e){const r=new Nu(e);if(r.push(t),r.err)throw r.msg||hy[r.err];return r.result}var uI=Nu,hI=dI,fI={Inflate:uI,inflate:hI};const{Inflate:gI,inflate:pI}=fI;var ak=gI,mI=pI;const hN=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;hN[t]=e}const sk=4294967295;function xI(t,e,r){let n=t;for(let a=0;a<r;a++)n=hN[(n^e[a])&255]^n>>>8;return n}function yI(t,e){return(xI(sk,t,e)^sk)>>>0}function ik(t,e,r){const n=t.readUint32(),a=yI(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function fN(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function gN(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function pN(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function mN(t,e,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-a]>>1)&255}else{for(;i<a;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-a]+r[i]>>1)&255}}function xN(t,e,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-a]&255}else{for(;i<a;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+bI(e[i-a],r[i],r[i-a])&255}}function bI(t,e,r){const n=t+e-r,a=Math.abs(n-t),i=Math.abs(n-e),o=Math.abs(n-r);return a<=i&&a<=o?t:i<=o?e:r}function wI(t,e,r,n,a,i){switch(t){case 0:fN(e,r,a);break;case 1:gN(e,r,a,i);break;case 2:pN(e,r,n,a);break;case 3:mN(e,r,n,a,i);break;case 4:xN(e,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const vI=new Uint16Array([255]),kI=new Uint8Array(vI.buffer),BI=kI[0]===255;function CI(t){const{data:e,width:r,height:n,channels:a,depth:i}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,A=new Uint8Array(n*r*l);let c=0;for(let d=0;d<7;d++){const h=o[d],p=Math.ceil((r-h.x)/h.xStep),u=Math.ceil((n-h.y)/h.yStep);if(p<=0||u<=0)continue;const y=p*l,b=new Uint8Array(y);for(let v=0;v<u;v++){const g=e[c++],m=e.subarray(c,c+y);c+=y;const w=new Uint8Array(y);wI(g,m,w,b,y,l),b.set(w);for(let k=0;k<p;k++){const N=h.x+k*h.xStep,S=h.y+v*h.yStep;if(!(N>=r||S>=n))for(let U=0;U<l;U++)A[(S*r+N)*l+U]=w[k*l+U]}}}if(i===16){const d=new Uint16Array(A.buffer);if(BI)for(let h=0;h<d.length;h++)d[h]=jI(d[h]);return d}else return A}function jI(t){return(t&255)<<8|t>>8&255}const NI=new Uint16Array([255]),_I=new Uint8Array(NI.buffer),SI=_I[0]===255,EI=new Uint8Array(0);function ok(t){const{data:e,width:r,height:n,channels:a,depth:i}=t,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),A=new Uint8Array(n*l);let c=EI,d=0,h,p;for(let u=0;u<n;u++){switch(h=e.subarray(d+1,d+1+l),p=A.subarray(u*l,(u+1)*l),e[d]){case 0:fN(h,p,l);break;case 1:gN(h,p,l,o);break;case 2:pN(h,p,c,l);break;case 3:mN(h,p,c,l,o);break;case 4:xN(h,p,c,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}c=p,d+=l+1}if(i===16){const u=new Uint16Array(A.buffer);if(SI)for(let y=0;y<u.length;y++)u[y]=FI(u[y]);return u}else return A}function FI(t){return(t&255)<<8|t>>8&255}const z0=Uint8Array.of(137,80,78,71,13,10,26,10);function lk(t){if(!UI(t.readBytes(z0.length)))throw new Error("wrong PNG signature")}function UI(t){if(t.length<z0.length)return!1;for(let e=0;e<z0.length;e++)if(t[e]!==z0[e])return!1;return!0}const LI="tEXt",QI=0,yN=new TextDecoder("latin1");function II(t){if(TI(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const PI=/^[\u0000-\u00FF]*$/;function TI(t){if(!PI.test(t))throw new Error("invalid latin1 text")}function DI(t,e,r){const n=bN(e);t[n]=zI(e,r-n.length-1)}function bN(t){for(t.mark();t.readByte()!==QI;);const e=t.offset;t.reset();const r=yN.decode(t.readBytes(e-t.offset-1));return t.skip(1),II(r),r}function zI(t,e){return yN.decode(t.readBytes(e))}const Ca={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},gm={UNKNOWN:-1,DEFLATE:0},Ak={UNKNOWN:-1,ADAPTIVE:0},pm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},qh={NONE:0,BACKGROUND:1,PREVIOUS:2},mm={SOURCE:0,OVER:1};class OI extends lw{constructor(r,n={}){super(r);ir(this,"_checkCrc");ir(this,"_inflator");ir(this,"_png");ir(this,"_apng");ir(this,"_end");ir(this,"_hasPalette");ir(this,"_palette");ir(this,"_hasTransparency");ir(this,"_transparency");ir(this,"_compressionMethod");ir(this,"_filterMethod");ir(this,"_interlaceMethod");ir(this,"_colorType");ir(this,"_isAnimated");ir(this,"_numberOfFrames");ir(this,"_numberOfPlays");ir(this,"_frames");ir(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new ak,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=gm.UNKNOWN,this._filterMethod=Ak.UNKNOWN,this._interlaceMethod=pm.UNKNOWN,this._colorType=Ca.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lk(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(lk(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case LI:DI(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?ik(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?ik(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=RI(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Ca.GREYSCALE:a=1;break;case Ca.TRUECOLOUR:a=3;break;case Ca.INDEXED_COLOUR:a=1;break;case Ca.GREYSCALE_ALPHA:a=2;break;case Ca.TRUECOLOUR_ALPHA:a=4;break;case Ca.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==gm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ca.GREYSCALE:case Ca.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ca.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ca.UNKNOWN:case Ca.GREYSCALE_ALPHA:case Ca.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=bN(this),a=this.readUint8();if(a!==gm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:mI(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=ok({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case qh.NONE:break;case qh.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*r.width+o)*this._png.channels;for(let A=0;A<this._png.channels;A++)a.data[l+A]=0}break;case qh.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(o,l)=>{const A=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,c=(o*n.width+l)*this._png.channels;return{index:A,frameIndex:c}};switch(n.blendOp){case mm.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:A,frameIndex:c}=i(o,l);for(let d=0;d<this._png.channels;d++)r.data[A+d]=n.data[c+d]}break;case mm.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:A,frameIndex:c}=i(o,l);for(let d=0;d<this._png.channels;d++){const h=n.data[c+this._png.channels-1]/a,p=d%(this._png.channels-1)===0?1:n.data[c+d],u=Math.floor(h*p+(1-h)*r.data[A+d]);r.data[A+d]+=u}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Ak.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===pm.NO_INTERLACE)this._png.data=ok({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===pm.ADAM7)this._png.data=CI({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:qh.NONE,blendOp:mm.SOURCE,data:r}),this._inflator=new ak,this._writingDataChunks=!1}}function RI(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var ck;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(ck||(ck={}));function MI(t,e){return new OI(t,e).decode()}var St=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function xm(){St.console&&typeof St.console.log=="function"&&St.console.log.apply(St.console,arguments)}var hr={log:xm,warn:function(t){St.console&&(typeof St.console.warn=="function"?St.console.warn.apply(St.console,arguments):xm.call(null,arguments))},error:function(t){St.console&&(typeof St.console.error=="function"?St.console.error.apply(St.console,arguments):xm(t))}};function ym(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){cl(n.response,e,r)},n.onerror=function(){hr.error("could not download file")},n.send()}function dk(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Jh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var cl=St.saveAs||((typeof window>"u"?"undefined":or(window))!=="object"||window!==St?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=St.URL||St.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?dk(a.href)?ym(t,e,r):Jh(a,a.target="_blank"):Jh(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Jh(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(dk(t))ym(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Jh(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:or(i)!=="object"&&(hr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return ym(t,e,r);var a=t.type==="application/octet-stream",i=/constructor/i.test(St.HTMLElement)||St.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":or(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var A=St.URL||St.webkitURL,c=A.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){A.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function wN(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(t);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),A=this.g.toString(16),c=this.b.toString(16);return l.length==1&&(l="0"+l),A.length==1&&(A="0"+A),c.length==1&&(c="0"+c),"#"+l+A+c}}var O0=St.atob.bind(St),uk=St.btoa.bind(St);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function bm(t,e){var r=t[0],n=t[1],a=t[2],i=t[3];r=Dn(r,n,a,i,e[0],7,-680876936),i=Dn(i,r,n,a,e[1],12,-389564586),a=Dn(a,i,r,n,e[2],17,606105819),n=Dn(n,a,i,r,e[3],22,-1044525330),r=Dn(r,n,a,i,e[4],7,-176418897),i=Dn(i,r,n,a,e[5],12,1200080426),a=Dn(a,i,r,n,e[6],17,-1473231341),n=Dn(n,a,i,r,e[7],22,-45705983),r=Dn(r,n,a,i,e[8],7,1770035416),i=Dn(i,r,n,a,e[9],12,-1958414417),a=Dn(a,i,r,n,e[10],17,-42063),n=Dn(n,a,i,r,e[11],22,-1990404162),r=Dn(r,n,a,i,e[12],7,1804603682),i=Dn(i,r,n,a,e[13],12,-40341101),a=Dn(a,i,r,n,e[14],17,-1502002290),r=zn(r,n=Dn(n,a,i,r,e[15],22,1236535329),a,i,e[1],5,-165796510),i=zn(i,r,n,a,e[6],9,-1069501632),a=zn(a,i,r,n,e[11],14,643717713),n=zn(n,a,i,r,e[0],20,-373897302),r=zn(r,n,a,i,e[5],5,-701558691),i=zn(i,r,n,a,e[10],9,38016083),a=zn(a,i,r,n,e[15],14,-660478335),n=zn(n,a,i,r,e[4],20,-405537848),r=zn(r,n,a,i,e[9],5,568446438),i=zn(i,r,n,a,e[14],9,-1019803690),a=zn(a,i,r,n,e[3],14,-187363961),n=zn(n,a,i,r,e[8],20,1163531501),r=zn(r,n,a,i,e[13],5,-1444681467),i=zn(i,r,n,a,e[2],9,-51403784),a=zn(a,i,r,n,e[7],14,1735328473),r=On(r,n=zn(n,a,i,r,e[12],20,-1926607734),a,i,e[5],4,-378558),i=On(i,r,n,a,e[8],11,-2022574463),a=On(a,i,r,n,e[11],16,1839030562),n=On(n,a,i,r,e[14],23,-35309556),r=On(r,n,a,i,e[1],4,-1530992060),i=On(i,r,n,a,e[4],11,1272893353),a=On(a,i,r,n,e[7],16,-155497632),n=On(n,a,i,r,e[10],23,-1094730640),r=On(r,n,a,i,e[13],4,681279174),i=On(i,r,n,a,e[0],11,-358537222),a=On(a,i,r,n,e[3],16,-722521979),n=On(n,a,i,r,e[6],23,76029189),r=On(r,n,a,i,e[9],4,-640364487),i=On(i,r,n,a,e[12],11,-421815835),a=On(a,i,r,n,e[15],16,530742520),r=Rn(r,n=On(n,a,i,r,e[2],23,-995338651),a,i,e[0],6,-198630844),i=Rn(i,r,n,a,e[7],10,1126891415),a=Rn(a,i,r,n,e[14],15,-1416354905),n=Rn(n,a,i,r,e[5],21,-57434055),r=Rn(r,n,a,i,e[12],6,1700485571),i=Rn(i,r,n,a,e[3],10,-1894986606),a=Rn(a,i,r,n,e[10],15,-1051523),n=Rn(n,a,i,r,e[1],21,-2054922799),r=Rn(r,n,a,i,e[8],6,1873313359),i=Rn(i,r,n,a,e[15],10,-30611744),a=Rn(a,i,r,n,e[6],15,-1560198380),n=Rn(n,a,i,r,e[13],21,1309151649),r=Rn(r,n,a,i,e[4],6,-145523070),i=Rn(i,r,n,a,e[11],10,-1120210379),a=Rn(a,i,r,n,e[2],15,718787259),n=Rn(n,a,i,r,e[9],21,-343485551),t[0]=fo(r,t[0]),t[1]=fo(n,t[1]),t[2]=fo(a,t[2]),t[3]=fo(i,t[3])}function bg(t,e,r,n,a,i){return e=fo(fo(e,t),fo(n,i)),fo(e<<a|e>>>32-a,r)}function Dn(t,e,r,n,a,i,o){return bg(e&r|~e&n,t,e,a,i,o)}function zn(t,e,r,n,a,i,o){return bg(e&n|r&~n,t,e,a,i,o)}function On(t,e,r,n,a,i,o){return bg(e^r^n,t,e,a,i,o)}function Rn(t,e,r,n,a,i,o){return bg(r^(e|~n),t,e,a,i,o)}function vN(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)bm(n,HI(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(bm(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,bm(n,a),n}function HI(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var hk="0123456789abcdef".split("");function KI(t){for(var e="",r=0;r<4;r++)e+=hk[t>>8*r+4&15]+hk[t>>8*r&15];return e}function $I(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function gy(t){return vN(t).map($I).join("")}var GI=function(t){for(var e=0;e<t.length;e++)t[e]=KI(t[e]);return t.join("")}(vN("hello"))!="5d41402abc4b2a76b9719d911017c592";function fo(t,e){if(GI){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function py(t,e){var r,n,a,i;if(t!==r){for(var o=(a=t,i=1+(256/t.length|0),new Array(i+1).join(a)),l=[],A=0;A<256;A++)l[A]=A;var c=0;for(A=0;A<256;A++){var d=l[A];c=(c+d+o.charCodeAt(A))%256,l[A]=l[c],l[c]=d}r=t,n=l}else l=n;var h=e.length,p=0,u=0,y="";for(A=0;A<h;A++)u=(u+(d=l[p=(p+1)%256]))%256,l[p]=l[u],l[u]=d,o=l[(l[p]+l[u])%256],y+=String.fromCharCode(e.charCodeAt(A)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var fk={print:4,modify:8,copy:16,"annot-forms":32};function hA(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(fk.perm!==void 0)throw new Error("Invalid permission: "+l);a+=fk[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=gy(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=py(this.encryptionKey,this.padding)}function fA(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function gk(t){if(or(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[r]){var o=e[r][i];try{o[0].apply(t,n)}catch(l){St.console&&hr.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Uf(t){if(!(this instanceof Uf))return new Uf(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function kN(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function fl(t,e,r,n,a){if(!(this instanceof fl))return new fl(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,kN.call(this,n,a)}function SA(t,e,r,n,a){if(!(this instanceof SA))return new SA(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,kN.call(this,n,a)}function vt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,A=16,c="S",d=null;or(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},u={internal:{},__private__:{}};u.__private__.PubSub=gk;var y="1.3",b=u.__private__.getPdfVersion=function(){return y};u.__private__.setPdfVersion=function(B){y=B};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return v};var g=u.__private__.getPageFormat=function(B){return v[B]};a=a||"a4";var m="compat",w="advanced",k=m;function N(){this.saveGraphicsState(),H(new Ce(ze,0,0,-ze,0,Wo()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),c="n",k=w}function S(){this.restoreGraphicsState(),c="S",k=m}var U=u.__private__.combineFontStyleAndFontWeight=function(B,I){if(B=="bold"&&I=="normal"||B=="bold"&&I==400||B=="normal"&&I=="italic"||B=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(B=I==400||I==="normal"?B==="italic"?"italic":"normal":I!=700&&I!=="bold"||B!=="normal"?(I==700?"bold":I)+""+B:"bold"),B};u.advancedAPI=function(B){var I=k===m;return I&&N.call(this),typeof B!="function"||(B(this),I&&S.call(this)),this},u.compatAPI=function(B){var I=k===w;return I&&S.call(this),typeof B!="function"||(B(this),I&&N.call(this)),this},u.isAdvancedAPI=function(){return k===w};var Q,L=function(B){if(k!==w)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=u.roundToPrecision=u.__private__.roundToPrecision=function(B,I){var te=e||I;if(isNaN(B)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(te).replace(/0+$/,"")};Q=u.hpf=u.__private__.hpf=typeof A=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return V(B,A)}:A==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return V(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return V(B,16)};var F=u.f2=u.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return V(B,2)},D=u.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return V(B,3)},T=u.scale=u.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return k===m?B*ze:k===w?B:void 0},G=function(B){return T(function(I){return k===m?Wo()-I:k===w?I:void 0}(B))};u.__private__.setPrecision=u.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var ne,ce="00000000000000000000000000000000",ue=u.__private__.getFileId=function(){return ce},Y=u.__private__.setFileId=function(B){return ce=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(rn=new hA(d.userPermissions,d.userPassword,d.ownerPassword,ce)),ce};u.setFileId=function(B){return Y(B),this},u.getFileId=function(){return ue()};var Ae=u.__private__.convertDateToPDFDate=function(B){var I=B.getTimezoneOffset(),te=I<0?"+":"-",he=Math.floor(Math.abs(I/60)),je=Math.abs(I%60),Me=[te,K(he),"'",K(je),"'"].join("");return["D:",B.getFullYear(),K(B.getMonth()+1),K(B.getDate()),K(B.getHours()),K(B.getMinutes()),K(B.getSeconds()),Me].join("")},fe=u.__private__.convertPDFDateToDate=function(B){var I=parseInt(B.substr(2,4),10),te=parseInt(B.substr(6,2),10)-1,he=parseInt(B.substr(8,2),10),je=parseInt(B.substr(10,2),10),Me=parseInt(B.substr(12,2),10),Ge=parseInt(B.substr(14,2),10);return new Date(I,te,he,je,Me,Ge,0)},we=u.__private__.setCreationDate=function(B){var I;if(B===void 0&&(B=new Date),B instanceof Date)I=Ae(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=B}return ne=I},E=u.__private__.getCreationDate=function(B){var I=ne;return B==="jsDate"&&(I=fe(ne)),I};u.setCreationDate=function(B){return we(B),this},u.getCreationDate=function(B){return E(B)};var z,K=u.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},W=u.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},J=0,re=[],be=[],me=0,ae=[],X=[],ye=!1,xe=be;u.__private__.setCustomOutputDestination=function(B){ye=!0,xe=B};var Oe=function(B){ye||(xe=B)};u.__private__.resetCustomOutputDestination=function(){ye=!1,xe=be};var H=u.__private__.out=function(B){return B=B.toString(),me+=B.length+1,xe.push(B),xe},$e=u.__private__.write=function(B){return H(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},lt=u.__private__.getArrayBuffer=function(B){for(var I=B.length,te=new ArrayBuffer(I),he=new Uint8Array(te);I--;)he[I]=B.charCodeAt(I);return te},nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return nt};var Ne=t.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(B){return Ne=k===w?B/ze:B,this};var qe,Ye=u.__private__.getFontSize=u.getFontSize=function(){return k===m?Ne:Ne*ze},ot=t.R2L||!1;u.__private__.setR2L=u.setR2L=function(B){return ot=B,this},u.__private__.getR2L=u.getR2L=function(){return ot};var it,ke=u.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))qe=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');qe=B}else qe=parseInt(B,10)};u.__private__.getZoomMode=function(){return qe};var oe,Be=u.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');it=B};u.__private__.getPageMode=function(){return it};var Se=u.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');oe=B};u.__private__.getLayoutMode=function(){return oe},u.__private__.setDisplayMode=u.setDisplayMode=function(B,I,te){return ke(B),Se(I),Be(te),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(B){if(Object.keys(Qe).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[B]},u.__private__.getDocumentProperties=function(){return Qe},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(B){for(var I in Qe)Qe.hasOwnProperty(I)&&B[I]&&(Qe[I]=B[I]);return this},u.__private__.setDocumentProperty=function(B,I){if(Object.keys(Qe).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[B]=I};var se,ze,O,Ee,Pe,Le={},Re={},ht=[],rt={},ut={},at={},ct={},de=null,We=0,Je=[],et=new gk(u),Zt=t.hotfixes||[],Ft={},Rt={},ge=[],Ce=function B(I,te,he,je,Me,Ge){if(!(this instanceof B))return new B(I,te,he,je,Me,Ge);isNaN(I)&&(I=1),isNaN(te)&&(te=0),isNaN(he)&&(he=0),isNaN(je)&&(je=1),isNaN(Me)&&(Me=0),isNaN(Ge)&&(Ge=0),this._matrix=[I,te,he,je,Me,Ge]};Object.defineProperty(Ce.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Ce.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Ce.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Ce.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Ce.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Ce.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Ce.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Ce.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Ce.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Ce.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Ce.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Ce.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Ce.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ce.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ce.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ce.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ce.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(B)},Ce.prototype.multiply=function(B){var I=B.sx*this.sx+B.shy*this.shx,te=B.sx*this.shy+B.shy*this.sy,he=B.shx*this.sx+B.sy*this.shx,je=B.shx*this.shy+B.sy*this.sy,Me=B.tx*this.sx+B.ty*this.shx+this.tx,Ge=B.tx*this.shy+B.ty*this.sy+this.ty;return new Ce(I,te,he,je,Me,Ge)},Ce.prototype.decompose=function(){var B=this.sx,I=this.shy,te=this.shx,he=this.sy,je=this.tx,Me=this.ty,Ge=Math.sqrt(B*B+I*I),yt=(B/=Ge)*te+(I/=Ge)*he;te-=B*yt,he-=I*yt;var Bt=Math.sqrt(te*te+he*he);return yt/=Bt,B*(he/=Bt)<I*(te/=Bt)&&(B=-B,I=-I,yt=-yt,Ge=-Ge),{scale:new Ce(Ge,0,0,Bt,0,0),translate:new Ce(1,0,0,1,je,Me),rotate:new Ce(B,I,-I,B,0,0),skew:new Ce(1,0,yt,1,0,0)}},Ce.prototype.toString=function(B){return this.join(" ")},Ce.prototype.inversed=function(){var B=this.sx,I=this.shy,te=this.shx,he=this.sy,je=this.tx,Me=this.ty,Ge=1/(B*he-I*te),yt=he*Ge,Bt=-I*Ge,Et=-te*Ge,Tt=B*Ge;return new Ce(yt,Bt,Et,Tt,-yt*je-Et*Me,-Bt*je-Tt*Me)},Ce.prototype.applyToPoint=function(B){var I=B.x*this.sx+B.y*this.shx+this.tx,te=B.x*this.shy+B.y*this.sy+this.ty;return new Zs(I,te)},Ce.prototype.applyToRectangle=function(B){var I=this.applyToPoint(B),te=this.applyToPoint(new Zs(B.x+B.w,B.y+B.h));return new Cc(I.x,I.y,te.x-I.x,te.y-I.y)},Ce.prototype.clone=function(){var B=this.sx,I=this.shy,te=this.shx,he=this.sy,je=this.tx,Me=this.ty;return new Ce(B,I,te,he,je,Me)},u.Matrix=Ce;var Ke=u.matrixMult=function(B,I){return I.multiply(B)},gt=new Ce(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=gt;var Kt=function(B,I){if(!ut[B]){var te=(I instanceof fl?"Sh":"P")+(Object.keys(rt).length+1).toString(10);I.id=te,ut[B]=te,rt[te]=I,et.publish("addPattern",I)}};u.ShadingPattern=fl,u.TilingPattern=SA,u.addShadingPattern=function(B,I){return L("addShadingPattern()"),Kt(B,I),this},u.beginTilingPattern=function(B){L("beginTilingPattern()"),jc(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},u.endTilingPattern=function(B,I){L("endTilingPattern()"),I.stream=X[z].join(`
`),Kt(B,I),et.publish("endTilingPattern",I),ge.pop().restore()};var Ar,qt=u.__private__.newObject=function(){var B=nr();return er(B,!0),B},nr=u.__private__.newObjectDeferred=function(){return J++,re[J]=function(){return me},J},er=function(B,I){return I=typeof I=="boolean"&&I,re[B]=me,I&&H(B+" 0 obj"),B},bn=u.__private__.newAdditionalObject=function(){var B={objId:nr(),content:""};return ae.push(B),B},Qn=nr(),aa=nr(),Ta=u.__private__.decodeColorString=function(B){var I=B.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length!==5||I[4]!=="k"&&I[4]!=="K"||(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var te=parseFloat(I[0]);I=[te,te,te,"r"]}for(var he="#",je=0;je<3;je++)he+=("0"+Math.floor(255*parseFloat(I[je])).toString(16)).slice(-2);return he},pa=u.__private__.encodeColorString=function(B){var I;typeof B=="string"&&(B={ch1:B});var te=B.ch1,he=B.ch2,je=B.ch3,Me=B.ch4,Ge=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var yt=new wN(te);if(yt.ok)te=yt.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var Bt=parseInt(te.substr(1),16);te=Bt>>16&255,he=Bt>>8&255,je=255&Bt}if(he===void 0||Me===void 0&&te===he&&he===je)I=typeof te=="string"?te+" "+Ge[0]:B.precision===2?F(te/255)+" "+Ge[0]:D(te/255)+" "+Ge[0];else if(Me===void 0||or(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return["1.","1.","1.",Ge[1]].join(" ");I=typeof te=="string"?[te,he,je,Ge[1]].join(" "):B.precision===2?[F(te/255),F(he/255),F(je/255),Ge[1]].join(" "):[D(te/255),D(he/255),D(je/255),Ge[1]].join(" ")}else I=typeof te=="string"?[te,he,je,Me,Ge[2]].join(" "):B.precision===2?[F(te),F(he),F(je),F(Me),Ge[2]].join(" "):[D(te),D(he),D(je),D(Me),Ge[2]].join(" ");return I},ie=u.__private__.getFilters=function(){return o},Ie=u.__private__.putStream=function(B){var I=(B=B||{}).data||"",te=B.filters||ie(),he=B.alreadyAppliedFilters||[],je=B.addLength1||!1,Me=I.length,Ge=B.objectId,yt=function(nn){return nn};if(d!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(yt=rn.encryptor(Ge,0));var Bt={};te===!0&&(te=["FlateEncode"]);var Et=B.additionalKeyValues||[],Tt=(Bt=vt.API.processDataByFilters!==void 0?vt.API.processDataByFilters(I,te):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(he)?he.join(" "):he.toString());if(Bt.data.length!==0&&(Et.push({key:"Length",value:Bt.data.length}),je===!0&&Et.push({key:"Length1",value:Me})),Tt.length!=0)if(Tt.split("/").length-1==1)Et.push({key:"Filter",value:Tt});else{Et.push({key:"Filter",value:"["+Tt+"]"});for(var Jt=0;Jt<Et.length;Jt+=1)if(Et[Jt].key==="DecodeParms"){for(var jr=[],Wr=0;Wr<Bt.reverseChain.split("/").length-1;Wr+=1)jr.push("null");jr.push(Et[Jt].value),Et[Jt].value="["+jr.join(" ")+"]"}}H("<<");for(var fr=0;fr<Et.length;fr++)H("/"+Et[fr].key+" "+Et[fr].value);H(">>"),Bt.data.length!==0&&(H("stream"),H(yt(Bt.data)),H("endstream"))},mt=u.__private__.putPage=function(B){var I=B.number,te=B.data,he=B.objId,je=B.contentsObjId;er(he,!0),H("<</Type /Page"),H("/Parent "+B.rootDictionaryObjId+" 0 R"),H("/Resources "+B.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(Q(B.mediaBox.bottomLeftX))+" "+parseFloat(Q(B.mediaBox.bottomLeftY))+" "+Q(B.mediaBox.topRightX)+" "+Q(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&H("/CropBox ["+Q(B.cropBox.bottomLeftX)+" "+Q(B.cropBox.bottomLeftY)+" "+Q(B.cropBox.topRightX)+" "+Q(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&H("/BleedBox ["+Q(B.bleedBox.bottomLeftX)+" "+Q(B.bleedBox.bottomLeftY)+" "+Q(B.bleedBox.topRightX)+" "+Q(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&H("/TrimBox ["+Q(B.trimBox.bottomLeftX)+" "+Q(B.trimBox.bottomLeftY)+" "+Q(B.trimBox.topRightX)+" "+Q(B.trimBox.topRightY)+"]"),B.artBox!==null&&H("/ArtBox ["+Q(B.artBox.bottomLeftX)+" "+Q(B.artBox.bottomLeftY)+" "+Q(B.artBox.topRightX)+" "+Q(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&H("/UserUnit "+B.userUnit),et.publish("putPage",{objId:he,pageContext:Je[I],pageNumber:I,page:te}),H("/Contents "+je+" 0 R"),H(">>"),H("endobj");var Me=te.join(`
`);return k===w&&(Me+=`
Q`),er(je,!0),Ie({data:Me,filters:ie(),objectId:je}),H("endobj"),he},Qt=u.__private__.putPages=function(){var B,I,te=[];for(B=1;B<=We;B++)Je[B].objId=nr(),Je[B].contentsObjId=nr();for(B=1;B<=We;B++)te.push(mt({number:B,data:X[B],objId:Je[B].objId,contentsObjId:Je[B].contentsObjId,mediaBox:Je[B].mediaBox,cropBox:Je[B].cropBox,bleedBox:Je[B].bleedBox,trimBox:Je[B].trimBox,artBox:Je[B].artBox,userUnit:Je[B].userUnit,rootDictionaryObjId:Qn,resourceDictionaryObjId:aa}));er(Qn,!0),H("<</Type /Pages");var he="/Kids [";for(I=0;I<We;I++)he+=te[I]+" 0 R ";H(he+"]"),H("/Count "+We),H(">>"),H("endobj"),et.publish("postPutPages")},Fr=function(B){et.publish("putFont",{font:B,out:H,newObject:qt,putStream:Ie}),B.isAlreadyPutted!==!0&&(B.objectNumber=qt(),H("<<"),H("/Type /Font"),H("/BaseFont /"+fA(B.postScriptName)),H("/Subtype /Type1"),typeof B.encoding=="string"&&H("/Encoding /"+B.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},Da=function(B){B.objectNumber=qt();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[Q(B.x),Q(B.y),Q(B.x+B.width),Q(B.y+B.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var te=B.pages[1].join(`
`);Ie({data:te,additionalKeyValues:I,objectId:B.objectNumber}),H("endobj")},Ws=function(B,I){I||(I=21);var te=qt(),he=function(Ge,yt){var Bt,Et=[],Tt=1/(yt-1);for(Bt=0;Bt<1;Bt+=Tt)Et.push(Bt);if(Et.push(1),Ge[0].offset!=0){var Jt={offset:0,color:Ge[0].color};Ge.unshift(Jt)}if(Ge[Ge.length-1].offset!=1){var jr={offset:1,color:Ge[Ge.length-1].color};Ge.push(jr)}for(var Wr="",fr=0,nn=0;nn<Et.length;nn++){for(Bt=Et[nn];Bt>Ge[fr+1].offset;)fr++;var qr=Ge[fr].offset,wn=(Bt-qr)/(Ge[fr+1].offset-qr),ri=Ge[fr].color,as=Ge[fr+1].color;Wr+=W(Math.round((1-wn)*ri[0]+wn*as[0]).toString(16))+W(Math.round((1-wn)*ri[1]+wn*as[1]).toString(16))+W(Math.round((1-wn)*ri[2]+wn*as[2]).toString(16))}return Wr.trim()}(B.colors,I),je=[];je.push({key:"FunctionType",value:"0"}),je.push({key:"Domain",value:"[0.0 1.0]"}),je.push({key:"Size",value:"["+I+"]"}),je.push({key:"BitsPerSample",value:"8"}),je.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),je.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie({data:he,additionalKeyValues:je,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),H("endobj"),B.objectNumber=qt(),H("<< /ShadingType "+B.type),H("/ColorSpace /DeviceRGB");var Me="/Coords ["+Q(parseFloat(B.coords[0]))+" "+Q(parseFloat(B.coords[1]))+" ";B.type===2?Me+=Q(parseFloat(B.coords[2]))+" "+Q(parseFloat(B.coords[3])):Me+=Q(parseFloat(B.coords[2]))+" "+Q(parseFloat(B.coords[3]))+" "+Q(parseFloat(B.coords[4]))+" "+Q(parseFloat(B.coords[5])),H(Me+="]"),B.matrix&&H("/Matrix ["+B.matrix.toString()+"]"),H("/Function "+te+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},Qi=function(B,I){var te=nr(),he=qt();I.push({resourcesOid:te,objectOid:he}),B.objectNumber=he;var je=[];je.push({key:"Type",value:"/Pattern"}),je.push({key:"PatternType",value:"1"}),je.push({key:"PaintType",value:"1"}),je.push({key:"TilingType",value:"1"}),je.push({key:"BBox",value:"["+B.boundingBox.map(Q).join(" ")+"]"}),je.push({key:"XStep",value:Q(B.xStep)}),je.push({key:"YStep",value:Q(B.yStep)}),je.push({key:"Resources",value:te+" 0 R"}),B.matrix&&je.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),Ie({data:B.stream,additionalKeyValues:je,objectId:B.objectNumber}),H("endobj")},Hg=function(B){for(var I in B.objectNumber=qt(),H("<<"),B)switch(I){case"opacity":H("/ca "+F(B[I]));break;case"stroke-opacity":H("/CA "+F(B[I]))}H(">>"),H("endobj")},mc=function(B){er(B.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var I in H("/Font <<"),Le)Le.hasOwnProperty(I)&&(h===!1||h===!0&&p.hasOwnProperty(I))&&H("/"+I+" "+Le[I].objectNumber+" 0 R");H(">>")}(),function(){if(Object.keys(rt).length>0){for(var I in H("/Shading <<"),rt)rt.hasOwnProperty(I)&&rt[I]instanceof fl&&rt[I].objectNumber>=0&&H("/"+I+" "+rt[I].objectNumber+" 0 R");et.publish("putShadingPatternDict"),H(">>")}}(),function(I){if(Object.keys(rt).length>0){for(var te in H("/Pattern <<"),rt)rt.hasOwnProperty(te)&&rt[te]instanceof u.TilingPattern&&rt[te].objectNumber>=0&&rt[te].objectNumber<I&&H("/"+te+" "+rt[te].objectNumber+" 0 R");et.publish("putTilingPatternDict"),H(">>")}}(B.objectOid),function(){if(Object.keys(at).length>0){var I;for(I in H("/ExtGState <<"),at)at.hasOwnProperty(I)&&at[I].objectNumber>=0&&H("/"+I+" "+at[I].objectNumber+" 0 R");et.publish("putGStateDict"),H(">>")}}(),function(){for(var I in H("/XObject <<"),Ft)Ft.hasOwnProperty(I)&&Ft[I].objectNumber>=0&&H("/"+I+" "+Ft[I].objectNumber+" 0 R");et.publish("putXobjectDict"),H(">>")}(),H(">>"),H("endobj")},Iu=function(B){Re[B.fontName]=Re[B.fontName]||{},Re[B.fontName][B.fontStyle]=B.id},Pu=function(B,I,te,he,je){var Me={id:"F"+(Object.keys(Le).length+1).toString(10),postScriptName:B,fontName:I,fontStyle:te,encoding:he,isStandardFont:je||!1,metadata:{}};return et.publish("addFont",{font:Me,instance:this}),Le[Me.id]=Me,Iu(Me),Me.id},za=u.__private__.pdfEscape=u.pdfEscape=function(B,I){return function(te,he){var je,Me,Ge,yt,Bt,Et,Tt,Jt,jr;if(Ge=(he=he||{}).sourceEncoding||"Unicode",Bt=he.outputEncoding,(he.autoencode||Bt)&&Le[se].metadata&&Le[se].metadata[Ge]&&Le[se].metadata[Ge].encoding&&(yt=Le[se].metadata[Ge].encoding,!Bt&&Le[se].encoding&&(Bt=Le[se].encoding),!Bt&&yt.codePages&&(Bt=yt.codePages[0]),typeof Bt=="string"&&(Bt=yt[Bt]),Bt)){for(Tt=!1,Et=[],je=0,Me=te.length;je<Me;je++)(Jt=Bt[te.charCodeAt(je)])?Et.push(String.fromCharCode(Jt)):Et.push(te[je]),Et[je].charCodeAt(0)>>8&&(Tt=!0);te=Et.join("")}for(je=te.length;Tt===void 0&&je!==0;)te.charCodeAt(je-1)>>8&&(Tt=!0),je--;if(!Tt)return te;for(Et=he.noBOM?[]:[254,255],je=0,Me=te.length;je<Me;je++){if((jr=(Jt=te.charCodeAt(je))>>8)>>8)throw new Error("Character at position "+je+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Et.push(jr),Et.push(Jt-(jr<<8))}return String.fromCharCode.apply(void 0,Et)}(B,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xc=u.__private__.beginPage=function(B){X[++We]=[],Je[We]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Du(We),Oe(X[z])},Tu=function(B,I){var te,he,je;switch(r=I||r,typeof B=="string"&&(te=g(B.toLowerCase()),Array.isArray(te)&&(he=te[0],je=te[1])),Array.isArray(B)&&(he=B[0]*ze,je=B[1]*ze),isNaN(he)&&(he=a[0],je=a[1]),(he>14400||je>14400)&&(hr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),he=Math.min(14400,he),je=Math.min(14400,je)),a=[he,je],r.substr(0,1)){case"l":je>he&&(a=[je,he]);break;case"p":he>je&&(a=[je,he])}xc(a),Ut(wc),H(Ml),kc!==0&&H(kc+" J"),Bc!==0&&H(Bc+" j"),et.publish("addPage",{pageNumber:We})},yc=function(B){B>0&&B<=We&&(X.splice(B,1),Je.splice(B,1),We--,z>We&&(z=We),this.setPage(z))},Du=function(B){B>0&&B<=We&&(z=B)},zu=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return X.length-1},Ou=function(B,I,te){var he,je=void 0;return te=te||{},B=B!==void 0?B:Le[se].fontName,I=I!==void 0?I:Le[se].fontStyle,he=B.toLowerCase(),Re[he]!==void 0&&Re[he][I]!==void 0?je=Re[he][I]:Re[B]!==void 0&&Re[B][I]!==void 0?je=Re[B][I]:te.disableWarning===!1&&hr.warn("Unable to look up font label for font '"+B+"', '"+I+"'. Refer to getFontList() for available fonts."),je||te.noFallback||(je=Re.times[I])==null&&(je=Re.times.normal),je},Cs=u.__private__.putInfo=function(){var B=qt(),I=function(he){return he};for(var te in d!==null&&(I=rn.encryptor(B,0)),H("<<"),H("/Producer ("+za(I("jsPDF "+vt.version))+")"),Qe)Qe.hasOwnProperty(te)&&Qe[te]&&H("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+za(I(Qe[te]))+")");H("/CreationDate ("+za(I(ne))+")"),H(">>"),H("endobj")},zl=u.__private__.putCatalog=function(B){var I=(B=B||{}).rootDictionaryObjId||Qn;switch(qt(),H("<<"),H("/Type /Catalog"),H("/Pages "+I+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+qe;te.substr(te.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&H("/OpenAction [3 0 R /XYZ null null "+F(qe)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}it&&H("/PageMode /"+it),et.publish("putCatalog"),H(">>"),H("endobj")},Kg=u.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(J+1)),H("/Root "+J+" 0 R"),H("/Info "+(J-1)+" 0 R"),d!==null&&H("/Encrypt "+rn.oid+" 0 R"),H("/ID [ <"+ce+"> <"+ce+"> ]"),H(">>")},Vr=u.__private__.putHeader=function(){H("%PDF-"+y),H("%")},Ru=u.__private__.putXRef=function(){var B="0000000000";H("xref"),H("0 "+(J+1)),H("0000000000 65535 f ");for(var I=1;I<=J;I++)typeof re[I]=="function"?H((B+re[I]()).slice(-10)+" 00000 n "):re[I]!==void 0?H((B+re[I]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},js=u.__private__.buildDocument=function(){var B;J=0,me=0,be=[],re=[],ae=[],Qn=nr(),aa=nr(),Oe(be),et.publish("buildDocument"),Vr(),Qt(),function(){et.publish("putAdditionalObjects");for(var te=0;te<ae.length;te++){var he=ae[te];er(he.objId,!0),H(he.content),H("endobj")}et.publish("postPutAdditionalObjects")}(),B=[],function(){for(var te in Le)Le.hasOwnProperty(te)&&(h===!1||h===!0&&p.hasOwnProperty(te))&&Fr(Le[te])}(),function(){var te;for(te in at)at.hasOwnProperty(te)&&Hg(at[te])}(),function(){for(var te in Ft)Ft.hasOwnProperty(te)&&Da(Ft[te])}(),function(te){var he;for(he in rt)rt.hasOwnProperty(he)&&(rt[he]instanceof fl?Ws(rt[he]):rt[he]instanceof SA&&Qi(rt[he],te))}(B),et.publish("putResources"),B.forEach(mc),mc({resourcesOid:aa,objectOid:Number.MAX_SAFE_INTEGER}),et.publish("postPutResources"),d!==null&&(rn.oid=qt(),H("<<"),H("/Filter /Standard"),H("/V "+rn.v),H("/R "+rn.r),H("/U <"+rn.toHexString(rn.U)+">"),H("/O <"+rn.toHexString(rn.O)+">"),H("/P "+rn.P),H(">>"),H("endobj")),Cs(),zl();var I=me;return Ru(),Kg(),H("startxref"),H(""+I),H("%%EOF"),Oe(X[z]),be.join(`
`)},Ol=u.__private__.getBlob=function(B){return new Blob([lt(B)],{type:"application/pdf"})},Mu=u.output=u.__private__.output=(Ar=function(B,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",B){case void 0:return js();case"save":u.save(I.filename);break;case"arraybuffer":return lt(js());case"blob":return Ol(js());case"bloburi":case"bloburl":if(St.URL!==void 0&&typeof St.URL.createObjectURL=="function")return St.URL&&St.URL.createObjectURL(Ol(js()))||void 0;hr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",he=js();try{te=uk(he)}catch{te=uk(unescape(encodeURIComponent(he)))}return"data:application/pdf;filename="+I.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var je="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(je=I.pdfObjectUrl,Me="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+je+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",yt=St.open();return yt!==null&&yt.document.write(Ge),yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Et=St.open();if(Et!==null){Et.document.write(Bt);var Tt=this;Et.document.documentElement.querySelector("#pdfViewer").onload=function(){Et.document.title=I.filename,Et.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Tt.output("bloburl"))}}return Et}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(St)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',jr=St.open();if(jr!==null&&(jr.document.write(Jt),jr.document.title=I.filename),jr||typeof safari>"u")return jr;break;case"datauri":case"dataurl":return St.document.location.href=this.output("datauristring",I);default:return null}},Ar.foo=function(){try{return Ar.apply(this,arguments)}catch(te){var B=te.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var I="Error in function "+B.split(`
`)[0].split("<")[0]+": "+te.message;if(!St.console)throw new Error(I);St.console.error(I,te),St.alert&&alert(I)}},Ar.foo.bar=Ar,Ar.foo),Oa=function(B){return Array.isArray(Zt)===!0&&Zt.indexOf(B)>-1};switch(n){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=Oa("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ze=n}var rn=null;we(),Y();var qs=u.__private__.getPageInfo=u.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[B].objId,pageNumber:B,pageContext:Je[B]}},Hu=u.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in Je)if(Je[I].objId===B)break;return qs(I)},$g=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:Je[z].objId,pageNumber:z,pageContext:Je[z]}};u.addPage=function(){return Tu.apply(this,arguments),this},u.setPage=function(){return Du.apply(this,arguments),Oe.call(this,X[z]),this},u.insertPage=function(B){return this.addPage(),this.movePage(z,B),this},u.movePage=function(B,I){var te,he;if(B>I){te=X[B],he=Je[B];for(var je=B;je>I;je--)X[je]=X[je-1],Je[je]=Je[je-1];X[I]=te,Je[I]=he,this.setPage(I)}else if(B<I){te=X[B],he=Je[B];for(var Me=B;Me<I;Me++)X[Me]=X[Me+1],Je[Me]=Je[Me+1];X[I]=te,Je[I]=he,this.setPage(I)}return this},u.deletePage=function(){return yc.apply(this,arguments),this},u.__private__.text=u.text=function(B,I,te,he,je){var Me,Ge,yt,Bt,Et,Tt,Jt,jr,Wr,fr=(he=he||{}).scope||this;if(typeof B=="number"&&typeof I=="number"&&(typeof te=="string"||Array.isArray(te))){var nn=te;te=I,I=B,B=nn}if(arguments[3]instanceof Ce==0?(yt=arguments[4],Bt=arguments[5],or(Jt=arguments[3])==="object"&&Jt!==null||(typeof yt=="string"&&(Bt=yt,yt=null),typeof Jt=="string"&&(Bt=Jt,Jt=null),typeof Jt=="number"&&(yt=Jt,Jt=null),he={flags:Jt,angle:yt,align:Bt})):(L("The transform parameter of text() with a Matrix value"),Wr=je),isNaN(I)||isNaN(te)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return fr;var qr,wn="",ri=typeof he.lineHeightFactor=="number"?he.lineHeightFactor:$o,as=fr.internal.scaleFactor;function ni(tr){return tr=tr.split("	").join(Array(he.TabLen||9).join(" ")),za(tr,Jt)}function _c(tr){for(var dr,Tr=tr.concat(),an=[],ii=Tr.length;ii--;)typeof(dr=Tr.shift())=="string"?an.push(dr):Array.isArray(tr)&&(dr.length===1||dr[1]===void 0&&dr[2]===void 0)?an.push(dr[0]):an.push([dr[0],dr[1],dr[2]]);return an}function Kl(tr,dr){var Tr;if(typeof tr=="string")Tr=dr(tr)[0];else if(Array.isArray(tr)){for(var an,ii,Dc=tr.concat(),Vl=[],eh=Dc.length;eh--;)typeof(an=Dc.shift())=="string"?Vl.push(dr(an)[0]):Array.isArray(an)&&typeof an[0]=="string"&&(ii=dr(an[0],an[1],an[2]),Vl.push([ii[0],ii[1],ii[2]]));Tr=Vl}return Tr}var Ii=!1,qo=!0;if(typeof B=="string")Ii=!0;else if(Array.isArray(B)){var Jo=B.concat();Ge=[];for(var Pi,vn=Jo.length;vn--;)(typeof(Pi=Jo.shift())!="string"||Array.isArray(Pi)&&typeof Pi[0]!="string")&&(qo=!1);Ii=qo}if(Ii===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var Yo=Ne/fr.internal.scaleFactor,Xo=Yo*(ri-1);switch(he.baseline){case"bottom":te-=Xo;break;case"top":te+=Yo-Xo;break;case"hanging":te+=Yo-2*Xo;break;case"middle":te+=Yo/2-Xo}if((Tt=he.maxWidth||0)>0&&(typeof B=="string"?B=fr.splitTextToSize(B,Tt):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(tr,dr){return tr.concat(fr.splitTextToSize(dr,Tt))},[]))),Me={text:B,x:I,y:te,options:he,mutex:{pdfEscape:za,activeFontKey:se,fonts:Le,activeFontSize:Ne}},et.publish("preProcessText",Me),B=Me.text,yt=(he=Me.options).angle,Wr instanceof Ce==0&&yt&&typeof yt=="number"){yt*=Math.PI/180,he.rotationDirection===0&&(yt=-yt),k===w&&(yt=-yt);var Sc=Math.cos(yt),Ec=Math.sin(yt);Wr=new Ce(Sc,Ec,-Ec,Sc,0,0)}else yt&&yt instanceof Ce&&(Wr=yt);k!==w||Wr||(Wr=gt),(Et=he.charSpace||Xs)!==void 0&&(wn+=Q(T(Et))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(jr=he.horizontalScale)!==void 0&&(wn+=Q(100*jr)+` Tz
`),he.lang;var Vn=-1,ai=he.renderingMode!==void 0?he.renderingMode:he.stroke,$l=fr.internal.getCurrentPageInfo().pageContext;switch(ai){case 0:case!1:case"fill":Vn=0;break;case 1:case!0:case"stroke":Vn=1;break;case 2:case"fillThenStroke":Vn=2;break;case 3:case"invisible":Vn=3;break;case 4:case"fillAndAddForClipping":Vn=4;break;case 5:case"strokeAndAddPathForClipping":Vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vn=6;break;case 7:case"addToPathForClipping":Vn=7}var Xu=$l.usedRenderingMode!==void 0?$l.usedRenderingMode:-1;Vn!==-1?wn+=Vn+` Tr
`:Xu!==-1&&(wn+=`0 Tr
`),Vn!==-1&&($l.usedRenderingMode=Vn),Bt=he.align||"left";var Ra,Zo=Ne*ri,Fc=fr.internal.pageSize.getWidth(),Uc=Le[se];Et=he.charSpace||Xs,Tt=he.maxWidth||0,Jt=Object.assign({autoencode:!0,noBOM:!0},he.flags);var Ti=[],el=function(tr){return fr.getStringUnitWidth(tr,{font:Uc,charSpace:Et,fontSize:Ne,doKerning:!1})*Ne/as};if(Object.prototype.toString.call(B)==="[object Array]"){var ma;Ge=_c(B),Bt!=="left"&&(Ra=Ge.map(el));var xa,Di=0;if(Bt==="right"){I-=Ra[0],B=[],vn=Ge.length;for(var si=0;si<vn;si++)si===0?(xa=Js(I),ma=Ys(te)):(xa=T(Di-Ra[si]),ma=-Zo),B.push([Ge[si],xa,ma]),Di=Ra[si]}else if(Bt==="center"){I-=Ra[0]/2,B=[],vn=Ge.length;for(var zi=0;zi<vn;zi++)zi===0?(xa=Js(I),ma=Ys(te)):(xa=T((Di-Ra[zi])/2),ma=-Zo),B.push([Ge[zi],xa,ma]),Di=Ra[zi]}else if(Bt==="left"){B=[],vn=Ge.length;for(var Lc=0;Lc<vn;Lc++)B.push(Ge[Lc])}else if(Bt==="justify"&&Uc.encoding==="Identity-H"){B=[],vn=Ge.length,Tt=Tt!==0?Tt:Fc;for(var Gl=0,Pr=0;Pr<vn;Pr++)if(ma=Pr===0?Ys(te):-Zo,xa=Pr===0?Js(I):Gl,Pr<vn-1){var Zu=T((Tt-Ra[Pr])/(Ge[Pr].split(" ").length-1)),_s=Ge[Pr].split(" ");B.push([_s[0]+" ",xa,ma]),Gl=0;for(var Ss=1;Ss<_s.length;Ss++){var Qc=(el(_s[Ss-1]+" "+_s[Ss])-el(_s[Ss]))*as+Zu;Ss==_s.length-1?B.push([_s[Ss],Qc,0]):B.push([_s[Ss]+" ",Qc,0]),Gl-=Qc}}else B.push([Ge[Pr],xa,ma]);B.push(["",Gl,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],vn=Ge.length,Tt=Tt!==0?Tt:Fc,Pr=0;Pr<vn;Pr++){ma=Pr===0?Ys(te):-Zo,xa=Pr===0?Js(I):0;var Ic=Ge[Pr].split(" ").length-1,Pc=Ic>0?(Tt-Ra[Pr])/Ic:0;Pr<vn-1?Ti.push(Q(T(Pc))):Ti.push(0),B.push([Ge[Pr],xa,ma])}}}(typeof he.R2L=="boolean"?he.R2L:ot)===!0&&(B=Kl(B,function(tr,dr,Tr){return[tr.split("").reverse().join(""),dr,Tr]})),Me={text:B,x:I,y:te,options:he,mutex:{pdfEscape:za,activeFontKey:se,fonts:Le,activeFontSize:Ne}},et.publish("postProcessText",Me),B=Me.text,qr=Me.mutex.isHex||!1;var Tc=Le[se].encoding;Tc!=="WinAnsiEncoding"&&Tc!=="StandardEncoding"||(B=Kl(B,function(tr,dr,Tr){return[ni(tr),dr,Tr]})),Ge=_c(B),B=[];for(var Oi,Ri,Mi,tl=Array.isArray(Ge[0])?1:0,Hi="",rl=function(tr,dr,Tr){var an="";return Tr instanceof Ce?(Tr=typeof he.angle=="number"?Ke(Tr,new Ce(1,0,0,1,tr,dr)):Ke(new Ce(1,0,0,1,tr,dr),Tr),k===w&&(Tr=Ke(new Ce(1,0,0,-1,0,0),Tr)),an=Tr.join(" ")+` Tm
`):an=Q(tr)+" "+Q(dr)+` Td
`,an},Ma=0;Ma<Ge.length;Ma++){switch(Hi="",tl){case 1:Mi=(qr?"<":"(")+Ge[Ma][0]+(qr?">":")"),Oi=parseFloat(Ge[Ma][1]),Ri=parseFloat(Ge[Ma][2]);break;case 0:Mi=(qr?"<":"(")+Ge[Ma]+(qr?">":")"),Oi=Js(I),Ri=Ys(te)}Ti!==void 0&&Ti[Ma]!==void 0&&(Hi=Ti[Ma]+` Tw
`),Ma===0?B.push(Hi+rl(Oi,Ri,Wr)+Mi):tl===0?B.push(Hi+Mi):tl===1&&B.push(Hi+rl(Oi,Ri,Wr)+Mi)}B=tl===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Es=`BT
/`;return Es+=se+" "+Ne+` Tf
`,Es+=Q(Ne*ri)+` TL
`,Es+=Go+`
`,Es+=wn,Es+=B,H(Es+="ET"),p[se]=!0,fr};var Gg=u.__private__.clip=u.clip=function(B){return H(B==="evenodd"?"W*":"W"),this};u.clipEvenOdd=function(){return Gg("evenodd")},u.__private__.discardPath=u.discardPath=function(){return H("n"),this};var Ns=u.__private__.isValidStyle=function(B){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(I=!0),I};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(B){return Ns(B)&&(c=B),this};var Ku=u.__private__.getStyle=u.getStyle=function(B){var I=c;switch(B){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=B}return I},$u=u.close=function(){return H("h"),this};u.stroke=function(){return H("S"),this},u.fill=function(B){return Rl("f",B),this},u.fillEvenOdd=function(B){return Rl("f*",B),this},u.fillStroke=function(B){return Rl("B",B),this},u.fillStrokeEvenOdd=function(B){return Rl("B*",B),this};var Rl=function(B,I){or(I)==="object"?Wg(I,B):H(B)},Ko=function(B){B===null||k===w&&B===void 0||(B=Ku(B),H(B))};function Vg(B,I,te,he,je){var Me=new SA(I||this.boundingBox,te||this.xStep,he||this.yStep,this.gState,je||this.matrix);Me.stream=this.stream;var Ge=B+"$$"+this.cloneIndex+++"$$";return Kt(Ge,Me),Me}var Wg=function(B,I){var te=ut[B.key],he=rt[te];if(he instanceof fl)H("q"),H(qg(I)),he.gState&&u.setGState(he.gState),H(B.matrix.toString()+" cm"),H("/"+te+" sh"),H("Q");else if(he instanceof SA){var je=new Ce(1,0,0,-1,0,Wo());B.matrix&&(je=je.multiply(B.matrix||gt),te=Vg.call(he,B.key,B.boundingBox,B.xStep,B.yStep,je).id),H("q"),H("/Pattern cs"),H("/"+te+" scn"),he.gState&&u.setGState(he.gState),H(I),H("Q")}},qg=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},bc=u.moveTo=function(B,I){return H(Q(T(B))+" "+Q(G(I))+" m"),this},Gu=u.lineTo=function(B,I){return H(Q(T(B))+" "+Q(G(I))+" l"),this},ns=u.curveTo=function(B,I,te,he,je,Me){return H([Q(T(B)),Q(G(I)),Q(T(te)),Q(G(he)),Q(T(je)),Q(G(Me)),"c"].join(" ")),this};u.__private__.line=u.line=function(B,I,te,he,je){if(isNaN(B)||isNaN(I)||isNaN(te)||isNaN(he)||!Ns(je))throw new Error("Invalid arguments passed to jsPDF.line");return k===m?this.lines([[te-B,he-I]],B,I,[1,1],je||"S"):this.lines([[te-B,he-I]],B,I,[1,1]).stroke()},u.__private__.lines=u.lines=function(B,I,te,he,je,Me){var Ge,yt,Bt,Et,Tt,Jt,jr,Wr,fr,nn,qr,wn;if(typeof B=="number"&&(wn=te,te=I,I=B,B=wn),he=he||[1,1],Me=Me||!1,isNaN(I)||isNaN(te)||!Array.isArray(B)||!Array.isArray(he)||!Ns(je)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(bc(I,te),Ge=he[0],yt=he[1],Et=B.length,nn=I,qr=te,Bt=0;Bt<Et;Bt++)(Tt=B[Bt]).length===2?(nn=Tt[0]*Ge+nn,qr=Tt[1]*yt+qr,Gu(nn,qr)):(Jt=Tt[0]*Ge+nn,jr=Tt[1]*yt+qr,Wr=Tt[2]*Ge+nn,fr=Tt[3]*yt+qr,nn=Tt[4]*Ge+nn,qr=Tt[5]*yt+qr,ns(Jt,jr,Wr,fr,nn,qr));return Me&&$u(),Ko(je),this},u.path=function(B){for(var I=0;I<B.length;I++){var te=B[I],he=te.c;switch(te.op){case"m":bc(he[0],he[1]);break;case"l":Gu(he[0],he[1]);break;case"c":ns.apply(this,he);break;case"h":$u()}}return this},u.__private__.rect=u.rect=function(B,I,te,he,je){if(isNaN(B)||isNaN(I)||isNaN(te)||isNaN(he)||!Ns(je))throw new Error("Invalid arguments passed to jsPDF.rect");return k===m&&(he=-he),H([Q(T(B)),Q(G(I)),Q(T(te)),Q(T(he)),"re"].join(" ")),Ko(je),this},u.__private__.triangle=u.triangle=function(B,I,te,he,je,Me,Ge){if(isNaN(B)||isNaN(I)||isNaN(te)||isNaN(he)||isNaN(je)||isNaN(Me)||!Ns(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-B,he-I],[je-te,Me-he],[B-je,I-Me]],B,I,[1,1],Ge,!0),this},u.__private__.roundedRect=u.roundedRect=function(B,I,te,he,je,Me,Ge){if(isNaN(B)||isNaN(I)||isNaN(te)||isNaN(he)||isNaN(je)||isNaN(Me)||!Ns(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var yt=4/3*(Math.SQRT2-1);return je=Math.min(je,.5*te),Me=Math.min(Me,.5*he),this.lines([[te-2*je,0],[je*yt,0,je,Me-Me*yt,je,Me],[0,he-2*Me],[0,Me*yt,-je*yt,Me,-je,Me],[2*je-te,0],[-je*yt,0,-je,-Me*yt,-je,-Me],[0,2*Me-he],[0,-Me*yt,je*yt,-Me,je,-Me]],B+je,I,[1,1],Ge,!0),this},u.__private__.ellipse=u.ellipse=function(B,I,te,he,je){if(isNaN(B)||isNaN(I)||isNaN(te)||isNaN(he)||!Ns(je))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*te,Ge=4/3*(Math.SQRT2-1)*he;return bc(B+te,I),ns(B+te,I-Ge,B+Me,I-he,B,I-he),ns(B-Me,I-he,B-te,I-Ge,B-te,I),ns(B-te,I+Ge,B-Me,I+he,B,I+he),ns(B+Me,I+he,B+te,I+Ge,B+te,I),Ko(je),this},u.__private__.circle=u.circle=function(B,I,te,he){if(isNaN(B)||isNaN(I)||isNaN(te)||!Ns(he))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,I,te,te,he)},u.setFont=function(B,I,te){return te&&(I=U(I,te)),se=Ou(B,I,{disableWarning:!1}),this};var Jg=u.__private__.getFont=u.getFont=function(){return Le[Ou.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var B,I,te={};for(B in Re)if(Re.hasOwnProperty(B))for(I in te[B]=[],Re[B])Re[B].hasOwnProperty(I)&&te[B].push(I);return te},u.addFont=function(B,I,te,he,je){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?je=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(te=U(te,he)),Pu.call(this,B,I,te,je=je||"Identity-H")};var $o,wc=t.lineWidth||.200025,Yg=u.__private__.getLineWidth=u.getLineWidth=function(){return wc},Ut=u.__private__.setLineWidth=u.setLineWidth=function(B){return wc=B,H(Q(T(B))+" w"),this};u.__private__.setLineDash=vt.API.setLineDash=vt.API.setLineDashPattern=function(B,I){if(B=B||[],I=I||0,isNaN(I)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(te){return Q(T(te))}).join(" "),I=Q(T(I)),H("["+B+"] "+I+" d"),this};var Xg=u.__private__.getLineHeight=u.getLineHeight=function(){return Ne*$o};u.__private__.getLineHeight=u.getLineHeight=function(){return Ne*$o};var Zg=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&($o=B),this},ep=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return $o};Zg(t.lineHeight);var Js=u.__private__.getHorizontalCoordinate=function(B){return T(B)},Ys=u.__private__.getVerticalCoordinate=function(B){return k===w?B:Je[z].mediaBox.topRightY-Je[z].mediaBox.bottomLeftY-T(B)},tp=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(B){return Q(Js(B))},rp=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(B){return Q(Ys(B))},Ml=t.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return Ta(Ml)},u.__private__.setStrokeColor=u.setDrawColor=function(B,I,te,he){return Ml=pa({ch1:B,ch2:I,ch3:te,ch4:he,pdfColorType:"draw",precision:2}),H(Ml),this};var vc=t.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return Ta(vc)},u.__private__.setFillColor=u.setFillColor=function(B,I,te,he){return vc=pa({ch1:B,ch2:I,ch3:te,ch4:he,pdfColorType:"fill",precision:2}),H(vc),this};var Go=t.textColor||"0 g",np=u.__private__.getTextColor=u.getTextColor=function(){return Ta(Go)};u.__private__.setTextColor=u.setTextColor=function(B,I,te,he){return Go=pa({ch1:B,ch2:I,ch3:te,ch4:he,pdfColorType:"text",precision:3}),this};var Xs=t.charSpace,ap=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(Xs||0)};u.__private__.setCharSpace=u.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xs=B,this};var kc=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(B){var I=u.CapJoinStyles[B];if(I===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kc=I,H(I+" J"),this};var Bc=0;u.__private__.setLineJoin=u.setLineJoin=function(B){var I=u.CapJoinStyles[B];if(I===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bc=I,H(I+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(Q(T(B))+" M"),this},u.GState=Uf,u.setGState=function(B){(B=typeof B=="string"?at[ct[B]]:Vu(null,B)).equals(de)||(H("/"+B.id+" gs"),de=B)};var Vu=function(B,I){if(!B||!ct[B]){var te=!1;for(var he in at)if(at.hasOwnProperty(he)&&at[he].equals(I)){te=!0;break}if(te)I=at[he];else{var je="GS"+(Object.keys(at).length+1).toString(10);at[je]=I,I.id=je}return B&&(ct[B]=I.id),et.publish("addGState",I),I}};u.addGState=function(B,I){return Vu(B,I),this},u.saveGraphicsState=function(){return H("q"),ht.push({key:se,size:Ne,color:Go}),this},u.restoreGraphicsState=function(){H("Q");var B=ht.pop();return se=B.key,Ne=B.size,Go=B.color,de=null,this},u.setCurrentTransformationMatrix=function(B){return H(B.toString()+" cm"),this},u.comment=function(B){return H("#"+B),this};var Zs=function(B,I){var te=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(Me){isNaN(Me)||(te=parseFloat(Me))}});var he=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return he},set:function(Me){isNaN(Me)||(he=parseFloat(Me))}});var je="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return je},set:function(Me){je=Me.toString()}}),this},Cc=function(B,I,te,he){Zs.call(this,B,I),this.type="rect";var je=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return je},set:function(Ge){isNaN(Ge)||(je=parseFloat(Ge))}});var Me=he||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function(Ge){isNaN(Ge)||(Me=parseFloat(Ge))}}),this},Hl=function(){this.page=We,this.currentPage=z,this.pages=X.slice(0),this.pagesContext=Je.slice(0),this.x=O,this.y=Ee,this.matrix=Pe,this.width=Nc(z),this.height=qu(z),this.outputDestination=xe,this.id="",this.objectNumber=-1};Hl.prototype.restore=function(){We=this.page,z=this.currentPage,Je=this.pagesContext,X=this.pages,O=this.x,Ee=this.y,Pe=this.matrix,Wu(z,this.width),ei(z,this.height),xe=this.outputDestination};var jc=function(B,I,te,he,je){ge.push(new Hl),We=z=0,X=[],O=B,Ee=I,Pe=je,xc([te,he])};for(var Vo in u.beginFormObject=function(B,I,te,he,je){return jc(B,I,te,he,je),this},u.endFormObject=function(B){return function(I){if(Rt[I])ge.pop().restore();else{var te=new Hl,he="Xo"+(Object.keys(Ft).length+1).toString(10);te.id=he,Rt[I]=he,Ft[he]=te,et.publish("addFormObject",te),ge.pop().restore()}}(B),this},u.doFormObject=function(B,I){var te=Ft[Rt[B]];return H("q"),H(I.toString()+" cm"),H("/"+te.id+" Do"),H("Q"),this},u.getFormObject=function(B){var I=Ft[Rt[B]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},u.save=function(B,I){return B=B||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(cl(Ol(js()),B),typeof cl.unload=="function"&&St.setTimeout&&setTimeout(cl.unload,911),this):new Promise(function(te,he){try{var je=cl(Ol(js()),B);typeof cl.unload=="function"&&St.setTimeout&&setTimeout(cl.unload,911),te(je)}catch(Me){he(Me.message)}})},vt.API)vt.API.hasOwnProperty(Vo)&&(Vo==="events"&&vt.API.events.length?function(B,I){var te,he,je;for(je=I.length-1;je!==-1;je--)te=I[je][0],he=I[je][1],B.subscribe.apply(B,[te].concat(typeof he=="function"?[he]:he))}(et,vt.API.events):u[Vo]=vt.API[Vo]);function Nc(B){return Je[B].mediaBox.topRightX-Je[B].mediaBox.bottomLeftX}function Wu(B,I){Je[B].mediaBox.topRightX=I+Je[B].mediaBox.bottomLeftX}function qu(B){return Je[B].mediaBox.topRightY-Je[B].mediaBox.bottomLeftY}function ei(B,I){Je[B].mediaBox.topRightY=I+Je[B].mediaBox.bottomLeftY}var ti=u.getPageWidth=function(B){return Nc(B=B||z)/ze},Ju=u.setPageWidth=function(B,I){Wu(B,I*ze)},Wo=u.getPageHeight=function(B){return qu(B=B||z)/ze},Yu=u.setPageHeight=function(B,I){ei(B,I*ze)};return u.internal={pdfEscape:za,getStyle:Ku,getFont:Jg,getFontSize:Ye,getCharSpace:ap,getTextColor:np,getLineHeight:Xg,getLineHeightFactor:ep,getLineWidth:Yg,write:$e,getHorizontalCoordinate:Js,getVerticalCoordinate:Ys,getCoordinateString:tp,getVerticalCoordinateString:rp,collections:{},newObject:qt,newAdditionalObject:bn,newObjectDeferred:nr,newObjectDeferredBegin:er,getFilters:ie,putStream:Ie,events:et,scaleFactor:ze,pageSize:{getWidth:function(){return ti(z)},setWidth:function(B){Ju(z,B)},getHeight:function(){return Wo(z)},setHeight:function(B){Yu(z,B)}},encryptionOptions:d,encryption:rn,getEncryptor:function(B){return d!==null?rn.encryptor(B,0):function(I){return I}},output:Mu,getNumberOfPages:zu,get pages(){return X},out:H,f2:F,f3:D,getPageInfo:qs,getPageInfoByObjId:Hu,getCurrentPageInfo:$g,getPDFVersion:b,Point:Zs,Rectangle:Cc,Matrix:Ce,hasHotfix:Oa},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return ti(z)},set:function(B){Ju(z,B)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return Wo(z)},set:function(B){Yu(z,B)},enumerable:!0,configurable:!0}),(function(B){for(var I=0,te=nt.length;I<te;I++){var he=Pu.call(this,B[I][0],B[I][1],B[I][2],nt[I][3],!0);h===!1&&(p[he]=!0);var je=B[I][0].split("-");Iu({id:he,fontName:je[0],fontStyle:je[1]||""})}et.publish("addFonts",{fonts:Le,dictionary:Re})}).call(u,nt),se="F1",Tu(a,r),et.publish("initialized"),u}hA.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},hA.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},hA.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},hA.prototype.processOwnerPassword=function(t,e){return py(gy(e).substr(0,5),t)},hA.prototype.encryptor=function(t,e){var r=gy(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return py(r,n)}},Uf.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||or(t)!==or(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},vt.API={events:[]},vt.version="3.0.4";var Qr=vt.API,Aw=1,Dl=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rA=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Lt=function(t){return t.toFixed(2)},Zi=function(t){return t.toFixed(5)};Qr.__acroform__={};var fa=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},pk=function(t){return t*Aw},Is=function(t){var e=new CN,r=xt.internal.getHeight(t)||0,n=xt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Lt(n)),Number(Lt(r))],e},VI=Qr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},WI=Qr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},qI=Qr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Hr=Qr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qI(t,e-1)},Kr=Qr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return VI(t,e-1)},$r=Qr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return WI(t,e-1)},JI=Qr.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],i=t[1],o=t[2],l=t[3],A={};return A.lowerLeft_X=r(a)||0,A.lowerLeft_Y=n(i+l)||0,A.upperRight_X=r(a+o)||0,A.upperRight_Y=n(i)||0,[Number(Lt(A.lowerLeft_X)),Number(Lt(A.lowerLeft_Y)),Number(Lt(A.upperRight_X)),Number(Lt(A.upperRight_Y))]},YI=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=my(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Lt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Is(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},my=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(F){return F.split(`
`)}):a.map(function(F){return[F]});var i=r,o=xt.internal.getHeight(t)||0;o=o<0?-o:o;var l=xt.internal.getWidth(t)||0;l=l<0?-l:l;var A=function(F,D,T){if(F+1<a.length){var G=D+" "+a[F+1][0];return Yh(G,t,T).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var c,d,h=Yh("3",t,i).height,p=t.multiline?o-i:(o-h)/2,u=p+=2,y=0,b=0,v=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Yh(e,t,i=12).width+", FieldWidth:"+l+`
`;break}for(var g="",m=0,w=0;w<a.length;w++)if(a.hasOwnProperty(w)){var k=!1;if(a[w].length!==1&&v!==a[w].length-1){if((h+2)*(m+2)+2>o)continue e;g+=a[w][v],k=!0,b=w,w--}else{g=(g+=a[w][v]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var N=parseInt(w),S=A(N,g,i),U=w>=a.length-1;if(S&&!U){g+=" ",v=0;continue}if(S||U){if(U)b=N;else if(t.multiline&&(h+2)*(m+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(m+2)+2>o)continue e;b=N}}for(var Q="",L=y;L<=b;L++){var V=a[L];if(t.multiline){if(L===b){Q+=V[v]+" ",v=(v+1)%V.length;continue}if(L===y){Q+=V[V.length-1]+" ";continue}}Q+=V[0]+" "}switch(Q=Q.substr(Q.length-1)==" "?Q.substr(0,Q.length-1):Q,d=Yh(Q,t,i).width,t.textAlign){case"right":c=l-d-2;break;case"center":c=(l-d)/2;break;default:c=2}e+=Lt(c)+" "+Lt(u)+` Td
`,e+="("+Dl(Q)+`) Tj
`,e+=-Lt(c)+` 0 Td
`,u=-(i+2),d=0,y=k?b:b+1,m++,g=""}break}return n.text=e,n.fontSize=i,n},Yh=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},XI={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ZI=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},e7=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(vs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(XI)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Aw=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new jN,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&ZI(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],A=[],c=l.Rect;if(l.Rect&&(l.Rect=JI(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=xt.createDefaultAppearanceStream(l),or(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(A=l.getKeyValueListForStream()),l.Rect=c,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=YI(l);A.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var h="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var u=l.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var o in u)if(u.hasOwnProperty(o)){var y=u[o];typeof y=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=u)=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);h+=">>"}A.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:A,objectId:l.objId}),a.internal.out("endobj")}i&&function(b,v){for(var g in b)if(b.hasOwnProperty(g)){var m=g,w=b[g];v.internal.newObjectDeferredBegin(w.objId,!0),or(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete b[m]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},BN=Qr.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",i=0;i<t.length;i++)switch(i!==0&&(a+=" "),or(t[i])){case"boolean":case"number":case"object":a+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Dl(n(t[i].toString()))+")"):a+=t[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wm=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Dl(n(t))+")"},Ds=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ds.prototype.toString=function(){return this.objId+" 0 R"},Ds.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ds.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:BN(a,this.objId,this.scope)}):a instanceof Ds?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var CN=function(){Ds.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};fa(CN,Ds);var jN=function(){Ds.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Dl(r(t))+")"}},set:function(r){t=r}})};fa(jN,Ds);var vs=function t(){Ds.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Hr(e,3)},set:function(g){g?this.F=Kr(e,3):this.F=$r(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');r=g}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(g){n=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(g){n[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(g){n[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(g){n[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(g){n[3]=g}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Lf)return;i="FieldObject"+t.FieldNum++}var g=function(m){return m};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+Dl(g(i))+")"},set:function(g){i=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(g){i=g}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(g){A=g}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Aw:c},set:function(g){c=g}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(g){d=g}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Lf||this instanceof Cl))return wm(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=g}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof pn==0?wm(p,this.objId,this.scope):p},set:function(g){g=g.toString(),p=this instanceof pn==0?g.substr(0,1)==="("?rA(g.substr(1,g.length-2)):rA(g):g}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pn==1?rA(p.substr(1,p.length-1)):p},set:function(g){g=g.toString(),p=this instanceof pn==1?"/"+g:g}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof pn==0?wm(u,this.objId,this.scope):u},set:function(g){g=g.toString(),u=this instanceof pn==0?g.substr(0,1)==="("?rA(g.substr(1,g.length-2)):rA(g):g}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pn==1?rA(u.substr(1,u.length-1)):u},set:function(g){g=g.toString(),u=this instanceof pn==1?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(g){g=!!g,b=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(g){y=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,1)},set:function(g){g?this.Ff=Kr(this.Ff,1):this.Ff=$r(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,2)},set:function(g){g?this.Ff=Kr(this.Ff,2):this.Ff=$r(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,3)},set:function(g){g?this.Ff=Kr(this.Ff,3):this.Ff=$r(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');v=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(v){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};fa(vs,Ds);var DA=function(){vs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return BN(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var A,c=[];A=o.exec(i);)c.push(A[l]);return c}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,18)},set:function(r){r?this.Ff=Kr(this.Ff,18):this.Ff=$r(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Kr(this.Ff,19):this.Ff=$r(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,20)},set:function(r){r?(this.Ff=Kr(this.Ff,20),e.sort()):this.Ff=$r(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,22)},set:function(r){r?this.Ff=Kr(this.Ff,22):this.Ff=$r(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,23)},set:function(r){r?this.Ff=Kr(this.Ff,23):this.Ff=$r(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,27)},set:function(r){r?this.Ff=Kr(this.Ff,27):this.Ff=$r(this.Ff,27)}}),this.hasAppearanceStream=!1};fa(DA,vs);var zA=function(){DA.call(this),this.fontName="helvetica",this.combo=!1};fa(zA,DA);var OA=function(){zA.call(this),this.combo=!0};fa(OA,zA);var R0=function(){OA.call(this),this.edit=!0};fa(R0,OA);var pn=function(){vs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,15)},set:function(r){r?this.Ff=Kr(this.Ff,15):this.Ff=$r(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,16)},set:function(r){r?this.Ff=Kr(this.Ff,16):this.Ff=$r(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,17)},set:function(r){r?this.Ff=Kr(this.Ff,17):this.Ff=$r(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,26)},set:function(r){r?this.Ff=Kr(this.Ff,26):this.Ff=$r(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Dl(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){or(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};fa(pn,vs);var M0=function(){pn.call(this),this.pushButton=!0};fa(M0,pn);var RA=function(){pn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};fa(RA,pn);var Lf=function(){var t,e;vs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Dl(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){or(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fa(Lf,vs),RA.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},RA.prototype.createOption=function(t){var e=new Lf;return e.Parent=this,e.optionName=t,this.Kids.push(e),t7.call(this.scope,e),e};var H0=function(){pn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};fa(H0,pn);var Cl=function(){vs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,13)},set:function(e){e?this.Ff=Kr(this.Ff,13):this.Ff=$r(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,21)},set:function(e){e?this.Ff=Kr(this.Ff,21):this.Ff=$r(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,23)},set:function(e){e?this.Ff=Kr(this.Ff,23):this.Ff=$r(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,24)},set:function(e){e?this.Ff=Kr(this.Ff,24):this.Ff=$r(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,25)},set:function(e){e?this.Ff=Kr(this.Ff,25):this.Ff=$r(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,26)},set:function(e){e?this.Ff=Kr(this.Ff,26):this.Ff=$r(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fa(Cl,vs);var K0=function(){Cl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Hr(this.Ff,14)},set:function(t){t?this.Ff=Kr(this.Ff,14):this.Ff=$r(this.Ff,14)}}),this.password=!0};fa(K0,Cl);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Is(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),i=my(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Lt(xt.internal.getWidth(t))+" "+Lt(xt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Lt(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Is(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],i=xt.internal.getHeight(t),o=xt.internal.getWidth(t),l=my(t,t.caption);return a.push("1 g"),a.push("0 0 "+Lt(o)+" "+Lt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Lt(o-1)+" "+Lt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Lt(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Is(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Lt(xt.internal.getWidth(t))+" "+Lt(xt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=xt.RadioButton.Circle.YesNormal,e.D[t]=xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Is(t);e.scope=t.scope;var r=[],n=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=xt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Zi(xt.internal.getWidth(t)/2)+" "+Zi(xt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Is(t);e.scope=t.scope;var r=[],n=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*xt.internal.Bezier_C).toFixed(5)),o=Number((n*xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Zi(xt.internal.getWidth(t)/2)+" "+Zi(xt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Zi(xt.internal.getWidth(t)/2)+" "+Zi(xt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Is(t);e.scope=t.scope;var r=[],n=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Zi(xt.internal.getWidth(t)/2)+" "+Zi(xt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=xt.RadioButton.Cross.YesNormal,e.D[t]=xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Is(t);e.scope=t.scope;var r=[],n=xt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Lt(xt.internal.getWidth(t)-2)+" "+Lt(xt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Lt(n.x1.x)+" "+Lt(n.x1.y)+" m"),r.push(Lt(n.x2.x)+" "+Lt(n.x2.y)+" l"),r.push(Lt(n.x4.x)+" "+Lt(n.x4.y)+" m"),r.push(Lt(n.x3.x)+" "+Lt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Is(t);e.scope=t.scope;var r=xt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Lt(xt.internal.getWidth(t))+" "+Lt(xt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Lt(xt.internal.getWidth(t)-2)+" "+Lt(xt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Lt(r.x1.x)+" "+Lt(r.x1.y)+" m"),n.push(Lt(r.x2.x)+" "+Lt(r.x2.y)+" l"),n.push(Lt(r.x4.x)+" "+Lt(r.x4.y)+" m"),n.push(Lt(r.x3.x)+" "+Lt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Is(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Lt(xt.internal.getWidth(t))+" "+Lt(xt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};xt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=xt.internal.getWidth(t),r=xt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},xt.internal.getWidth=function(t){var e=0;return or(t)==="object"&&(e=pk(t.Rect[2])),e},xt.internal.getHeight=function(t){var e=0;return or(t)==="object"&&(e=pk(t.Rect[3])),e};var t7=Qr.addField=function(t){if(e7(this,t),!(t instanceof vs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Qr.AcroFormChoiceField=DA,Qr.AcroFormListBox=zA,Qr.AcroFormComboBox=OA,Qr.AcroFormEditBox=R0,Qr.AcroFormButton=pn,Qr.AcroFormPushButton=M0,Qr.AcroFormRadioButton=RA,Qr.AcroFormCheckBox=H0,Qr.AcroFormTextField=Cl,Qr.AcroFormPasswordField=K0,Qr.AcroFormAppearance=xt,Qr.AcroForm={ChoiceField:DA,ListBox:zA,ComboBox:OA,EditBox:R0,Button:pn,PushButton:M0,RadioButton:RA,CheckBox:H0,TextField:Cl,PasswordField:K0,Appearance:xt},vt.AcroForm={ChoiceField:DA,ListBox:zA,ComboBox:OA,EditBox:R0,Button:pn,PushButton:M0,RadioButton:RA,CheckBox:H0,TextField:Cl,PasswordField:K0,Appearance:xt};vt.AcroForm;function NN(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(F,D){var T,G,ne,ce,ue,Y=r;if((D=D||r)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(S(F))for(ue in n)for(ne=n[ue],T=0;T<ne.length;T+=1){for(ce=!0,G=0;G<ne[T].length;G+=1)if(ne[T][G]!==void 0&&ne[T][G]!==F[G]){ce=!1;break}if(ce===!0){Y=ue;break}}else for(ue in n)for(ne=n[ue],T=0;T<ne.length;T+=1){for(ce=!0,G=0;G<ne[T].length;G+=1)if(ne[T][G]!==void 0&&ne[T][G]!==F.charCodeAt(G)){ce=!1;break}if(ce===!0){Y=ue;break}}return Y===r&&D!==r&&(Y=D),Y},i=function F(D){for(var T=this.internal.write,G=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:D.width}),ce.push({key:"Height",value:D.height}),D.colorSpace===g.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===g.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)&&D.transparency.length>0){for(var ue="",Y=0,Ae=D.transparency.length;Y<Ae;Y++)ue+=D.transparency[Y]+" "+D.transparency[Y]+" ";ce.push({key:"Mask",value:"["+ue+"]"})}D.sMask!==void 0&&ce.push({key:"SMask",value:D.objectId+1+" 0 R"});var fe=D.filter!==void 0?["/"+D.filter]:void 0;if(G({data:D.data,additionalKeyValues:ce,alreadyAppliedFilters:fe,objectId:D.objectId}),T("endobj"),"sMask"in D&&D.sMask!==void 0){var we,E=(we=D.sMaskBitsPerComponent)!==null&&we!==void 0?we:D.bitsPerComponent,z={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:D.sMask};"filter"in D&&(z.decodeParameters="/Predictor ".concat(D.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(D.width),z.filter=D.filter),F.call(this,z)}if(D.colorSpace===g.INDEXED){var K=this.internal.newObject();G({data:Q(new Uint8Array(D.palette)),objectId:K}),T("endobj")}},o=function(){var F=this.internal.collections[e+"images"];for(var D in F)i.call(this,F[D])},l=function(){var F,D=this.internal.collections[e+"images"],T=this.internal.write;for(var G in D)T("/I"+(F=D[G]).index,F.objectId,"0","R")},A=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},c=function(){var F=this.internal.collections[e+"images"];return A.call(this),F},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(F){return typeof t["process"+F.toUpperCase()]=="function"},p=function(F){return or(F)==="object"&&F.nodeType===1},u=function(F,D){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var T=""+F.getAttribute("src");if(T.indexOf("data:image/")===0)return O0(unescape(T).split("base64,").pop());var G=t.loadFile(T,!0);if(G!==void 0)return G}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var ne;switch(D){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;default:ne="image/jpeg"}return O0(F.toDataURL(ne,1).split("base64,").pop())}},y=function(F){var D=this.internal.collections[e+"images"];if(D){for(var T in D)if(F===D[T].alias)return D[T]}},b=function(F,D,T){return F||D||(F=-96,D=-96),F<0&&(F=-1*T.width*72/F/this.internal.scaleFactor),D<0&&(D=-1*T.height*72/D/this.internal.scaleFactor),F===0&&(F=D*T.width/T.height),D===0&&(D=F*T.height/T.width),[F,D]},v=function(F,D,T,G,ne,ce){var ue=b.call(this,T,G,ne),Y=this.internal.getCoordinateString,Ae=this.internal.getVerticalCoordinateString,fe=c.call(this);if(T=ue[0],G=ue[1],fe[ne.index]=ne,ce){ce*=Math.PI/180;var we=Math.cos(ce),E=Math.sin(ce),z=function(W){return W.toFixed(4)},K=[z(we),z(E),z(-1*E),z(we),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,Y(F),Ae(D+G),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([Y(T),"0","0",Y(G),"0","0","cm"].join(" "))):this.internal.write([Y(T),"0","0",Y(G),Y(F),Ae(D+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=t.__addimage__.sHashCode=function(F){var D,T,G=0;if(typeof F=="string")for(T=F.length,D=0;D<T;D++)G=(G<<5)-G+F.charCodeAt(D),G|=0;else if(S(F))for(T=F.byteLength/2,D=0;D<T;D++)G=(G<<5)-G+F[D],G|=0;return G},k=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var D=!0;return F.length===0&&(D=!1),F.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(D=!1),D},N=t.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var D=F.indexOf(",");return D<0?null:F.substring(0,D).trim().endsWith("base64")?F.substring(D+1):null};t.__addimage__.isArrayBuffer=function(F){return F instanceof ArrayBuffer};var S=t.__addimage__.isArrayBufferView=function(F){return F instanceof Int8Array||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array},U=t.__addimage__.binaryStringToUint8Array=function(F){for(var D=F.length,T=new Uint8Array(D),G=0;G<D;G++)T[G]=F.charCodeAt(G);return T},Q=t.__addimage__.arrayBufferToBinaryString=function(F){for(var D="",T=S(F)?F:new Uint8Array(F),G=0;G<T.length;G+=8192)D+=String.fromCharCode.apply(null,T.subarray(G,G+8192));return D};t.addImage=function(){var F,D,T,G,ne,ce,ue,Y,Ae;if(typeof arguments[1]=="number"?(D=r,T=arguments[1],G=arguments[2],ne=arguments[3],ce=arguments[4],ue=arguments[5],Y=arguments[6],Ae=arguments[7]):(D=arguments[1],T=arguments[2],G=arguments[3],ne=arguments[4],ce=arguments[5],ue=arguments[6],Y=arguments[7],Ae=arguments[8]),or(F=arguments[0])==="object"&&!p(F)&&"imageData"in F){var fe=F;F=fe.imageData,D=fe.format||D||r,T=fe.x||T||0,G=fe.y||G||0,ne=fe.w||fe.width||ne,ce=fe.h||fe.height||ce,ue=fe.alias||ue,Y=fe.compression||Y,Ae=fe.rotation||fe.angle||Ae}var we=this.internal.getFilters();if(Y===void 0&&we.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(T)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var E=L.call(this,F,D,ue,Y);return v.call(this,T,G,ne,ce,E,Ae),this};var L=function(F,D,T,G){var ne,ce,ue;if(typeof F=="string"&&a(F)===r){F=unescape(F);var Y=V(F,!1);(Y!==""||(Y=t.loadFile(F,!0))!==void 0)&&(F=Y)}if(p(F)&&(F=u(F,D)),D=a(F,D),!h(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((ue=T)==null||ue.length===0)&&(T=function(Ae){return typeof Ae=="string"||S(Ae)?w(Ae):S(Ae.data)?w(Ae.data):null}(F)),(ne=y.call(this,T))||(F instanceof Uint8Array||D==="RGBA"||(ce=F,F=U(F)),ne=this["process"+D.toUpperCase()](F,d.call(this),T,function(Ae){return Ae&&typeof Ae=="string"&&(Ae=Ae.toUpperCase()),Ae in t.image_compression?Ae:m.NONE}(G),ce)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},V=t.__addimage__.convertBase64ToBinaryString=function(F,D){D=typeof D!="boolean"||D;var T,G="";if(typeof F=="string"){var ne;T=(ne=N(F))!==null&&ne!==void 0?ne:F;try{G=O0(T)}catch(ce){if(D)throw k(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};t.getImageProperties=function(F){var D,T,G="";if(p(F)&&(F=u(F)),typeof F=="string"&&a(F)===r&&((G=V(F,!1))===""&&(G=t.loadFile(F)||""),F=G),T=a(F),!h(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(F instanceof Uint8Array||(F=U(F)),!(D=this["process"+T.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=T,D}})(vt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};vt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,d=!1,h=0;h<c.length&&!d;h++)switch((n=c[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var u=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(b.objId),m=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+u(g(n.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+A.objId+" 0 R",i+=" /T ("+u(g(m))+") >>",b.content=i;var w=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(b.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+u(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+u(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var S=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+S+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:A(r),y:c(n),w:A(r+a),h:c(n+i)},options:o,type:"link"})},t.textWithLink=function(r,n,a,i){var o,l,A=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(c*d)}else l=A,o=c;return this.text(r,n,a,i),a+=.2*c,i.align==="center"&&(n-=A/2),i.align==="right"&&(n-=A),this.link(n,a-c,l,o,i),A},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},l=t.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&a.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(b){var v=0,g=r,m="",w=0;for(v=0;v<b.length;v+=1)g[b.charCodeAt(v)]!==void 0?(w++,typeof(g=g[b.charCodeAt(v)])=="number"&&(m+=String.fromCharCode(g),g=r,w=0),v===b.length-1&&(g=r,m+=b.charAt(v-(w-1)),v-=w-1,w=0)):(g=r,m+=b.charAt(v-w),v-=w,w=0);return m};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(b,v,g){return o(b)?i(b)===!1?-1:!c(b)||!o(v)&&!o(g)||!o(g)&&l(v)||l(b)&&!o(v)||l(b)&&A(v)||l(b)&&l(v)?0:d(b)&&o(v)&&!l(v)&&o(g)&&c(g)?3:l(b)||!o(g)?1:2:-1},u=function(b){var v=0,g=0,m=0,w="",k="",N="",S=(b=b||"").split("\\s+"),U=[];for(v=0;v<S.length;v+=1){for(U.push(""),g=0;g<S[v].length;g+=1)w=S[v][g],k=S[v][g-1],N=S[v][g+1],o(w)?(m=p(w,k,N),U[v]+=m!==-1?String.fromCharCode(e[w.charCodeAt(0)][m]):w):U[v]+=w;U[v]=h(U[v])}return U.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var b,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(v)){var m=0;for(g=[],m=0;m<v.length;m+=1)Array.isArray(v[m])?g.push([u(v[m][0]),v[m][1],v[m][2]]):g.push([u(v[m])]);b=g}else b=u(v);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",y])}(vt.API),vt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(vt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(b){A=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var u=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(b){y=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,u=0,y=0,b=0,v=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var g=c.maxWidth;g>0?typeof A=="string"?A=this.splitTextToSize(A,g):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(w,k){return w.concat(v.splitTextToSize(k,g))},[])):A=Array.isArray(A)?A:[A];for(var m=0;m<A.length;m++)u<(b=this.getStringUnitWidth(A[m],{font:h})*d)&&(u=b);return u!==0&&(y=A.length),{w:u/=p,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var A;A=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===A.lineNumber?(A.x=(c.x||0)+(c.width||0),A.y=c.y||0):c.y+c.height+A.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=h.top,u&&p&&(this.printHeaderRow(A.lineNumber,!0),A.y+=p[0].height)):A.y=c.y+c.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,r===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-d,A.y+d,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+d,{align:"center",baseline:"top",maxWidth:A.width-d-d}):this.text(A.text,A.x+d,A.y+d,{align:"left",baseline:"top",maxWidth:A.width-d-d})),this.internal.__cell__.lastCell=A,this};t.table=function(A,c,d,h,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var u,y,b,v,g=[],m=[],w=[],k={},N={},S=[],U=[],Q=(p=p||{}).autoSize||!1,L=p.printHeaders!==!1,V=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,F=p.margins||Object.assign({width:this.getPageWidth()},e),D=typeof p.padding=="number"?p.padding:3,T=p.headerBackgroundColor||"#c8c8c8",G=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=G,this.setFontSize(V),h==null)m=g=Object.keys(d[0]),w=g.map(function(){return"left"});else if(Array.isArray(h)&&or(h[0])==="object")for(g=h.map(function(fe){return fe.name}),m=h.map(function(fe){return fe.prompt||fe.name||""}),w=h.map(function(fe){return fe.align||"left"}),u=0;u<h.length;u+=1)N[h[u].name]=.7499990551181103*h[u].width;else Array.isArray(h)&&typeof h[0]=="string"&&(m=g=h,w=g.map(function(){return"left"}));if(Q||Array.isArray(h)&&typeof h[0]=="string")for(u=0;u<g.length;u+=1){for(k[v=g[u]]=d.map(function(fe){return fe[v]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(m[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=k[v],this.setFont(void 0,"normal"),b=0;b<y.length;b+=1)S.push(this.getTextDimensions(y[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[v]=Math.max.apply(null,S)+D+D,S=[]}if(L){var ne={};for(u=0;u<g.length;u+=1)ne[g[u]]={},ne[g[u]].text=m[u],ne[g[u]].align=w[u];var ce=l.call(this,ne,N);U=g.map(function(fe){return new i(A,c,N[fe],ce,ne[fe].text,void 0,ne[fe].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ue=h.reduce(function(fe,we){return fe[we.name]=we.align,fe},{});for(u=0;u<d.length;u+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:u,data:d[u]},this);var Y=l.call(this,d[u],N);for(b=0;b<g.length;b+=1){var Ae=d[u][g[b]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:u,col:b,data:Ae},this),o.call(this,new i(A,c,N[g[b]],Y,Ae,u+2,ue[g[b]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=c,this};var l=function(A,c){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(A).map(function(u){var y=A[u];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[u]-d-d)},this).map(function(u){return this.getLineHeightFactor()*u.length*h/p+d+d},this).reduce(function(u,y){return Math.max(u,y)},0)};t.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){d=this.internal.__cell__.tableHeaderRow[u].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=A;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(vt.API);var _N={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},SN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xy=NN(SN),EN=[100,200,300,400,500,600,700,800,900],r7=NN(EN);function vm(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return _N[i=i||"normal"]?i:"normal"}(t.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),a=function(i){return typeof xy[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function mk(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var n7={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xk={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yk(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function bk(t){return t.trimLeft()}function a7(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function s7(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Xh,wk,vk,nA,Zh,kk,Bk,Ck,km=["times"];function jk(t,e,r,n,a){var i=4,o=_k;switch(a){case vt.API.image_compression.FAST:i=1,o=Nk;break;case vt.API.image_compression.MEDIUM:i=6,o=Sk;break;case vt.API.image_compression.SLOW:i=9,o=Ek}t=function(A,c,d,h){for(var p,u=A.length/c,y=new Uint8Array(A.length+u),b=[i7,Nk,_k,Sk,Ek],v=0;v<u;v+=1){var g=v*c,m=A.subarray(g,g+c);if(h)y.set(h(m,d,p),g+v);else{for(var w=b.length,k=[],N=0;N<w;N+=1)k[N]=b[N](m,d,p);var S=l7(k.concat());y.set(k[S],g+v)}p=m}return y}(t,e,Math.ceil(r*n/8),o);var l=dy(t,{level:i});return vt.API.__addimage__.arrayBufferToBinaryString(l)}function i7(t){var e=Array.apply([],t);return e.unshift(0),e}function Nk(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=t[a-e]||0;n[a+1]=t[a]-i+256&255}return n}function _k(t,e,r){var n=t.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=t[i]-o+256&255}return a}function Sk(t,e,r){var n=t.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=t[i-e]||0,l=r&&r[i]||0;a[i+1]=t[i]+256-(o+l>>>1)&255}return a}function Ek(t,e,r){var n=t.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=o7(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);a[i+1]=t[i]-o+256&255}return a}function o7(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=a&&n<=i?t:a<=i?e:r}function l7(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function Bm(t,e,r){var n=e*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return FN(t,a)>>i&o}function Fk(t,e,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,A=(e&l)<<o;(function(c,d,h){if(d+1<c.byteLength)c.setUint16(d,h,!1);else{var p=h>>8&255;c.setUint8(d,p)}})(t,i,FN(t,i)&~(l<<o)&65535|A)}function FN(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function A7(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],i=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,A=null;i&&(l=e,A=o,e+=3*o);var c=!0,d=[],h=0,p=null,u=0,y=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],1&b||(p=null),u=b>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,k=t[e++],N=k>>6&1,S=1<<1+(7&k),U=l,Q=A,L=!1;k>>7&&(L=!0,U=e,Q=S,e+=3*S);var V=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}d.push({x:v,y:g,width:m,height:w,has_local_palette:L,palette_offset:U,palette_size:Q,data_offset:V,data_length:e-V,transparent_index:p,interlaced:!!N,delay:h,disposal:u});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(D){if(D<0||D>=d.length)throw new Error("Frame index out of range.");return d[D]},this.decodeAndBlitFrameBGRA=function(D,T){var G=this.frameInfo(D),ne=G.width*G.height,ce=new Uint8Array(ne);Uk(t,G.data_offset,ce,ne);var ue=G.palette_offset,Y=G.transparent_index;Y===null&&(Y=256);var Ae=G.width,fe=r-Ae,we=Ae,E=4*(G.y*r+G.x),z=4*((G.y+G.height)*r+G.x),K=E,W=4*fe;G.interlaced===!0&&(W+=4*r*7);for(var J=8,re=0,be=ce.length;re<be;++re){var me=ce[re];if(we===0&&(we=Ae,(K+=W)>=z&&(W=4*fe+4*r*(J-1),K=E+(Ae+fe)*(J<<1),J>>=1)),me===Y)K+=4;else{var ae=t[ue+3*me],X=t[ue+3*me+1],ye=t[ue+3*me+2];T[K++]=ye,T[K++]=X,T[K++]=ae,T[K++]=255}--we}},this.decodeAndBlitFrameRGBA=function(D,T){var G=this.frameInfo(D),ne=G.width*G.height,ce=new Uint8Array(ne);Uk(t,G.data_offset,ce,ne);var ue=G.palette_offset,Y=G.transparent_index;Y===null&&(Y=256);var Ae=G.width,fe=r-Ae,we=Ae,E=4*(G.y*r+G.x),z=4*((G.y+G.height)*r+G.x),K=E,W=4*fe;G.interlaced===!0&&(W+=4*r*7);for(var J=8,re=0,be=ce.length;re<be;++re){var me=ce[re];if(we===0&&(we=Ae,(K+=W)>=z&&(W=4*fe+4*r*(J-1),K=E+(Ae+fe)*(J<<1),J>>=1)),me===Y)K+=4;else{var ae=t[ue+3*me],X=t[ue+3*me+1],ye=t[ue+3*me+2];T[K++]=ae,T[K++]=X,T[K++]=ye,T[K++]=255}--we}}}function Uk(t,e,r,n){for(var a=t[e++],i=1<<a,o=i+1,l=o+1,A=a+1,c=(1<<A)-1,d=0,h=0,p=0,u=t[e++],y=new Int32Array(4096),b=null;;){for(;d<16&&u!==0;)h|=t[e++]<<d,d+=8,u===1?u=t[e++]:--u;if(d<A)break;var v=h&c;if(h>>=A,d-=A,v!==i){if(v===o)break;for(var g=v<l?v:b,m=0,w=g;w>i;)w=y[w]>>8,++m;var k=w;if(p+m+(g!==v?1:0)>n)return void hr.log("Warning, gif stream longer than expected.");r[p++]=k;var N=p+=m;for(g!==v&&(r[p++]=k),w=g;m--;)w=y[w],r[--N]=255&w,w>>=8;b!==null&&l<4096&&(y[l++]=b<<8|k,l>=c+1&&A<12&&(++A,c=c<<1|1)),b=v}else l=o+1,c=(1<<(A=a+1))-1,b=null}return p!==n&&hr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Cm(t){var e,r,n,a,i,o=Math.floor,l=new Array(64),A=new Array(64),c=new Array(64),d=new Array(64),h=new Array(65535),p=new Array(65535),u=new Array(64),y=new Array(64),b=[],v=0,g=7,m=new Array(64),w=new Array(64),k=new Array(64),N=new Array(256),S=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(E,z){for(var K=0,W=0,J=new Array,re=1;re<=16;re++){for(var be=1;be<=E[re];be++)J[z[W]]=[],J[z[W]][0]=K,J[z[W]][1]=re,W++,K++;K*=2}return J}function ue(E){for(var z=E[0],K=E[1]-1;K>=0;)z&1<<K&&(v|=1<<g),K--,--g<0&&(v==255?(Y(255),Y(0)):Y(v),g=7,v=0)}function Y(E){b.push(E)}function Ae(E){Y(E>>8&255),Y(255&E)}function fe(E,z,K,W,J){for(var re,be=J[0],me=J[240],ae=function(Ne,qe){var Ye,ot,it,ke,oe,Be,Se,Qe,se,ze,O=0;for(se=0;se<8;++se){Ye=Ne[O],ot=Ne[O+1],it=Ne[O+2],ke=Ne[O+3],oe=Ne[O+4],Be=Ne[O+5],Se=Ne[O+6];var Ee=Ye+(Qe=Ne[O+7]),Pe=Ye-Qe,Le=ot+Se,Re=ot-Se,ht=it+Be,rt=it-Be,ut=ke+oe,at=ke-oe,ct=Ee+ut,de=Ee-ut,We=Le+ht,Je=Le-ht;Ne[O]=ct+We,Ne[O+4]=ct-We;var et=.707106781*(Je+de);Ne[O+2]=de+et,Ne[O+6]=de-et;var Zt=.382683433*((ct=at+rt)-(Je=Re+Pe)),Ft=.5411961*ct+Zt,Rt=1.306562965*Je+Zt,ge=.707106781*(We=rt+Re),Ce=Pe+ge,Ke=Pe-ge;Ne[O+5]=Ke+Ft,Ne[O+3]=Ke-Ft,Ne[O+1]=Ce+Rt,Ne[O+7]=Ce-Rt,O+=8}for(O=0,se=0;se<8;++se){Ye=Ne[O],ot=Ne[O+8],it=Ne[O+16],ke=Ne[O+24],oe=Ne[O+32],Be=Ne[O+40],Se=Ne[O+48];var gt=Ye+(Qe=Ne[O+56]),Kt=Ye-Qe,Ar=ot+Se,qt=ot-Se,nr=it+Be,er=it-Be,bn=ke+oe,Qn=ke-oe,aa=gt+bn,Ta=gt-bn,pa=Ar+nr,ie=Ar-nr;Ne[O]=aa+pa,Ne[O+32]=aa-pa;var Ie=.707106781*(ie+Ta);Ne[O+16]=Ta+Ie,Ne[O+48]=Ta-Ie;var mt=.382683433*((aa=Qn+er)-(ie=qt+Kt)),Qt=.5411961*aa+mt,Fr=1.306562965*ie+mt,Da=.707106781*(pa=er+qt),Ws=Kt+Da,Qi=Kt-Da;Ne[O+40]=Qi+Qt,Ne[O+24]=Qi-Qt,Ne[O+8]=Ws+Fr,Ne[O+56]=Ws-Fr,O++}for(se=0;se<64;++se)ze=Ne[se]*qe[se],u[se]=ze>0?ze+.5|0:ze-.5|0;return u}(E,z),X=0;X<64;++X)y[U[X]]=ae[X];var ye=y[0]-K;K=y[0],ye==0?ue(W[0]):(ue(W[p[re=32767+ye]]),ue(h[re]));for(var xe=63;xe>0&&y[xe]==0;)xe--;if(xe==0)return ue(be),K;for(var Oe,H=1;H<=xe;){for(var $e=H;y[H]==0&&H<=xe;)++H;var lt=H-$e;if(lt>=16){Oe=lt>>4;for(var nt=1;nt<=Oe;++nt)ue(me);lt&=15}re=32767+y[H],ue(J[(lt<<4)+p[re]]),ue(h[re]),H++}return xe!=63&&ue(be),K}function we(E){E=Math.min(Math.max(E,1),100),i!=E&&(function(z){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var J=o((K[W]*z+50)/100);J=Math.min(Math.max(J,1),255),l[U[W]]=J}for(var re=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var me=o((re[be]*z+50)/100);me=Math.min(Math.max(me,1),255),A[U[be]]=me}for(var ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],X=0,ye=0;ye<8;ye++)for(var xe=0;xe<8;xe++)c[X]=1/(l[U[X]]*ae[ye]*ae[xe]*8),d[X]=1/(A[U[X]]*ae[ye]*ae[xe]*8),X++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),i=E)}this.encode=function(E,z){z&&we(z),b=new Array,v=0,g=7,Ae(65496),Ae(65504),Ae(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),Ae(1),Ae(1),Y(0),Y(0),function(){Ae(65499),Ae(132),Y(0);for(var ot=0;ot<64;ot++)Y(l[ot]);Y(1);for(var it=0;it<64;it++)Y(A[it])}(),function(ot,it){Ae(65472),Ae(17),Y(8),Ae(it),Ae(ot),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(E.width,E.height),function(){Ae(65476),Ae(418),Y(0);for(var ot=0;ot<16;ot++)Y(Q[ot+1]);for(var it=0;it<=11;it++)Y(L[it]);Y(16);for(var ke=0;ke<16;ke++)Y(V[ke+1]);for(var oe=0;oe<=161;oe++)Y(F[oe]);Y(1);for(var Be=0;Be<16;Be++)Y(D[Be+1]);for(var Se=0;Se<=11;Se++)Y(T[Se]);Y(17);for(var Qe=0;Qe<16;Qe++)Y(G[Qe+1]);for(var se=0;se<=161;se++)Y(ne[se])}(),Ae(65498),Ae(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var K=0,W=0,J=0;v=0,g=7,this.encode.displayName="_encode_";for(var re,be,me,ae,X,ye,xe,Oe,H,$e=E.data,lt=E.width,nt=E.height,Ne=4*lt,qe=0;qe<nt;){for(re=0;re<Ne;){for(X=Ne*qe+re,xe=-1,Oe=0,H=0;H<64;H++)ye=X+(Oe=H>>3)*Ne+(xe=4*(7&H)),qe+Oe>=nt&&(ye-=Ne*(qe+1+Oe-nt)),re+xe>=Ne&&(ye-=re+xe-Ne+4),be=$e[ye++],me=$e[ye++],ae=$e[ye++],m[H]=(S[be]+S[me+256|0]+S[ae+512|0]>>16)-128,w[H]=(S[be+768|0]+S[me+1024|0]+S[ae+1280|0]>>16)-128,k[H]=(S[be+1280|0]+S[me+1536|0]+S[ae+1792|0]>>16)-128;K=fe(m,c,K,e,n),W=fe(w,d,W,r,a),J=fe(k,d,J,r,a),re+=32}qe+=8}if(g>=0){var Ye=[];Ye[1]=g+1,Ye[0]=(1<<g+1)-1,ue(Ye)}return Ae(65497),new Uint8Array(b)},t=t||50,function(){for(var E=String.fromCharCode,z=0;z<256;z++)N[z]=E(z)}(),e=ce(Q,L),r=ce(D,T),n=ce(V,F),a=ce(G,ne),function(){for(var E=1,z=2,K=1;K<=15;K++){for(var W=E;W<z;W++)p[32767+W]=K,h[32767+W]=[],h[32767+W][1]=K,h[32767+W][0]=W;for(var J=-(z-1);J<=-E;J++)p[32767+J]=K,h[32767+J]=[],h[32767+J][1]=K,h[32767+J][0]=z-1+J;E<<=1,z<<=1}}(),function(){for(var E=0;E<256;E++)S[E]=19595*E,S[E+256|0]=38470*E,S[E+512|0]=7471*E+32768,S[E+768|0]=-11059*E,S[E+1024|0]=-21709*E,S[E+1280|0]=32768*E+8421375,S[E+1536|0]=-27439*E,S[E+1792|0]=-5329*E}(),we(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function As(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Lk(t){function e(L){if(!L)throw Error("assert :P")}function r(L,V,F){for(var D=0;4>D;D++)if(L[V+D]!=F.charCodeAt(D))return!0;return!1}function n(L,V,F,D,T){for(var G=0;G<T;G++)L[V+G]=F[D+G]}function a(L,V,F,D){for(var T=0;T<D;T++)L[V+T]=F}function i(L){return new Int32Array(L)}function o(L,V){for(var F=[],D=0;D<L;D++)F.push(new V);return F}function l(L,V){var F=[];return function D(T,G,ne){for(var ce=ne[G],ue=0;ue<ce&&(T.push(ne.length>G+1?[]:new V),!(ne.length<G+1));ue++)D(T[ue],G+1,ne)}(F,0,L),F}var A=function(){var L=this;function V(f,x){for(var j=1<<x-1>>>0;f&j;)j>>>=1;return j?(f&j-1)+j:f}function F(f,x,j,_,P){e(!(_%j));do f[x+(_-=j)]=P;while(0<_)}function D(f,x,j,_,P){if(e(2328>=P),512>=P)var R=i(512);else if((R=i(P))==null)return 0;return function(M,$,q,Z,pe,Ue){var ee,ve,_e=$,Te=1<<q,Fe=i(16),De=i(16);for(e(pe!=0),e(Z!=null),e(M!=null),e(0<q),ve=0;ve<pe;++ve){if(15<Z[ve])return 0;++Fe[Z[ve]]}if(Fe[0]==pe)return 0;for(De[1]=0,ee=1;15>ee;++ee){if(Fe[ee]>1<<ee)return 0;De[ee+1]=De[ee]+Fe[ee]}for(ve=0;ve<pe;++ve)ee=Z[ve],0<Z[ve]&&(Ue[De[ee]++]=ve);if(De[15]==1)return(Z=new T).g=0,Z.value=Ue[0],F(M,_e,1,Te,Z),Te;var He,Xe=-1,Ve=Te-1,Ct=0,pt=1,Dt=1,bt=1<<q;for(ve=0,ee=1,pe=2;ee<=q;++ee,pe<<=1){if(pt+=Dt<<=1,0>(Dt-=Fe[ee]))return 0;for(;0<Fe[ee];--Fe[ee])(Z=new T).g=ee,Z.value=Ue[ve++],F(M,_e+Ct,pe,bt,Z),Ct=V(Ct,ee)}for(ee=q+1,pe=2;15>=ee;++ee,pe<<=1){if(pt+=Dt<<=1,0>(Dt-=Fe[ee]))return 0;for(;0<Fe[ee];--Fe[ee]){if(Z=new T,(Ct&Ve)!=Xe){for(_e+=bt,He=1<<(Xe=ee)-q;15>Xe&&!(0>=(He-=Fe[Xe]));)++Xe,He<<=1;Te+=bt=1<<(He=Xe-q),M[$+(Xe=Ct&Ve)].g=He+q,M[$+Xe].value=_e-$-Xe}Z.g=ee-q,Z.value=Ue[ve++],F(M,_e+(Ct>>q),pe,bt,Z),Ct=V(Ct,ee)}}return pt!=2*De[15]-1?0:Te}(f,x,j,_,P,R)}function T(){this.value=this.g=0}function G(){this.value=this.g=0}function ne(){this.G=o(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(el,G)}function ce(f,x,j,_){e(f!=null),e(x!=null),e(2147483648>_),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=x,f.pa=j,f.Jd=x,f.Yc=j+_,f.Zc=4<=_?j+_-4+1:j,be(f)}function ue(f,x){for(var j=0;0<x--;)j|=ae(f,128)<<x;return j}function Y(f,x){var j=ue(f,x);return me(f)?-j:j}function Ae(f,x,j,_){var P,R=0;for(e(f!=null),e(x!=null),e(4294967288>_),f.Sb=_,f.Ra=0,f.u=0,f.h=0,4<_&&(_=4),P=0;P<_;++P)R+=x[j+P]<<8*P;f.Ra=R,f.bb=_,f.oa=x,f.pa=j}function fe(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<Di-8>>>0,++f.bb,f.u-=8;W(f)&&(f.h=1,f.u=0)}function we(f,x){if(e(0<=x),!f.h&&x<=xa){var j=K(f)&ma[x];return f.u+=x,fe(f),j}return f.h=1,f.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(f){return f.Ra>>>(f.u&Di-1)>>>0}function W(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>Di}function J(f,x){f.u=x,f.h=W(f)}function re(f){f.u>=si&&(e(f.u>=si),fe(f))}function be(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function me(f){return ue(f,1)}function ae(f,x){var j=f.Ca;0>f.b&&be(f);var _=f.b,P=j*x>>>8,R=(f.I>>>_>P)+0;for(R?(j-=P,f.I-=P+1<<_>>>0):j=P+1,_=j,P=0;256<=_;)P+=8,_>>=8;return _=7^P+zi[_],f.b-=_,f.Ca=(j<<_)-1,R}function X(f,x,j){f[x+0]=j>>24&255,f[x+1]=j>>16&255,f[x+2]=j>>8&255,f[x+3]=255&j}function ye(f,x){return f[x+0]|f[x+1]<<8}function xe(f,x){return ye(f,x)|f[x+2]<<16}function Oe(f,x){return ye(f,x)|ye(f,x+2)<<16}function H(f,x){var j=1<<x;return e(f!=null),e(0<x),f.X=i(j),f.X==null?0:(f.Mb=32-x,f.Xa=x,1)}function $e(f,x){e(f!=null),e(x!=null),e(f.Xa==x.Xa),n(x.X,0,f.X,0,1<<x.Xa)}function lt(){this.X=[],this.Xa=this.Mb=0}function nt(f,x,j,_){e(j!=null),e(_!=null);var P=j[0],R=_[0];return P==0&&(P=(f*R+x/2)/x),R==0&&(R=(x*P+f/2)/f),0>=P||0>=R?0:(j[0]=P,_[0]=R,1)}function Ne(f,x){return f+(1<<x)-1>>>x}function qe(f,x){return((4278255360&f)+(4278255360&x)>>>0&4278255360)+((16711935&f)+(16711935&x)>>>0&16711935)>>>0}function Ye(f,x){L[x]=function(j,_,P,R,M,$,q){var Z;for(Z=0;Z<M;++Z){var pe=L[f]($[q+Z-1],P,R+Z);$[q+Z]=qe(j[_+Z],pe)}}}function ot(){this.ud=this.hd=this.jd=0}function it(f,x){return((4278124286&(f^x))>>>1)+(f&x)>>>0}function ke(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function oe(f,x){return ke(f+(f-x+.5>>1))}function Be(f,x,j){return Math.abs(x-j)-Math.abs(f-j)}function Se(f,x,j,_,P,R,M){for(_=R[M-1],j=0;j<P;++j)R[M+j]=_=qe(f[x+j],_)}function Qe(f,x,j,_,P){var R;for(R=0;R<j;++R){var M=f[x+R],$=M>>8&255,q=16711935&(q=(q=16711935&M)+(($<<16)+$));_[P+R]=(4278255360&M)+q>>>0}}function se(f,x){x.jd=255&f,x.hd=f>>8&255,x.ud=f>>16&255}function ze(f,x,j,_,P,R){var M;for(M=0;M<_;++M){var $=x[j+M],q=$>>>8,Z=$,pe=255&(pe=(pe=$>>>16)+((f.jd<<24>>24)*(q<<24>>24)>>>5));Z=255&(Z=(Z+=(f.hd<<24>>24)*(q<<24>>24)>>>5)+((f.ud<<24>>24)*(pe<<24>>24)>>>5)),P[R+M]=(4278255360&$)+(pe<<16)+Z}}function O(f,x,j,_,P){L[x]=function(R,M,$,q,Z,pe,Ue,ee,ve){for(q=Ue;q<ee;++q)for(Ue=0;Ue<ve;++Ue)Z[pe++]=P($[_(R[M++])])},L[f]=function(R,M,$,q,Z,pe,Ue){var ee=8>>R.b,ve=R.Ea,_e=R.K[0],Te=R.w;if(8>ee)for(R=(1<<R.b)-1,Te=(1<<ee)-1;M<$;++M){var Fe,De=0;for(Fe=0;Fe<ve;++Fe)Fe&R||(De=_(q[Z++])),pe[Ue++]=P(_e[De&Te]),De>>=ee}else L["VP8LMapColor"+j](q,Z,_e,Te,pe,Ue,M,$,ve)}}function Ee(f,x,j,_,P){for(j=x+j;x<j;){var R=f[x++];_[P++]=R>>16&255,_[P++]=R>>8&255,_[P++]=255&R}}function Pe(f,x,j,_,P){for(j=x+j;x<j;){var R=f[x++];_[P++]=R>>16&255,_[P++]=R>>8&255,_[P++]=255&R,_[P++]=R>>24&255}}function Le(f,x,j,_,P){for(j=x+j;x<j;){var R=(M=f[x++])>>16&240|M>>12&15,M=240&M|M>>28&15;_[P++]=R,_[P++]=M}}function Re(f,x,j,_,P){for(j=x+j;x<j;){var R=(M=f[x++])>>16&248|M>>13&7,M=M>>5&224|M>>3&31;_[P++]=R,_[P++]=M}}function ht(f,x,j,_,P){for(j=x+j;x<j;){var R=f[x++];_[P++]=255&R,_[P++]=R>>8&255,_[P++]=R>>16&255}}function rt(f,x,j,_,P,R){if(R==0)for(j=x+j;x<j;)X(_,((R=f[x++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),P+=32;else n(_,P,f,x,j)}function ut(f,x){L[x][0]=L[f+"0"],L[x][1]=L[f+"1"],L[x][2]=L[f+"2"],L[x][3]=L[f+"3"],L[x][4]=L[f+"4"],L[x][5]=L[f+"5"],L[x][6]=L[f+"6"],L[x][7]=L[f+"7"],L[x][8]=L[f+"8"],L[x][9]=L[f+"9"],L[x][10]=L[f+"10"],L[x][11]=L[f+"11"],L[x][12]=L[f+"12"],L[x][13]=L[f+"13"],L[x][14]=L[f+"0"],L[x][15]=L[f+"0"]}function at(f){return f==op||f==lp||f==ih||f==Ap}function ct(){this.eb=[],this.size=this.A=this.fb=0}function de(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function We(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ct,this.f.kb=new de,this.sd=null}function Je(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function et(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Zt(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Ft(f,x){var j=f.T,_=x.ba.f.RGBA,P=_.eb,R=_.fb+f.ka*_.A,M=Ka[x.ba.S],$=f.y,q=f.O,Z=f.f,pe=f.N,Ue=f.ea,ee=f.W,ve=x.cc,_e=x.dc,Te=x.Mc,Fe=x.Nc,De=f.ka,He=f.ka+f.T,Xe=f.U,Ve=Xe+1>>1;for(De==0?M($,q,null,null,Z,pe,Ue,ee,Z,pe,Ue,ee,P,R,null,null,Xe):(M(x.ec,x.fc,$,q,ve,_e,Te,Fe,Z,pe,Ue,ee,P,R-_.A,P,R,Xe),++j);De+2<He;De+=2)ve=Z,_e=pe,Te=Ue,Fe=ee,pe+=f.Rc,ee+=f.Rc,R+=2*_.A,M($,(q+=2*f.fa)-f.fa,$,q,ve,_e,Te,Fe,Z,pe,Ue,ee,P,R-_.A,P,R,Xe);return q+=f.fa,f.j+He<f.o?(n(x.ec,x.fc,$,q,Xe),n(x.cc,x.dc,Z,pe,Ve),n(x.Mc,x.Nc,Ue,ee,Ve),j--):1&He||M($,q,null,null,Z,pe,Ue,ee,Z,pe,Ue,ee,P,R+_.A,null,null,Xe),j}function Rt(f,x,j){var _=f.F,P=[f.J];if(_!=null){var R=f.U,M=x.ba.S,$=M==sh||M==ih;x=x.ba.f.RGBA;var q=[0],Z=f.ka;q[0]=f.T,f.Kb&&(Z==0?--q[0]:(--Z,P[0]-=f.width),f.j+f.ka+f.T==f.o&&(q[0]=f.o-f.j-Z));var pe=x.eb;Z=x.fb+Z*x.A,f=Hw(_,P[0],f.width,R,q,pe,Z+($?0:3),x.A),e(j==q),f&&at(M)&&zc(pe,Z,$,R,q,x.A)}return 0}function ge(f){var x=f.ma,j=x.ba.S,_=11>j,P=j==nh||j==ah||j==sh||j==ip||j==12||at(j);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Fc(x.Oa,f,P?11:12))return 0;if(P&&at(j)&&_c(),f.da)alert("todo:use_scaling");else{if(_){if(x.Ib=Zt,f.Kb){if(j=f.U+1>>1,x.memory=i(f.U+2*j),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+f.U,x.Mc=x.cc,x.Nc=x.dc+j,x.Ib=Ft,_c()}}else alert("todo:EmitYUV");P&&(x.Jb=Rt,_&&as())}if(_&&!sv){for(f=0;256>f;++f)I3[f]=89858*(f-128)+lh>>oh,D3[f]=-22014*(f-128)+lh,T3[f]=-45773*(f-128),P3[f]=113618*(f-128)+lh>>oh;for(f=Rc;f<up;++f)x=76283*(f-16)+lh>>oh,z3[f-Rc]=Cs(x,255),O3[f-Rc]=Cs(x+8>>4,15);sv=1}return 1}function Ce(f){var x=f.ma,j=f.U,_=f.T;return e(!(1&f.ka)),0>=j||0>=_?0:(j=x.Ib(f,x),x.Jb!=null&&x.Jb(f,x,j),x.Dc+=j,1)}function Ke(f){f.ma.memory=null}function gt(f,x,j,_){return we(f,8)!=47?0:(x[0]=we(f,14)+1,j[0]=we(f,14)+1,_[0]=we(f,1),we(f,3)!=0?0:!f.h)}function Kt(f,x){if(4>f)return f+1;var j=f-2>>1;return(2+(1&f)<<j)+we(x,j)+1}function Ar(f,x){return 120<x?x-120:1<=(j=((j=w3[x-1])>>4)*f+(8-(15&j)))?j:1;var j}function qt(f,x,j){var _=K(j),P=f[x+=255&_].g-8;return 0<P&&(J(j,j.u+8),_=K(j),x+=f[x].value,x+=_&(1<<P)-1),J(j,j.u+f[x].g),f[x].value}function nr(f,x,j){return j.g+=f.g,j.value+=f.value<<x>>>0,e(8>=j.g),f.g}function er(f,x,j){var _=f.xc;return e((x=_==0?0:f.vc[f.md*(j>>_)+(x>>_)])<f.Wb),f.Ya[x]}function bn(f,x,j,_){var P=f.ab,R=f.c*x,M=f.C;x=M+x;var $=j,q=_;for(_=f.Ta,j=f.Ua;0<P--;){var Z=f.gc[P],pe=M,Ue=x,ee=$,ve=q,_e=(q=_,$=j,Z.Ea);switch(e(pe<Ue),e(Ue<=Z.nc),Z.hc){case 2:Pr(ee,ve,(Ue-pe)*_e,q,$);break;case 0:var Te=pe,Fe=Ue,De=q,He=$,Xe=(bt=Z).Ea;Te==0&&(Lc(ee,ve,null,null,1,De,He),Se(ee,ve+1,0,0,Xe-1,De,He+1),ve+=Xe,He+=Xe,++Te);for(var Ve=1<<bt.b,Ct=Ve-1,pt=Ne(Xe,bt.b),Dt=bt.K,bt=bt.w+(Te>>bt.b)*pt;Te<Fe;){var $t=Dt,sn=bt,zt=1;for(Gl(ee,ve,De,He-Xe,1,De,He);zt<Xe;){var wt=(zt&~Ct)+Ve;wt>Xe&&(wt=Xe),(0,Ic[$t[sn++]>>8&15])(ee,ve+ +zt,De,He+zt-Xe,wt-zt,De,He+zt),zt=wt}ve+=Xe,He+=Xe,++Te&Ct||(bt+=pt)}Ue!=Z.nc&&n(q,$-_e,q,$+(Ue-pe-1)*_e,_e);break;case 1:for(_e=ee,Fe=ve,Xe=(ee=Z.Ea)-(He=ee&~(De=(ve=1<<Z.b)-1)),Te=Ne(ee,Z.b),Ve=Z.K,Z=Z.w+(pe>>Z.b)*Te;pe<Ue;){for(Ct=Ve,pt=Z,Dt=new ot,bt=Fe+He,$t=Fe+ee;Fe<bt;)se(Ct[pt++],Dt),Pc(Dt,_e,Fe,ve,q,$),Fe+=ve,$+=ve;Fe<$t&&(se(Ct[pt++],Dt),Pc(Dt,_e,Fe,Xe,q,$),Fe+=Xe,$+=Xe),++pe&De||(Z+=Te)}break;case 3:if(ee==q&&ve==$&&0<Z.b){for(Fe=q,ee=_e=$+(Ue-pe)*_e-(He=(Ue-pe)*Ne(Z.Ea,Z.b)),ve=q,De=$,Te=[],He=(Xe=He)-1;0<=He;--He)Te[He]=ve[De+He];for(He=Xe-1;0<=He;--He)Fe[ee+He]=Te[He];Zu(Z,pe,Ue,q,_e,q,$)}else Zu(Z,pe,Ue,ee,ve,q,$)}$=_,q=j}q!=j&&n(_,j,$,q,R)}function Qn(f,x){var j=f.V,_=f.Ba+f.c*f.C,P=x-f.C;if(e(x<=f.l.o),e(16>=P),0<P){var R=f.l,M=f.Ta,$=f.Ua,q=R.width;if(bn(f,P,j,_),P=$=[$],e((j=f.C)<(_=x)),e(R.v<R.va),_>R.o&&(_=R.o),j<R.j){var Z=R.j-j;j=R.j,P[0]+=Z*q}if(j>=_?j=0:(P[0]+=4*R.v,R.ka=j-R.j,R.U=R.va-R.v,R.T=_-j,j=1),j){if($=$[0],11>(j=f.ca).S){var pe=j.f.RGBA,Ue=(_=j.S,P=R.U,R=R.T,Z=pe.eb,pe.A),ee=R;for(pe=pe.fb+f.Ma*pe.A;0<ee--;){var ve=M,_e=$,Te=P,Fe=Z,De=pe;switch(_){case rh:Tc(ve,_e,Te,Fe,De);break;case nh:Oi(ve,_e,Te,Fe,De);break;case op:Oi(ve,_e,Te,Fe,De),zc(Fe,De,0,Te,1,0);break;case Jw:tl(ve,_e,Te,Fe,De);break;case ah:rt(ve,_e,Te,Fe,De,1);break;case lp:rt(ve,_e,Te,Fe,De,1),zc(Fe,De,0,Te,1,0);break;case sh:rt(ve,_e,Te,Fe,De,0);break;case ih:rt(ve,_e,Te,Fe,De,0),zc(Fe,De,1,Te,1,0);break;case ip:Ri(ve,_e,Te,Fe,De);break;case Ap:Ri(ve,_e,Te,Fe,De),Mw(Fe,De,Te,1,0);break;case Yw:Mi(ve,_e,Te,Fe,De);break;default:e(0)}$+=q,pe+=Ue}f.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=j.height)}}f.C=x,e(f.C<=f.i)}function aa(f){var x;if(0<f.ua)return 0;for(x=0;x<f.Wb;++x){var j=f.Ya[x].G,_=f.Ya[x].H;if(0<j[1][_[1]+0].g||0<j[2][_[2]+0].g||0<j[3][_[3]+0].g)return 0}return 1}function Ta(f,x,j,_,P,R){if(f.Z!=0){var M=f.qd,$=f.rd;for(e($i[f.Z]!=null);x<j;++x)$i[f.Z](M,$,_,P,_,P,R),M=_,$=P,P+=R;f.qd=M,f.rd=$}}function pa(f,x){var j=f.l.ma,_=j.Z==0||j.Z==1?f.l.j:f.C;if(_=f.C<_?_:f.C,e(x<=f.l.o),x>_){var P=f.l.width,R=j.ca,M=j.tb+P*_,$=f.V,q=f.Ba+f.c*_,Z=f.gc;e(f.ab==1),e(Z[0].hc==3),Ss(Z[0],_,x,$,q,R,M),Ta(j,_,x,R,M,P)}f.C=f.Ma=x}function ie(f,x,j,_,P,R,M){var $=f.$/_,q=f.$%_,Z=f.m,pe=f.s,Ue=j+f.$,ee=Ue;P=j+_*P;var ve=j+_*R,_e=280+pe.ua,Te=f.Pb?$:16777216,Fe=0<pe.ua?pe.Wa:null,De=pe.wc,He=Ue<ve?er(pe,q,$):null;e(f.C<R),e(ve<=P);var Xe=!1;e:for(;;){for(;Xe||Ue<ve;){var Ve=0;if($>=Te){var Ct=Ue-j;e((Te=f).Pb),Te.wd=Te.m,Te.xd=Ct,0<Te.s.ua&&$e(Te.s.Wa,Te.s.vb),Te=$+k3}if(q&De||(He=er(pe,q,$)),e(He!=null),He.Qb&&(x[Ue]=He.qb,Xe=!0),!Xe)if(re(Z),He.jc){Ve=Z,Ct=x;var pt=Ue,Dt=He.pd[K(Ve)&el-1];e(He.jc),256>Dt.g?(J(Ve,Ve.u+Dt.g),Ct[pt]=Dt.value,Ve=0):(J(Ve,Ve.u+Dt.g-256),e(256<=Dt.value),Ve=Dt.value),Ve==0&&(Xe=!0)}else Ve=qt(He.G[0],He.H[0],Z);if(Z.h)break;if(Xe||256>Ve){if(!Xe)if(He.nd)x[Ue]=(He.qb|Ve<<8)>>>0;else{if(re(Z),Xe=qt(He.G[1],He.H[1],Z),re(Z),Ct=qt(He.G[2],He.H[2],Z),pt=qt(He.G[3],He.H[3],Z),Z.h)break;x[Ue]=(pt<<24|Xe<<16|Ve<<8|Ct)>>>0}if(Xe=!1,++Ue,++q>=_&&(q=0,++$,M!=null&&$<=R&&!($%16)&&M(f,$),Fe!=null))for(;ee<Ue;)Ve=x[ee++],Fe.X[(506832829*Ve&4294967295)>>>Fe.Mb]=Ve}else if(280>Ve){if(Ve=Kt(Ve-256,Z),Ct=qt(He.G[4],He.H[4],Z),re(Z),Ct=Ar(_,Ct=Kt(Ct,Z)),Z.h)break;if(Ue-j<Ct||P-Ue<Ve)break e;for(pt=0;pt<Ve;++pt)x[Ue+pt]=x[Ue+pt-Ct];for(Ue+=Ve,q+=Ve;q>=_;)q-=_,++$,M!=null&&$<=R&&!($%16)&&M(f,$);if(e(Ue<=P),q&De&&(He=er(pe,q,$)),Fe!=null)for(;ee<Ue;)Ve=x[ee++],Fe.X[(506832829*Ve&4294967295)>>>Fe.Mb]=Ve}else{if(!(Ve<_e))break e;for(Xe=Ve-280,e(Fe!=null);ee<Ue;)Ve=x[ee++],Fe.X[(506832829*Ve&4294967295)>>>Fe.Mb]=Ve;Ve=Ue,e(!(Xe>>>(Ct=Fe).Xa)),x[Ve]=Ct.X[Xe],Xe=!0}Xe||e(Z.h==W(Z))}if(f.Pb&&Z.h&&Ue<P)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&$e(f.s.vb,f.s.Wa);else{if(Z.h)break e;M!=null&&M(f,$>R?R:$),f.a=0,f.$=Ue-j}return 1}return f.a=3,0}function Ie(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var x=f.Wa;x!=null&&(x.X=null),f.vb=null,e(f!=null)}function mt(){var f=new Et;return f==null?null:(f.a=0,f.xb=ev,ut("Predictor","VP8LPredictors"),ut("Predictor","VP8LPredictors_C"),ut("PredictorAdd","VP8LPredictorsAdd"),ut("PredictorAdd","VP8LPredictorsAdd_C"),Pr=Qe,Pc=ze,Tc=Ee,Oi=Pe,Ri=Le,Mi=Re,tl=ht,L.VP8LMapColor32b=_s,L.VP8LMapColor8b=Qc,f)}function Qt(f,x,j,_,P){var R=1,M=[f],$=[x],q=_.m,Z=_.s,pe=null,Ue=0;e:for(;;){if(j)for(;R&&we(q,1);){var ee=M,ve=$,_e=_,Te=1,Fe=_e.m,De=_e.gc[_e.ab],He=we(Fe,2);if(_e.Oc&1<<He)R=0;else{switch(_e.Oc|=1<<He,De.hc=He,De.Ea=ee[0],De.nc=ve[0],De.K=[null],++_e.ab,e(4>=_e.ab),He){case 0:case 1:De.b=we(Fe,3)+2,Te=Qt(Ne(De.Ea,De.b),Ne(De.nc,De.b),0,_e,De.K),De.K=De.K[0];break;case 3:var Xe,Ve=we(Fe,8)+1,Ct=16<Ve?0:4<Ve?1:2<Ve?2:3;if(ee[0]=Ne(De.Ea,Ct),De.b=Ct,Xe=Te=Qt(Ve,1,0,_e,De.K)){var pt,Dt=Ve,bt=De,$t=1<<(8>>bt.b),sn=i($t);if(sn==null)Xe=0;else{var zt=bt.K[0],wt=bt.w;for(sn[0]=bt.K[0][0],pt=1;pt<1*Dt;++pt)sn[pt]=qe(zt[wt+pt],sn[pt-1]);for(;pt<4*$t;++pt)sn[pt]=0;bt.K[0]=null,bt.K[0]=sn,Xe=1}}Te=Xe;break;case 2:break;default:e(0)}R=Te}}if(M=M[0],$=$[0],R&&we(q,1)&&!(R=1<=(Ue=we(q,4))&&11>=Ue)){_.a=3;break e}var st;if(st=R)t:{var Dr,It,Vt,yr=_,kn=M,Wn=$,Ur=Ue,In=j,qn=yr.m,on=yr.s,Yt=[null],ar=1,Lr=0,sr=v3[Ur];r:for(;;){if(In&&we(qn,1)){var Bn=we(qn,3)+2,is=Ne(kn,Bn),zr=Ne(Wn,Bn),sa=is*zr;if(!Qt(is,zr,0,yr,Yt))break r;for(Yt=Yt[0],on.xc=Bn,Dr=0;Dr<sa;++Dr){var ur=Yt[Dr]>>8&65535;Yt[Dr]=ur,ur>=ar&&(ar=ur+1)}}if(qn.h)break r;for(It=0;5>It;++It){var ln=Xw[It];!It&&0<Ur&&(ln+=1<<Ur),Lr<ln&&(Lr=ln)}var ba=o(ar*sr,T),Jn=ar,wa=o(Jn,ne);if(wa==null)var va=null;else e(65536>=Jn),va=wa;var ia=i(Lr);if(va==null||ia==null||ba==null){yr.a=1;break r}var ka=ba;for(Dr=Vt=0;Dr<ar;++Dr){var gr=va[Dr],Ba=gr.G,os=gr.H,nl=0,li=1,Cn=0;for(It=0;5>It;++It){ln=Xw[It],Ba[It]=ka,os[It]=Vt,!It&&0<Ur&&(ln+=1<<Ur);a:{var ch,hp=ln,dh=yr,Mc=ia,H3=ka,K3=Vt,fp=0,Gi=dh.m,$3=we(Gi,1);if(a(Mc,0,0,hp),$3){var G3=we(Gi,1)+1,V3=we(Gi,1),lv=we(Gi,V3==0?1:8);Mc[lv]=1,G3==2&&(Mc[lv=we(Gi,8)]=1);var uh=1}else{var Av=i(19),cv=we(Gi,4)+4;if(19<cv){dh.a=3;var hh=0;break a}for(ch=0;ch<cv;++ch)Av[b3[ch]]=we(Gi,3);var gp=void 0,Hc=void 0,dv=dh,W3=Av,fh=hp,uv=Mc,pp=0,Vi=dv.m,hv=8,fv=o(128,T);n:for(;D(fv,0,7,W3,19);){if(we(Vi,1)){var q3=2+2*we(Vi,3);if((gp=2+we(Vi,q3))>fh)break n}else gp=fh;for(Hc=0;Hc<fh&&gp--;){re(Vi);var gv=fv[0+(127&K(Vi))];J(Vi,Vi.u+gv.g);var Wl=gv.value;if(16>Wl)uv[Hc++]=Wl,Wl!=0&&(hv=Wl);else{var J3=Wl==16,pv=Wl-16,Y3=x3[pv],mv=we(Vi,m3[pv])+Y3;if(Hc+mv>fh)break n;for(var X3=J3?hv:0;0<mv--;)uv[Hc++]=X3}}pp=1;break n}pp||(dv.a=3),uh=pp}(uh=uh&&!Gi.h)&&(fp=D(H3,K3,8,Mc,hp)),uh&&fp!=0?hh=fp:(dh.a=3,hh=0)}if(hh==0)break r;if(li&&y3[It]==1&&(li=ka[Vt].g==0),nl+=ka[Vt].g,Vt+=hh,3>=It){var Kc,mp=ia[0];for(Kc=1;Kc<ln;++Kc)ia[Kc]>mp&&(mp=ia[Kc]);Cn+=mp}}if(gr.nd=li,gr.Qb=0,li&&(gr.qb=(Ba[3][os[3]+0].value<<24|Ba[1][os[1]+0].value<<16|Ba[2][os[2]+0].value)>>>0,nl==0&&256>Ba[0][os[0]+0].value&&(gr.Qb=1,gr.qb+=Ba[0][os[0]+0].value<<8)),gr.jc=!gr.Qb&&6>Cn,gr.jc){var gh,Ai=gr;for(gh=0;gh<el;++gh){var Wi=gh,qi=Ai.pd[Wi],ph=Ai.G[0][Ai.H[0]+Wi];256<=ph.value?(qi.g=ph.g+256,qi.value=ph.value):(qi.g=0,qi.value=0,Wi>>=nr(ph,8,qi),Wi>>=nr(Ai.G[1][Ai.H[1]+Wi],16,qi),Wi>>=nr(Ai.G[2][Ai.H[2]+Wi],0,qi),nr(Ai.G[3][Ai.H[3]+Wi],24,qi))}}}on.vc=Yt,on.Wb=ar,on.Ya=va,on.yc=ba,st=1;break t}st=0}if(!(R=st)){_.a=3;break e}if(0<Ue){if(Z.ua=1<<Ue,!H(Z.Wa,Ue)){_.a=1,R=0;break e}}else Z.ua=0;var xp=_,xv=M,Z3=$,yp=xp.s,bp=yp.xc;if(xp.c=xv,xp.i=Z3,yp.md=Ne(xv,bp),yp.wc=bp==0?-1:(1<<bp)-1,j){_.xb=E3;break e}if((pe=i(M*$))==null){_.a=1,R=0;break e}R=(R=ie(_,pe,0,M,$,$,null))&&!q.h;break e}return R?(P!=null?P[0]=pe:(e(pe==null),e(j)),_.$=0,j||Ie(Z)):Ie(Z),R}function Fr(f,x){var j=f.c*f.i,_=j+x+16*x;return e(f.c<=x),f.V=i(_),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+j+x,1)}function Da(f,x){var j=f.C,_=x-j,P=f.V,R=f.Ba+f.c*j;for(e(x<=f.l.o);0<_;){var M=16<_?16:_,$=f.l.ma,q=f.l.width,Z=q*M,pe=$.ca,Ue=$.tb+q*j,ee=f.Ta,ve=f.Ua;bn(f,M,P,R),Kw(ee,ve,pe,Ue,Z),Ta($,j,j+M,pe,Ue,q),_-=M,P+=M*f.c,j+=M}e(j==x),f.C=f.Ma=x}function Ws(){this.ub=this.yd=this.td=this.Rb=0}function Qi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hg(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function mc(){this.Yb=function(){var f=[];return function x(j,_,P){for(var R=P[_],M=0;M<R&&(j.push(P.length>_+1?[]:0),!(P.length<_+1));M++)x(j[M],_+1,P)}(f,0,[3,11]),f}()}function Iu(){this.jb=i(3),this.Wc=l([4,8],mc),this.Xc=l([4,17],mc)}function Pu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function za(){this.ld=this.La=this.dd=this.tc=0}function xc(){this.Na=this.la=0}function Tu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Du(){this.uc=this.M=this.Nb=0,this.wa=Array(new za),this.Y=0,this.ya=Array(new yc),this.aa=0,this.l=new zl}function zu(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ou(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new Ws,this.Kc=new Qi,this.ed=new Pu,this.Qa=new Hg,this.Ic=this.$c=this.Aa=0,this.D=new Du,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,E),this.ia=0,this.pb=o(4,Tu),this.Pa=new Iu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zu),this.Hd=0,this.rb=Array(new xc),this.sb=0,this.wa=Array(new za),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yc),this.L=this.aa=0,this.gd=l([4,2],za),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Cs(f,x){return 0>f?0:f>x?x:f}function zl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kg(){var f=new Ou;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,Oc||(Oc=Ol)),f}function Vr(f,x,j){return f.a==0&&(f.a=x,f.sc=j,f.cb=0),0}function Ru(f,x,j){return 3<=j&&f[x+0]==157&&f[x+1]==1&&f[x+2]==42}function js(f,x){if(f==null)return 0;if(f.a=0,f.sc="OK",x==null)return Vr(f,2,"null VP8Io passed to VP8GetHeaders()");var j=x.data,_=x.w,P=x.ha;if(4>P)return Vr(f,7,"Truncated header.");var R=j[_+0]|j[_+1]<<8|j[_+2]<<16,M=f.Od;if(M.Rb=!(1&R),M.td=R>>1&7,M.yd=R>>4&1,M.ub=R>>5,3<M.td)return Vr(f,3,"Incorrect keyframe parameters.");if(!M.yd)return Vr(f,4,"Frame not displayable.");_+=3,P-=3;var $=f.Kc;if(M.Rb){if(7>P)return Vr(f,7,"cannot parse picture header");if(!Ru(j,_,P))return Vr(f,3,"Bad code word");$.c=16383&(j[_+4]<<8|j[_+3]),$.Td=j[_+4]>>6,$.i=16383&(j[_+6]<<8|j[_+5]),$.Ud=j[_+6]>>6,_+=7,P-=7,f.za=$.c+15>>4,f.Ub=$.i+15>>4,x.width=$.c,x.height=$.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,a((R=f.Pa).jb,0,255,R.jb.length),e((R=f.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,a(R.Zb,0,0,R.Zb.length),a(R.Lb,0,0,R.Lb)}if(M.ub>P)return Vr(f,7,"bad partition length");ce(R=f.m,j,_,M.ub),_+=M.ub,P-=M.ub,M.Rb&&($.Ld=me(R),$.Kd=me(R)),$=f.Qa;var q,Z=f.Pa;if(e(R!=null),e($!=null),$.Cb=me(R),$.Cb){if($.Bb=me(R),me(R)){for($.Fb=me(R),q=0;4>q;++q)$.Zb[q]=me(R)?Y(R,7):0;for(q=0;4>q;++q)$.Lb[q]=me(R)?Y(R,6):0}if($.Bb)for(q=0;3>q;++q)Z.jb[q]=me(R)?ue(R,8):255}else $.Bb=0;if(R.Ka)return Vr(f,3,"cannot parse segment header");if(($=f.ed).zd=me(R),$.Tb=ue(R,6),$.wb=ue(R,3),$.Pc=me(R),$.Pc&&me(R)){for(Z=0;4>Z;++Z)me(R)&&($.vd[Z]=Y(R,6));for(Z=0;4>Z;++Z)me(R)&&($.od[Z]=Y(R,6))}if(f.L=$.Tb==0?0:$.zd?1:2,R.Ka)return Vr(f,3,"cannot parse filter header");var pe=P;if(P=q=_,_=q+pe,$=pe,f.Xb=(1<<ue(f.m,2))-1,pe<3*(Z=f.Xb))j=7;else{for(q+=3*Z,$-=3*Z,pe=0;pe<Z;++pe){var Ue=j[P+0]|j[P+1]<<8|j[P+2]<<16;Ue>$&&(Ue=$),ce(f.Jc[+pe],j,q,Ue),q+=Ue,$-=Ue,P+=3}ce(f.Jc[+Z],j,q,$),j=q<_?0:5}if(j!=0)return Vr(f,j,"cannot parse partitions");for(j=ue(q=f.m,7),P=me(q)?Y(q,4):0,_=me(q)?Y(q,4):0,$=me(q)?Y(q,4):0,Z=me(q)?Y(q,4):0,q=me(q)?Y(q,4):0,pe=f.Qa,Ue=0;4>Ue;++Ue){if(pe.Cb){var ee=pe.Zb[Ue];pe.Fb||(ee+=j)}else{if(0<Ue){f.pb[Ue]=f.pb[0];continue}ee=j}var ve=f.pb[Ue];ve.Sc[0]=cp[Cs(ee+P,127)],ve.Sc[1]=dp[Cs(ee+0,127)],ve.Eb[0]=2*cp[Cs(ee+_,127)],ve.Eb[1]=101581*dp[Cs(ee+$,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=cp[Cs(ee+Z,117)],ve.Qc[1]=dp[Cs(ee+q,127)],ve.lc=ee+q}if(!M.Rb)return Vr(f,4,"Not a key frame.");for(me(R),M=f.Pa,j=0;4>j;++j){for(P=0;8>P;++P)for(_=0;3>_;++_)for($=0;11>$;++$)Z=ae(R,_3[j][P][_][$])?ue(R,8):j3[j][P][_][$],M.Wc[j][P].Yb[_][$]=Z;for(P=0;17>P;++P)M.Xc[j][P]=M.Wc[j][S3[P]]}return f.kc=me(R),f.kc&&(f.Bd=ue(R,8)),f.cb=1}function Ol(f,x,j,_,P,R,M){var $=x[P].Yb[j];for(j=0;16>P;++P){if(!ae(f,$[j+0]))return P;for(;!ae(f,$[j+1]);)if($=x[++P].Yb[0],j=0,P==16)return 16;var q=x[P+1].Yb;if(ae(f,$[j+2])){var Z=f,pe=0;if(ae(Z,(ee=$)[(Ue=j)+3]))if(ae(Z,ee[Ue+6])){for($=0,Ue=2*(pe=ae(Z,ee[Ue+8]))+(ee=ae(Z,ee[Ue+9+pe])),pe=0,ee=B3[Ue];ee[$];++$)pe+=pe+ae(Z,ee[$]);pe+=3+(8<<Ue)}else ae(Z,ee[Ue+7])?(pe=7+2*ae(Z,165),pe+=ae(Z,145)):pe=5+ae(Z,159);else pe=ae(Z,ee[Ue+4])?3+ae(Z,ee[Ue+5]):2;$=q[2]}else pe=1,$=q[1];q=M+C3[P],0>(Z=f).b&&be(Z);var Ue,ee=Z.b,ve=(Ue=Z.Ca>>1)-(Z.I>>ee)>>31;--Z.b,Z.Ca+=ve,Z.Ca|=1,Z.I-=(Ue+1&ve)<<ee,R[q]=((pe^ve)-ve)*_[(0<P)+0]}return 16}function Mu(f){var x=f.rb[f.sb-1];x.la=0,x.Na=0,a(f.zc,0,0,f.zc.length),f.ja=0}function Oa(f,x,j,_,P){P=f[x+j+32*_]+(P>>3),f[x+j+32*_]=-256&P?0>P?0:255:P}function rn(f,x,j,_,P,R){Oa(f,x,0,j,_+P),Oa(f,x,1,j,_+R),Oa(f,x,2,j,_-R),Oa(f,x,3,j,_-P)}function qs(f){return(20091*f>>16)+f}function Hu(f,x,j,_){var P,R=0,M=i(16);for(P=0;4>P;++P){var $=f[x+0]+f[x+8],q=f[x+0]-f[x+8],Z=(35468*f[x+4]>>16)-qs(f[x+12]),pe=qs(f[x+4])+(35468*f[x+12]>>16);M[R+0]=$+pe,M[R+1]=q+Z,M[R+2]=q-Z,M[R+3]=$-pe,R+=4,x++}for(P=R=0;4>P;++P)$=(f=M[R+0]+4)+M[R+8],q=f-M[R+8],Z=(35468*M[R+4]>>16)-qs(M[R+12]),Oa(j,_,0,0,$+(pe=qs(M[R+4])+(35468*M[R+12]>>16))),Oa(j,_,1,0,q+Z),Oa(j,_,2,0,q-Z),Oa(j,_,3,0,$-pe),R++,_+=32}function $g(f,x,j,_){var P=f[x+0]+4,R=35468*f[x+4]>>16,M=qs(f[x+4]),$=35468*f[x+1]>>16;rn(j,_,0,P+M,f=qs(f[x+1]),$),rn(j,_,1,P+R,f,$),rn(j,_,2,P-R,f,$),rn(j,_,3,P-M,f,$)}function Gg(f,x,j,_,P){Hu(f,x,j,_),P&&Hu(f,x+16,j,_+4)}function Ns(f,x,j,_){rl(f,x+0,j,_,1),rl(f,x+32,j,_+128,1)}function Ku(f,x,j,_){var P;for(f=f[x+0]+4,P=0;4>P;++P)for(x=0;4>x;++x)Oa(j,_,x,P,f)}function $u(f,x,j,_){f[x+0]&&tr(f,x+0,j,_),f[x+16]&&tr(f,x+16,j,_+4),f[x+32]&&tr(f,x+32,j,_+128),f[x+48]&&tr(f,x+48,j,_+128+4)}function Rl(f,x,j,_){var P,R=i(16);for(P=0;4>P;++P){var M=f[x+0+P]+f[x+12+P],$=f[x+4+P]+f[x+8+P],q=f[x+4+P]-f[x+8+P],Z=f[x+0+P]-f[x+12+P];R[0+P]=M+$,R[8+P]=M-$,R[4+P]=Z+q,R[12+P]=Z-q}for(P=0;4>P;++P)M=(f=R[0+4*P]+3)+R[3+4*P],$=R[1+4*P]+R[2+4*P],q=R[1+4*P]-R[2+4*P],Z=f-R[3+4*P],j[_+0]=M+$>>3,j[_+16]=Z+q>>3,j[_+32]=M-$>>3,j[_+48]=Z-q>>3,_+=64}function Ko(f,x,j){var _,P=x-32,R=ya,M=255-f[P-1];for(_=0;_<j;++_){var $,q=R,Z=M+f[x-1];for($=0;$<j;++$)f[x+$]=q[Z+f[P+$]];x+=32}}function Vg(f,x){Ko(f,x,4)}function Wg(f,x){Ko(f,x,8)}function qg(f,x){Ko(f,x,16)}function bc(f,x){var j;for(j=0;16>j;++j)n(f,x+32*j,f,x-32,16)}function Gu(f,x){var j;for(j=16;0<j;--j)a(f,x,f[x-1],16),x+=32}function ns(f,x,j){var _;for(_=0;16>_;++_)a(x,j+32*_,f,16)}function Jg(f,x){var j,_=16;for(j=0;16>j;++j)_+=f[x-1+32*j]+f[x+j-32];ns(_>>5,f,x)}function $o(f,x){var j,_=8;for(j=0;16>j;++j)_+=f[x-1+32*j];ns(_>>4,f,x)}function wc(f,x){var j,_=8;for(j=0;16>j;++j)_+=f[x+j-32];ns(_>>4,f,x)}function Yg(f,x){ns(128,f,x)}function Ut(f,x,j){return f+2*x+j+2>>2}function Xg(f,x){var j,_=x-32;for(_=new Uint8Array([Ut(f[_-1],f[_+0],f[_+1]),Ut(f[_+0],f[_+1],f[_+2]),Ut(f[_+1],f[_+2],f[_+3]),Ut(f[_+2],f[_+3],f[_+4])]),j=0;4>j;++j)n(f,x+32*j,_,0,_.length)}function Zg(f,x){var j=f[x-1],_=f[x-1+32],P=f[x-1+64],R=f[x-1+96];X(f,x+0,16843009*Ut(f[x-1-32],j,_)),X(f,x+32,16843009*Ut(j,_,P)),X(f,x+64,16843009*Ut(_,P,R)),X(f,x+96,16843009*Ut(P,R,R))}function ep(f,x){var j,_=4;for(j=0;4>j;++j)_+=f[x+j-32]+f[x-1+32*j];for(_>>=3,j=0;4>j;++j)a(f,x+32*j,_,4)}function Js(f,x){var j=f[x-1+0],_=f[x-1+32],P=f[x-1+64],R=f[x-1-32],M=f[x+0-32],$=f[x+1-32],q=f[x+2-32],Z=f[x+3-32];f[x+0+96]=Ut(_,P,f[x-1+96]),f[x+1+96]=f[x+0+64]=Ut(j,_,P),f[x+2+96]=f[x+1+64]=f[x+0+32]=Ut(R,j,_),f[x+3+96]=f[x+2+64]=f[x+1+32]=f[x+0+0]=Ut(M,R,j),f[x+3+64]=f[x+2+32]=f[x+1+0]=Ut($,M,R),f[x+3+32]=f[x+2+0]=Ut(q,$,M),f[x+3+0]=Ut(Z,q,$)}function Ys(f,x){var j=f[x+1-32],_=f[x+2-32],P=f[x+3-32],R=f[x+4-32],M=f[x+5-32],$=f[x+6-32],q=f[x+7-32];f[x+0+0]=Ut(f[x+0-32],j,_),f[x+1+0]=f[x+0+32]=Ut(j,_,P),f[x+2+0]=f[x+1+32]=f[x+0+64]=Ut(_,P,R),f[x+3+0]=f[x+2+32]=f[x+1+64]=f[x+0+96]=Ut(P,R,M),f[x+3+32]=f[x+2+64]=f[x+1+96]=Ut(R,M,$),f[x+3+64]=f[x+2+96]=Ut(M,$,q),f[x+3+96]=Ut($,q,q)}function tp(f,x){var j=f[x-1+0],_=f[x-1+32],P=f[x-1+64],R=f[x-1-32],M=f[x+0-32],$=f[x+1-32],q=f[x+2-32],Z=f[x+3-32];f[x+0+0]=f[x+1+64]=R+M+1>>1,f[x+1+0]=f[x+2+64]=M+$+1>>1,f[x+2+0]=f[x+3+64]=$+q+1>>1,f[x+3+0]=q+Z+1>>1,f[x+0+96]=Ut(P,_,j),f[x+0+64]=Ut(_,j,R),f[x+0+32]=f[x+1+96]=Ut(j,R,M),f[x+1+32]=f[x+2+96]=Ut(R,M,$),f[x+2+32]=f[x+3+96]=Ut(M,$,q),f[x+3+32]=Ut($,q,Z)}function rp(f,x){var j=f[x+0-32],_=f[x+1-32],P=f[x+2-32],R=f[x+3-32],M=f[x+4-32],$=f[x+5-32],q=f[x+6-32],Z=f[x+7-32];f[x+0+0]=j+_+1>>1,f[x+1+0]=f[x+0+64]=_+P+1>>1,f[x+2+0]=f[x+1+64]=P+R+1>>1,f[x+3+0]=f[x+2+64]=R+M+1>>1,f[x+0+32]=Ut(j,_,P),f[x+1+32]=f[x+0+96]=Ut(_,P,R),f[x+2+32]=f[x+1+96]=Ut(P,R,M),f[x+3+32]=f[x+2+96]=Ut(R,M,$),f[x+3+64]=Ut(M,$,q),f[x+3+96]=Ut($,q,Z)}function Ml(f,x){var j=f[x-1+0],_=f[x-1+32],P=f[x-1+64],R=f[x-1+96];f[x+0+0]=j+_+1>>1,f[x+2+0]=f[x+0+32]=_+P+1>>1,f[x+2+32]=f[x+0+64]=P+R+1>>1,f[x+1+0]=Ut(j,_,P),f[x+3+0]=f[x+1+32]=Ut(_,P,R),f[x+3+32]=f[x+1+64]=Ut(P,R,R),f[x+3+64]=f[x+2+64]=f[x+0+96]=f[x+1+96]=f[x+2+96]=f[x+3+96]=R}function vc(f,x){var j=f[x-1+0],_=f[x-1+32],P=f[x-1+64],R=f[x-1+96],M=f[x-1-32],$=f[x+0-32],q=f[x+1-32],Z=f[x+2-32];f[x+0+0]=f[x+2+32]=j+M+1>>1,f[x+0+32]=f[x+2+64]=_+j+1>>1,f[x+0+64]=f[x+2+96]=P+_+1>>1,f[x+0+96]=R+P+1>>1,f[x+3+0]=Ut($,q,Z),f[x+2+0]=Ut(M,$,q),f[x+1+0]=f[x+3+32]=Ut(j,M,$),f[x+1+32]=f[x+3+64]=Ut(_,j,M),f[x+1+64]=f[x+3+96]=Ut(P,_,j),f[x+1+96]=Ut(R,P,_)}function Go(f,x){var j;for(j=0;8>j;++j)n(f,x+32*j,f,x-32,8)}function np(f,x){var j;for(j=0;8>j;++j)a(f,x,f[x-1],8),x+=32}function Xs(f,x,j){var _;for(_=0;8>_;++_)a(x,j+32*_,f,8)}function ap(f,x){var j,_=8;for(j=0;8>j;++j)_+=f[x+j-32]+f[x-1+32*j];Xs(_>>4,f,x)}function kc(f,x){var j,_=4;for(j=0;8>j;++j)_+=f[x+j-32];Xs(_>>3,f,x)}function Bc(f,x){var j,_=4;for(j=0;8>j;++j)_+=f[x-1+32*j];Xs(_>>3,f,x)}function Vu(f,x){Xs(128,f,x)}function Zs(f,x,j){var _=f[x-j],P=f[x+0],R=3*(P-_)+sp[1020+f[x-2*j]-f[x+j]],M=th[112+(R+4>>3)];f[x-j]=ya[255+_+th[112+(R+3>>3)]],f[x+0]=ya[255+P-M]}function Cc(f,x,j,_){var P=f[x+0],R=f[x+j];return Ha[255+f[x-2*j]-f[x-j]]>_||Ha[255+R-P]>_}function Hl(f,x,j,_){return 4*Ha[255+f[x-j]-f[x+0]]+Ha[255+f[x-2*j]-f[x+j]]<=_}function jc(f,x,j,_,P){var R=f[x-3*j],M=f[x-2*j],$=f[x-j],q=f[x+0],Z=f[x+j],pe=f[x+2*j],Ue=f[x+3*j];return 4*Ha[255+$-q]+Ha[255+M-Z]>_?0:Ha[255+f[x-4*j]-R]<=P&&Ha[255+R-M]<=P&&Ha[255+M-$]<=P&&Ha[255+Ue-pe]<=P&&Ha[255+pe-Z]<=P&&Ha[255+Z-q]<=P}function Vo(f,x,j,_){var P=2*_+1;for(_=0;16>_;++_)Hl(f,x+_,j,P)&&Zs(f,x+_,j)}function Nc(f,x,j,_){var P=2*_+1;for(_=0;16>_;++_)Hl(f,x+_*j,1,P)&&Zs(f,x+_*j,1)}function Wu(f,x,j,_){var P;for(P=3;0<P;--P)Vo(f,x+=4*j,j,_)}function qu(f,x,j,_){var P;for(P=3;0<P;--P)Nc(f,x+=4,j,_)}function ei(f,x,j,_,P,R,M,$){for(R=2*R+1;0<P--;){if(jc(f,x,j,R,M))if(Cc(f,x,j,$))Zs(f,x,j);else{var q=f,Z=x,pe=j,Ue=q[Z-2*pe],ee=q[Z-pe],ve=q[Z+0],_e=q[Z+pe],Te=q[Z+2*pe],Fe=27*(He=sp[1020+3*(ve-ee)+sp[1020+Ue-_e]])+63>>7,De=18*He+63>>7,He=9*He+63>>7;q[Z-3*pe]=ya[255+q[Z-3*pe]+He],q[Z-2*pe]=ya[255+Ue+De],q[Z-pe]=ya[255+ee+Fe],q[Z+0]=ya[255+ve-Fe],q[Z+pe]=ya[255+_e-De],q[Z+2*pe]=ya[255+Te-He]}x+=_}}function ti(f,x,j,_,P,R,M,$){for(R=2*R+1;0<P--;){if(jc(f,x,j,R,M))if(Cc(f,x,j,$))Zs(f,x,j);else{var q=f,Z=x,pe=j,Ue=q[Z-pe],ee=q[Z+0],ve=q[Z+pe],_e=th[112+(4+(Te=3*(ee-Ue))>>3)],Te=th[112+(Te+3>>3)],Fe=_e+1>>1;q[Z-2*pe]=ya[255+q[Z-2*pe]+Fe],q[Z-pe]=ya[255+Ue+Te],q[Z+0]=ya[255+ee-_e],q[Z+pe]=ya[255+ve-Fe]}x+=_}}function Ju(f,x,j,_,P,R){ei(f,x,j,1,16,_,P,R)}function Wo(f,x,j,_,P,R){ei(f,x,1,j,16,_,P,R)}function Yu(f,x,j,_,P,R){var M;for(M=3;0<M;--M)ti(f,x+=4*j,j,1,16,_,P,R)}function B(f,x,j,_,P,R){var M;for(M=3;0<M;--M)ti(f,x+=4,1,j,16,_,P,R)}function I(f,x,j,_,P,R,M,$){ei(f,x,P,1,8,R,M,$),ei(j,_,P,1,8,R,M,$)}function te(f,x,j,_,P,R,M,$){ei(f,x,1,P,8,R,M,$),ei(j,_,1,P,8,R,M,$)}function he(f,x,j,_,P,R,M,$){ti(f,x+4*P,P,1,8,R,M,$),ti(j,_+4*P,P,1,8,R,M,$)}function je(f,x,j,_,P,R,M,$){ti(f,x+4,1,P,8,R,M,$),ti(j,_+4,1,P,8,R,M,$)}function Me(){this.ba=new We,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new et,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ge(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function yt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bt(){this.ua=0,this.Wa=new lt,this.vb=new lt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ne,this.yc=new T}function Et(){this.xb=this.a=0,this.l=new zl,this.ca=new We,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bt,this.ab=0,this.gc=o(4,yt),this.Oc=0}function Tt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new zl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Jt(f,x,j,_,P,R,M){for(f=f==null?0:f[x+0],x=0;x<M;++x)P[R+x]=f+j[_+x]&255,f=P[R+x]}function jr(f,x,j,_,P,R,M){var $;if(f==null)Jt(null,null,j,_,P,R,M);else for($=0;$<M;++$)P[R+$]=f[x+$]+j[_+$]&255}function Wr(f,x,j,_,P,R,M){if(f==null)Jt(null,null,j,_,P,R,M);else{var $,q=f[x+0],Z=q,pe=q;for($=0;$<M;++$)Z=pe+(q=f[x+$])-Z,pe=j[_+$]+(-256&Z?0>Z?0:255:Z)&255,Z=q,P[R+$]=pe}}function fr(f,x,j,_){var P=x.width,R=x.o;if(e(f!=null&&x!=null),0>j||0>=_||j+_>R)return null;if(!f.Cc){if(f.ga==null){var M;if(f.ga=new Tt,(M=f.ga==null)||(M=x.width*x.o,e(f.Gb.length==0),f.Gb=i(M),f.Uc=0,f.Gb==null?M=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,M=1),M=!M),!M){M=f.ga;var $=f.Fa,q=f.P,Z=f.qc,pe=f.mb,Ue=f.nb,ee=q+1,ve=Z-1,_e=M.l;if(e($!=null&&pe!=null&&x!=null),$i[0]=null,$i[1]=Jt,$i[2]=jr,$i[3]=Wr,M.ca=pe,M.tb=Ue,M.c=x.width,M.i=x.height,e(0<M.c&&0<M.i),1>=Z)x=0;else if(M.$a=3&$[q+0],M.Z=$[q+0]>>2&3,M.Lc=$[q+0]>>4&3,q=$[q+0]>>6&3,0>M.$a||1<M.$a||4<=M.Z||1<M.Lc||q)x=0;else if(_e.put=Ce,_e.ac=ge,_e.bc=Ke,_e.ma=M,_e.width=x.width,_e.height=x.height,_e.Da=x.Da,_e.v=x.v,_e.va=x.va,_e.j=x.j,_e.o=x.o,M.$a)e:{e(M.$a==1),x=mt();t:for(;;){if(x==null){x=0;break e}if(e(M!=null),M.mc=x,x.c=M.c,x.i=M.i,x.l=M.l,x.l.ma=M,x.l.width=M.c,x.l.height=M.i,x.a=0,Ae(x.m,$,ee,ve),!Qt(M.c,M.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&aa(x.s)?(M.ic=1,$=x.c*x.i,x.Ta=null,x.Ua=0,x.V=i($),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(M.ic=0,x=Fr(x,M.c)),!x))break t;x=1;break e}M.mc=null,x=0}else x=ve>=M.c*M.i;M=!x}if(M)return null;f.ga.Lc!=1?f.Ga=0:_=R-j}e(f.ga!=null),e(j+_<=R);e:{if(x=($=f.ga).c,R=$.l.o,$.$a==0){if(ee=f.rc,ve=f.Vc,_e=f.Fa,q=f.P+1+j*x,Z=f.mb,pe=f.nb+j*x,e(q<=f.P+f.qc),$.Z!=0)for(e($i[$.Z]!=null),M=0;M<_;++M)$i[$.Z](ee,ve,_e,q,Z,pe,x),ee=Z,ve=pe,pe+=x,q+=x;else for(M=0;M<_;++M)n(Z,pe,_e,q,x),ee=Z,ve=pe,pe+=x,q+=x;f.rc=ee,f.Vc=ve}else{if(e($.mc!=null),x=j+_,e((M=$.mc)!=null),e(x<=M.i),M.C>=x)x=1;else if($.ic||as(),$.ic){$=M.V,ee=M.Ba,ve=M.c;var Te=M.i,Fe=(_e=1,q=M.$/ve,Z=M.$%ve,pe=M.m,Ue=M.s,M.$),De=ve*Te,He=ve*x,Xe=Ue.wc,Ve=Fe<He?er(Ue,Z,q):null;e(Fe<=De),e(x<=Te),e(aa(Ue));t:for(;;){for(;!pe.h&&Fe<He;){if(Z&Xe||(Ve=er(Ue,Z,q)),e(Ve!=null),re(pe),256>(Te=qt(Ve.G[0],Ve.H[0],pe)))$[ee+Fe]=Te,++Fe,++Z>=ve&&(Z=0,++q<=x&&!(q%16)&&pa(M,q));else{if(!(280>Te)){_e=0;break t}Te=Kt(Te-256,pe);var Ct,pt=qt(Ve.G[4],Ve.H[4],pe);if(re(pe),!(Fe>=(pt=Ar(ve,pt=Kt(pt,pe)))&&De-Fe>=Te)){_e=0;break t}for(Ct=0;Ct<Te;++Ct)$[ee+Fe+Ct]=$[ee+Fe+Ct-pt];for(Fe+=Te,Z+=Te;Z>=ve;)Z-=ve,++q<=x&&!(q%16)&&pa(M,q);Fe<He&&Z&Xe&&(Ve=er(Ue,Z,q))}e(pe.h==W(pe))}pa(M,q>x?x:q);break t}!_e||pe.h&&Fe<De?(_e=0,M.a=pe.h?5:3):M.$=Fe,x=_e}else x=ie(M,M.V,M.Ba,M.c,M.i,x,Da);if(!x){_=0;break e}}j+_>=R&&(f.Cc=1),_=1}if(!_)return null;if(f.Cc&&((_=f.ga)!=null&&(_.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+j*P}function nn(f,x,j,_,P,R){for(;0<P--;){var M,$=f,q=x+(j?1:0),Z=f,pe=x+(j?0:3);for(M=0;M<_;++M){var Ue=Z[pe+4*M];Ue!=255&&(Ue*=32897,$[q+4*M+0]=$[q+4*M+0]*Ue>>23,$[q+4*M+1]=$[q+4*M+1]*Ue>>23,$[q+4*M+2]=$[q+4*M+2]*Ue>>23)}x+=R}}function qr(f,x,j,_,P){for(;0<_--;){var R;for(R=0;R<j;++R){var M=f[x+2*R+0],$=15&(Z=f[x+2*R+1]),q=4369*$,Z=(240&Z|Z>>4)*q>>16;f[x+2*R+0]=(240&M|M>>4)*q>>16&240|(15&M|M<<4)*q>>16>>4&15,f[x+2*R+1]=240&Z|$}x+=P}}function wn(f,x,j,_,P,R,M,$){var q,Z,pe=255;for(Z=0;Z<P;++Z){for(q=0;q<_;++q){var Ue=f[x+q];R[M+4*q]=Ue,pe&=Ue}x+=j,M+=$}return pe!=255}function ri(f,x,j,_,P){var R;for(R=0;R<P;++R)j[_+R]=f[x+R]>>8}function as(){zc=nn,Mw=qr,Hw=wn,Kw=ri}function ni(f,x,j){L[f]=function(_,P,R,M,$,q,Z,pe,Ue,ee,ve,_e,Te,Fe,De,He,Xe){var Ve,Ct=Xe-1>>1,pt=$[q+0]|Z[pe+0]<<16,Dt=Ue[ee+0]|ve[_e+0]<<16;e(_!=null);var bt=3*pt+Dt+131074>>2;for(x(_[P+0],255&bt,bt>>16,Te,Fe),R!=null&&(bt=3*Dt+pt+131074>>2,x(R[M+0],255&bt,bt>>16,De,He)),Ve=1;Ve<=Ct;++Ve){var $t=$[q+Ve]|Z[pe+Ve]<<16,sn=Ue[ee+Ve]|ve[_e+Ve]<<16,zt=pt+$t+Dt+sn+524296,wt=zt+2*($t+Dt)>>3;bt=wt+pt>>1,pt=(zt=zt+2*(pt+sn)>>3)+$t>>1,x(_[P+2*Ve-1],255&bt,bt>>16,Te,Fe+(2*Ve-1)*j),x(_[P+2*Ve-0],255&pt,pt>>16,Te,Fe+(2*Ve-0)*j),R!=null&&(bt=zt+Dt>>1,pt=wt+sn>>1,x(R[M+2*Ve-1],255&bt,bt>>16,De,He+(2*Ve-1)*j),x(R[M+2*Ve+0],255&pt,pt>>16,De,He+(2*Ve+0)*j)),pt=$t,Dt=sn}1&Xe||(bt=3*pt+Dt+131074>>2,x(_[P+Xe-1],255&bt,bt>>16,Te,Fe+(Xe-1)*j),R!=null&&(bt=3*Dt+pt+131074>>2,x(R[M+Xe-1],255&bt,bt>>16,De,He+(Xe-1)*j)))}}function _c(){Ka[rh]=F3,Ka[nh]=tv,Ka[Jw]=U3,Ka[ah]=rv,Ka[sh]=nv,Ka[ip]=av,Ka[Yw]=L3,Ka[op]=tv,Ka[lp]=rv,Ka[ih]=nv,Ka[Ap]=av}function Kl(f){return f&-16384?0>f?0:255:f>>Q3}function Ii(f,x){return Kl((19077*f>>8)+(26149*x>>8)-14234)}function qo(f,x,j){return Kl((19077*f>>8)-(6419*x>>8)-(13320*j>>8)+8708)}function Jo(f,x){return Kl((19077*f>>8)+(33050*x>>8)-17685)}function Pi(f,x,j,_,P){_[P+0]=Ii(f,j),_[P+1]=qo(f,x,j),_[P+2]=Jo(f,x)}function vn(f,x,j,_,P){_[P+0]=Jo(f,x),_[P+1]=qo(f,x,j),_[P+2]=Ii(f,j)}function Yo(f,x,j,_,P){var R=qo(f,x,j);x=R<<3&224|Jo(f,x)>>3,_[P+0]=248&Ii(f,j)|R>>5,_[P+1]=x}function Xo(f,x,j,_,P){var R=240&Jo(f,x)|15;_[P+0]=240&Ii(f,j)|qo(f,x,j)>>4,_[P+1]=R}function Sc(f,x,j,_,P){_[P+0]=255,Pi(f,x,j,_,P+1)}function Ec(f,x,j,_,P){vn(f,x,j,_,P),_[P+3]=255}function Vn(f,x,j,_,P){Pi(f,x,j,_,P),_[P+3]=255}function ai(f,x,j){L[f]=function(_,P,R,M,$,q,Z,pe,Ue){for(var ee=pe+(-2&Ue)*j;pe!=ee;)x(_[P+0],R[M+0],$[q+0],Z,pe),x(_[P+1],R[M+0],$[q+0],Z,pe+j),P+=2,++M,++q,pe+=2*j;1&Ue&&x(_[P+0],R[M+0],$[q+0],Z,pe)}}function $l(f,x,j){return j==0?f==0?x==0?6:5:x==0?4:0:j}function Xu(f,x,j,_,P){switch(f>>>30){case 3:rl(x,j,_,P,0);break;case 2:Ma(x,j,_,P);break;case 1:tr(x,j,_,P)}}function Ra(f,x){var j,_,P=x.M,R=x.Nb,M=f.oc,$=f.pc+40,q=f.oc,Z=f.pc+584,pe=f.oc,Ue=f.pc+600;for(j=0;16>j;++j)M[$+32*j-1]=129;for(j=0;8>j;++j)q[Z+32*j-1]=129,pe[Ue+32*j-1]=129;for(0<P?M[$-1-32]=q[Z-1-32]=pe[Ue-1-32]=129:(a(M,$-32-1,127,21),a(q,Z-32-1,127,9),a(pe,Ue-32-1,127,9)),_=0;_<f.za;++_){var ee=x.ya[x.aa+_];if(0<_){for(j=-1;16>j;++j)n(M,$+32*j-4,M,$+32*j+12,4);for(j=-1;8>j;++j)n(q,Z+32*j-4,q,Z+32*j+4,4),n(pe,Ue+32*j-4,pe,Ue+32*j+4,4)}var ve=f.Gd,_e=f.Hd+_,Te=ee.ad,Fe=ee.Hc;if(0<P&&(n(M,$-32,ve[_e].y,0,16),n(q,Z-32,ve[_e].f,0,8),n(pe,Ue-32,ve[_e].ea,0,8)),ee.Za){var De=M,He=$-32+16;for(0<P&&(_>=f.za-1?a(De,He,ve[_e].y[15],4):n(De,He,ve[_e+1].y,0,4)),j=0;4>j;j++)De[He+128+j]=De[He+256+j]=De[He+384+j]=De[He+0+j];for(j=0;16>j;++j,Fe<<=2)De=M,He=$+iv[j],ss[ee.Ob[j]](De,He),Xu(Fe,Te,16*+j,De,He)}else if(De=$l(_,P,ee.Ob[0]),Ki[De](M,$),Fe!=0)for(j=0;16>j;++j,Fe<<=2)Xu(Fe,Te,16*+j,M,$+iv[j]);for(j=ee.Gc,De=$l(_,P,ee.Dd),oi[De](q,Z),oi[De](pe,Ue),Fe=Te,De=q,He=Z,255&(ee=0|j)&&(170&ee?Es(Fe,256,De,He):dr(Fe,256,De,He)),ee=pe,Fe=Ue,255&(j>>=8)&&(170&j?Es(Te,320,ee,Fe):dr(Te,320,ee,Fe)),P<f.Ub-1&&(n(ve[_e].y,0,M,$+480,16),n(ve[_e].f,0,q,Z+224,8),n(ve[_e].ea,0,pe,Ue+224,8)),j=8*R*f.B,ve=f.sa,_e=f.ta+16*_+16*R*f.R,Te=f.qa,ee=f.ra+8*_+j,Fe=f.Ha,De=f.Ia+8*_+j,j=0;16>j;++j)n(ve,_e+j*f.R,M,$+32*j,16);for(j=0;8>j;++j)n(Te,ee+j*f.B,q,Z+32*j,8),n(Fe,De+j*f.B,pe,Ue+32*j,8)}}function Zo(f,x,j,_,P,R,M,$,q){var Z=[0],pe=[0],Ue=0,ee=q!=null?q.kd:0,ve=q??new Ge;if(f==null||12>j)return 7;ve.data=f,ve.w=x,ve.ha=j,x=[x],j=[j],ve.gb=[ve.gb];e:{var _e=x,Te=j,Fe=ve.gb;if(e(f!=null),e(Te!=null),e(Fe!=null),Fe[0]=0,12<=Te[0]&&!r(f,_e[0],"RIFF")){if(r(f,_e[0]+8,"WEBP")){Fe=3;break e}var De=Oe(f,_e[0]+4);if(12>De||4294967286<De){Fe=3;break e}if(ee&&De>Te[0]-8){Fe=7;break e}Fe[0]=De,_e[0]+=12,Te[0]-=12}Fe=0}if(Fe!=0)return Fe;for(De=0<ve.gb[0],j=j[0];;){e:{var He=f;Te=x,Fe=j;var Xe=Z,Ve=pe,Ct=_e=[0];if((bt=Ue=[Ue])[0]=0,8>Fe[0])Fe=7;else{if(!r(He,Te[0],"VP8X")){if(Oe(He,Te[0]+4)!=10){Fe=3;break e}if(18>Fe[0]){Fe=7;break e}var pt=Oe(He,Te[0]+8),Dt=1+xe(He,Te[0]+12);if(2147483648<=Dt*(He=1+xe(He,Te[0]+15))){Fe=3;break e}Ct!=null&&(Ct[0]=pt),Xe!=null&&(Xe[0]=Dt),Ve!=null&&(Ve[0]=He),Te[0]+=18,Fe[0]-=18,bt[0]=1}Fe=0}}if(Ue=Ue[0],_e=_e[0],Fe!=0)return Fe;if(Te=!!(2&_e),!De&&Ue)return 3;if(R!=null&&(R[0]=!!(16&_e)),M!=null&&(M[0]=Te),$!=null&&($[0]=0),M=Z[0],_e=pe[0],Ue&&Te&&q==null){Fe=0;break}if(4>j){Fe=7;break}if(De&&Ue||!De&&!Ue&&!r(f,x[0],"ALPH")){j=[j],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{pt=f,Fe=x,De=j;var bt=ve.gb;Xe=ve.na,Ve=ve.P,Ct=ve.Sa,Dt=22,e(pt!=null),e(De!=null),He=Fe[0];var $t=De[0];for(e(Xe!=null),e(Ct!=null),Xe[0]=null,Ve[0]=null,Ct[0]=0;;){if(Fe[0]=He,De[0]=$t,8>$t){Fe=7;break e}var sn=Oe(pt,He+4);if(4294967286<sn){Fe=3;break e}var zt=8+sn+1&-2;if(Dt+=zt,0<bt&&Dt>bt){Fe=3;break e}if(!r(pt,He,"VP8 ")||!r(pt,He,"VP8L")){Fe=0;break e}if($t[0]<zt){Fe=7;break e}r(pt,He,"ALPH")||(Xe[0]=pt,Ve[0]=He+8,Ct[0]=sn),He+=zt,$t-=zt}}if(j=j[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],Fe!=0)break}j=[j],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(bt=f,Fe=x,De=j,Xe=ve.gb[0],Ve=ve.Ja,Ct=ve.xa,pt=Fe[0],He=!r(bt,pt,"VP8 "),Dt=!r(bt,pt,"VP8L"),e(bt!=null),e(De!=null),e(Ve!=null),e(Ct!=null),8>De[0])Fe=7;else{if(He||Dt){if(bt=Oe(bt,pt+4),12<=Xe&&bt>Xe-12){Fe=3;break e}if(ee&&bt>De[0]-8){Fe=7;break e}Ve[0]=bt,Fe[0]+=8,De[0]-=8,Ct[0]=Dt}else Ct[0]=5<=De[0]&&bt[pt+0]==47&&!(bt[pt+4]>>5),Ve[0]=De[0];Fe=0}if(j=j[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],x=x[0],Fe!=0)break;if(4294967286<ve.Ja)return 3;if($==null||Te||($[0]=ve.xa?2:1),M=[M],_e=[_e],ve.xa){if(5>j){Fe=7;break}$=M,ee=_e,Te=R,f==null||5>j?f=0:5<=j&&f[x+0]==47&&!(f[x+4]>>5)?(De=[0],bt=[0],Xe=[0],Ae(Ve=new z,f,x,j),gt(Ve,De,bt,Xe)?($!=null&&($[0]=De[0]),ee!=null&&(ee[0]=bt[0]),Te!=null&&(Te[0]=Xe[0]),f=1):f=0):f=0}else{if(10>j){Fe=7;break}$=_e,f==null||10>j||!Ru(f,x+3,j-3)?f=0:(ee=f[x+0]|f[x+1]<<8|f[x+2]<<16,Te=16383&(f[x+7]<<8|f[x+6]),f=16383&(f[x+9]<<8|f[x+8]),1&ee||3<(ee>>1&7)||!(ee>>4&1)||ee>>5>=ve.Ja||!Te||!f?f=0:(M&&(M[0]=Te),$&&($[0]=f),f=1))}if(!f||(M=M[0],_e=_e[0],Ue&&(Z[0]!=M||pe[0]!=_e)))return 3;q!=null&&(q[0]=ve,q.offset=x-q.w,e(4294967286>x-q.w),e(q.offset==q.ha-j));break}return Fe==0||Fe==7&&Ue&&q==null?(R!=null&&(R[0]|=ve.na!=null&&0<ve.na.length),_!=null&&(_[0]=M),P!=null&&(P[0]=_e),0):Fe}function Fc(f,x,j){var _=x.width,P=x.height,R=0,M=0,$=_,q=P;if(x.Da=f!=null&&0<f.Da,x.Da&&($=f.cd,q=f.bd,R=f.v,M=f.j,11>j||(R&=-2,M&=-2),0>R||0>M||0>=$||0>=q||R+$>_||M+q>P))return 0;if(x.v=R,x.j=M,x.va=R+$,x.o=M+q,x.U=$,x.T=q,x.da=f!=null&&0<f.da,x.da){if(!nt($,q,j=[f.ib],R=[f.hb]))return 0;x.ib=j[0],x.hb=R[0]}return x.ob=f!=null&&f.ob,x.Kb=f==null||!f.Sd,x.da&&(x.ob=x.ib<3*_/4&&x.hb<3*P/4,x.Kb=0),1}function Uc(f){if(f==null)return 2;if(11>f.S){var x=f.f.RGBA;x.fb+=(f.height-1)*x.A,x.A=-x.A}else x=f.f.kb,f=f.height,x.O+=(f-1)*x.fa,x.fa=-x.fa,x.N+=(f-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(f-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(f-1)*x.lb,x.lb=-x.lb);return 0}function Ti(f,x,j,_){if(_==null||0>=f||0>=x)return 2;if(j!=null){if(j.Da){var P=j.cd,R=j.bd,M=-2&j.v,$=-2&j.j;if(0>M||0>$||0>=P||0>=R||M+P>f||$+R>x)return 2;f=P,x=R}if(j.da){if(!nt(f,x,P=[j.ib],R=[j.hb]))return 2;f=P[0],x=R[0]}}_.width=f,_.height=x;e:{var q=_.width,Z=_.height;if(f=_.S,0>=q||0>=Z||!(f>=rh&&13>f))f=2;else{if(0>=_.Rd&&_.sd==null){M=R=P=x=0;var pe=($=q*ov[f])*Z;if(11>f||(R=(Z+1)/2*(x=(q+1)/2),f==12&&(M=(P=q)*Z)),(Z=i(pe+2*R+M))==null){f=1;break e}_.sd=Z,11>f?((q=_.f.RGBA).eb=Z,q.fb=0,q.A=$,q.size=pe):((q=_.f.kb).y=Z,q.O=0,q.fa=$,q.Fd=pe,q.f=Z,q.N=0+pe,q.Ab=x,q.Cd=R,q.ea=Z,q.W=0+pe+R,q.Db=x,q.Ed=R,f==12&&(q.F=Z,q.J=0+pe+2*R),q.Tc=M,q.lb=P)}if(x=1,P=_.S,R=_.width,M=_.height,P>=rh&&13>P)if(11>P)f=_.f.RGBA,x&=($=Math.abs(f.A))*(M-1)+R<=f.size,x&=$>=R*ov[P],x&=f.eb!=null;else{f=_.f.kb,$=(R+1)/2,pe=(M+1)/2,q=Math.abs(f.fa),Z=Math.abs(f.Ab);var Ue=Math.abs(f.Db),ee=Math.abs(f.lb),ve=ee*(M-1)+R;x&=q*(M-1)+R<=f.Fd,x&=Z*(pe-1)+$<=f.Cd,x=(x&=Ue*(pe-1)+$<=f.Ed)&q>=R&Z>=$&Ue>=$,x&=f.y!=null,x&=f.f!=null,x&=f.ea!=null,P==12&&(x&=ee>=R,x&=ve<=f.Tc,x&=f.F!=null)}else x=0;f=x?0:2}}return f!=0||j!=null&&j.fd&&(f=Uc(_)),f}var el=64,ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xa=24,Di=32,si=8,zi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ye("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(f){return f},L.Predictor2=function(f,x,j){return x[j+0]},L.Predictor3=function(f,x,j){return x[j+1]},L.Predictor4=function(f,x,j){return x[j-1]},L.Predictor5=function(f,x,j){return it(it(f,x[j+1]),x[j+0])},L.Predictor6=function(f,x,j){return it(f,x[j-1])},L.Predictor7=function(f,x,j){return it(f,x[j+0])},L.Predictor8=function(f,x,j){return it(x[j-1],x[j+0])},L.Predictor9=function(f,x,j){return it(x[j+0],x[j+1])},L.Predictor10=function(f,x,j){return it(it(f,x[j-1]),it(x[j+0],x[j+1]))},L.Predictor11=function(f,x,j){var _=x[j+0];return 0>=Be(_>>24&255,f>>24&255,(x=x[j-1])>>24&255)+Be(_>>16&255,f>>16&255,x>>16&255)+Be(_>>8&255,f>>8&255,x>>8&255)+Be(255&_,255&f,255&x)?_:f},L.Predictor12=function(f,x,j){var _=x[j+0];return(ke((f>>24&255)+(_>>24&255)-((x=x[j-1])>>24&255))<<24|ke((f>>16&255)+(_>>16&255)-(x>>16&255))<<16|ke((f>>8&255)+(_>>8&255)-(x>>8&255))<<8|ke((255&f)+(255&_)-(255&x)))>>>0},L.Predictor13=function(f,x,j){var _=x[j-1];return(oe((f=it(f,x[j+0]))>>24&255,_>>24&255)<<24|oe(f>>16&255,_>>16&255)<<16|oe(f>>8&255,_>>8&255)<<8|oe(255&f,255&_))>>>0};var Lc=L.PredictorAdd0;L.PredictorAdd1=Se,Ye("Predictor2","PredictorAdd2"),Ye("Predictor3","PredictorAdd3"),Ye("Predictor4","PredictorAdd4"),Ye("Predictor5","PredictorAdd5"),Ye("Predictor6","PredictorAdd6"),Ye("Predictor7","PredictorAdd7"),Ye("Predictor8","PredictorAdd8"),Ye("Predictor9","PredictorAdd9"),Ye("Predictor10","PredictorAdd10"),Ye("Predictor11","PredictorAdd11"),Ye("Predictor12","PredictorAdd12"),Ye("Predictor13","PredictorAdd13");var Gl=L.PredictorAdd2;O("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),O("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Pr,Zu=L.ColorIndexInverseTransform,_s=L.MapARGB,Ss=L.VP8LColorIndexInverseTransformAlpha,Qc=L.MapAlpha,Ic=L.VP8LPredictorsAdd=[];Ic.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var Pc,Tc,Oi,Ri,Mi,tl,Hi,rl,Ma,Es,tr,dr,Tr,an,ii,Dc,Vl,eh,Pw,Tw,Dw,zw,Ow,Rw,zc,Mw,Hw,Kw,$w=i(511),Gw=i(2041),Vw=i(225),Ww=i(767),qw=0,sp=Gw,th=Vw,ya=Ww,Ha=$w,rh=0,nh=1,Jw=2,ah=3,sh=4,ip=5,Yw=6,op=7,lp=8,ih=9,Ap=10,m3=[2,3,7],x3=[3,3,11],Xw=[280,256,256,256,40],y3=[0,1,1,1,0],b3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],w3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],v3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],k3=8,cp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],dp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Oc=null,B3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],C3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],j3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],N3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],S3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ki=[],ss=[],oi=[],E3=1,ev=2,$i=[],Ka=[];ni("UpsampleRgbLinePair",Pi,3),ni("UpsampleBgrLinePair",vn,3),ni("UpsampleRgbaLinePair",Vn,4),ni("UpsampleBgraLinePair",Ec,4),ni("UpsampleArgbLinePair",Sc,4),ni("UpsampleRgba4444LinePair",Xo,2),ni("UpsampleRgb565LinePair",Yo,2);var F3=L.UpsampleRgbLinePair,U3=L.UpsampleBgrLinePair,tv=L.UpsampleRgbaLinePair,rv=L.UpsampleBgraLinePair,nv=L.UpsampleArgbLinePair,av=L.UpsampleRgba4444LinePair,L3=L.UpsampleRgb565LinePair,oh=16,lh=1<<oh-1,Rc=-227,up=482,Q3=6,sv=0,I3=i(256),P3=i(256),T3=i(256),D3=i(256),z3=i(up-Rc),O3=i(up-Rc);ai("YuvToRgbRow",Pi,3),ai("YuvToBgrRow",vn,3),ai("YuvToRgbaRow",Vn,4),ai("YuvToBgraRow",Ec,4),ai("YuvToArgbRow",Sc,4),ai("YuvToRgba4444Row",Xo,2),ai("YuvToRgb565Row",Yo,2);var iv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ah=[0,2,8],R3=[8,7,6,4,4,2,2,2,1,1,1,1],M3=1;this.WebPDecodeRGBA=function(f,x,j,_,P){var R=nh,M=new Me,$=new We;M.ba=$,$.S=R,$.width=[$.width],$.height=[$.height];var q=$.width,Z=$.height,pe=new Je;if(pe==null||f==null)var Ue=2;else e(pe!=null),Ue=Zo(f,x,j,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(Ue!=0?q=0:(q!=null&&(q[0]=pe.width[0]),Z!=null&&(Z[0]=pe.height[0]),q=1),q){$.width=$.width[0],$.height=$.height[0],_!=null&&(_[0]=$.width),P!=null&&(P[0]=$.height);e:{if(_=new zl,(P=new Ge).data=f,P.w=x,P.ha=j,P.kd=1,x=[0],e(P!=null),((f=Zo(P.data,P.w,P.ha,null,null,null,x,null,P))==0||f==7)&&x[0]&&(f=4),(x=f)==0){if(e(M!=null),_.data=P.data,_.w=P.w+P.offset,_.ha=P.ha-P.offset,_.put=Ce,_.ac=ge,_.bc=Ke,_.ma=M,P.xa){if((f=mt())==null){M=1;break e}if(function(ee,ve){var _e=[0],Te=[0],Fe=[0];t:for(;;){if(ee==null)return 0;if(ve==null)return ee.a=2,0;if(ee.l=ve,ee.a=0,Ae(ee.m,ve.data,ve.w,ve.ha),!gt(ee.m,_e,Te,Fe)){ee.a=3;break t}if(ee.xb=ev,ve.width=_e[0],ve.height=Te[0],!Qt(_e[0],Te[0],1,ee,null))break t;return 1}return e(ee.a!=0),0}(f,_)){if(_=(x=Ti(_.width,_.height,M.Oa,M.ba))==0){t:{_=f;r:for(;;){if(_==null){_=0;break t}if(e(_.s.yc!=null),e(_.s.Ya!=null),e(0<_.s.Wb),e((j=_.l)!=null),e((P=j.ma)!=null),_.xb!=0){if(_.ca=P.ba,_.tb=P.tb,e(_.ca!=null),!Fc(P.Oa,j,ah)){_.a=2;break r}if(!Fr(_,j.width)||j.da)break r;if((j.da||at(_.ca.S))&&as(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&as()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!H(_.s.vb,_.s.Wa.Xa)){_.a=1;break r}_.xb=0}if(!ie(_,_.V,_.Ba,_.c,_.i,j.o,Qn))break r;P.Dc=_.Ma,_=1;break t}e(_.a!=0),_=0}_=!_}_&&(x=f.a)}else x=f.a}else{if((f=new Kg)==null){M=1;break e}if(f.Fa=P.na,f.P=P.P,f.qc=P.Sa,js(f,_)){if((x=Ti(_.width,_.height,M.Oa,M.ba))==0){if(f.Aa=0,j=M.Oa,e((P=f)!=null),j!=null){if(0<(q=0>(q=j.Md)?0:100<q?255:255*q/100)){for(Z=pe=0;4>Z;++Z)12>(Ue=P.pb[Z]).lc&&(Ue.ia=q*R3[0>Ue.lc?0:Ue.lc]>>3),pe|=Ue.ia;pe&&(alert("todo:VP8InitRandom"),P.ia=1)}P.Ga=j.Id,100<P.Ga?P.Ga=100:0>P.Ga&&(P.Ga=0)}(function(ee,ve){if(ee==null)return 0;if(ve==null)return Vr(ee,2,"NULL VP8Io parameter in VP8Decode().");if(!ee.cb&&!js(ee,ve))return 0;if(e(ee.cb),ve.ac==null||ve.ac(ve)){ve.ob&&(ee.L=0);var _e=Ah[ee.L];if(ee.L==2?(ee.yb=0,ee.zb=0):(ee.yb=ve.v-_e>>4,ee.zb=ve.j-_e>>4,0>ee.yb&&(ee.yb=0),0>ee.zb&&(ee.zb=0)),ee.Va=ve.o+15+_e>>4,ee.Hb=ve.va+15+_e>>4,ee.Hb>ee.za&&(ee.Hb=ee.za),ee.Va>ee.Ub&&(ee.Va=ee.Ub),0<ee.L){var Te=ee.ed;for(_e=0;4>_e;++_e){var Fe;if(ee.Qa.Cb){var De=ee.Qa.Lb[_e];ee.Qa.Fb||(De+=Te.Tb)}else De=Te.Tb;for(Fe=0;1>=Fe;++Fe){var He=ee.gd[_e][Fe],Xe=De;if(Te.Pc&&(Xe+=Te.vd[0],Fe&&(Xe+=Te.od[0])),0<(Xe=0>Xe?0:63<Xe?63:Xe)){var Ve=Xe;0<Te.wb&&(Ve=4<Te.wb?Ve>>2:Ve>>1)>9-Te.wb&&(Ve=9-Te.wb),1>Ve&&(Ve=1),He.dd=Ve,He.tc=2*Xe+Ve,He.ld=40<=Xe?2:15<=Xe?1:0}else He.tc=0;He.La=Fe}}}_e=0}else Vr(ee,6,"Frame setup failed"),_e=ee.a;if(_e=_e==0){if(_e){ee.$c=0,0<ee.Aa||(ee.Ic=M3);t:{_e=ee.Ic,Te=4*(Ve=ee.za);var Ct=32*Ve,pt=Ve+1,Dt=0<ee.L?Ve*(0<ee.Aa?2:1):0,bt=(ee.Aa==2?2:1)*Ve;if((He=Te+832+(Fe=3*(16*_e+Ah[ee.L])/2*Ct)+(De=ee.Fa!=null&&0<ee.Fa.length?ee.Kc.c*ee.Kc.i:0))!=He)_e=0;else{if(He>ee.Vb){if(ee.Vb=0,ee.Ec=i(He),ee.Fc=0,ee.Ec==null){_e=Vr(ee,1,"no memory during frame initialization.");break t}ee.Vb=He}He=ee.Ec,Xe=ee.Fc,ee.Ac=He,ee.Bc=Xe,Xe+=Te,ee.Gd=o(Ct,zu),ee.Hd=0,ee.rb=o(pt+1,xc),ee.sb=1,ee.wa=Dt?o(Dt,za):null,ee.Y=0,ee.D.Nb=0,ee.D.wa=ee.wa,ee.D.Y=ee.Y,0<ee.Aa&&(ee.D.Y+=Ve),e(!0),ee.oc=He,ee.pc=Xe,Xe+=832,ee.ya=o(bt,yc),ee.aa=0,ee.D.ya=ee.ya,ee.D.aa=ee.aa,ee.Aa==2&&(ee.D.aa+=Ve),ee.R=16*Ve,ee.B=8*Ve,Ve=(Ct=Ah[ee.L])*ee.R,Ct=Ct/2*ee.B,ee.sa=He,ee.ta=Xe+Ve,ee.qa=ee.sa,ee.ra=ee.ta+16*_e*ee.R+Ct,ee.Ha=ee.qa,ee.Ia=ee.ra+8*_e*ee.B+Ct,ee.$c=0,Xe+=Fe,ee.mb=De?He:null,ee.nb=De?Xe:null,e(Xe+De<=ee.Fc+ee.Vb),Mu(ee),a(ee.Ac,ee.Bc,0,Te),_e=1}}if(_e){if(ve.ka=0,ve.y=ee.sa,ve.O=ee.ta,ve.f=ee.qa,ve.N=ee.ra,ve.ea=ee.Ha,ve.Vd=ee.Ia,ve.fa=ee.R,ve.Rc=ee.B,ve.F=null,ve.J=0,!qw){for(_e=-255;255>=_e;++_e)$w[255+_e]=0>_e?-_e:_e;for(_e=-1020;1020>=_e;++_e)Gw[1020+_e]=-128>_e?-128:127<_e?127:_e;for(_e=-112;112>=_e;++_e)Vw[112+_e]=-16>_e?-16:15<_e?15:_e;for(_e=-255;510>=_e;++_e)Ww[255+_e]=0>_e?0:255<_e?255:_e;qw=1}Hi=Rl,rl=Gg,Es=Ns,tr=Ku,dr=$u,Ma=$g,Tr=Ju,an=Wo,ii=I,Dc=te,Vl=Yu,eh=B,Pw=he,Tw=je,Dw=Vo,zw=Nc,Ow=Wu,Rw=qu,ss[0]=ep,ss[1]=Vg,ss[2]=Xg,ss[3]=Zg,ss[4]=Js,ss[5]=tp,ss[6]=Ys,ss[7]=rp,ss[8]=vc,ss[9]=Ml,Ki[0]=Jg,Ki[1]=qg,Ki[2]=bc,Ki[3]=Gu,Ki[4]=$o,Ki[5]=wc,Ki[6]=Yg,oi[0]=ap,oi[1]=Wg,oi[2]=Go,oi[3]=np,oi[4]=Bc,oi[5]=kc,oi[6]=Vu,_e=1}else _e=0}_e&&(_e=function($t,sn){for($t.M=0;$t.M<$t.Va;++$t.M){var zt,wt=$t.Jc[$t.M&$t.Xb],st=$t.m,Dr=$t;for(zt=0;zt<Dr.za;++zt){var It=st,Vt=Dr,yr=Vt.Ac,kn=Vt.Bc+4*zt,Wn=Vt.zc,Ur=Vt.ya[Vt.aa+zt];if(Vt.Qa.Bb?Ur.$b=ae(It,Vt.Pa.jb[0])?2+ae(It,Vt.Pa.jb[2]):ae(It,Vt.Pa.jb[1]):Ur.$b=0,Vt.kc&&(Ur.Ad=ae(It,Vt.Bd)),Ur.Za=!ae(It,145)+0,Ur.Za){var In=Ur.Ob,qn=0;for(Vt=0;4>Vt;++Vt){var on,Yt=Wn[0+Vt];for(on=0;4>on;++on){Yt=N3[yr[kn+on]][Yt];for(var ar=Zw[ae(It,Yt[0])];0<ar;)ar=Zw[2*ar+ae(It,Yt[ar])];Yt=-ar,yr[kn+on]=Yt}n(In,qn,yr,kn,4),qn+=4,Wn[0+Vt]=Yt}}else Yt=ae(It,156)?ae(It,128)?1:3:ae(It,163)?2:0,Ur.Ob[0]=Yt,a(yr,kn,Yt,4),a(Wn,0,Yt,4);Ur.Dd=ae(It,142)?ae(It,114)?ae(It,183)?1:3:2:0}if(Dr.m.Ka)return Vr($t,7,"Premature end-of-partition0 encountered.");for(;$t.ja<$t.za;++$t.ja){if(Dr=wt,It=(st=$t).rb[st.sb-1],yr=st.rb[st.sb+st.ja],zt=st.ya[st.aa+st.ja],kn=st.kc?zt.Ad:0)It.la=yr.la=0,zt.Za||(It.Na=yr.Na=0),zt.Hc=0,zt.Gc=0,zt.ia=0;else{var Lr,sr;if(It=yr,yr=Dr,kn=st.Pa.Xc,Wn=st.ya[st.aa+st.ja],Ur=st.pb[Wn.$b],Vt=Wn.ad,In=0,qn=st.rb[st.sb-1],Yt=on=0,a(Vt,In,0,384),Wn.Za)var Bn=0,is=kn[3];else{ar=i(16);var zr=It.Na+qn.Na;if(zr=Oc(yr,kn[1],zr,Ur.Eb,0,ar,0),It.Na=qn.Na=(0<zr)+0,1<zr)Hi(ar,0,Vt,In);else{var sa=ar[0]+3>>3;for(ar=0;256>ar;ar+=16)Vt[In+ar]=sa}Bn=1,is=kn[0]}var ur=15&It.la,ln=15&qn.la;for(ar=0;4>ar;++ar){var ba=1&ln;for(sa=sr=0;4>sa;++sa)ur=ur>>1|(ba=(zr=Oc(yr,is,zr=ba+(1&ur),Ur.Sc,Bn,Vt,In))>Bn)<<7,sr=sr<<2|(3<zr?3:1<zr?2:Vt[In+0]!=0),In+=16;ur>>=4,ln=ln>>1|ba<<7,on=(on<<8|sr)>>>0}for(is=ur,Bn=ln>>4,Lr=0;4>Lr;Lr+=2){for(sr=0,ur=It.la>>4+Lr,ln=qn.la>>4+Lr,ar=0;2>ar;++ar){for(ba=1&ln,sa=0;2>sa;++sa)zr=ba+(1&ur),ur=ur>>1|(ba=0<(zr=Oc(yr,kn[2],zr,Ur.Qc,0,Vt,In)))<<3,sr=sr<<2|(3<zr?3:1<zr?2:Vt[In+0]!=0),In+=16;ur>>=2,ln=ln>>1|ba<<5}Yt|=sr<<4*Lr,is|=ur<<4<<Lr,Bn|=(240&ln)<<Lr}It.la=is,qn.la=Bn,Wn.Hc=on,Wn.Gc=Yt,Wn.ia=43690&Yt?0:Ur.ia,kn=!(on|Yt)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[zt.$b][zt.Za],st.wa[st.Y+st.ja].La|=!kn),Dr.Ka)return Vr($t,7,"Premature end-of-file encountered.")}if(Mu($t),st=sn,Dr=1,zt=(wt=$t).D,It=0<wt.L&&wt.M>=wt.zb&&wt.M<=wt.Va,wt.Aa==0)t:{if(zt.M=wt.M,zt.uc=It,Ra(wt,zt),Dr=1,zt=(sr=wt.D).Nb,It=(Yt=Ah[wt.L])*wt.R,yr=Yt/2*wt.B,ar=16*zt*wt.R,sa=8*zt*wt.B,kn=wt.sa,Wn=wt.ta-It+ar,Ur=wt.qa,Vt=wt.ra-yr+sa,In=wt.Ha,qn=wt.Ia-yr+sa,ln=(ur=sr.M)==0,on=ur>=wt.Va-1,wt.Aa==2&&Ra(wt,sr),sr.uc)for(ba=(zr=wt).D.M,e(zr.D.uc),sr=zr.yb;sr<zr.Hb;++sr){Bn=sr,is=ba;var Jn=(wa=(Cn=zr).D).Nb;Lr=Cn.R;var wa=wa.wa[wa.Y+Bn],va=Cn.sa,ia=Cn.ta+16*Jn*Lr+16*Bn,ka=wa.dd,gr=wa.tc;if(gr!=0)if(e(3<=gr),Cn.L==1)0<Bn&&zw(va,ia,Lr,gr+4),wa.La&&Rw(va,ia,Lr,gr),0<is&&Dw(va,ia,Lr,gr+4),wa.La&&Ow(va,ia,Lr,gr);else{var Ba=Cn.B,os=Cn.qa,nl=Cn.ra+8*Jn*Ba+8*Bn,li=Cn.Ha,Cn=Cn.Ia+8*Jn*Ba+8*Bn;Jn=wa.ld,0<Bn&&(an(va,ia,Lr,gr+4,ka,Jn),Dc(os,nl,li,Cn,Ba,gr+4,ka,Jn)),wa.La&&(eh(va,ia,Lr,gr,ka,Jn),Tw(os,nl,li,Cn,Ba,gr,ka,Jn)),0<is&&(Tr(va,ia,Lr,gr+4,ka,Jn),ii(os,nl,li,Cn,Ba,gr+4,ka,Jn)),wa.La&&(Vl(va,ia,Lr,gr,ka,Jn),Pw(os,nl,li,Cn,Ba,gr,ka,Jn))}}if(wt.ia&&alert("todo:DitherRow"),st.put!=null){if(sr=16*ur,ur=16*(ur+1),ln?(st.y=wt.sa,st.O=wt.ta+ar,st.f=wt.qa,st.N=wt.ra+sa,st.ea=wt.Ha,st.W=wt.Ia+sa):(sr-=Yt,st.y=kn,st.O=Wn,st.f=Ur,st.N=Vt,st.ea=In,st.W=qn),on||(ur-=Yt),ur>st.o&&(ur=st.o),st.F=null,st.J=null,wt.Fa!=null&&0<wt.Fa.length&&sr<ur&&(st.J=fr(wt,st,sr,ur-sr),st.F=wt.mb,st.F==null&&st.F.length==0)){Dr=Vr(wt,3,"Could not decode alpha data.");break t}sr<st.j&&(Yt=st.j-sr,sr=st.j,e(!(1&Yt)),st.O+=wt.R*Yt,st.N+=wt.B*(Yt>>1),st.W+=wt.B*(Yt>>1),st.F!=null&&(st.J+=st.width*Yt)),sr<ur&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=sr-st.j,st.U=st.va-st.v,st.T=ur-sr,Dr=st.put(st))}zt+1!=wt.Ic||on||(n(wt.sa,wt.ta-It,kn,Wn+16*wt.R,It),n(wt.qa,wt.ra-yr,Ur,Vt+8*wt.B,yr),n(wt.Ha,wt.Ia-yr,In,qn+8*wt.B,yr))}if(!Dr)return Vr($t,6,"Output aborted.")}return 1}(ee,ve)),ve.bc!=null&&ve.bc(ve),_e&=1}return _e?(ee.cb=0,_e):0})(f,_)||(x=f.a)}}else x=f.a}x==0&&M.Oa!=null&&M.Oa.fd&&(x=Uc(M.ba))}M=x}R=M!=0?null:11>R?$.f.RGBA.eb:$.f.kb.y}else R=null;return R};var ov=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(L,V){for(var F="",D=0;D<4;D++)F+=String.fromCharCode(L[V++]);return F}function d(L,V){return L[V+0]|L[V+1]<<8}function h(L,V){return(L[V+0]|L[V+1]<<8|L[V+2]<<16)>>>0}function p(L,V){return(L[V+0]|L[V+1]<<8|L[V+2]<<16|L[V+3]<<24)>>>0}new A;var u=[0],y=[0],b=[],v=new A,g=t,m=function(L,V){var F={},D=0,T=!1,G=0,ne=0;if(F.frames=[],!function(E,z){for(var K=0;K<4;K++)if(E[z+K]!="RIFF".charCodeAt(K))return!0;return!1}(L,V)){for(p(L,V+=4),V+=8;V<L.length;){var ce=c(L,V),ue=p(L,V+=4);V+=4;var Y=ue+(1&ue);switch(ce){case"VP8 ":case"VP8L":F.frames[D]===void 0&&(F.frames[D]={}),(we=F.frames[D]).src_off=T?ne:V-8,we.src_size=G+ue+8,D++,T&&(T=!1,G=0,ne=0);break;case"VP8X":(we=F.header={}).feature_flags=L[V];var Ae=V+4;we.canvas_width=1+h(L,Ae),Ae+=3,we.canvas_height=1+h(L,Ae),Ae+=3;break;case"ALPH":T=!0,G=Y+8,ne=V-8;break;case"ANIM":(we=F.header).bgcolor=p(L,V),Ae=V+4,we.loop_count=d(L,Ae),Ae+=2;break;case"ANMF":var fe,we;(we=F.frames[D]={}).offset_x=2*h(L,V),V+=3,we.offset_y=2*h(L,V),V+=3,we.width=1+h(L,V),V+=3,we.height=1+h(L,V),V+=3,we.duration=h(L,V),V+=3,fe=L[V++],we.dispose=1&fe,we.blend=fe>>1&1}ce!="ANMF"&&(V+=Y)}return F}}(g,0);m.response=g,m.rgbaoutput=!0,m.dataurl=!1;var w=m.header?m.header:null,k=m.frames?m.frames:null;if(w){w.loop_counter=w.loop_count,u=[w.canvas_height],y=[w.canvas_width];for(var N=0;N<k.length&&k[N].blend!=0;N++);}var S=k[0],U=v.WebPDecodeRGBA(g,S.src_off,S.src_size,y,u);S.rgba=U,S.imgwidth=y[0],S.imgheight=u[0];for(var Q=0;Q<y[0]*u[0]*4;Q++)b[Q]=U[Q];return this.width=y,this.height=u,this.data=b,this}(function(t){var e,r,n,a,i,o,l,A,c,d=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new A,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,A=this.internal.Matrix,c=new d}]);var h=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=E;Object.defineProperty(this,"pdf",{get:function(){return z}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(H){K=!!H}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(H){W=!!H}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(H){isNaN(H)||(J=H)}});var re=0;Object.defineProperty(this,"posY",{get:function(){return re},set:function(H){isNaN(H)||(re=H)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(H){var $e;typeof H=="number"?$e=[H,H,H,H]:(($e=new Array(4))[0]=H[0],$e[1]=H.length>=2?H[1]:$e[0],$e[2]=H.length>=3?H[2]:$e[0],$e[3]=H.length>=4?H[3]:$e[1]),c.margin=$e}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(H){be=H}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(H){me=H}});var ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ae},set:function(H){ae=H}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(H){H instanceof d&&(c=H)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(H){c.path=H}});var X=[];Object.defineProperty(this,"ctxStack",{get:function(){return X},set:function(H){X=H}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(H){var $e;$e=p(H),this.ctx.fillStyle=$e.style,this.ctx.isFillTransparent=$e.a===0,this.ctx.fillOpacity=$e.a,this.pdf.setFillColor($e.r,$e.g,$e.b,{a:$e.a}),this.pdf.setTextColor($e.r,$e.g,$e.b,{a:$e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(H){var $e=p(H);this.ctx.strokeStyle=$e.style,this.ctx.isStrokeTransparent=$e.a===0,this.ctx.strokeOpacity=$e.a,$e.a===0?this.pdf.setDrawColor(255,255,255):($e.a,this.pdf.setDrawColor($e.r,$e.g,$e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(H){["butt","round","square"].indexOf(H)!==-1&&(this.ctx.lineCap=H,this.pdf.setLineCap(H))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(H){isNaN(H)||(this.ctx.lineWidth=H,this.pdf.setLineWidth(H))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(H){["bevel","round","miter"].indexOf(H)!==-1&&(this.ctx.lineJoin=H,this.pdf.setLineJoin(H))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(H){isNaN(H)||(this.ctx.miterLimit=H,this.pdf.setMiterLimit(H))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(H){this.ctx.textBaseline=H}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(H){["right","end","center","left","start"].indexOf(H)!==-1&&(this.ctx.textAlign=H)}});var ye=null,xe=null,Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(H){ye=null,xe=null,Oe=H}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(H){var $e;if(this.ctx.font=H,($e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(H))!==null){var lt=$e[1];$e[2];var nt=$e[3],Ne=$e[4];$e[5];var qe=$e[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(Ye==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var ot=function(O){var Ee,Pe,Le=[],Re=O.trim();if(Re==="")return km;if(Re in xk)return[xk[Re]];for(;Re!=="";){switch(Pe=null,Ee=(Re=bk(Re)).charAt(0)){case'"':case"'":Pe=a7(Re.substring(1),Ee);break;default:Pe=s7(Re)}if(Pe===null||(Le.push(Pe[0]),(Re=bk(Pe[1]))!==""&&Re.charAt(0)!==","))return km;Re=Re.replace(/^,/,"")}return Le}(qe);if(this.fontFaces){var it=function(O,Ee){var Pe=O.getFontList(),Le=JSON.stringify(Pe);if(ye===null||xe!==Le){var Re=function(ht){var rt=[];return Object.keys(ht).forEach(function(ut){ht[ut].forEach(function(at){var ct=null;switch(at){case"bold":ct={family:ut,weight:"bold"};break;case"italic":ct={family:ut,style:"italic"};break;case"bolditalic":ct={family:ut,weight:"bold",style:"italic"};break;case"":case"normal":ct={family:ut}}ct!==null&&(ct.ref={name:ut,style:at},rt.push(ct))})}),rt}(Pe);ye=function(ht){for(var rt={},ut=0;ut<ht.length;++ut){var at=vm(ht[ut]),ct=at.family,de=at.stretch,We=at.style,Je=at.weight;rt[ct]=rt[ct]||{},rt[ct][de]=rt[ct][de]||{},rt[ct][de][We]=rt[ct][de][We]||{},rt[ct][de][We][Je]=at}return rt}(Re.concat(Ee)),xe=Le}return ye}(this.pdf,this.fontFaces),ke=ot.map(function(O){return{family:O,stretch:"normal",weight:nt,style:lt}}),oe=function(O,Ee,Pe){for(var Le=(Pe=Pe||{}).defaultFontFamily||"times",Re=Object.assign({},n7,Pe.genericFontFamilies||{}),ht=null,rt=null,ut=0;ut<Ee.length;++ut)if(Re[(ht=vm(Ee[ut])).family]&&(ht.family=Re[ht.family]),O.hasOwnProperty(ht.family)){rt=O[ht.family];break}if(!(rt=rt||O[Le]))throw new Error("Could not find a font-family for the rule '"+yk(ht)+"' and default family '"+Le+"'.");if(rt=function(at,ct){if(ct[at])return ct[at];var de=xy[at],We=de<=xy.normal?-1:1,Je=mk(ct,SN,de,We);if(!Je)throw new Error("Could not find a matching font-stretch value for "+at);return Je}(ht.stretch,rt),rt=function(at,ct){if(ct[at])return ct[at];for(var de=_N[at],We=0;We<de.length;++We)if(ct[de[We]])return ct[de[We]];throw new Error("Could not find a matching font-style for "+at)}(ht.style,rt),!(rt=function(at,ct){if(ct[at])return ct[at];if(at===400&&ct[500])return ct[500];if(at===500&&ct[400])return ct[400];var de=r7[at],We=mk(ct,EN,de,at<400?-1:1);if(!We)throw new Error("Could not find a matching font-weight for value "+at);return We}(ht.weight,rt)))throw new Error("Failed to resolve a font for the rule '"+yk(ht)+"'.");return rt}(it,ke);this.pdf.setFont(oe.ref.name,oe.ref.style)}else{var Be="";(nt==="bold"||parseInt(nt,10)>=700||lt==="bold")&&(Be="bold"),lt==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var Se="",Qe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},se=0;se<ot.length;se++){if(this.pdf.internal.getFont(ot[se],Be,{noFallback:!0,disableWarning:!0})!==void 0){Se=ot[se];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(ot[se],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Se=ot[se],Be="bold";else if(this.pdf.internal.getFont(ot[se],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Se=ot[se],Be="normal";break}}if(Se===""){for(var ze=0;ze<ot.length;ze++)if(Qe[ot[ze]]){Se=Qe[ot[ze]];break}}Se=Se===""?"Times":Se,this.pdf.setFont(Se,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(H){this.ctx.globalCompositeOperation=H}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(H){this.ctx.globalAlpha=H}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(H){this.ctx.lineDashOffset=H,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(H){this.ctx.lineDash=H,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(H){this.ctx.ignoreClearRect=!!H}})};h.prototype.setLineDash=function(E){this.lineDash=E},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(E,z){if(isNaN(E)||isNaN(z))throw hr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(E,z));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(E,z)},h.prototype.closePath=function(){var E=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&or(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){E=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},h.prototype.lineTo=function(E,z){if(isNaN(E)||isNaN(z))throw hr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(E,z));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(E,z,K,W){if(isNaN(K)||isNaN(W)||isNaN(E)||isNaN(z))throw hr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new o(K,W)),re=this.ctx.transform.applyToPoint(new o(E,z));this.path.push({type:"qct",x1:re.x,y1:re.y,x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},h.prototype.bezierCurveTo=function(E,z,K,W,J,re){if(isNaN(J)||isNaN(re)||isNaN(E)||isNaN(z)||isNaN(K)||isNaN(W))throw hr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new o(J,re)),me=this.ctx.transform.applyToPoint(new o(E,z)),ae=this.ctx.transform.applyToPoint(new o(K,W));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:ae.x,y2:ae.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},h.prototype.arc=function(E,z,K,W,J,re){if(isNaN(E)||isNaN(z)||isNaN(K)||isNaN(W)||isNaN(J))throw hr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(re=!!re,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new o(E,z));E=be.x,z=be.y;var me=this.ctx.transform.applyToPoint(new o(0,K)),ae=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(me.x-ae.x,2)+Math.pow(me.y-ae.y,2))}Math.abs(J-W)>=2*Math.PI&&(W=0,J=2*Math.PI),this.path.push({type:"arc",x:E,y:z,radius:K,startAngle:W,endAngle:J,counterclockwise:re})},h.prototype.arcTo=function(E,z,K,W,J){throw new Error("arcTo not implemented.")},h.prototype.rect=function(E,z,K,W){if(isNaN(E)||isNaN(z)||isNaN(K)||isNaN(W))throw hr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,z),this.lineTo(E+K,z),this.lineTo(E+K,z+W),this.lineTo(E,z+W),this.lineTo(E,z),this.lineTo(E+K,z),this.lineTo(E,z)},h.prototype.fillRect=function(E,z,K,W){if(isNaN(E)||isNaN(z)||isNaN(K)||isNaN(W))throw hr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,z,K,W),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},h.prototype.strokeRect=function(E,z,K,W){if(isNaN(E)||isNaN(z)||isNaN(K)||isNaN(W))throw hr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(E,z,K,W),this.stroke())},h.prototype.clearRect=function(E,z,K,W){if(isNaN(E)||isNaN(z)||isNaN(K)||isNaN(W))throw hr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,z,K,W))},h.prototype.save=function(E){E=typeof E!="boolean"||E;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},h.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(z),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(E){var z,K,W,J;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))z=0,K=0,W=0,J=0;else{var re=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(re!==null)z=parseInt(re[1]),K=parseInt(re[2]),W=parseInt(re[3]),J=1;else if((re=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)z=parseInt(re[1]),K=parseInt(re[2]),W=parseInt(re[3]),J=parseFloat(re[4]);else{if(J=1,typeof E=="string"&&E.charAt(0)!=="#"){var be=new wN(E);E=be.ok?be.toHex():"#000000"}E.length===4?(z=E.substring(1,2),z+=z,K=E.substring(2,3),K+=K,W=E.substring(3,4),W+=W):(z=E.substring(1,3),K=E.substring(3,5),W=E.substring(5,7)),z=parseInt(z,16),K=parseInt(K,16),W=parseInt(W,16)}}return{r:z,g:K,b:W,a:J,style:E}},u=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(E,z,K,W){if(isNaN(z)||isNaN(K)||typeof E!="string")throw hr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!u.call(this)){var J=Y(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;D.call(this,{text:E,x:z,y:K,scale:re,angle:J,align:this.textAlign,maxWidth:W})}},h.prototype.strokeText=function(E,z,K,W){if(isNaN(z)||isNaN(K)||typeof E!="string")throw hr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){W=isNaN(W)?void 0:W;var J=Y(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;D.call(this,{text:E,x:z,y:K,scale:re,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:W})}},h.prototype.measureText=function(E){if(typeof E!="string")throw hr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,K=this.pdf.internal.scaleFactor,W=z.internal.getFontSize(),J=z.getStringUnitWidth(E)*W/z.internal.scaleFactor;return new function(re){var be=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this}({width:J*=Math.round(96*K/72*1e4)/1e4})},h.prototype.scale=function(E,z){if(isNaN(E)||isNaN(z))throw hr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new A(E,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.rotate=function(E){if(isNaN(E))throw hr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new A(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.translate=function(E,z){if(isNaN(E)||isNaN(z))throw hr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new A(1,0,0,1,E,z);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.transform=function(E,z,K,W,J,re){if(isNaN(E)||isNaN(z)||isNaN(K)||isNaN(W)||isNaN(J)||isNaN(re))throw hr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new A(E,z,K,W,J,re);this.ctx.transform=this.ctx.transform.multiply(be)},h.prototype.setTransform=function(E,z,K,W,J,re){E=isNaN(E)?1:E,z=isNaN(z)?0:z,K=isNaN(K)?0:K,W=isNaN(W)?1:W,J=isNaN(J)?0:J,re=isNaN(re)?0:re,this.ctx.transform=new A(E,z,K,W,J,re)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(E,z,K,W,J,re,be,me,ae){var X=this.pdf.getImageProperties(E),ye=1,xe=1,Oe=1,H=1;W!==void 0&&me!==void 0&&(Oe=me/W,H=ae/J,ye=X.width/W*me/W,xe=X.height/J*ae/J),re===void 0&&(re=z,be=K,z=0,K=0),W!==void 0&&me===void 0&&(me=W,ae=J),W===void 0&&me===void 0&&(me=X.width,ae=X.height);var $e=this.ctx.transform.decompose(),lt=Y($e.rotate.shx),nt=new A,Ne=(nt=(nt=(nt=nt.multiply($e.translate)).multiply($e.skew)).multiply($e.scale)).applyToRectangle(new l(re-z*Oe,be-K*H,W*ye,J*xe));if(this.autoPaging){for(var qe,Ye=v.call(this,Ne),ot=[],it=0;it<Ye.length;it+=1)ot.indexOf(Ye[it])===-1&&ot.push(Ye[it]);w(ot);for(var ke=ot[0],oe=ot[ot.length-1],Be=ke;Be<oe+1;Be++){this.pdf.setPage(Be);var Se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=Be===1?this.posY+this.margin[0]:this.margin[0],se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],O=Be===1?0:se+(Be-2)*ze;if(this.ctx.clip_path.length!==0){var Ee=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(qe,this.posX+this.margin[3],-O+Qe+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Ee}var Pe=JSON.parse(JSON.stringify(Ne));Pe=m([Pe],this.posX+this.margin[3],-O+Qe+this.ctx.prevPageLastElemOffset)[0];var Le=(Be>ke||Be<oe)&&b.call(this);Le&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Se,ze,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,lt),Le&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(E,"JPEG",Ne.x,Ne.y,Ne.w,Ne.h,null,null,lt)};var v=function(E,z,K){var W=[];z=z||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":W.push(Math.floor((E.y+J)/K)+1);break;case"arc":W.push(Math.floor((E.y+J-E.radius)/K)+1),W.push(Math.floor((E.y+J+E.radius)/K)+1);break;case"qct":var re=Ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);W.push(Math.floor((re.y+J)/K)+1),W.push(Math.floor((re.y+re.h+J)/K)+1);break;case"bct":var be=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);W.push(Math.floor((be.y+J)/K)+1),W.push(Math.floor((be.y+be.h+J)/K)+1);break;case"rect":W.push(Math.floor((E.y+J)/K)+1),W.push(Math.floor((E.y+E.h+J)/K)+1)}for(var me=0;me<W.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<W[me];)g.call(this);return W},g=function(){var E=this.fillStyle,z=this.strokeStyle,K=this.font,W=this.lineCap,J=this.lineWidth,re=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=z,this.font=K,this.lineCap=W,this.lineWidth=J,this.lineJoin=re},m=function(E,z,K){for(var W=0;W<E.length;W++)switch(E[W].type){case"bct":E[W].x2+=z,E[W].y2+=K;case"qct":E[W].x1+=z,E[W].y1+=K;default:E[W].x+=z,E[W].y+=K}return E},w=function(E){return E.sort(function(z,K){return z-K})},k=function(E,z){var K=this.fillStyle,W=this.strokeStyle,J=this.lineCap,re=this.lineWidth,be=Math.abs(re*this.ctx.transform.scaleX),me=this.lineJoin;if(this.autoPaging){for(var ae,X,ye=JSON.parse(JSON.stringify(this.path)),xe=JSON.parse(JSON.stringify(this.path)),Oe=[],H=0;H<xe.length;H++)if(xe[H].x!==void 0)for(var $e=v.call(this,xe[H]),lt=0;lt<$e.length;lt+=1)Oe.indexOf($e[lt])===-1&&Oe.push($e[lt]);for(var nt=0;nt<Oe.length;nt++)for(;this.pdf.internal.getNumberOfPages()<Oe[nt];)g.call(this);w(Oe);for(var Ne=Oe[0],qe=Oe[Oe.length-1],Ye=Ne;Ye<qe+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=K,this.strokeStyle=W,this.lineCap=J,this.lineWidth=be,this.lineJoin=me;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Ye===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=Ye===1?0:ke+(Ye-2)*oe;if(this.ctx.clip_path.length!==0){var Se=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(ae,this.posX+this.margin[3],-Be+it+this.ctx.prevPageLastElemOffset),N.call(this,E,!0),this.path=Se}if(X=JSON.parse(JSON.stringify(ye)),this.path=m(X,this.posX+this.margin[3],-Be+it+this.ctx.prevPageLastElemOffset),z===!1||Ye===0){var Qe=(Ye>Ne||Ye<qe)&&b.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,oe,null).clip().discardPath()),N.call(this,E,z),Qe&&this.pdf.restoreGraphicsState()}this.lineWidth=re}this.path=ye}else this.lineWidth=be,N.call(this,E,z),this.lineWidth=re},N=function(E,z){if((E!=="stroke"||z||!y.call(this))&&(E==="stroke"||z||!u.call(this))){for(var K,W,J=[],re=this.path,be=0;be<re.length;be++){var me=re[be];switch(me.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:me,deltas:[],abs:[]});break;case"lt":var ae=J.length;if(re[be-1]&&!isNaN(re[be-1].x)&&(K=[me.x-re[be-1].x,me.y-re[be-1].y],ae>0)){for(;ae>=0;ae--)if(J[ae-1].close!==!0&&J[ae-1].begin!==!0){J[ae-1].deltas.push(K),J[ae-1].abs.push(me);break}}break;case"bct":K=[me.x1-re[be-1].x,me.y1-re[be-1].y,me.x2-re[be-1].x,me.y2-re[be-1].y,me.x-re[be-1].x,me.y-re[be-1].y],J[J.length-1].deltas.push(K);break;case"qct":var X=re[be-1].x+2/3*(me.x1-re[be-1].x),ye=re[be-1].y+2/3*(me.y1-re[be-1].y),xe=me.x+2/3*(me.x1-me.x),Oe=me.y+2/3*(me.y1-me.y),H=me.x,$e=me.y;K=[X-re[be-1].x,ye-re[be-1].y,xe-re[be-1].x,Oe-re[be-1].y,H-re[be-1].x,$e-re[be-1].y],J[J.length-1].deltas.push(K);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(me)}}W=z?null:E==="stroke"?"stroke":"fill";for(var lt=!1,nt=0;nt<J.length;nt++)if(J[nt].arc)for(var Ne=J[nt].abs,qe=0;qe<Ne.length;qe++){var Ye=Ne[qe];Ye.type==="arc"?Q.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,z,!lt):T.call(this,Ye.x,Ye.y),lt=!0}else if(J[nt].close===!0)this.pdf.internal.out("h"),lt=!1;else if(J[nt].begin!==!0){var ot=J[nt].start.x,it=J[nt].start.y;G.call(this,J[nt].deltas,ot,it),lt=!0}W&&L.call(this,W),z&&V.call(this)}},S=function(E){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-K;case"top":return E+z-K;case"hanging":return E+z-2*K;case"middle":return E+z/2-K;default:return E}},U=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(z,K){this.colorStops.push([z,K])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Q=function(E,z,K,W,J,re,be,me,ae){for(var X=ce.call(this,K,W,J,re),ye=0;ye<X.length;ye++){var xe=X[ye];ye===0&&(ae?F.call(this,xe.x1+E,xe.y1+z):T.call(this,xe.x1+E,xe.y1+z)),ne.call(this,E,z,xe.x2,xe.y2,xe.x3,xe.y3,xe.x4,xe.y4)}me?V.call(this):L.call(this,be)},L=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(E,z){this.pdf.internal.out(r(E)+" "+n(z)+" m")},D=function(E){var z;switch(E.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var K,W,J,re=this.pdf.getTextDimensions(E.text),be=S.call(this,E.y),me=U.call(this,be)-re.h,ae=this.ctx.transform.applyToPoint(new o(E.x,be));if(this.autoPaging){var X=this.ctx.transform.decompose(),ye=new A;ye=(ye=(ye=ye.multiply(X.translate)).multiply(X.skew)).multiply(X.scale);for(var xe=this.ctx.transform.applyToRectangle(new l(E.x,be,re.w,re.h)),Oe=ye.applyToRectangle(new l(E.x,me,re.w,re.h)),H=v.call(this,Oe),$e=[],lt=0;lt<H.length;lt+=1)$e.indexOf(H[lt])===-1&&$e.push(H[lt]);w($e);for(var nt=$e[0],Ne=$e[$e.length-1],qe=nt;qe<Ne+1;qe++){this.pdf.setPage(qe);var Ye=qe===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[2],ke=it-this.margin[0],oe=this.pdf.internal.pageSize.width-this.margin[1],Be=oe-this.margin[3],Se=qe===1?0:ot+(qe-2)*ke;if(this.ctx.clip_path.length!==0){var Qe=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(K,this.posX+this.margin[3],-1*Se+Ye),N.call(this,"fill",!0),this.path=Qe}var se=m([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Se+Ye+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(W=this.pdf.internal.getFontSize(),this.pdf.setFontSize(W*E.scale),J=this.lineWidth,this.lineWidth=J*E.scale);var ze=this.autoPaging!=="text";if(ze||se.y+se.h<=it){if(ze||se.y>=Ye&&se.x<=oe){var O=ze?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||oe-se.x)[0],Ee=m([JSON.parse(JSON.stringify(xe))],this.posX+this.margin[3],-Se+Ye+this.ctx.prevPageLastElemOffset)[0],Pe=ze&&(qe>nt||qe<Ne)&&b.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,ke,null).clip().discardPath()),this.pdf.text(O,Ee.x,Ee.y,{angle:E.angle,align:z,renderingMode:E.renderingMode}),Pe&&this.pdf.restoreGraphicsState()}}else se.y<it&&(this.ctx.prevPageLastElemOffset+=it-se.y);E.scale>=.01&&(this.pdf.setFontSize(W),this.lineWidth=J)}}else E.scale>=.01&&(W=this.pdf.internal.getFontSize(),this.pdf.setFontSize(W*E.scale),J=this.lineWidth,this.lineWidth=J*E.scale),this.pdf.text(E.text,ae.x+this.posX,ae.y+this.posY,{angle:E.angle,align:z,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(W),this.lineWidth=J)},T=function(E,z,K,W){K=K||0,W=W||0,this.pdf.internal.out(r(E+K)+" "+n(z+W)+" l")},G=function(E,z,K){return this.pdf.lines(E,z,K,null,null)},ne=function(E,z,K,W,J,re,be,me){this.pdf.internal.out([e(a(K+E)),e(i(W+z)),e(a(J+E)),e(i(re+z)),e(a(be+E)),e(i(me+z)),"c"].join(" "))},ce=function(E,z,K,W){for(var J=2*Math.PI,re=Math.PI/2;z>K;)z-=J;var be=Math.abs(K-z);be<J&&W&&(be=J-be);for(var me=[],ae=W?-1:1,X=z;be>1e-5;){var ye=X+ae*Math.min(be,re);me.push(ue.call(this,E,X,ye)),be-=Math.abs(ye-X),X=ye}return me},ue=function(E,z,K){var W=(K-z)/2,J=E*Math.cos(W),re=E*Math.sin(W),be=J,me=-re,ae=be*be+me*me,X=ae+be*J+me*re,ye=4/3*(Math.sqrt(2*ae*X)-X)/(be*re-me*J),xe=be-ye*me,Oe=me+ye*be,H=xe,$e=-Oe,lt=W+z,nt=Math.cos(lt),Ne=Math.sin(lt);return{x1:E*Math.cos(z),y1:E*Math.sin(z),x2:xe*nt-Oe*Ne,y2:xe*Ne+Oe*nt,x3:H*nt-$e*Ne,y3:H*Ne+$e*nt,x4:E*Math.cos(K),y4:E*Math.sin(K)}},Y=function(E){return 180*E/Math.PI},Ae=function(E,z,K,W,J,re){var be=E+.5*(K-E),me=z+.5*(W-z),ae=J+.5*(K-J),X=re+.5*(W-re),ye=Math.min(E,J,be,ae),xe=Math.max(E,J,be,ae),Oe=Math.min(z,re,me,X),H=Math.max(z,re,me,X);return new l(ye,Oe,xe-ye,H-Oe)},fe=function(E,z,K,W,J,re,be,me){var ae,X,ye,xe,Oe,H,$e,lt,nt,Ne,qe,Ye,ot,it,ke=K-E,oe=W-z,Be=J-K,Se=re-W,Qe=be-J,se=me-re;for(X=0;X<41;X++)nt=($e=(ye=E+(ae=X/40)*ke)+ae*((Oe=K+ae*Be)-ye))+ae*(Oe+ae*(J+ae*Qe-Oe)-$e),Ne=(lt=(xe=z+ae*oe)+ae*((H=W+ae*Se)-xe))+ae*(H+ae*(re+ae*se-H)-lt),X==0?(qe=nt,Ye=Ne,ot=nt,it=Ne):(qe=Math.min(qe,nt),Ye=Math.min(Ye,Ne),ot=Math.max(ot,nt),it=Math.max(it,Ne));return new l(Math.round(qe),Math.round(Ye),Math.round(ot-qe),Math.round(it-Ye))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,z,K=(E=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:z}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(vt.API),function(t){var e=function(o){var l,A,c,d,h,p,u,y,b,v;for(A=[],c=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>c;c+=4)(h=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(p=(h=((h=((h=((h=(h-(v=h%85))/85)-(b=h%85))/85)-(y=h%85))/85)-(u=h%85))/85)%85,A.push(p+33,u+33,y+33,b+33,v+33)):A.push(122);return function(g,m){for(var w=m;w>0;w--)g.pop()}(A,l.length),String.fromCharCode.apply(String,A)+"~>"},r=function(o){var l,A,c,d,h,p=String,u="length",y=255,b="charCodeAt",v="slice",g="replace";for(o[v](-2),o=o[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,h=(o+=l="uuuuu"[v](o[u]%5||5))[u];h>d;d+=5)A=52200625*(o[b](d)-33)+614125*(o[b](d+1)-33)+7225*(o[b](d+2)-33)+85*(o[b](d+3)-33)+(o[b](d+4)-33),c.push(y&A>>24,y&A>>16,y&A>>8,y&A);return function(m,w){for(var k=w;k>0;k--)m.pop()}(c,l[u]),p.fromCharCode.apply(p,c)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var A="",c=0;c<o.length;c+=2)A+=String.fromCharCode("0x"+(o[c]+o[c+1]));return A},i=function(o){for(var l=new Uint8Array(o.length),A=o.length;A--;)l[A]=o.charCodeAt(A);return(l=dy(l)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var A=0,c=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),A=0;A<l.length;A+=1)switch(l[A]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[A]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(vt.API),function(t){t.loadFile=function(e,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(A,c,d){var h=new XMLHttpRequest,p=0,u=function(y){var b=y.length,v=[],g=String.fromCharCode;for(p=0;p<b;p+=1)v.push(g(255&y.charCodeAt(p)));return v.join("")};if(h.open("GET",A,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?d(u(this.responseText)):d(void 0)}),h.send(null),c&&h.status===200)return u(h.responseText)}(a,i,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(vt.API),function(t){function e(){return(St.html2canvas?Promise.resolve(St.html2canvas):am(()=>Promise.resolve().then(()=>qO),void 0)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(St.DOMPurify?Promise.resolve(St.DOMPurify):am(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var A=or(l);return A==="undefined"?"undefined":A==="string"||l instanceof String?"string":A==="number"||l instanceof Number?"number":A==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":A==="object"?"object":"unknown"},a=function(l,A){var c=document.createElement(l);for(var d in A.className&&(c.className=A.className),A.innerHTML&&A.dompurify&&(c.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)c.style[d]=A.style[d];return c},i=function l(A,c){for(var d=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),h=A.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,c));return A.nodeType===1&&(A.nodeName==="CANVAS"?(d.width=A.width,d.height=A.height,d.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(d.value=A.value),d.addEventListener("load",function(){d.scrollTop=A.scrollTop,d.scrollLeft=A.scrollLeft},!0)),d},o=function l(A){var c=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),c);return(d=d.setProgress(1,l,1,[l])).set(A)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,A){return l.__proto__=A||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,A){return this.then(function(){switch(A=A||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),A){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:l,dompurify:c})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(A){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,A(this.prop.container,c)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(A){var c=this.opt.jsPDF,d=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var u=0;u<d.length;++u){var y=d[u],b=y.src.find(function(v){return v.format==="truetype"});b&&c.addFont(b.url,y.ref.name,y.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),A(this.prop.container,p)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,A,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(l,A):this.outputPdf(l,A)},o.prototype.outputPdf=function(l,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,A)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var A=Object.keys(l||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=l[c]};switch(c){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[c]=l[c]}}},this);return this.then(function(){return this.thenList(A)})},o.prototype.get=function(l,A){return this.then(function(){var c=l in o.template.prop?this.prop[l]:this.opt[l];return A?A(c):c})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function A(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(l=l||vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:A(l.inner.width,l.k),height:A(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,A,c,d){return l!=null&&(this.progress.val=l),A!=null&&(this.progress.state=A),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,A,c,d){return this.setProgress(l?this.progress.val+l:null,A||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,A){var c=this;return this.thenCore(l,A,function(d,h){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,d),p}).then(d,h).then(function(p){return c.updateProgress(1),p})})},o.prototype.thenCore=function(l,A,c){c=c||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),A&&(A=A.bind(d));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),p=c.call(h,l,A);return o.convert(p,d.__proto__)},o.prototype.thenExternal=function(l,A){return Promise.prototype.then.call(this,l,A)},o.prototype.thenList=function(l){var A=this;return l.forEach(function(c){A=A.thenCore(c)}),A},o.prototype.catch=function(l){l&&(l=l.bind(this));var A=Promise.prototype.catch.call(this,l);return o.convert(A,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,vt.getPageSize=function(l,A,c){if(or(l)==="object"){var d=l;l=d.orientation,A=d.unit||A,c=d.format||c}A=A||"mm",c=c||"a4",l=(""+(l||"P")).toLowerCase();var h,p=(""+c).toLowerCase(),u={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+A}var y,b=0,v=0;if(u.hasOwnProperty(p))b=u[p][1]/h,v=u[p][0]/h;else try{b=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(l==="p"||l==="portrait")l="p",v>b&&(y=v,v=b,b=y);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",b>v&&(y=v,v=b,b=y)}return{width:v,height:b,unit:A,k:h,orientation:l}},t.html=function(l,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(vm):null;var c=new o(A);return A.worker?c:c.from(l).doCallback()}}(vt.API),vt.API.addJS=function(t){return vk=t,this.internal.events.subscribe("postPutResources",function(){Xh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Xh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wk=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+vk+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Xh!==void 0&&wk!==void 0&&this.internal.out("/Names <</JavaScript "+Xh+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var A=l[1];r.internal.newObjectDeferredBegin(A,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(i=0;i<c;i++){var h=r.internal.newObject();d.push(h);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var u=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+u+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var A=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(vt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,i,o,l){var A,c=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,A=function(h){for(var p,u=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,b={width:0,height:0,numcomponents:1},v=4;v<y;v+=2){if(v+=u,e.indexOf(h.charCodeAt(v+1))!==-1){p=256*h.charCodeAt(v+5)+h.charCodeAt(v+6),b={width:256*h.charCodeAt(v+7)+h.charCodeAt(v+8),height:p,numcomponents:h.charCodeAt(v+9)};break}u=256*h.charCodeAt(v+2)+h.charCodeAt(v+3)}return b}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),A.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:A.width,height:A.height,colorSpace:l,bitsPerComponent:8,filter:c,index:n,alias:a}}return d}}(vt.API),vt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,i=MI(t,{checkCrc:!0}),o=i.width,l=i.height,A=i.channels,c=i.palette,d=i.depth;a=c&&A===1?function(Q){for(var L=Q.width,V=Q.height,F=Q.data,D=Q.palette,T=Q.depth,G=!1,ne=[],ce=[],ue=void 0,Y=!1,Ae=0,fe=0;fe<D.length;fe++){var we=j2(D[fe],4),E=we[0],z=we[1],K=we[2],W=we[3];ne.push(E,z,K),W!=null&&(W===0?(Ae++,ce.length<1&&ce.push(fe)):W<255&&(Y=!0))}if(Y||Ae>1){G=!0,ce=void 0;var J=L*V;ue=new Uint8Array(J);for(var re=new DataView(F.buffer),be=0;be<J;be++){var me=Bm(re,be,T),ae=j2(D[me],4)[3];ue[be]=ae}}else Ae===0&&(ce=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:F,alphaBytes:ue,needSMask:G,palette:ne,mask:ce}}(i):A===2||A===4?function(Q){for(var L=Q.data,V=Q.width,F=Q.height,D=Q.channels,T=Q.depth,G=D===2?"DeviceGray":"DeviceRGB",ne=D-1,ce=V*F,ue=ne,Y=ce*ue,Ae=1*ce,fe=Math.ceil(Y*T/8),we=Math.ceil(Ae*T/8),E=new Uint8Array(fe),z=new Uint8Array(we),K=new DataView(L.buffer),W=new DataView(E.buffer),J=new DataView(z.buffer),re=!1,be=0;be<ce;be++){for(var me=be*D,ae=0;ae<ue;ae++)Fk(W,Bm(K,me+ae,T),be*ue+ae,T);var X=Bm(K,me+ue,T);X<(1<<T)-1&&(re=!0),Fk(J,X,1*be,T)}return{colorSpace:G,colorsPerPixel:ne,sMaskBitsPerComponent:re?T:void 0,colorBytes:E,alphaBytes:z,needSMask:re}}(i):function(Q){var L=Q.data,V=Q.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:L instanceof Uint16Array?function(F){for(var D=F.length,T=new Uint8Array(2*D),G=new DataView(T.buffer,T.byteOffset,T.byteLength),ne=0;ne<D;ne++)G.setUint16(2*ne,F[ne],!1);return T}(L):L,needSMask:!1}}(i);var h,p,u,y=a,b=y.colorSpace,v=y.colorsPerPixel,g=y.sMaskBitsPerComponent,m=y.colorBytes,w=y.alphaBytes,k=y.needSMask,N=y.palette,S=y.mask,U=null;return n!==vt.API.image_compression.NONE&&typeof dy=="function"?(U=function(Q){var L;switch(Q){case vt.API.image_compression.FAST:L=11;break;case vt.API.image_compression.MEDIUM:L=13;break;case vt.API.image_compression.SLOW:L=14;break;default:L=12}return L}(n),h=this.decode.FLATE_DECODE,p="/Predictor ".concat(U," /Colors ").concat(v," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=jk(m,Math.ceil(o*v*d/8),v,d,n),k&&(u=jk(w,Math.ceil(o*g/8),1,g,n))):(h=void 0,p=void 0,t=m,k&&(u=w)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(u&&this.__addimage__.isArrayBuffer(u)||this.__addimage__.isArrayBufferView(u))&&(u=this.__addimage__.arrayBufferToBinaryString(u)),{alias:r,data:t,index:e,filter:h,decodeParameters:p,transparency:S,palette:N,sMask:u,predictor:U,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:g,colorSpace:b}}},function(t){t.processGIF89A=function(e,r,n,a){var i=new A7(e),o=i.width,l=i.height,A=[];i.decodeAndBlitFrameRGBA(0,A);var c={data:A,width:o,height:l},d=new Cm(100).encode(c,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(vt.API),As.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},As.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){hr.log("bit decode error:"+r)}},As.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var A=this.palette[i>>7-l&1];this.data[o+4*l]=A.blue,this.data[o+4*l+1]=A.green,this.data[o+4*l+2]=A.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},As.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,A=15&i,c=this.palette[l];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*a+1>=this.width)break;c=this.palette[A],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},As.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},As.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,A=(i>>10&e)/e*255|0,c=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=A,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},As.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,A=(o>>5&r)/r*255|0,c=(o>>11)/e*255|0,d=a*this.width*4+4*i;this.data[d]=c,this.data[d+1]=A,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},As.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},As.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},As.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var i=new As(e,!1),o=i.width,l=i.height,A={data:i.getData(),width:o,height:l},c=new Cm(100).encode(A,100);return t.processJPEG.call(this,c,r,n,a)}}(vt.API),Lk.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var i=new Lk(e),o=i.width,l=i.height,A={data:i.getData(),width:o,height:l},c=new Cm(100).encode(A,100);return t.processJPEG.call(this,c,r,n,a)}}(vt.API),vt.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,A=0,c=0;c<a;c+=4){var d=n[c],h=n[c+1],p=n[c+2],u=n[c+3];i[l++]=d,i[l++]=h,i[l++]=p,o[A++]=u}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},vt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nA=vt.API,Zh=nA.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,A=l.fof?l.fof:1,c=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=c.fof?c.fof:1,h=e.doKerning!==!1,p=0,u=t.length,y=0,b=l[0]||A,v=[];for(r=0;r<u;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(p=h&&or(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/d:0,v.push((l[n]||b)/A+p)),y=n;return v},kk=nA.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return nA.processArabic&&(t=nA.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:Zh.apply(this,arguments).reduce(function(i,o){return i+o},0)},Bk=function(t,e,r,n){for(var a=[],i=0,o=t.length,l=0;i!==o&&l+e[i]<r;)l+=e[i],i++;a.push(t.slice(0,i));var A=i;for(l=0;i!==o;)l+e[i]>n&&(a.push(t.slice(A,i)),l=0,A=i),l+=e[i],i++;return A!==i&&a.push(t.slice(A,i)),a},Ck=function(t,e,r){r||(r={});var n,a,i,o,l,A,c,d=[],h=[d],p=r.textIndent||0,u=0,y=0,b=t.split(" "),v=Zh.apply(this,[" ",r])[0];if(A=r.lineIndent===-1?b[0].length+2:r.lineIndent||0){var g=Array(A).join(" "),m=[];b.map(function(k){(k=k.split(/\s*\n/)).length>1?m=m.concat(k.map(function(N,S){return(S&&N.length?`
`:"")+N})):m.push(k[0])}),b=m,A=kk.apply(this,[g,r])}for(i=0,o=b.length;i<o;i++){var w=0;if(n=b[i],A&&n[0]==`
`&&(n=n.substr(1),w=1),p+u+(y=(a=Zh.apply(this,[n,r])).reduce(function(k,N){return k+N},0))>e||w){if(y>e){for(l=Bk.apply(this,[n,a,e-(p+u),e]),d.push(l.shift()),d=[l.pop()];l.length;)h.push([l.shift()]);y=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(k,N){return k+N},0)}else d=[n];h.push(d),p=y+A,u=v}else d.push(n),p+=u+y,u=v}return c=A?function(k,N){return(N?g:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(c)},nA.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return h.metadata[p]?{widths:h.metadata[p].widths||{0:1},kerning:h.metadata[p].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,A,c=[];for(l=0,A=n.length;l<A;l++)c=c.concat(Ck.apply(this,[n[l],o,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=e[i],a[e[i]]=r[i];var o=function(p){return"0x"+parseInt(p,10).toString(16)},l=t.__fontmetrics__.compress=function(p){var u,y,b,v,g=["{"];for(var m in p){if(u=p[m],isNaN(parseInt(m,10))?y="'"+m+"'":(m=parseInt(m,10),y=(y=o(m).slice(2)).slice(0,-1)+a[y.slice(-1)]),typeof u=="number")u<0?(b=o(u).slice(3),v="-"):(b=o(u).slice(2),v=""),b=v+b.slice(0,-1)+a[b.slice(-1)];else{if(or(u)!=="object")throw new Error("Don't know what to do with value type "+or(u)+".");b=l(u)}g.push(y+b)}return g.push("}"),g.join("")},A=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var u,y,b,v,g={},m=1,w=g,k=[],N="",S="",U=p.length-1,Q=1;Q<U;Q+=1)(v=p[Q])=="'"?u?(b=u.join(""),u=void 0):u=[]:u?u.push(v):v=="{"?(k.push([w,b]),w={},b=void 0):v=="}"?((y=k.pop())[0][y[1]]=w,b=void 0,w=y[0]):v=="-"?m=-1:b===void 0?n.hasOwnProperty(v)?(N+=n[v],b=parseInt(N,16)*m,m=1,N=""):N+=v:n.hasOwnProperty(v)?(S+=n[v],w[b]=parseInt(S,16)*m,m=1,b=void 0,S=""):S+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},h={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var u=p.font,y=h.Unicode[u.postScriptName];y&&(u.metadata.Unicode={},u.metadata.Unicode.widths=y.widths,u.metadata.Unicode.kerning=y.kerning);var b=d.Unicode[u.postScriptName];b&&(u.metadata.Unicode.encoding=b,u.encoding=b.codePages[0])}])}(vt.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(O0(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(vt),vt.API.addSvgAsImage=function(t,e,r,n,a,i,o,l){if(isNaN(e)||isNaN(r))throw hr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw hr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=n,A.height=a;var c=A.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,A.width,A.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(St.canvg?Promise.resolve(St.canvg):am(()=>import("./index.es-DasMi0yY.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(c,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){h.addImage(A.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},vt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},vt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),A=[],c=0,d=0,h=0;function p(y,b){var v,g=!1;for(v=0;v<y.length;v+=1)y[v]===b&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var u=l.length;for(h=0;h<u;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(or(t)==="object"){for(a in t)if(i=t[a],p(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&p(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")A.push(String(i[c]-1));else if(i[c].length>1){for(d=0;d<i[c].length;d+=1)typeof i[c][d]!="number"&&(n=!1);n===!0&&A.push([i[c][0]-1,i[c][1]-1].join(" "))}r[a].value="["+A.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,b=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?b.push("/"+y+" /"+r[y].value):b.push("/"+y+" "+r[y].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+o.length+l.length+a.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+A),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(vt.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,o){for(var l,A=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],h=0,p=i.length;h<p;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),A.indexOf(l)==-1&&(A.push(l),A.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(c[4-l.length],l)}return d.join("")},n=function(i){var o,l,A,c,d,h,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],h=0,p=(l=Object.keys(i).sort(function(u,y){return u-y})).length;h<p;h++)o=l[h],A.length>=100&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(c=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),A.push("<"+o+"><"+c+">"));return A.length&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var l=o.font,A=o.out,c=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),u="",y=0;y<p.length;y++)u+=String.fromCharCode(p[y]);var b=c();d({data:u,addLength1:!0,objectId:b}),A("endobj");var v=c();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),A("endobj");var g=c();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+fA(l.fontName)),A("/FontFile2 "+b+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),A("/Flags "+l.metadata.flags),A("/StemV "+l.metadata.stemV),A("/ItalicAngle "+l.metadata.italicAngle),A("/Ascent "+l.metadata.ascender),A("/Descent "+l.metadata.decender),A("/CapHeight "+l.metadata.capHeight),A(">>"),A("endobj");var m=c();A("<<"),A("/Type /Font"),A("/BaseFont /"+fA(l.fontName)),A("/FontDescriptor "+g+" 0 R"),A("/W "+t.API.PDFObject.convert(h)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+l.encoding+")"),A(">>"),A(">>"),A("endobj"),l.objectNumber=c(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+v+" 0 R"),A("/BaseFont /"+fA(l.fontName)),A("/Encoding /"+l.encoding),A("/DescendantFonts ["+m+" 0 R]"),A(">>"),A("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var l=o.font,A=o.out,c=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,p="",u=0;u<h.length;u++)p+=String.fromCharCode(h[u]);var y=c();d({data:p,addLength1:!0,objectId:y}),A("endobj");var b=c();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:b}),A("endobj");var v=c();A("<<"),A("/Descent "+l.metadata.decender),A("/CapHeight "+l.metadata.capHeight),A("/StemV "+l.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+y+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),A("/FontName /"+fA(l.fontName)),A("/ItalicAngle "+l.metadata.italicAngle),A("/Ascent "+l.metadata.ascender),A(">>"),A("endobj"),l.objectNumber=c();for(var g=0;g<l.metadata.hmtx.widths.length;g++)l.metadata.hmtx.widths[g]=parseInt(l.metadata.hmtx.widths[g]*(1e3/l.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+fA(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),A("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",A=i.x,c=i.y,d=i.options||{},h=i.mutex||{},p=h.pdfEscape,u=h.activeFontKey,y=h.fonts,b=u,v="",g=0,m="",w=y[b].encoding;if(y[b].encoding!=="Identity-H")return{text:l,x:A,y:c,options:d,mutex:h};for(m=l,b=u,Array.isArray(l)&&(m=l[0]),g=0;g<m.length;g+=1)y[b].metadata.hasOwnProperty("cmap")&&(o=y[b].metadata.cmap.unicode.codeMap[m[g].charCodeAt(0)]),o||m[g].charCodeAt(0)<256&&y[b].metadata.hasOwnProperty("Unicode")?v+=m[g]:v+="";var k="";return parseInt(b.slice(1))<14||w==="WinAnsiEncoding"?k=p(v,b).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(k=r(v,y[b])),h.isHex=!0,{text:k,x:A,y:c,options:d,mutex:h}};e.events.push(["postProcessText",function(i){var o=i.text||"",l=[],A={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?l.push([a(Object.assign({},A,{text:o[c][0]})).text,o[c][1],o[c][2]]):l.push(a(Object.assign({},A,{text:o[c]})).text);i.text=l}else i.text=a(Object.assign({},A,{text:o})).text}])}(vt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,i,o,l,A,c,d,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,w=0;this.__bidiEngine__={};var k=function(F){var D=F.charCodeAt(),T=D>>8,G=b[T];return G!==void 0?h[256*G+(255&D)]:T===252||T===253?"AL":g.test(T)?"L":T===8?"R":"N"},N=function(F){for(var D,T=0;T<F.length;T++){if((D=k(F.charAt(T)))==="L")return!1;if(D==="R")return!0}return!1},S=function(F,D,T,G){var ne,ce,ue,Y,Ae=D[G];switch(Ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(Ae="AN");break;case"AL":m=!0,Ae="R";break;case"WS":case"BN":Ae="N";break;case"CS":G<1||G+1>=D.length||(ne=T[G-1])!=="EN"&&ne!=="AN"||(ce=D[G+1])!=="EN"&&ce!=="AN"?Ae="N":m&&(ce="AN"),Ae=ce===ne?ce:"N";break;case"ES":Ae=(ne=G>0?T[G-1]:"B")==="EN"&&G+1<D.length&&D[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&T[G-1]==="EN"){Ae="EN";break}if(m){Ae="N";break}for(ue=G+1,Y=D.length;ue<Y&&D[ue]==="ET";)ue++;Ae=ue<Y&&D[ue]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Y=D.length,ue=G+1;ue<Y&&D[ue]==="NSM";)ue++;if(ue<Y){var fe=F[G],we=fe>=1425&&fe<=2303||fe===64286;if(ne=D[ue],we&&(ne==="R"||ne==="AL")){Ae="R";break}}}Ae=G<1||(ne=D[G-1])==="B"?"N":T[G-1];break;case"B":m=!1,a=!0,Ae=w;break;case"S":i=!0,Ae="N"}return Ae},U=function(F,D,T){var G=F.split("");return T&&Q(G,T,{hiLevel:w}),G.reverse(),D&&D.reverse(),G.join("")},Q=function(F,D,T){var G,ne,ce,ue,Y,Ae=-1,fe=F.length,we=0,E=[],z=w?u:p,K=[];for(m=!1,a=!1,i=!1,ne=0;ne<fe;ne++)K[ne]=k(F[ne]);for(ce=0;ce<fe;ce++){if(Y=we,E[ce]=S(F,K,E,ce),G=240&(we=z[Y][y[E[ce]]]),we&=15,D[ce]=ue=z[we][5],G>0)if(G===16){for(ne=Ae;ne<ce;ne++)D[ne]=1;Ae=-1}else Ae=-1;if(z[we][6])Ae===-1&&(Ae=ce);else if(Ae>-1){for(ne=Ae;ne<ce;ne++)D[ne]=ue;Ae=-1}K[ce]==="B"&&(D[ce]=0),T.hiLevel|=ue}i&&function(W,J,re){for(var be=0;be<re;be++)if(W[be]==="S"){J[be]=w;for(var me=be-1;me>=0&&W[me]==="WS";me--)J[me]=w}}(K,D,fe)},L=function(F,D,T,G,ne){if(!(ne.hiLevel<F)){if(F===1&&w===1&&!a)return D.reverse(),void(T&&T.reverse());for(var ce,ue,Y,Ae,fe=D.length,we=0;we<fe;){if(G[we]>=F){for(Y=we+1;Y<fe&&G[Y]>=F;)Y++;for(Ae=we,ue=Y-1;Ae<ue;Ae++,ue--)ce=D[Ae],D[Ae]=D[ue],D[ue]=ce,T&&(ce=T[Ae],T[Ae]=T[ue],T[ue]=ce);we=Y}we++}}},V=function(F,D,T){var G=F.split(""),ne={hiLevel:w};return T||(T=[]),Q(G,T,ne),function(ce,ue,Y){if(Y.hiLevel!==0&&d)for(var Ae,fe=0;fe<ce.length;fe++)ue[fe]===1&&(Ae=v.indexOf(ce[fe]))>=0&&(ce[fe]=v[Ae+1])}(G,T,ne),L(2,G,D,T,ne),L(1,G,D,T,ne),G.join("")};return this.__bidiEngine__.doBidiReorder=function(F,D,T){if(function(ne,ce){if(ce)for(var ue=0;ue<ne.length;ue++)ce[ue]=ue;l===void 0&&(l=N(ne)),c===void 0&&(c=N(ne))}(F,D),o||!A||c)if(o&&A&&l^c)w=l?1:0,F=U(F,D,T);else if(!o&&A&&c)w=l?1:0,F=V(F,D,T),F=U(F,D);else if(!o||l||A||c){if(o&&!A&&l^c)F=U(F,D),l?(w=0,F=V(F,D,T)):(w=1,F=V(F,D,T),F=U(F,D));else if(o&&l&&!A&&c)w=1,F=V(F,D,T),F=U(F,D);else if(!o&&!A&&l^c){var G=d;l?(w=1,F=V(F,D,T),w=0,d=!1,F=V(F,D,T),d=G):(w=0,F=V(F,D,T),F=U(F,D),w=1,d=!1,F=V(F,D,T),d=G,F=U(F,D))}}else w=0,F=V(F,D,T);else w=l?1:0,F=V(F,D,T);return F},this.__bidiEngine__.setOptions=function(F){F&&(o=F.isInputVisual,A=F.isOutputVisual,l=F.isInputRtl,c=F.isOutputRtl,d=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vt),vt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Qo(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new B7(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new c7(this.contents),this.head=new u7(this),this.name=new m7(this),this.cmap=new UN(this),this.toUnicode={},this.hhea=new h7(this),this.maxp=new x7(this),this.hmtx=new y7(this),this.post=new g7(this),this.os2=new f7(this),this.loca=new k7(this),this.glyf=new b7(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,A,c;for(c=[],o=0,l=(A=this.bbox).length;o<l;o++)e=A[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,i,o,l;for(o=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var ks,Qo=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,i,o,l,A;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^A)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+A},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),c7=function(){var t;function e(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,i,o,l,A,c,d,h,p,u,y,b;for(b in u=Object.keys(r).length,A=Math.log(2),h=16*Math.floor(Math.log(u)/A),o=Math.floor(h/A),d=16*u-h,(a=new Qo).writeInt(this.scalarType),a.writeShort(u),a.writeShort(h),a.writeShort(o),a.writeShort(d),i=16*u,c=a.pos+i,l=null,y=[],r)for(p=r[b],a.writeString(b),a.writeInt(t(p)),a.writeInt(c),a.writeInt(p.length),y=y.concat(p),b==="head"&&(l=c),c+=p.length;c%4;)y.push(0),c++;return a.write(y),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,i,o;for(r=LN.call(r);r.length%4;)r.push(0);for(i=new Qo(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},e}(),d7={}.hasOwnProperty,$s=function(t,e){for(var r in e)d7.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ks=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var u7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Qo).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),Qk=function(){function t(e,r){var n,a,i,o,l,A,c,d,h,p,u,y,b,v,g,m,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(u=e.readUInt16(),p=u/2,e.pos+=6,i=function(){var k,N;for(N=[],A=k=0;0<=p?k<p:k>p;A=0<=p?++k:--k)N.push(e.readUInt16());return N}(),e.pos+=2,b=function(){var k,N;for(N=[],A=k=0;0<=p?k<p:k>p;A=0<=p?++k:--k)N.push(e.readUInt16());return N}(),c=function(){var k,N;for(N=[],A=k=0;0<=p?k<p:k>p;A=0<=p?++k:--k)N.push(e.readUInt16());return N}(),d=function(){var k,N;for(N=[],A=k=0;0<=p?k<p:k>p;A=0<=p?++k:--k)N.push(e.readUInt16());return N}(),a=(this.length-e.pos+this.offset)/2,l=function(){var k,N;for(N=[],A=k=0;0<=a?k<a:k>a;A=0<=a?++k:--k)N.push(e.readUInt16());return N}(),A=g=0,w=i.length;g<w;A=++g)for(v=i[A],n=m=y=b[A];y<=v?m<=v:m>=v;n=y<=v?++m:--m)d[A]===0?o=n+c[A]:(o=l[d[A]/2+(n-y)-(p-A)]||0)!==0&&(o+=c[A]),this.codeMap[n]=65535&o}e.pos=h}return t.encode=function(e,r){var n,a,i,o,l,A,c,d,h,p,u,y,b,v,g,m,w,k,N,S,U,Q,L,V,F,D,T,G,ne,ce,ue,Y,Ae,fe,we,E,z,K,W,J,re,be,me,ae,X,ye;switch(G=new Qo,o=Object.keys(e).sort(function(xe,Oe){return xe-Oe}),r){case"macroman":for(b=0,v=function(){var xe=[];for(y=0;y<256;++y)xe.push(0);return xe}(),m={0:0},i={},ne=0,Ae=o.length;ne<Ae;ne++)m[me=e[a=o[ne]]]==null&&(m[me]=++b),i[a]={old:e[a],new:m[e[a]]},v[a]=m[e[a]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(v),{charMap:i,subtable:G.data,maxGlyphID:b+1};case"unicode":for(D=[],h=[],w=0,m={},n={},g=c=null,ce=0,fe=o.length;ce<fe;ce++)m[N=e[a=o[ce]]]==null&&(m[N]=++w),n[a]={old:N,new:m[N]},l=m[N]-a,g!=null&&l===c||(g&&h.push(g),D.push(a),c=l),g=a;for(g&&h.push(g),h.push(65535),D.push(65535),V=2*(L=D.length),Q=2*Math.pow(Math.log(L)/Math.LN2,2),p=Math.log(Q/2)/Math.LN2,U=2*L-Q,A=[],S=[],u=[],y=ue=0,we=D.length;ue<we;y=++ue){if(F=D[y],d=h[y],F===65535){A.push(0),S.push(0);break}if(F-(T=n[F].new)>=32768)for(A.push(0),S.push(2*(u.length+L-y)),a=Y=F;F<=d?Y<=d:Y>=d;a=F<=d?++Y:--Y)u.push(n[a].new);else A.push(T-F),S.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*L+2*u.length),G.writeUInt16(0),G.writeUInt16(V),G.writeUInt16(Q),G.writeUInt16(p),G.writeUInt16(U),re=0,E=h.length;re<E;re++)a=h[re],G.writeUInt16(a);for(G.writeUInt16(0),be=0,z=D.length;be<z;be++)a=D[be],G.writeUInt16(a);for(ae=0,K=A.length;ae<K;ae++)l=A[ae],G.writeUInt16(l);for(X=0,W=S.length;X<W;X++)k=S[X],G.writeUInt16(k);for(ye=0,J=u.length;ye<J;ye++)b=u[ye],G.writeUInt16(b);return{charMap:n,subtable:G.data,maxGlyphID:w+1}}},t}(),UN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new Qk(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=Qk.encode(e,r),(a=new Qo).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),h7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),f7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),g7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,A;for(A=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)A.push(e.readUInt32());return A}).call(this)}},t}(),p7=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},m7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,i,o,l,A,c,d,h,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(A={},i=d=0,h=n.length;d<h;i=++d)a=n[i],e.pos=a.offset,c=e.readString(a.length),o=new p7(c,a),A[p=a.nameID]==null&&(A[p]=[]),A[a.nameID].push(o);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t}(),x7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),y7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,i,o,l,A;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],r=c=0;0<=a?c<a:c>a;r=0<=a?++c:--c)d.push(e.readInt16());return d}(),this.widths=(function(){var c,d,h,p;for(p=[],c=0,d=(h=this.metrics).length;c<d;c++)i=h[c],p.push(i.advance);return p}).call(this),n=this.widths[this.widths.length-1],A=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)A.push(this.widths.push(n));return A},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),LN=[].slice,b7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,i,o,l,A,c,d,h;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(a=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new Qo(r.read(a))).readShort(),c=l.readShort(),h=l.readShort(),A=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new v7(l,c,h,A,d):new w7(l,o,c,h,A,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,i,o,l,A;for(o=[],i=[],l=0,A=r.length;l<A;l++)a=e[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},t}(),w7=function(){function t(e,r,n,a,i,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),v7=function(){function t(e,r,n,a,i){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Qo(LN.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),k7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return $s(t,ks),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var l=this.offsets[o],A=this.offsets[o+1]-l;A>0&&(a+=A)}for(var c=new Array(4*n.length),d=0;d<n.length;++d)c[4*d+3]=255&n[d],c[4*d+2]=(65280&n[d])>>8,c[4*d+1]=(16711680&n[d])>>16,c[4*d]=(4278190080&n[d])>>24;return c},t}(),B7=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,i,o,l,A;for(a={},o=0,l=e.length;o<l;o++)a[i=e[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in A=this.glyphsFor(r))n=A[i],a[i]=n;return a},t.prototype.encode=function(e,r){var n,a,i,o,l,A,c,d,h,p,u,y,b,v,g;for(a in n=UN.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),u={0:0},g=n.charMap)u[(A=g[a]).old]=A.new;for(y in p=n.maxGlyphID,o)y in u||(u[y]=p++);return d=function(m){var w,k;for(w in k={},m)k[m[w]]=w;return k}(u),h=Object.keys(d).sort(function(m,w){return m-w}),b=function(){var m,w,k;for(k=[],m=0,w=h.length;m<w;m++)l=h[m],k.push(d[l]);return k}(),i=this.font.glyf.encode(o,b,u),c=this.font.loca.encode(i.offsets,b),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();vt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,A,c;for(c=[],l=0,A=r.length;l<A;l++)n=r[l],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+r},e}();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yy=function(t,e){return yy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},yy(t,e)};function Bs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yy(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var by=function(){return by=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},by.apply(this,arguments)};function Yn(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function A(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):a(d.value).then(l,A)}c((n=n.apply(t,[])).next())})}function Hn(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return A([c,d])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function e0(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var _i=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),wg=function(t,e){return _i.fromClientRect(t,e.getBoundingClientRect())},C7=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new _i(0,0,n,a)},vg=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Rr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,i="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Ik="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var t0=0;t0<Ik.length;t0++)j7[Ik.charCodeAt(t0)]=t0;var Pk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var r0=0;r0<Pk.length;r0++)dd[Pk.charCodeAt(r0)]=r0;var N7=function(t){var e=t.length*.75,r=t.length,n,a=0,i,o,l,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=dd[t.charCodeAt(n)],o=dd[t.charCodeAt(n+1)],l=dd[t.charCodeAt(n+2)],A=dd[t.charCodeAt(n+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|A&63;return c},_7=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},S7=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},jl=5,cw=11,jm=2,E7=cw-jl,QN=65536>>jl,F7=1<<jl,Nm=F7-1,U7=1024>>jl,L7=QN+U7,Q7=L7,I7=32,P7=Q7+I7,T7=65536>>cw,D7=1<<E7,z7=D7-1,Tk=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},O7=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},R7=function(t,e){var r=N7(t),n=Array.isArray(r)?S7(r):new Uint32Array(r),a=Array.isArray(r)?_7(r):new Uint16Array(r),i=24,o=Tk(a,i/2,n[4]/2),l=n[5]===2?Tk(a,(i+n[4])/2):O7(n,Math.ceil((i+n[4])/4));return new M7(n[0],n[1],n[2],n[3],o,l)},M7=function(){function t(e,r,n,a,i,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>jl],r=(r<<jm)+(e&Nm),this.data[r];if(e<=65535)return r=this.index[QN+(e-55296>>jl)],r=(r<<jm)+(e&Nm),this.data[r];if(e<this.highStart)return r=P7-T7+(e>>cw),r=this.index[r],r+=e>>jl&z7,r=this.index[r],r=(r<<jm)+(e&Nm),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Dk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var n0=0;n0<Dk.length;n0++)H7[Dk.charCodeAt(n0)]=n0;var K7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",zk=50,$7=1,IN=2,PN=3,G7=4,V7=5,Ok=7,TN=8,Rk=9,go=10,wy=11,Mk=12,vy=13,W7=14,ud=15,ky=16,a0=17,td=18,q7=19,Hk=20,By=21,rd=22,_m=23,aA=24,Na=25,hd=26,fd=27,sA=28,J7=29,gl=30,Y7=31,s0=32,i0=33,Cy=34,jy=35,Ny=36,uu=37,_y=38,$0=39,G0=40,Sm=41,DN=42,X7=43,Z7=[9001,65288],zN="!",Mt="",o0="",Sy=R7(K7),hi=[gl,Ny],Ey=[$7,IN,PN,V7],ON=[go,TN],Kk=[fd,hd],eP=Ey.concat(ON),$k=[_y,$0,G0,Cy,jy],tP=[ud,vy],rP=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(i,o){var l=Sy.get(i);if(l>zk?(a.push(!0),l-=zk):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(o),r.push(ky);if(l===G7||l===wy){if(o===0)return n.push(o),r.push(gl);var A=r[o-1];return eP.indexOf(A)===-1?(n.push(n[o-1]),r.push(A)):(n.push(o),r.push(gl))}if(n.push(o),l===Y7)return r.push(e==="strict"?By:uu);if(l===DN||l===J7)return r.push(gl);if(l===X7)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(uu):r.push(gl);r.push(l)}),[n,r,a]},Em=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var i=r;i<=n.length;){i++;var o=n[i];if(o===e)return!0;if(o!==go)break}if(a===go)for(var i=r;i>0;){i--;var l=n[i];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var A=r;A<=n.length;){A++;var o=n[A];if(o===e)return!0;if(o!==go)break}if(l!==go)break}return!1},Gk=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===go)r--;else return n}return 0},nP=function(t,e,r,n,a){if(r[n]===0)return Mt;var i=n-1;if(Array.isArray(a)&&a[i]===!0)return Mt;var o=i-1,l=i+1,A=e[i],c=o>=0?e[o]:0,d=e[l];if(A===IN&&d===PN)return Mt;if(Ey.indexOf(A)!==-1)return zN;if(Ey.indexOf(d)!==-1||ON.indexOf(d)!==-1)return Mt;if(Gk(i,e)===TN)return o0;if(Sy.get(t[i])===wy||(A===s0||A===i0)&&Sy.get(t[l])===wy||A===Ok||d===Ok||A===Rk||[go,vy,ud].indexOf(A)===-1&&d===Rk||[a0,td,q7,aA,sA].indexOf(d)!==-1||Gk(i,e)===rd||Em(_m,rd,i,e)||Em([a0,td],By,i,e)||Em(Mk,Mk,i,e))return Mt;if(A===go)return o0;if(A===_m||d===_m)return Mt;if(d===ky||A===ky)return o0;if([vy,ud,By].indexOf(d)!==-1||A===W7||c===Ny&&tP.indexOf(A)!==-1||A===sA&&d===Ny||d===Hk||hi.indexOf(d)!==-1&&A===Na||hi.indexOf(A)!==-1&&d===Na||A===fd&&[uu,s0,i0].indexOf(d)!==-1||[uu,s0,i0].indexOf(A)!==-1&&d===hd||hi.indexOf(A)!==-1&&Kk.indexOf(d)!==-1||Kk.indexOf(A)!==-1&&hi.indexOf(d)!==-1||[fd,hd].indexOf(A)!==-1&&(d===Na||[rd,ud].indexOf(d)!==-1&&e[l+1]===Na)||[rd,ud].indexOf(A)!==-1&&d===Na||A===Na&&[Na,sA,aA].indexOf(d)!==-1)return Mt;if([Na,sA,aA,a0,td].indexOf(d)!==-1)for(var h=i;h>=0;){var p=e[h];if(p===Na)return Mt;if([sA,aA].indexOf(p)!==-1)h--;else break}if([fd,hd].indexOf(d)!==-1)for(var h=[a0,td].indexOf(A)!==-1?o:i;h>=0;){var p=e[h];if(p===Na)return Mt;if([sA,aA].indexOf(p)!==-1)h--;else break}if(_y===A&&[_y,$0,Cy,jy].indexOf(d)!==-1||[$0,Cy].indexOf(A)!==-1&&[$0,G0].indexOf(d)!==-1||[G0,jy].indexOf(A)!==-1&&d===G0||$k.indexOf(A)!==-1&&[Hk,hd].indexOf(d)!==-1||$k.indexOf(d)!==-1&&A===fd||hi.indexOf(A)!==-1&&hi.indexOf(d)!==-1||A===aA&&hi.indexOf(d)!==-1||hi.concat(Na).indexOf(A)!==-1&&d===rd&&Z7.indexOf(t[l])===-1||hi.concat(Na).indexOf(d)!==-1&&A===td)return Mt;if(A===Sm&&d===Sm){for(var u=r[i],y=1;u>0&&(u--,e[u]===Sm);)y++;if(y%2!==0)return Mt}return A===s0&&d===i0?Mt:o0},aP=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=rP(t,e.lineBreak),n=r[0],a=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[Na,gl,DN].indexOf(l)!==-1?uu:l}));var o=e.wordBreak==="keep-all"?i.map(function(l,A){return l&&t[A]>=19968&&t[A]<=40959}):void 0;return[n,a,o]},sP=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===zN,this.start=n,this.end=a}return t.prototype.slice=function(){return Rr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),iP=function(t,e){var r=vg(t),n=aP(r,e),a=n[0],i=n[1],o=n[2],l=r.length,A=0,c=0;return{next:function(){if(c>=l)return{done:!0,value:null};for(var d=Mt;c<l&&(d=nP(r,i,a,++c,o))===Mt;);if(d!==Mt||c===l){var h=new sP(r,d,A,c);return A=c,{value:h,done:!1}}return{done:!0,value:null}}}},oP=1,lP=2,_u=4,Vk=8,Qf=10,Wk=47,Ud=92,AP=9,cP=32,l0=34,nd=61,dP=35,uP=36,hP=37,A0=39,c0=40,ad=41,fP=95,oa=45,gP=33,pP=60,mP=62,xP=64,yP=91,bP=93,wP=61,vP=123,d0=63,kP=125,qk=124,BP=126,CP=128,Jk=65533,Fm=42,bl=43,jP=44,NP=58,_P=59,hu=46,SP=0,EP=8,FP=11,UP=14,LP=31,QP=127,Ls=-1,RN=48,MN=97,HN=101,IP=102,PP=117,TP=122,KN=65,$N=69,GN=70,DP=85,zP=90,Kn=function(t){return t>=RN&&t<=57},OP=function(t){return t>=55296&&t<=57343},iA=function(t){return Kn(t)||t>=KN&&t<=GN||t>=MN&&t<=IP},RP=function(t){return t>=MN&&t<=TP},MP=function(t){return t>=KN&&t<=zP},HP=function(t){return RP(t)||MP(t)},KP=function(t){return t>=CP},u0=function(t){return t===Qf||t===AP||t===cP},If=function(t){return HP(t)||KP(t)||t===fP},Yk=function(t){return If(t)||Kn(t)||t===oa},$P=function(t){return t>=SP&&t<=EP||t===FP||t>=UP&&t<=LP||t===QP},ao=function(t,e){return t!==Ud?!1:e!==Qf},h0=function(t,e,r){return t===oa?If(e)||ao(e,r):If(t)?!0:!!(t===Ud&&ao(t,e))},Um=function(t,e,r){return t===bl||t===oa?Kn(e)?!0:e===hu&&Kn(r):Kn(t===hu?e:t)},GP=function(t){var e=0,r=1;(t[e]===bl||t[e]===oa)&&(t[e]===oa&&(r=-1),e++);for(var n=[];Kn(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Rr.apply(void 0,n),10):0;t[e]===hu&&e++;for(var i=[];Kn(t[e]);)i.push(t[e++]);var o=i.length,l=o?parseInt(Rr.apply(void 0,i),10):0;(t[e]===$N||t[e]===HN)&&e++;var A=1;(t[e]===bl||t[e]===oa)&&(t[e]===oa&&(A=-1),e++);for(var c=[];Kn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Rr.apply(void 0,c),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,A*d)},VP={type:2},WP={type:3},qP={type:4},JP={type:13},YP={type:8},XP={type:21},ZP={type:9},eT={type:10},tT={type:11},rT={type:12},nT={type:14},f0={type:23},aT={type:1},sT={type:25},iT={type:24},oT={type:26},lT={type:27},AT={type:28},cT={type:29},dT={type:31},Fy={type:32},VN=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(vg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==Fy;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case l0:return this.consumeStringToken(l0);case dP:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Yk(r)||ao(n,a)){var i=h0(r,n,a)?lP:oP,o=this.consumeName();return{type:5,value:o,flags:i}}break;case uP:if(this.peekCodePoint(0)===nd)return this.consumeCodePoint(),JP;break;case A0:return this.consumeStringToken(A0);case c0:return VP;case ad:return WP;case Fm:if(this.peekCodePoint(0)===nd)return this.consumeCodePoint(),nT;break;case bl:if(Um(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jP:return qP;case oa:var l=e,A=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Um(l,A,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(h0(l,A,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===oa&&c===mP)return this.consumeCodePoint(),this.consumeCodePoint(),iT;break;case hu:if(Um(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Wk:if(this.peekCodePoint(0)===Fm)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Fm&&(d=this.consumeCodePoint(),d===Wk))return this.consumeToken();if(d===Ls)return this.consumeToken()}break;case NP:return oT;case _P:return lT;case pP:if(this.peekCodePoint(0)===gP&&this.peekCodePoint(1)===oa&&this.peekCodePoint(2)===oa)return this.consumeCodePoint(),this.consumeCodePoint(),sT;break;case xP:var h=this.peekCodePoint(0),p=this.peekCodePoint(1),u=this.peekCodePoint(2);if(h0(h,p,u)){var o=this.consumeName();return{type:7,value:o}}break;case yP:return AT;case Ud:if(ao(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case bP:return cT;case wP:if(this.peekCodePoint(0)===nd)return this.consumeCodePoint(),YP;break;case vP:return tT;case kP:return rT;case PP:case DP:var y=this.peekCodePoint(0),b=this.peekCodePoint(1);return y===bl&&(iA(b)||b===d0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case qk:if(this.peekCodePoint(0)===nd)return this.consumeCodePoint(),ZP;if(this.peekCodePoint(0)===qk)return this.consumeCodePoint(),XP;break;case BP:if(this.peekCodePoint(0)===nd)return this.consumeCodePoint(),eT;break;case Ls:return Fy}return u0(e)?(this.consumeWhiteSpace(),dT):Kn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):If(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Rr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();iA(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===d0&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Rr.apply(void 0,e.map(function(A){return A===d0?RN:A})),16),i=parseInt(Rr.apply(void 0,e.map(function(A){return A===d0?GN:A})),16);return{type:30,start:a,end:i}}var o=parseInt(Rr.apply(void 0,e),16);if(this.peekCodePoint(0)===oa&&iA(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];iA(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var i=parseInt(Rr.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===c0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===c0?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ls)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===A0||r===l0){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ls||this.peekCodePoint(0)===ad)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),f0)}for(;;){var a=this.consumeCodePoint();if(a===Ls||a===ad)return{type:22,value:Rr.apply(void 0,e)};if(u0(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ls||this.peekCodePoint(0)===ad?(this.consumeCodePoint(),{type:22,value:Rr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),f0);if(a===l0||a===A0||a===c0||$P(a))return this.consumeBadUrlRemnants(),f0;if(a===Ud)if(ao(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),f0;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;u0(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ad||e===Ls)return;ao(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Rr.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===Ls||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===Qf)return this._value.splice(0,n),aT;if(a===Ud){var i=this._value[n+1];i!==Ls&&i!==void 0&&(i===Qf?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):ao(a,i)&&(r+=this.consumeStringSlice(n),r+=Rr(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=_u,n=this.peekCodePoint(0);for((n===bl||n===oa)&&e.push(this.consumeCodePoint());Kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===hu&&Kn(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Vk;Kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===$N||n===HN)&&((a===bl||a===oa)&&Kn(i)||Kn(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Vk;Kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[GP(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(h0(a,i,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===hP?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(iA(e)){for(var r=Rr(e);iA(this.peekCodePoint(0))&&r.length<6;)r+=Rr(this.consumeCodePoint());u0(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||OP(n)||n>1114111?Jk:n}return e===Ls?Jk:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(Yk(r))e+=Rr(r);else if(ao(r,this.peekCodePoint(0)))e+=Rr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),WN=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new VN;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||hT(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Fy:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Su=function(t){return t.type===15},dc=function(t){return t.type===17},cr=function(t){return t.type===20},uT=function(t){return t.type===0},Uy=function(t,e){return cr(t)&&t.value===e},qN=function(t){return t.type!==31},ec=function(t){return t.type!==31&&t.type!==4},Gs=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},hT=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Io=function(t){return t.type===17||t.type===15},Yr=function(t){return t.type===16||Io(t)},JN=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},En={type:17,number:0,flags:_u},dw={type:16,number:50,flags:_u},po={type:16,number:100,flags:_u},gd=function(t,e,r){var n=t[0],a=t[1];return[mr(n,e),mr(typeof a<"u"?a:n,r)]},mr=function(t,e){if(t.type===16)return t.number/100*e;if(Su(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},YN="deg",XN="grad",ZN="rad",e_="turn",kg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case YN:return Math.PI*e.number/180;case XN:return Math.PI/200*e.number;case ZN:return e.number;case e_:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},t_=function(t){return t.type===15&&(t.unit===YN||t.unit===XN||t.unit===ZN||t.unit===e_)},r_=function(t){var e=t.filter(cr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[En,En];case"to top":case"bottom":return Ya(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[En,po];case"to right":case"left":return Ya(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[po,po];case"to bottom":case"top":return Ya(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[po,En];case"to left":case"right":return Ya(270)}return 0},Ya=function(t){return Math.PI*t/180},_o={name:"color",parse:function(t,e){if(e.type===18){var r=fT[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),i=e.value.substring(2,3);return mo(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return mo(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),i=e.value.substring(4,6);return mo(parseInt(n,16),parseInt(a,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return mo(parseInt(n,16),parseInt(a,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var l=vi[e.value.toUpperCase()];if(typeof l<"u")return l}return vi.TRANSPARENT}},So=function(t){return(255&t)===0},fn=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},mo=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},Xk=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},Zk=function(t,e){var r=e.filter(ec);if(r.length===3){var n=r.map(Xk),a=n[0],i=n[1],o=n[2];return mo(a,i,o,1)}if(r.length===4){var l=r.map(Xk),a=l[0],i=l[1],o=l[2],A=l[3];return mo(a,i,o,A)}return 0};function Lm(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var e5=function(t,e){var r=e.filter(ec),n=r[0],a=r[1],i=r[2],o=r[3],l=(n.type===17?Ya(n.number):kg.parse(t,n))/(Math.PI*2),A=Yr(a)?a.number/100:0,c=Yr(i)?i.number/100:0,d=typeof o<"u"&&Yr(o)?mr(o,1):1;if(A===0)return mo(c*255,c*255,c*255,1);var h=c<=.5?c*(A+1):c+A-c*A,p=c*2-h,u=Lm(p,h,l+1/3),y=Lm(p,h,l),b=Lm(p,h,l-1/3);return mo(u*255,y*255,b*255,d)},fT={hsl:e5,hsla:e5,rgb:Zk,rgba:Zk},Ld=function(t,e){return _o.parse(t,WN.create(e).parseComponentValue())},vi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},gT={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(cr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pT={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Bg=function(t,e){var r=_o.parse(t,e[0]),n=e[1];return n&&Yr(n)?{color:r,stop:n}:{color:r,stop:null}},t5=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=En),n.stop===null&&(n.stop=po);for(var a=[],i=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var A=mr(l,e);A>i?a.push(A):a.push(i),i=A}else a.push(null)}for(var c=null,o=0;o<a.length;o++){var d=a[o];if(d===null)c===null&&(c=o);else if(c!==null){for(var h=o-c,p=a[c-1],u=(d-p)/(h+1),y=1;y<=h;y++)a[c+y-1]=u*y;c=null}}return t.map(function(b,v){var g=b.color;return{color:g,stop:Math.max(Math.min(1,a[v]/e),0)}})},mT=function(t,e,r){var n=e/2,a=r/2,i=mr(t[0],e)-n,o=a-mr(t[1],r);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},xT=function(t,e,r){var n=typeof t=="number"?t:mT(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,o=r/2,l=a/2,A=Math.sin(n-Math.PI/2)*l,c=Math.cos(n-Math.PI/2)*l;return[a,i-c,i+c,o-A,o+A]},ds=function(t,e){return Math.sqrt(t*t+e*e)},r5=function(t,e,r,n,a){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(o,l){var A=l[0],c=l[1],d=ds(r-A,n-c);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},yT=function(t,e,r,n,a){var i=0,o=0;switch(t.size){case 0:t.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)i=o=Math.min(ds(e,r),ds(e,r-a),ds(e-n,r),ds(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),A=r5(n,a,e,r,!0),c=A[0],d=A[1];i=ds(c-e,(d-r)/l),o=l*i}break;case 1:t.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)i=o=Math.max(ds(e,r),ds(e,r-a),ds(e-n,r),ds(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),h=r5(n,a,e,r,!1),c=h[0],d=h[1];i=ds(c-e,(d-r)/l),o=l*i}break}return Array.isArray(t.size)&&(i=mr(t.size[0],n),o=t.size.length===2?mr(t.size[1],a):i),[i,o]},bT=function(t,e){var r=Ya(180),n=[];return Gs(e).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&o.value==="to"){r=r_(a);return}else if(t_(o)){r=kg.parse(t,o);return}}var l=Bg(t,a);n.push(l)}),{angle:r,stops:n,type:1}},g0=function(t,e){var r=Ya(180),n=[];return Gs(e).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=r_(a);return}else if(t_(o)){r=(kg.parse(t,o)+Ya(270))%Ya(360);return}}var l=Bg(t,a);n.push(l)}),{angle:r,stops:n,type:1}},wT=function(t,e){var r=Ya(180),n=[],a=1,i=0,o=3,l=[];return Gs(e).forEach(function(A,c){var d=A[0];if(c===0){if(cr(d)&&d.value==="linear"){a=1;return}else if(cr(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var h=_o.parse(t,d.values[0]);n.push({stop:En,color:h})}else if(d.name==="to"){var h=_o.parse(t,d.values[0]);n.push({stop:po,color:h})}else if(d.name==="color-stop"){var p=d.values.filter(ec);if(p.length===2){var h=_o.parse(t,p[1]),u=p[0];dc(u)&&n.push({stop:{type:16,number:u.number*100,flags:u.flags},color:h})}}}}),a===1?{angle:(r+Ya(180))%Ya(360),stops:n,type:a}:{size:o,shape:i,stops:n,position:l,type:a}},n_="closest-side",a_="farthest-side",s_="closest-corner",i_="farthest-corner",o_="circle",l_="ellipse",A_="cover",c_="contain",vT=function(t,e){var r=0,n=3,a=[],i=[];return Gs(e).forEach(function(o,l){var A=!0;if(l===0){var c=!1;A=o.reduce(function(h,p){if(c)if(cr(p))switch(p.value){case"center":return i.push(dw),h;case"top":case"left":return i.push(En),h;case"right":case"bottom":return i.push(po),h}else(Yr(p)||Io(p))&&i.push(p);else if(cr(p))switch(p.value){case o_:return r=0,!1;case l_:return r=1,!1;case"at":return c=!0,!1;case n_:return n=0,!1;case A_:case a_:return n=1,!1;case c_:case s_:return n=2,!1;case i_:return n=3,!1}else if(Io(p)||Yr(p))return Array.isArray(n)||(n=[]),n.push(p),!1;return h},A)}if(A){var d=Bg(t,o);a.push(d)}}),{size:n,shape:r,stops:a,position:i,type:2}},p0=function(t,e){var r=0,n=3,a=[],i=[];return Gs(e).forEach(function(o,l){var A=!0;if(l===0?A=o.reduce(function(d,h){if(cr(h))switch(h.value){case"center":return i.push(dw),!1;case"top":case"left":return i.push(En),!1;case"right":case"bottom":return i.push(po),!1}else if(Yr(h)||Io(h))return i.push(h),!1;return d},A):l===1&&(A=o.reduce(function(d,h){if(cr(h))switch(h.value){case o_:return r=0,!1;case l_:return r=1,!1;case c_:case n_:return n=0,!1;case a_:return n=1,!1;case s_:return n=2,!1;case A_:case i_:return n=3,!1}else if(Io(h)||Yr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},A)),A){var c=Bg(t,o);a.push(c)}}),{size:n,shape:r,stops:a,position:i,type:2}},kT=function(t){return t.type===1},BT=function(t){return t.type===2},uw={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=d_[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function CT(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!d_[t.name])}var d_={"linear-gradient":bT,"-moz-linear-gradient":g0,"-ms-linear-gradient":g0,"-o-linear-gradient":g0,"-webkit-linear-gradient":g0,"radial-gradient":vT,"-moz-radial-gradient":p0,"-ms-radial-gradient":p0,"-o-radial-gradient":p0,"-webkit-radial-gradient":p0,"-webkit-gradient":wT},jT={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return ec(n)&&CT(n)}).map(function(n){return uw.parse(t,n)})}},NT={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(cr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_T={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Gs(e).map(function(r){return r.filter(Yr)}).map(JN)}},ST={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Gs(e).map(function(r){return r.filter(cr).map(function(n){return n.value}).join(" ")}).map(ET)}},ET=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},MA;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(MA||(MA={}));var FT={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Gs(e).map(function(r){return r.filter(UT)})}},UT=function(t){return cr(t)||Yr(t)},Cg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},LT=Cg("top"),QT=Cg("right"),IT=Cg("bottom"),PT=Cg("left"),jg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return JN(r.filter(Yr))}}},TT=jg("top-left"),DT=jg("top-right"),zT=jg("bottom-right"),OT=jg("bottom-left"),Ng=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},RT=Ng("top"),MT=Ng("right"),HT=Ng("bottom"),KT=Ng("left"),_g=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Su(r)?r.number:0}}},$T=_g("top"),GT=_g("right"),VT=_g("bottom"),WT=_g("left"),qT={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},JT={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},YT={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(cr).reduce(function(r,n){return r|XT(n.value)},0)}},XT=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ZT={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},eD={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Pf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Pf||(Pf={}));var tD={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Pf.STRICT;case"normal":default:return Pf.NORMAL}}},rD={name:"line-height",initialValue:"normal",prefix:!1,type:4},n5=function(t,e){return cr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Yr(t)?mr(t,e):e},nD={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:uw.parse(t,e)}},aD={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Ly={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Sg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},sD=Sg("top"),iD=Sg("right"),oD=Sg("bottom"),lD=Sg("left"),AD={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(cr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},cD={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Eg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},dD=Eg("top"),uD=Eg("right"),hD=Eg("bottom"),fD=Eg("left"),gD={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},pD={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},mD={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Uy(e[0],"none")?[]:Gs(e).map(function(r){for(var n={color:vi.TRANSPARENT,offsetX:En,offsetY:En,blur:En},a=0,i=0;i<r.length;i++){var o=r[i];Io(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=_o.parse(t,o)}return n})}},xD={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},yD={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=vD[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},bD=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},wD=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,i,o,l]:null},vD={matrix:bD,matrix3d:wD},a5={type:16,number:50,flags:_u},kD=[a5,a5],BD={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Yr);return r.length!==2?kD:[r[0],r[1]]}},CD={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Qd;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Qd||(Qd={}));var jD={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Qd.BREAK_ALL;case"keep-all":return Qd.KEEP_ALL;case"normal":default:return Qd.NORMAL}}},ND={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(dc(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},u_={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},_D={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return dc(e)?e.number:1}},SD={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ED={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(cr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},FD={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},UD={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},LD={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(dc(e))return e.number;if(cr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},QD={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(cr).map(function(r){return r.value})}},ID={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},un=function(t,e){return(t&e)!==0},PD={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},TD={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(qN),i=0;i<a.length;i++){var o=a[i],l=a[i+1];if(o.type===20){var A=l&&dc(l)?l.number:1;n.push({counter:o.value,increment:A})}}return n}},DD={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(qN),a=0;a<n.length;a++){var i=n[a],o=n[a+1];if(cr(i)&&i.value!=="none"){var l=o&&dc(o)?o.number:0;r.push({counter:i.value,reset:l})}}return r}},zD={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Su).map(function(r){return u_.parse(t,r)})}},OD={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(uT);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var o=a[i].value,l=a[i+1].value;n.push({open:o,close:l})}return n}},s5=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},RD={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Uy(e[0],"none")?[]:Gs(e).map(function(r){for(var n={color:255,offsetX:En,offsetY:En,blur:En,spread:En,inset:!1},a=0,i=0;i<r.length;i++){var o=r[i];Uy(o,"inset")?n.inset=!0:Io(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=_o.parse(t,o)}return n})}},MD={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(cr).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},HD={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},KD={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Su(e)?e.number:0}},$D=function(){function t(e,r){var n,a;this.animationDuration=dt(e,zD,r.animationDuration),this.backgroundClip=dt(e,gT,r.backgroundClip),this.backgroundColor=dt(e,pT,r.backgroundColor),this.backgroundImage=dt(e,jT,r.backgroundImage),this.backgroundOrigin=dt(e,NT,r.backgroundOrigin),this.backgroundPosition=dt(e,_T,r.backgroundPosition),this.backgroundRepeat=dt(e,ST,r.backgroundRepeat),this.backgroundSize=dt(e,FT,r.backgroundSize),this.borderTopColor=dt(e,LT,r.borderTopColor),this.borderRightColor=dt(e,QT,r.borderRightColor),this.borderBottomColor=dt(e,IT,r.borderBottomColor),this.borderLeftColor=dt(e,PT,r.borderLeftColor),this.borderTopLeftRadius=dt(e,TT,r.borderTopLeftRadius),this.borderTopRightRadius=dt(e,DT,r.borderTopRightRadius),this.borderBottomRightRadius=dt(e,zT,r.borderBottomRightRadius),this.borderBottomLeftRadius=dt(e,OT,r.borderBottomLeftRadius),this.borderTopStyle=dt(e,RT,r.borderTopStyle),this.borderRightStyle=dt(e,MT,r.borderRightStyle),this.borderBottomStyle=dt(e,HT,r.borderBottomStyle),this.borderLeftStyle=dt(e,KT,r.borderLeftStyle),this.borderTopWidth=dt(e,$T,r.borderTopWidth),this.borderRightWidth=dt(e,GT,r.borderRightWidth),this.borderBottomWidth=dt(e,VT,r.borderBottomWidth),this.borderLeftWidth=dt(e,WT,r.borderLeftWidth),this.boxShadow=dt(e,RD,r.boxShadow),this.color=dt(e,qT,r.color),this.direction=dt(e,JT,r.direction),this.display=dt(e,YT,r.display),this.float=dt(e,ZT,r.cssFloat),this.fontFamily=dt(e,FD,r.fontFamily),this.fontSize=dt(e,UD,r.fontSize),this.fontStyle=dt(e,ID,r.fontStyle),this.fontVariant=dt(e,QD,r.fontVariant),this.fontWeight=dt(e,LD,r.fontWeight),this.letterSpacing=dt(e,eD,r.letterSpacing),this.lineBreak=dt(e,tD,r.lineBreak),this.lineHeight=dt(e,rD,r.lineHeight),this.listStyleImage=dt(e,nD,r.listStyleImage),this.listStylePosition=dt(e,aD,r.listStylePosition),this.listStyleType=dt(e,Ly,r.listStyleType),this.marginTop=dt(e,sD,r.marginTop),this.marginRight=dt(e,iD,r.marginRight),this.marginBottom=dt(e,oD,r.marginBottom),this.marginLeft=dt(e,lD,r.marginLeft),this.opacity=dt(e,_D,r.opacity);var i=dt(e,AD,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=dt(e,cD,r.overflowWrap),this.paddingTop=dt(e,dD,r.paddingTop),this.paddingRight=dt(e,uD,r.paddingRight),this.paddingBottom=dt(e,hD,r.paddingBottom),this.paddingLeft=dt(e,fD,r.paddingLeft),this.paintOrder=dt(e,MD,r.paintOrder),this.position=dt(e,pD,r.position),this.textAlign=dt(e,gD,r.textAlign),this.textDecorationColor=dt(e,SD,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=dt(e,ED,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=dt(e,mD,r.textShadow),this.textTransform=dt(e,xD,r.textTransform),this.transform=dt(e,yD,r.transform),this.transformOrigin=dt(e,BD,r.transformOrigin),this.visibility=dt(e,CD,r.visibility),this.webkitTextStrokeColor=dt(e,HD,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=dt(e,KD,r.webkitTextStrokeWidth),this.wordBreak=dt(e,jD,r.wordBreak),this.zIndex=dt(e,ND,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return So(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return un(this.display,4)||un(this.display,33554432)||un(this.display,268435456)||un(this.display,536870912)||un(this.display,67108864)||un(this.display,134217728)},t}(),GD=function(){function t(e,r){this.content=dt(e,PD,r.content),this.quotes=dt(e,OD,r.quotes)}return t}(),i5=function(){function t(e,r){this.counterIncrement=dt(e,TD,r.counterIncrement),this.counterReset=dt(e,DD,r.counterReset)}return t}(),dt=function(t,e,r){var n=new VN,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var i=new WN(n.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(t,cr(o)?o.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return kg.parse(t,i.parseComponentValue());case"color":return _o.parse(t,i.parseComponentValue());case"image":return uw.parse(t,i.parseComponentValue());case"length":var l=i.parseComponentValue();return Io(l)?l:En;case"length-percentage":var A=i.parseComponentValue();return Yr(A)?A:En;case"time":return u_.parse(t,i.parseComponentValue())}break}},VD="data-html2canvas-debug",WD=function(t){var e=t.getAttribute(VD);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Qy=function(t,e){var r=WD(t);return r===1||e===r},Vs=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Qy(r,3))debugger;this.styles=new $D(e,window.getComputedStyle(r,null)),Ty(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=wg(this.context,r),Qy(r,4)&&(this.flags|=16)}return t}(),qD="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",o5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var m0=0;m0<o5.length;m0++)pd[o5.charCodeAt(m0)]=m0;var JD=function(t){var e=t.length*.75,r=t.length,n,a=0,i,o,l,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=pd[t.charCodeAt(n)],o=pd[t.charCodeAt(n+1)],l=pd[t.charCodeAt(n+2)],A=pd[t.charCodeAt(n+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|A&63;return c},YD=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},XD=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Nl=5,hw=11,Qm=2,ZD=hw-Nl,h_=65536>>Nl,ez=1<<Nl,Im=ez-1,tz=1024>>Nl,rz=h_+tz,nz=rz,az=32,sz=nz+az,iz=65536>>hw,oz=1<<ZD,lz=oz-1,l5=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Az=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},cz=function(t,e){var r=JD(t),n=Array.isArray(r)?XD(r):new Uint32Array(r),a=Array.isArray(r)?YD(r):new Uint16Array(r),i=24,o=l5(a,i/2,n[4]/2),l=n[5]===2?l5(a,(i+n[4])/2):Az(n,Math.ceil((i+n[4])/4));return new dz(n[0],n[1],n[2],n[3],o,l)},dz=function(){function t(e,r,n,a,i,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Nl],r=(r<<Qm)+(e&Im),this.data[r];if(e<=65535)return r=this.index[h_+(e-55296>>Nl)],r=(r<<Qm)+(e&Im),this.data[r];if(e<this.highStart)return r=sz-iz+(e>>hw),r=this.index[r],r+=e>>Nl&lz,r=this.index[r],r=(r<<Qm)+(e&Im),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),A5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uz=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var x0=0;x0<A5.length;x0++)uz[A5.charCodeAt(x0)]=x0;var hz=1,Pm=2,Tm=3,c5=4,d5=5,fz=7,u5=8,Dm=9,zm=10,h5=11,f5=12,g5=13,p5=14,Om=15,gz=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},pz=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,i="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},mz=cz(qD),$a="",Rm="",xz=function(t){return mz.get(t)},yz=function(t,e,r){var n=r-2,a=e[n],i=e[r-1],o=e[r];if(i===Pm&&o===Tm)return $a;if(i===Pm||i===Tm||i===c5||o===Pm||o===Tm||o===c5)return Rm;if(i===u5&&[u5,Dm,h5,f5].indexOf(o)!==-1||(i===h5||i===Dm)&&(o===Dm||o===zm)||(i===f5||i===zm)&&o===zm||o===g5||o===d5||o===fz||i===hz)return $a;if(i===g5&&o===p5){for(;a===d5;)a=e[--n];if(a===p5)return $a}if(i===Om&&o===Om){for(var l=0;a===Om;)l++,a=e[--n];if(l%2===0)return $a}return Rm},bz=function(t){var e=gz(t),r=e.length,n=0,a=0,i=e.map(xz);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=$a;n<r&&(o=yz(e,i,++n))===$a;);if(o!==$a||n===r){var l=pz.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},wz=function(t){for(var e=bz(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},vz=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),i=Math.round(a.height);if(t.body.removeChild(n),i===e)return!0}}return!1},kz=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=vg(n.data).map(function(A){return Rr(A)}),i=0,o={},l=a.every(function(A,c){r.setStart(n,i),r.setEnd(n,i+A.length);var d=r.getBoundingClientRect();i+=A.length;var h=d.x>o.x||d.y>o.y;return o=d,c===0?!0:h});return t.body.removeChild(e),l},Bz=function(){return typeof new Image().crossOrigin<"u"},Cz=function(){return typeof new XMLHttpRequest().responseType=="string"},jz=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},m5=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Nz=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,i=e.toDataURL();a.src=i;var o=Iy(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),x5(o).then(function(l){n.drawImage(l,0,0);var A=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",m5(A)?x5(Iy(r,r,0,0,c)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),m5(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Iy=function(t,e,r,n,a){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},x5=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},_n={get SUPPORT_RANGE_BOUNDS(){var t=vz(document);return Object.defineProperty(_n,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=_n.SUPPORT_RANGE_BOUNDS&&kz(document);return Object.defineProperty(_n,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=jz(document);return Object.defineProperty(_n,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Nz(document):Promise.resolve(!1);return Object.defineProperty(_n,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Bz();return Object.defineProperty(_n,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Cz();return Object.defineProperty(_n,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(_n,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(_n,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Id=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),_z=function(t,e,r,n){var a=Fz(e,r),i=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(_n.SUPPORT_RANGE_BOUNDS){var A=y5(n,o,l.length).getClientRects();if(A.length>1){var c=fw(l),d=0;c.forEach(function(p){i.push(new Id(p,_i.fromDOMRectList(t,y5(n,d+o,p.length).getClientRects()))),d+=p.length})}else i.push(new Id(l,_i.fromDOMRectList(t,A)))}else{var h=n.splitText(l.length);i.push(new Id(l,Sz(t,n))),n=h}else _n.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),i},Sz=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var i=wg(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),i}}return _i.EMPTY},y5=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},fw=function(t){if(_n.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return wz(t)},Ez=function(t,e){if(_n.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Lz(t,e)},Fz=function(t,e){return e.letterSpacing!==0?fw(t):Ez(t,e)},Uz=[32,160,4961,65792,65793,4153,4241],Lz=function(t,e){for(var r=iP(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,i=function(){if(a.value){var o=a.value.slice(),l=vg(o),A="";l.forEach(function(c){Uz.indexOf(c)===-1?A+=Rr(c):(A.length&&n.push(A),n.push(Rr(c)),A="")}),A.length&&n.push(A)}};!(a=r.next()).done;)i();return n},Qz=function(){function t(e,r,n){this.text=Iz(r.data,n.textTransform),this.textBounds=_z(e,this.text,n,r)}return t}(),Iz=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Pz,Tz);case 2:return t.toUpperCase();default:return t}},Pz=/(^|\s|:|-|\(|\))([a-z])/g,Tz=function(t,e,r){return t.length>0?e+r.toUpperCase():t},f_=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Vs),g_=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Vs),p_=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this,i=new XMLSerializer,o=wg(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Vs),m_=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Vs),Py=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Vs),Dz=[{type:15,flags:0,unit:"px",number:3}],zz=[{type:16,flags:0,number:50}],Oz=function(t){return t.width>t.height?new _i(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new _i(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Rz=function(t){var e=t.type===Mz?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Tf="checkbox",Df="radio",Mz="password",b5=707406591,gw=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=Rz(n),(a.type===Tf||a.type===Df)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=Oz(a.bounds)),a.type){case Tf:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Dz;break;case Df:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=zz;break}return a}return e}(Vs),x_=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return a.value=i&&i.text||"",a}return e}(Vs),y_=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Vs),b_=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=v_(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Ld(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):vi.TRANSPARENT,o=n.contentWindow.document.body?Ld(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):vi.TRANSPARENT;a.backgroundColor=So(i)?So(o)?a.styles.backgroundColor:o:i}}catch{}return a}return e}(Vs),Hz=["OL","UL","MENU"],V0=function(t,e,r,n){for(var a=e.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,k_(a)&&a.data.trim().length>0)r.textNodes.push(new Qz(t,a,r.styles));else if(EA(a))if(N_(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return V0(t,l,r,n)});else{var o=w_(t,a);o.styles.isVisible()&&(Kz(a,o,n)?o.flags|=4:$z(o.styles)&&(o.flags|=2),Hz.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?V0(t,a.shadowRoot,o,n):!zf(a)&&!B_(a)&&!Of(a)&&V0(t,a,o,n))}},w_=function(t,e){return Dy(e)?new f_(t,e):C_(e)?new g_(t,e):B_(e)?new p_(t,e):Gz(e)?new m_(t,e):Vz(e)?new Py(t,e):Wz(e)?new gw(t,e):Of(e)?new x_(t,e):zf(e)?new y_(t,e):j_(e)?new b_(t,e):new Vs(t,e)},v_=function(t,e){var r=w_(t,e);return r.flags|=4,V0(t,e,r,r),r},Kz=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||pw(t)&&r.styles.isTransparent()},$z=function(t){return t.isPositioned()||t.isFloating()},k_=function(t){return t.nodeType===Node.TEXT_NODE},EA=function(t){return t.nodeType===Node.ELEMENT_NODE},Ty=function(t){return EA(t)&&typeof t.style<"u"&&!W0(t)},W0=function(t){return typeof t.className=="object"},Gz=function(t){return t.tagName==="LI"},Vz=function(t){return t.tagName==="OL"},Wz=function(t){return t.tagName==="INPUT"},qz=function(t){return t.tagName==="HTML"},B_=function(t){return t.tagName==="svg"},pw=function(t){return t.tagName==="BODY"},C_=function(t){return t.tagName==="CANVAS"},w5=function(t){return t.tagName==="VIDEO"},Dy=function(t){return t.tagName==="IMG"},j_=function(t){return t.tagName==="IFRAME"},v5=function(t){return t.tagName==="STYLE"},Jz=function(t){return t.tagName==="SCRIPT"},zf=function(t){return t.tagName==="TEXTAREA"},Of=function(t){return t.tagName==="SELECT"},N_=function(t){return t.tagName==="SLOT"},k5=function(t){return t.tagName.indexOf("-")>0},Yz=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,i=!0;n!==null&&n.forEach(function(l){var A=r.counters[l.counter];A&&l.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=l.increment)});var o=[];return i&&a.forEach(function(l){var A=r.counters[l.counter];o.push(l.counter),A||(A=r.counters[l.counter]=[]),A.push(l.reset)}),o},t}(),B5={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},C5={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Xz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Zz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oA=function(t,e,r,n,a,i){return t<e||t>r?fu(t,a,i.length>0):n.integers.reduce(function(o,l,A){for(;t>=l;)t-=l,o+=n.values[A];return o},"")+i},__=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Or=function(t,e,r,n,a){var i=r-e+1;return(t<0?"-":"")+(__(Math.abs(t),i,n,function(o){return Rr(Math.floor(o%i)+e)})+a)},il=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return __(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},gA=1,eo=2,to=4,md=8,fi=function(t,e,r,n,a,i){if(t<-9999||t>9999)return fu(t,4,a.length>0);var o=Math.abs(t),l=a;if(o===0)return e[0]+l;for(var A=0;o>0&&A<=4;A++){var c=o%10;c===0&&un(i,gA)&&l!==""?l=e[c]+l:c>1||c===1&&A===0||c===1&&A===1&&un(i,eo)||c===1&&A===1&&un(i,to)&&t>100||c===1&&A>1&&un(i,md)?l=e[c]+(A>0?r[A-1]:"")+l:c===1&&A>0&&(l=r[A-1]+l),o=Math.floor(o/10)}return(t<0?n:"")+l},j5="",N5="",_5="",Mm="",fu=function(t,e,r){var n=r?". ":"",a=r?"":"",i=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Or(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return il(t,"",a);case 6:return oA(t,1,3999,B5,3,n).toLowerCase();case 7:return oA(t,1,3999,B5,3,n);case 8:return Or(t,945,969,!1,n);case 9:return Or(t,97,122,!1,n);case 10:return Or(t,65,90,!1,n);case 11:return Or(t,1632,1641,!0,n);case 12:case 49:return oA(t,1,9999,C5,3,n);case 35:return oA(t,1,9999,C5,3,n).toLowerCase();case 13:return Or(t,2534,2543,!0,n);case 14:case 30:return Or(t,6112,6121,!0,n);case 15:return il(t,"",a);case 16:return il(t,"",a);case 17:case 48:return fi(t,"",j5,"",a,eo|to|md);case 47:return fi(t,"",N5,"",a,gA|eo|to|md);case 42:return fi(t,"",j5,"",a,eo|to|md);case 41:return fi(t,"",N5,"",a,gA|eo|to|md);case 26:return fi(t,"","",_5,a,0);case 25:return fi(t,"","",_5,a,gA|eo|to);case 31:return fi(t,"","",Mm,i,gA|eo|to);case 33:return fi(t,"","",Mm,i,0);case 32:return fi(t,"","",Mm,i,gA|eo|to);case 18:return Or(t,2406,2415,!0,n);case 20:return oA(t,1,19999,Zz,3,n);case 21:return Or(t,2790,2799,!0,n);case 22:return Or(t,2662,2671,!0,n);case 22:return oA(t,1,10999,Xz,3,n);case 23:return il(t,"");case 24:return il(t,"");case 27:return Or(t,3302,3311,!0,n);case 28:return il(t,"",a);case 29:return il(t,"",a);case 34:return Or(t,3792,3801,!0,n);case 37:return Or(t,6160,6169,!0,n);case 38:return Or(t,4160,4169,!0,n);case 39:return Or(t,2918,2927,!0,n);case 40:return Or(t,1776,1785,!0,n);case 43:return Or(t,3046,3055,!0,n);case 44:return Or(t,3174,3183,!0,n);case 45:return Or(t,3664,3673,!0,n);case 46:return Or(t,3872,3881,!0,n);case 3:default:return Or(t,48,57,!0,n)}},S_="data-html2canvas-ignore",S5=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Yz,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=eO(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,A=l.document,c=nO(a).then(function(){return Yn(n,void 0,void 0,function(){var d,h;return Hn(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(oO),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,rO(A)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(A,h)}).then(function(){return a})]:[2,a]}})})});return A.open(),A.write(sO(document.doctype)+"<html></html>"),iO(this.referenceElement.ownerDocument,i,o),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(e){if(Qy(e,2))debugger;if(C_(e))return this.createCanvasClone(e);if(w5(e))return this.createVideoClone(e);if(v5(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return Dy(r)&&(Dy(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),k5(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Hm(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var i=e.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var A=l.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!EA(r)||!Jz(r)&&!r.hasAttribute(S_)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!EA(r)||!v5(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(EA(i)&&N_(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(k_(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&EA(e)&&(Ty(e)||W0(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var i=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&Ty(a)&&(this.clonedReferenceElement=a),pw(a)&&cO(a);var A=this.counters.parse(new i5(this.context,i)),c=this.resolvePseudoContent(e,a,o,Pd.BEFORE);k5(e)&&(r=!0),w5(e)||this.cloneChildNodes(e,a,r),c&&a.insertBefore(c,a.firstChild);var d=this.resolvePseudoContent(e,a,l,Pd.AFTER);return d&&a.appendChild(d),this.counters.pop(A),(i&&(this.options.copyStyles||W0(e))&&!j_(e)||r)&&Hm(i,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(zf(e)||Of(e))&&(zf(a)||Of(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var i=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new i5(this.context,n));var A=new GD(this.context,n),c=l.createElement("html2canvaspseudoelement");Hm(n,c),A.content.forEach(function(h){if(h.type===0)c.appendChild(l.createTextNode(h.value));else if(h.type===22){var p=l.createElement("img");p.src=h.value,p.style.opacity="1",c.appendChild(p)}else if(h.type===18){if(h.name==="attr"){var u=h.values.filter(cr);u.length&&c.appendChild(l.createTextNode(e.getAttribute(u[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(ec),b=y[0],v=y[1];if(b&&cr(b)){var g=i.counters.getCounterValue(b.value),m=v&&cr(v)?Ly.parse(i.context,v.value):3;c.appendChild(l.createTextNode(fu(g,m,!1)))}}else if(h.name==="counters"){var w=h.values.filter(ec),b=w[0],k=w[1],v=w[2];if(b&&cr(b)){var N=i.counters.getCounterValues(b.value),S=v&&cr(v)?Ly.parse(i.context,v.value):3,U=k&&k.type===0?k.value:"",Q=N.map(function(F){return fu(F,S,!1)}).join(U);c.appendChild(l.createTextNode(Q))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(l.createTextNode(s5(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(l.createTextNode(s5(A.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(l.createTextNode(h.value))}}),c.className=zy+" "+Oy;var d=a===Pd.BEFORE?" "+zy:" "+Oy;return W0(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Pd;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Pd||(Pd={}));var eO=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(S_,"true"),t.body.appendChild(r),r},tO=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},rO=function(t){return Promise.all([].slice.call(t.images,0).map(tO))},nO=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},aO=["all","d","content"],Hm=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);aO.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},sO=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},iO=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},oO=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},lO=":before",AO=":after",zy="___html2canvas___pseudoelement_before",Oy="___html2canvas___pseudoelement_after",E5=`{
    content: "" !important;
    display: none !important;
}`,cO=function(t){dO(t,"."+zy+lO+E5+`
         .`+Oy+AO+E5)},dO=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},E_=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),uO=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||($m(e)||pO(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Yn(this,void 0,void 0,function(){var r,n,a,i,o=this;return Hn(this,function(l){switch(l.label){case 0:return r=E_.isSameOrigin(e),n=!Km(e)&&this._options.useCORS===!0&&_n.SUPPORT_CORS_IMAGES&&!r,a=!Km(e)&&!r&&!$m(e)&&typeof this._options.proxy=="string"&&_n.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Km(e)&&!$m(e)&&!a&&!n?[2]:(i=e,a?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,c){var d=new Image;d.onload=function(){return A(d)},d.onerror=c,(mO(i)||n)&&(d.crossOrigin="anonymous"),d.src=i,d.complete===!0&&setTimeout(function(){return A(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(i,o){var l=_n.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(l==="text")i(A.response);else{var h=new FileReader;h.addEventListener("load",function(){return i(h.result)},!1),h.addEventListener("error",function(p){return o(p)},!1),h.readAsDataURL(A.response)}else o("Failed to proxy resource "+a+" with status code "+A.status)},A.onerror=o;var c=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;A.timeout=d,A.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}A.send()})},t}(),hO=/^data:image\/svg\+xml/i,fO=/^data:image\/.*;base64,/i,gO=/^data:image\/.*/i,pO=function(t){return _n.SUPPORT_SVG_DRAWING||!xO(t)},Km=function(t){return gO.test(t)},mO=function(t){return fO.test(t)},$m=function(t){return t.substr(0,4)==="blob"},xO=function(t){return t.substr(-3).toLowerCase()==="svg"||hO.test(t)},At=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),lA=function(t,e,r){return new At(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},y0=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=lA(this.start,this.startControl,e),a=lA(this.startControl,this.endControl,e),i=lA(this.endControl,this.end,e),o=lA(n,a,e),l=lA(a,i,e),A=lA(o,l,e);return r?new t(this.start,n,o,A):new t(A,l,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),qa=function(t){return t.type===1},yO=function(){function t(e){var r=e.styles,n=e.bounds,a=gd(r.borderTopLeftRadius,n.width,n.height),i=a[0],o=a[1],l=gd(r.borderTopRightRadius,n.width,n.height),A=l[0],c=l[1],d=gd(r.borderBottomRightRadius,n.width,n.height),h=d[0],p=d[1],u=gd(r.borderBottomLeftRadius,n.width,n.height),y=u[0],b=u[1],v=[];v.push((i+A)/n.width),v.push((y+h)/n.width),v.push((o+b)/n.height),v.push((c+p)/n.height);var g=Math.max.apply(Math,v);g>1&&(i/=g,o/=g,A/=g,c/=g,h/=g,p/=g,y/=g,b/=g);var m=n.width-A,w=n.height-p,k=n.width-h,N=n.height-b,S=r.borderTopWidth,U=r.borderRightWidth,Q=r.borderBottomWidth,L=r.borderLeftWidth,V=mr(r.paddingTop,e.bounds.width),F=mr(r.paddingRight,e.bounds.width),D=mr(r.paddingBottom,e.bounds.width),T=mr(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Br(n.left+L/3,n.top+S/3,i-L/3,o-S/3,rr.TOP_LEFT):new At(n.left+L/3,n.top+S/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Br(n.left+m,n.top+S/3,A-U/3,c-S/3,rr.TOP_RIGHT):new At(n.left+n.width-U/3,n.top+S/3),this.bottomRightBorderDoubleOuterBox=h>0||p>0?Br(n.left+k,n.top+w,h-U/3,p-Q/3,rr.BOTTOM_RIGHT):new At(n.left+n.width-U/3,n.top+n.height-Q/3),this.bottomLeftBorderDoubleOuterBox=y>0||b>0?Br(n.left+L/3,n.top+N,y-L/3,b-Q/3,rr.BOTTOM_LEFT):new At(n.left+L/3,n.top+n.height-Q/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Br(n.left+L*2/3,n.top+S*2/3,i-L*2/3,o-S*2/3,rr.TOP_LEFT):new At(n.left+L*2/3,n.top+S*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Br(n.left+m,n.top+S*2/3,A-U*2/3,c-S*2/3,rr.TOP_RIGHT):new At(n.left+n.width-U*2/3,n.top+S*2/3),this.bottomRightBorderDoubleInnerBox=h>0||p>0?Br(n.left+k,n.top+w,h-U*2/3,p-Q*2/3,rr.BOTTOM_RIGHT):new At(n.left+n.width-U*2/3,n.top+n.height-Q*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||b>0?Br(n.left+L*2/3,n.top+N,y-L*2/3,b-Q*2/3,rr.BOTTOM_LEFT):new At(n.left+L*2/3,n.top+n.height-Q*2/3),this.topLeftBorderStroke=i>0||o>0?Br(n.left+L/2,n.top+S/2,i-L/2,o-S/2,rr.TOP_LEFT):new At(n.left+L/2,n.top+S/2),this.topRightBorderStroke=i>0||o>0?Br(n.left+m,n.top+S/2,A-U/2,c-S/2,rr.TOP_RIGHT):new At(n.left+n.width-U/2,n.top+S/2),this.bottomRightBorderStroke=h>0||p>0?Br(n.left+k,n.top+w,h-U/2,p-Q/2,rr.BOTTOM_RIGHT):new At(n.left+n.width-U/2,n.top+n.height-Q/2),this.bottomLeftBorderStroke=y>0||b>0?Br(n.left+L/2,n.top+N,y-L/2,b-Q/2,rr.BOTTOM_LEFT):new At(n.left+L/2,n.top+n.height-Q/2),this.topLeftBorderBox=i>0||o>0?Br(n.left,n.top,i,o,rr.TOP_LEFT):new At(n.left,n.top),this.topRightBorderBox=A>0||c>0?Br(n.left+m,n.top,A,c,rr.TOP_RIGHT):new At(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||p>0?Br(n.left+k,n.top+w,h,p,rr.BOTTOM_RIGHT):new At(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||b>0?Br(n.left,n.top+N,y,b,rr.BOTTOM_LEFT):new At(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||o>0?Br(n.left+L,n.top+S,Math.max(0,i-L),Math.max(0,o-S),rr.TOP_LEFT):new At(n.left+L,n.top+S),this.topRightPaddingBox=A>0||c>0?Br(n.left+Math.min(m,n.width-U),n.top+S,m>n.width+U?0:Math.max(0,A-U),Math.max(0,c-S),rr.TOP_RIGHT):new At(n.left+n.width-U,n.top+S),this.bottomRightPaddingBox=h>0||p>0?Br(n.left+Math.min(k,n.width-L),n.top+Math.min(w,n.height-Q),Math.max(0,h-U),Math.max(0,p-Q),rr.BOTTOM_RIGHT):new At(n.left+n.width-U,n.top+n.height-Q),this.bottomLeftPaddingBox=y>0||b>0?Br(n.left+L,n.top+Math.min(N,n.height-Q),Math.max(0,y-L),Math.max(0,b-Q),rr.BOTTOM_LEFT):new At(n.left+L,n.top+n.height-Q),this.topLeftContentBox=i>0||o>0?Br(n.left+L+T,n.top+S+V,Math.max(0,i-(L+T)),Math.max(0,o-(S+V)),rr.TOP_LEFT):new At(n.left+L+T,n.top+S+V),this.topRightContentBox=A>0||c>0?Br(n.left+Math.min(m,n.width+L+T),n.top+S+V,m>n.width+L+T?0:A-L+T,c-(S+V),rr.TOP_RIGHT):new At(n.left+n.width-(U+F),n.top+S+V),this.bottomRightContentBox=h>0||p>0?Br(n.left+Math.min(k,n.width-(L+T)),n.top+Math.min(w,n.height+S+V),Math.max(0,h-(U+F)),p-(Q+D),rr.BOTTOM_RIGHT):new At(n.left+n.width-(U+F),n.top+n.height-(Q+D)),this.bottomLeftContentBox=y>0||b>0?Br(n.left+L+T,n.top+N,Math.max(0,y-(L+T)),b-(Q+D),rr.BOTTOM_LEFT):new At(n.left+L+T,n.top+n.height-(Q+D))}return t}(),rr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(rr||(rr={}));var Br=function(t,e,r,n,a){var i=4*((Math.sqrt(2)-1)/3),o=r*i,l=n*i,A=t+r,c=e+n;switch(a){case rr.TOP_LEFT:return new y0(new At(t,c),new At(t,c-l),new At(A-o,e),new At(A,e));case rr.TOP_RIGHT:return new y0(new At(t,e),new At(t+o,e),new At(A,c-l),new At(A,c));case rr.BOTTOM_RIGHT:return new y0(new At(A,e),new At(A,e+l),new At(t+o,c),new At(t,c));case rr.BOTTOM_LEFT:default:return new y0(new At(A,c),new At(A-o,c),new At(t,e+l),new At(t,e))}},Rf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},bO=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Mf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},wO=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),b0=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),vO=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),kO=function(t){return t.type===0},F_=function(t){return t.type===1},BO=function(t){return t.type===2},F5=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},CO=function(t,e,r,n,a){return t.map(function(i,o){switch(o){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+a);case 3:return i.add(e,r+a)}return i})},U_=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),L_=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new yO(this.container),this.container.styles.opacity<1&&this.effects.push(new vO(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new wO(n,a,i))}if(this.container.styles.overflowX!==0){var o=Rf(this.curves),l=Mf(this.curves);F5(o,l)?this.effects.push(new b0(o,6)):(this.effects.push(new b0(o,2)),this.effects.push(new b0(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var i=n.effects.filter(function(A){return!F_(A)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=Rf(n.curves),l=Mf(n.curves);F5(o,l)||a.unshift(new b0(l,6))}}else a.unshift.apply(a,i);n=n.parent}return a.filter(function(A){return un(A.target,e)})},t}(),Ry=function(t,e,r,n){t.container.elements.forEach(function(a){var i=un(a.flags,4),o=un(a.flags,2),l=new L_(a,t);un(a.styles.display,2048)&&n.push(l);var A=un(a.flags,8)?[]:n;if(i||o){var c=i||a.styles.isPositioned()?r:e,d=new U_(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var p=0;c.negativeZIndex.some(function(y,b){return h>y.element.container.styles.zIndex.order?(p=b,!1):p>0}),c.negativeZIndex.splice(p,0,d)}else if(h>0){var u=0;c.positiveZIndex.some(function(y,b){return h>=y.element.container.styles.zIndex.order?(u=b+1,!1):u>0}),c.positiveZIndex.splice(u,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);Ry(l,d,i?d:r,A)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),Ry(l,e,r,A);un(a.flags,8)&&Q_(a,A)})},Q_=function(t,e){for(var r=t instanceof Py?t.start:1,n=t instanceof Py?t.reversed:!1,a=0;a<e.length;a++){var i=e[a];i.container instanceof m_&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=fu(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},jO=function(t){var e=new L_(t,null),r=new U_(e),n=[];return Ry(e,r,r,n),Q_(e.container,n),r},U5=function(t,e){switch(e){case 0:return Xa(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Xa(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Xa(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Xa(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},NO=function(t,e){switch(e){case 0:return Xa(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Xa(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Xa(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Xa(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},_O=function(t,e){switch(e){case 0:return Xa(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Xa(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Xa(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Xa(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},SO=function(t,e){switch(e){case 0:return w0(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return w0(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return w0(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return w0(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},w0=function(t,e){var r=[];return qa(t)?r.push(t.subdivide(.5,!1)):r.push(t),qa(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Xa=function(t,e,r,n){var a=[];return qa(t)?a.push(t.subdivide(.5,!1)):a.push(t),qa(r)?a.push(r.subdivide(.5,!0)):a.push(r),qa(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),qa(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},I_=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Hf=function(t){var e=t.styles,r=t.bounds,n=mr(e.paddingLeft,r.width),a=mr(e.paddingRight,r.width),i=mr(e.paddingTop,r.width),o=mr(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+i+o))},EO=function(t,e){return t===0?e.bounds:t===2?Hf(e):I_(e)},FO=function(t,e){return t===0?e.bounds:t===2?Hf(e):I_(e)},Gm=function(t,e,r){var n=EO(pA(t.styles.backgroundOrigin,e),t),a=FO(pA(t.styles.backgroundClip,e),t),i=UO(pA(t.styles.backgroundSize,e),r,n),o=i[0],l=i[1],A=gd(pA(t.styles.backgroundPosition,e),n.width-o,n.height-l),c=LO(pA(t.styles.backgroundRepeat,e),A,i,n,a),d=Math.round(n.left+A[0]),h=Math.round(n.top+A[1]);return[c,d,h,o,l]},AA=function(t){return cr(t)&&t.value===MA.AUTO},v0=function(t){return typeof t=="number"},UO=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(Yr(o)&&l&&Yr(l))return[mr(o,r.width),mr(l,r.height)];var A=v0(i);if(cr(o)&&(o.value===MA.CONTAIN||o.value===MA.COVER)){if(v0(i)){var c=r.width/r.height;return c<i!=(o.value===MA.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var d=v0(n),h=v0(a),p=d||h;if(AA(o)&&(!l||AA(l))){if(d&&h)return[n,a];if(!A&&!p)return[r.width,r.height];if(p&&A){var u=d?n:a*i,y=h?a:n/i;return[u,y]}var b=d?n:r.width,v=h?a:r.height;return[b,v]}if(A){var g=0,m=0;return Yr(o)?g=mr(o,r.width):Yr(l)&&(m=mr(l,r.height)),AA(o)?g=m*i:(!l||AA(l))&&(m=g/i),[g,m]}var w=null,k=null;if(Yr(o)?w=mr(o,r.width):l&&Yr(l)&&(k=mr(l,r.height)),w!==null&&(!l||AA(l))&&(k=d&&h?w/n*a:r.height),k!==null&&AA(o)&&(w=d&&h?k/a*n:r.width),w!==null&&k!==null)return[w,k];throw new Error("Unable to calculate background-size for element")},pA=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},LO=function(t,e,r,n,a){var i=e[0],o=e[1],l=r[0],A=r[1];switch(t){case 2:return[new At(Math.round(n.left),Math.round(n.top+o)),new At(Math.round(n.left+n.width),Math.round(n.top+o)),new At(Math.round(n.left+n.width),Math.round(A+n.top+o)),new At(Math.round(n.left),Math.round(A+n.top+o))];case 3:return[new At(Math.round(n.left+i),Math.round(n.top)),new At(Math.round(n.left+i+l),Math.round(n.top)),new At(Math.round(n.left+i+l),Math.round(n.height+n.top)),new At(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new At(Math.round(n.left+i),Math.round(n.top+o)),new At(Math.round(n.left+i+l),Math.round(n.top+o)),new At(Math.round(n.left+i+l),Math.round(n.top+o+A)),new At(Math.round(n.left+i),Math.round(n.top+o+A))];default:return[new At(Math.round(a.left),Math.round(a.top)),new At(Math.round(a.left+a.width),Math.round(a.top)),new At(Math.round(a.left+a.width),Math.round(a.height+a.top)),new At(Math.round(a.left),Math.round(a.height+a.top))]}},QO="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",L5="Hidden Text",IO=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=QO,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(L5)),n.appendChild(i),n.appendChild(a);var l=a.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(L5)),n.style.lineHeight="normal",a.style.verticalAlign="super";var A=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:A}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),P_=function(){function t(e,r){this.context=e,this.options=r}return t}(),PO=1e4,TO=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new IO(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),BO(r)&&(this.ctx.globalAlpha=r.opacity),kO(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),F_(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Yn(this,void 0,void 0,function(){var n;return Hn(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Yn(this,void 0,void 0,function(){return Hn(this,function(n){switch(n.label){case 0:if(un(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=fw(r.text);o.reduce(function(l,A){return i.ctx.fillText(A,l,r.bounds.top+a),l+i.ctx.measureText(A).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=MO(r.fontFamily).join(", "),i=Su(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,a].join(" "),a,i]},e.prototype.renderTextNode=function(r,n){return Yn(this,void 0,void 0,function(){var a,i,o,l,A,c,d,h,p=this;return Hn(this,function(u){return a=this.createFontStyle(n),i=a[0],o=a[1],l=a[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(o,l),c=A.baseline,d=A.middle,h=n.paintOrder,r.textBounds.forEach(function(y){h.forEach(function(b){switch(b){case 0:p.ctx.fillStyle=fn(n.color),p.renderTextWithLetterSpacing(y,n.letterSpacing,c);var v=n.textShadow;v.length&&y.text.trim().length&&(v.slice(0).reverse().forEach(function(g){p.ctx.shadowColor=fn(g.color),p.ctx.shadowOffsetX=g.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=g.offsetY.number*p.options.scale,p.ctx.shadowBlur=g.blur.number,p.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),n.textDecorationLine.length&&(p.ctx.fillStyle=fn(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(g){switch(g){case 1:p.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:p.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:p.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(p.ctx.strokeStyle=fn(n.webkitTextStrokeColor),p.ctx.lineWidth=n.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=Hf(r),o=Mf(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Yn(this,void 0,void 0,function(){var n,a,i,o,l,A,m,m,c,d,h,p,k,u,y,N,b,v,g,m,w,k,N;return Hn(this,function(S){switch(S.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,i=n.styles,o=0,l=n.textNodes,S.label=1;case 1:return o<l.length?(A=l[o],[4,this.renderTextNode(A,i)]):[3,4];case 2:S.sent(),S.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof f_))return[3,8];S.label=5;case 5:return S.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return m=S.sent(),this.renderReplacedElement(n,a,m),[3,8];case 7:return S.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof g_&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof p_))return[3,12];S.label=9;case 9:return S.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return m=S.sent(),this.renderReplacedElement(n,a,m),[3,12];case 11:return S.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof b_&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=S.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),S.label=14;case 14:if(n instanceof gw&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===Tf?n.checked&&(this.ctx.save(),this.path([new At(n.bounds.left+h*.39363,n.bounds.top+h*.79),new At(n.bounds.left+h*.16,n.bounds.top+h*.5549),new At(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new At(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new At(n.bounds.left+h*.72983,n.bounds.top+h*.23),new At(n.bounds.left+h*.84,n.bounds.top+h*.34085),new At(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=fn(b5),this.ctx.fill(),this.ctx.restore()):n.type===Df&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=fn(b5),this.ctx.fill(),this.ctx.restore())),DO(n)&&n.value.length){switch(p=this.createFontStyle(i),k=p[0],u=p[1],y=this.fontMetrics.getMetrics(k,u).baseline,this.ctx.font=k,this.ctx.fillStyle=fn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=OO(n.styles.textAlign),N=Hf(n),b=0,n.styles.textAlign){case 1:b+=N.width/2;break;case 2:b+=N.width;break}v=N.add(b,0,0,-N.height/2+1),this.ctx.save(),this.path([new At(N.left,N.top),new At(N.left+N.width,N.top),new At(N.left+N.width,N.top+N.height),new At(N.left,N.top+N.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Id(n.value,v),i.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!un(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(g=n.styles.listStyleImage,g.type!==0)return[3,18];m=void 0,w=g.url,S.label=15;case 15:return S.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return m=S.sent(),this.ctx.drawImage(m,n.bounds.left-(m.width+10),n.bounds.top),[3,18];case 17:return S.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(k=this.createFontStyle(i)[0],this.ctx.font=k,this.ctx.fillStyle=fn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",N=new _i(n.bounds.left,n.bounds.top+mr(n.styles.paddingTop,n.bounds.width),n.bounds.width,n5(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Id(r.listValue,N),i.letterSpacing,n5(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),S.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Yn(this,void 0,void 0,function(){var n,a,g,i,o,g,l,A,g,c,d,g,h,p,g,u,y,g,b,v,g;return Hn(this,function(m){switch(m.label){case 0:if(un(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:m.sent(),n=0,a=r.negativeZIndex,m.label=2;case 2:return n<a.length?(g=a[n],[4,this.renderStack(g)]):[3,5];case 3:m.sent(),m.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:m.sent(),i=0,o=r.nonInlineLevel,m.label=7;case 7:return i<o.length?(g=o[i],[4,this.renderNode(g)]):[3,10];case 8:m.sent(),m.label=9;case 9:return i++,[3,7];case 10:l=0,A=r.nonPositionedFloats,m.label=11;case 11:return l<A.length?(g=A[l],[4,this.renderStack(g)]):[3,14];case 12:m.sent(),m.label=13;case 13:return l++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,m.label=15;case 15:return c<d.length?(g=d[c],[4,this.renderStack(g)]):[3,18];case 16:m.sent(),m.label=17;case 17:return c++,[3,15];case 18:h=0,p=r.inlineLevel,m.label=19;case 19:return h<p.length?(g=p[h],[4,this.renderNode(g)]):[3,22];case 20:m.sent(),m.label=21;case 21:return h++,[3,19];case 22:u=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return u<y.length?(g=y[u],[4,this.renderStack(g)]):[3,26];case 24:m.sent(),m.label=25;case 25:return u++,[3,23];case 26:b=0,v=r.positiveZIndex,m.label=27;case 27:return b<v.length?(g=v[b],[4,this.renderStack(g)]):[3,30];case 28:m.sent(),m.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,i){var o=qa(a)?a.start:a;i===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),qa(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},e.prototype.resizeImage=function(r,n,a){var i;if(r.width===n&&r.height===a)return r;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var A=l.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Yn(this,void 0,void 0,function(){var n,a,i,o,l,A;return Hn(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var h,p,u,V,ce,ue,T,G,Q,y,V,ce,ue,T,G,b,v,g,m,w,k,N,S,U,Q,L,V,F,D,T,G,ne,ce,ue,Y,Ae,fe,we,E,z,K,W;return Hn(this,function(J){switch(J.label){case 0:if(d.type!==0)return[3,5];h=void 0,p=d.url,J.label=1;case 1:return J.trys.push([1,3,,4]),[4,i.context.cache.match(p)];case 2:return h=J.sent(),[3,4];case 3:return J.sent(),i.context.logger.error("Error loading background-image "+p),[3,4];case 4:return h&&(u=Gm(r,n,[h.width,h.height,h.width/h.height]),V=u[0],ce=u[1],ue=u[2],T=u[3],G=u[4],Q=i.ctx.createPattern(i.resizeImage(h,T,G),"repeat"),i.renderRepeat(V,Q,ce,ue)),[3,6];case 5:kT(d)?(y=Gm(r,n,[null,null,null]),V=y[0],ce=y[1],ue=y[2],T=y[3],G=y[4],b=xT(d.angle,T,G),v=b[0],g=b[1],m=b[2],w=b[3],k=b[4],N=document.createElement("canvas"),N.width=T,N.height=G,S=N.getContext("2d"),U=S.createLinearGradient(g,w,m,k),t5(d.stops,v).forEach(function(re){return U.addColorStop(re.stop,fn(re.color))}),S.fillStyle=U,S.fillRect(0,0,T,G),T>0&&G>0&&(Q=i.ctx.createPattern(N,"repeat"),i.renderRepeat(V,Q,ce,ue))):BT(d)&&(L=Gm(r,n,[null,null,null]),V=L[0],F=L[1],D=L[2],T=L[3],G=L[4],ne=d.position.length===0?[dw]:d.position,ce=mr(ne[0],T),ue=mr(ne[ne.length-1],G),Y=yT(d,ce,ue,T,G),Ae=Y[0],fe=Y[1],Ae>0&&fe>0&&(we=i.ctx.createRadialGradient(F+ce,D+ue,0,F+ce,D+ue,Ae),t5(d.stops,Ae*2).forEach(function(re){return we.addColorStop(re.stop,fn(re.color))}),i.path(V),i.ctx.fillStyle=we,Ae!==fe?(E=r.bounds.left+.5*r.bounds.width,z=r.bounds.top+.5*r.bounds.height,K=fe/Ae,W=1/K,i.ctx.save(),i.ctx.translate(E,z),i.ctx.transform(1,0,0,K,0,0),i.ctx.translate(-E,-z),i.ctx.fillRect(F,W*(D-z)+z,T,G*W),i.ctx.restore()):i.ctx.fill())),J.label=6;case 6:return n--,[2]}})},i=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return o<l.length?(A=l[o],[5,a(A)]):[3,4];case 2:c.sent(),c.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Yn(this,void 0,void 0,function(){return Hn(this,function(i){return this.path(U5(a,n)),this.ctx.fillStyle=fn(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,i){return Yn(this,void 0,void 0,function(){var o,l;return Hn(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,i)]:[3,2];case 1:return A.sent(),[2];case 2:return o=NO(i,a),this.path(o),this.ctx.fillStyle=fn(r),this.ctx.fill(),l=_O(i,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Yn(this,void 0,void 0,function(){var n,a,i,o,l,A,c,d,h=this;return Hn(this,function(p){switch(p.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!So(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=zO(pA(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),So(n.backgroundColor)||(this.ctx.fillStyle=fn(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(u){h.ctx.save();var y=Rf(r.curves),b=u.inset?0:PO,v=CO(y,-b+(u.inset?1:-1)*u.spread.number,(u.inset?1:-1)*u.spread.number,u.spread.number*(u.inset?-2:2),u.spread.number*(u.inset?-2:2));u.inset?(h.path(y),h.ctx.clip(),h.mask(v)):(h.mask(y),h.ctx.clip(),h.path(v)),h.ctx.shadowOffsetX=u.offsetX.number+b,h.ctx.shadowOffsetY=u.offsetY.number,h.ctx.shadowColor=fn(u.color),h.ctx.shadowBlur=u.blur.number,h.ctx.fillStyle=u.inset?fn(u.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),p.label=2;case 2:l=0,A=0,c=i,p.label=3;case 3:return A<c.length?(d=c[A],d.style!==0&&!So(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return p.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:p.sent(),p.label=11;case 11:l++,p.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,i,o){return Yn(this,void 0,void 0,function(){var l,A,c,d,h,p,u,y,b,v,g,m,w,k,N,S,N,S;return Hn(this,function(U){return this.ctx.save(),l=SO(i,a),A=U5(i,a),o===2&&(this.path(A),this.ctx.clip()),qa(A[0])?(c=A[0].start.x,d=A[0].start.y):(c=A[0].x,d=A[0].y),qa(A[1])?(h=A[1].end.x,p=A[1].end.y):(h=A[1].x,p=A[1].y),a===0||a===2?u=Math.abs(c-h):u=Math.abs(d-p),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(A.slice(0,2)),y=n<3?n*3:n*2,b=n<3?n*2:n,o===3&&(y=n,b=n),v=!0,u<=y*2?v=!1:u<=y*2+b?(g=u/(2*y+b),y*=g,b*=g):(m=Math.floor((u+b)/(y+b)),w=(u-m*y)/(m-1),k=(u-(m+1)*y)/m,b=k<=0||Math.abs(b-w)<Math.abs(b-k)?w:k),v&&(o===3?this.ctx.setLineDash([0,y+b]):this.ctx.setLineDash([y,b])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=fn(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(qa(A[0])&&(N=A[3],S=A[0],this.ctx.beginPath(),this.formatPath([new At(N.end.x,N.end.y),new At(S.start.x,S.start.y)]),this.ctx.stroke()),qa(A[1])&&(N=A[1],S=A[2],this.ctx.beginPath(),this.formatPath([new At(N.end.x,N.end.y),new At(S.start.x,S.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Yn(this,void 0,void 0,function(){var n;return Hn(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=fn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=jO(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(P_),DO=function(t){return t instanceof y_||t instanceof x_?!0:t instanceof gw&&t.type!==Df&&t.type!==Tf},zO=function(t,e){switch(t){case 0:return Rf(e);case 2:return bO(e);case 1:default:return Mf(e)}},OO=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},RO=["-apple-system","system-ui"],MO=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return RO.indexOf(e)===-1}):t},HO=function(t){Bs(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Yn(this,void 0,void 0,function(){var n,a;return Hn(this,function(i){switch(i.label){case 0:return n=Iy(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,KO(n)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=fn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(P_),KO=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},$O=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,e0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,e0([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,e0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,e0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),GO=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new $O({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new uO(this,e)}return t.instanceCount=1,t}(),Fg=function(t,e){return e===void 0&&(e={}),VO(t,e)};typeof window<"u"&&E_.setContext(window);var VO=function(t,e){return Yn(void 0,void 0,void 0,function(){var r,n,a,i,o,l,A,c,d,h,p,u,y,b,v,g,m,w,k,N,U,S,U,Q,L,V,F,D,T,G,ne,ce,ue,Y,Ae,fe,we,E,z,K;return Hn(this,function(W){switch(W.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(Q=e.allowTaint)!==null&&Q!==void 0?Q:!1,imageTimeout:(L=e.imageTimeout)!==null&&L!==void 0?L:15e3,proxy:e.proxy,useCORS:(V=e.useCORS)!==null&&V!==void 0?V:!1},i=by({logging:(F=e.logging)!==null&&F!==void 0?F:!0,cache:e.cache},a),o={windowWidth:(D=e.windowWidth)!==null&&D!==void 0?D:n.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:n.innerHeight,scrollX:(G=e.scrollX)!==null&&G!==void 0?G:n.pageXOffset,scrollY:(ne=e.scrollY)!==null&&ne!==void 0?ne:n.pageYOffset},l=new _i(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),A=new GO(i,l),c=(ce=e.foreignObjectRendering)!==null&&ce!==void 0?ce:!1,d={allowTaint:(ue=e.allowTaint)!==null&&ue!==void 0?ue:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},A.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),h=new S5(A,t,d),p=h.clonedReferenceElement,p?[4,h.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return u=W.sent(),y=pw(p)||qz(p)?C7(p.ownerDocument):wg(A,p),b=y.width,v=y.height,g=y.left,m=y.top,w=WO(A,p,e.backgroundColor),k={canvas:e.canvas,backgroundColor:w,scale:(Ae=(Y=e.scale)!==null&&Y!==void 0?Y:n.devicePixelRatio)!==null&&Ae!==void 0?Ae:1,x:((fe=e.x)!==null&&fe!==void 0?fe:0)+g,y:((we=e.y)!==null&&we!==void 0?we:0)+m,width:(E=e.width)!==null&&E!==void 0?E:Math.ceil(b),height:(z=e.height)!==null&&z!==void 0?z:Math.ceil(v)},c?(A.logger.debug("Document cloned, using foreign object rendering"),U=new HO(A,k),[4,U.render(p)]):[3,3];case 2:return N=W.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+g+","+m+" with size "+b+"x"+v+" using computed rendering"),A.logger.debug("Starting DOM parsing"),S=v_(A,p),w===S.styles.backgroundColor&&(S.styles.backgroundColor=vi.TRANSPARENT),A.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),U=new TO(A,k),[4,U.render(S)];case 4:N=W.sent(),W.label=5;case 5:return(!((K=e.removeContainer)!==null&&K!==void 0)||K)&&(S5.destroy(u)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,N]}})})},WO=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?Ld(t,getComputedStyle(n.documentElement).backgroundColor):vi.TRANSPARENT,i=n.body?Ld(t,getComputedStyle(n.body).backgroundColor):vi.TRANSPARENT,o=typeof r=="string"?Ld(t,r):r===null?vi.TRANSPARENT:4294967295;return e===n.documentElement?So(a)?So(i)?o:i:a:o};const qO=Object.freeze(Object.defineProperty({__proto__:null,default:Fg},Symbol.toStringTag,{value:"Module"})),JO=t=>{const e={weekday:"long",year:"numeric",month:"long",day:"numeric"},n=new Date(t).toLocaleDateString("pl-PL",e);return n.charAt(0).toUpperCase()+n.slice(1)},T_=(t,e,r={})=>{var h;let n=0;const a={};(h=t.schedule)==null||h.forEach(p=>{var u;(p.element||"").toLowerCase().includes("uwielbienie")&&((u=p.selectedSongs)==null?void 0:u.length)>0&&p.selectedSongs.forEach(y=>{n++,a[y.songId]=n})});const i={primary:"#db2777",primaryLight:"#fdf2f8",primaryBorder:"#fbcfe8",sectionAccent:"#ea580c",textMain:"#1e293b",textMuted:"#64748b",border:"#e2e8f0",bgGray:"#f8fafc"},o=p=>{if(!p)return'<span style="color:#9ca3af; font-style:italic;">Brak akordw</span>';const u=/(intro|ref\.|zwr\.|bridge|tag|outro|pre-chorus|instrumentalne)/gi;return p.replace(u,y=>`<span style="color: ${i.sectionAccent}; font-weight: 700;">${y}</span>`)},l=()=>{var p;return`
      <div style="margin-bottom: 40px;">
        <div style="display: flex; align-items: center; margin-bottom: 16px; border-bottom: 2px solid ${i.primary}; padding-bottom: 8px;">
            <h2 style="font-family: 'Roboto', sans-serif; font-size: 18px; font-weight: 700; color: ${i.textMain}; margin: 0;">
                PLAN SZCZEGOWY
            </h2>
        </div>
        <table style="width: 100%; border-collapse: separate; border-spacing: 0; table-layout: fixed;">
          <thead>
            <tr style="background-color: ${i.bgGray};">
              <th style="width: 20%; padding: 8px 12px; text-align: left; font-weight: 700; font-size: 10px; color: ${i.textMuted}; text-transform: uppercase; letter-spacing: 0.8px; border-top: 1px solid ${i.border}; border-bottom: 1px solid ${i.border}; font-family: 'Roboto', sans-serif; vertical-align: middle;">Element</th>
              <th style="width: 35%; padding: 8px 12px; text-align: left; font-weight: 700; font-size: 10px; color: ${i.textMuted}; text-transform: uppercase; letter-spacing: 0.8px; border-top: 1px solid ${i.border}; border-bottom: 1px solid ${i.border}; font-family: 'Roboto', sans-serif; vertical-align: middle;">Osoba Odpowiedzialna</th>
              <th style="width: 45%; padding: 8px 12px; text-align: left; font-weight: 700; font-size: 10px; color: ${i.textMuted}; text-transform: uppercase; letter-spacing: 0.8px; border-top: 1px solid ${i.border}; border-bottom: 1px solid ${i.border}; font-family: 'Roboto', sans-serif; vertical-align: middle;">Szczegy / Pieni</th>
            </tr>
          </thead>
          <tbody>
            ${((p=t.schedule)==null?void 0:p.map((u,y)=>{var b;return`
              <tr style="border-bottom: 1px solid ${i.border};">
                
                <!-- KOLUMNA 1: ELEMENT (Przesunicie -5px) -->
                <td style="padding: 8px 12px 10px 12px; border-bottom: 1px solid ${i.border}; color: ${i.textMain}; font-weight: 600; font-size: 12px; font-family: 'Roboto', sans-serif; vertical-align: middle; word-wrap: break-word;">
                  <span style="display: inline-block; position: relative; top: -5px;">
                    ${u.element||"-"}
                  </span>
                </td>

                <!-- KOLUMNA 2: OSOBA (Przesunicie -5px wewntrz plakietki) -->
                <td style="padding: 8px 12px 10px 12px; border-bottom: 1px solid ${i.border}; vertical-align: middle; word-wrap: break-word;">
                   ${u.person?`
                    <span style="
                        display: inline-block; 
                        background-color: #f1f5f9; 
                        color: #334155; 
                        border: 1px solid #e2e8f0; 
                        border-radius: 4px; 
                        padding: 4px 10px 4px 10px; 
                        font-size: 11px; 
                        font-weight: 600; 
                        font-family: 'Roboto', sans-serif; 
                        vertical-align: middle;
                    ">
                        <span style="display: inline-block; position: relative; top: -5px;">
                            ${u.person}
                        </span>
                    </span>
                   `:`
                    <span style="display: inline-block; position: relative; top: -5px; color: #cbd5e1; font-size: 11px;">-</span>
                   `}
                </td>

                <!-- KOLUMNA 3: SZCZEGY / PIENI -->
                <td style="padding: 8px 12px 10px 12px; border-bottom: 1px solid ${i.border}; vertical-align: middle;">
                  ${(u.element||"").toLowerCase().includes("uwielbienie")&&((b=u.selectedSongs)==null?void 0:b.length)>0?`
                    <div style="display: flex; flex-direction: column; gap: 3px;">
                      ${u.selectedSongs.map(v=>{const g=e[v.songId],m=a[v.songId];return g?`
                          <div style="display: flex; align-items: center; gap: 8px;">
                            
                            <!-- NUMER PIENI: Kko zostaje, cyfra leci -5px do gry -->
                            <span style="display: flex; align-items: center; justify-content: center; width: 16px; height: 16px; background-color: ${i.primary}; color: white; border-radius: 50%; font-size: 9px; font-weight: 700;">
                                <span style="position: relative; top: -5px;">${m}</span>
                            </span>
                            
                            <!-- TYTU PIENI: Leci -5px do gry -->
                            <span style="font-size: 12px; font-weight: 500; color: ${i.textMain}; font-family: 'Roboto', sans-serif;">
                              <span style="position: relative; top: -5px;">${g.title}</span>
                            </span>
                            
                            <!-- TONACJA: To zostaje, tekst leci -5px do gry -->
                            <span style="background-color: ${i.primaryLight}; color: ${i.primary}; padding: 1px 5px; border-radius: 3px; font-size: 10px; font-weight: 700; border: 1px solid ${i.primaryBorder};">
                                <span style="position: relative; top: -5px;">${v.key}</span>
                            </span>

                          </div>
                        `:""}).join("")}
                    </div>`:`
                    <!-- ZWYKE SZCZEGY: Przesunicie -5px -->
                    <span style="display: inline-block; position: relative; top: -5px; color: ${i.textMuted}; font-size: 12px; font-family: 'Roboto', sans-serif;">
                        ${u.details||"-"}
                    </span>
                    `}
                </td>
              </tr>
            `}).join(""))||""}
          </tbody>
        </table>
      </div>
    `},A=(p,u)=>{const y=u.filter(v=>{var g;return(g=v.value)==null?void 0:g.trim()});if(y.length===0)return"";const b=y.length===1?"1fr":y.length===2?"repeat(2, 1fr)":"repeat(3, 1fr)";return`
      <div style="page-break-inside: avoid; margin-bottom: 24px; background: white; border-radius: 8px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); border: 1px solid ${i.border}; border-top: 4px solid ${i.sectionAccent};">
        <h3 style="font-family: 'Roboto', sans-serif; font-size: 13px; font-weight: 700; color: ${i.textMuted}; margin-top: 0; margin-bottom: 16px; text-transform: uppercase; letter-spacing: 1px;">
          ${p}
        </h3>
        <div style="display: grid; grid-template-columns: ${b}; gap: 20px;">
          ${y.map(v=>`
            <div>
              <div style="font-family: 'Roboto', sans-serif; font-size: 11px; font-weight: 600; color: ${i.sectionAccent}; margin-bottom: 4px;">
                ${v.label}
              </div>
              <div style="font-family: 'Roboto', sans-serif; font-size: 13px; color: ${i.textMain}; line-height: 1.4; font-weight: 500;">
                ${v.value}
              </div>
            </div>
          `).join("")}
        </div>
      </div>
    `},c=()=>{var g,m,w,k;const p=((g=r.worship)==null?void 0:g.length)>0?r.worship.map(N=>({key:N.field_key,label:N.name})):[{key:"lider",label:"Lider Uwielbienia"},{key:"piano",label:"Piano"},{key:"gitara_akustyczna",label:"Gitara Akustyczna"},{key:"gitara_elektryczna",label:"Gitara Elektryczna"},{key:"bas",label:"Gitara Basowa"},{key:"wokale",label:"Wokale"},{key:"cajon",label:"Cajon / Perkusja"}],u=((m=r.media)==null?void 0:m.length)>0?r.media.map(N=>({key:N.field_key,label:N.name})):[{key:"naglosnienie",label:"Nagonienie"},{key:"propresenter",label:"ProPresenter"},{key:"social",label:"Social Media"},{key:"host",label:"Host"}],y=((w=r.atmosfera)==null?void 0:w.length)>0?r.atmosfera.map(N=>({key:N.field_key,label:N.name})):[{key:"przygotowanie",label:"Przygotowanie"},{key:"witanie",label:"Witanie"}],b=((k=r.kidsGroups)==null?void 0:k.length)>0?[{key:"temat",label:"Temat lekcji"},...r.kidsGroups.map(N=>({key:N.id,label:N.name}))]:[{key:"temat",label:"Temat lekcji"},{key:"mlodsza",label:"Grupa Modsza"},{key:"srednia",label:"Grupa rednia"},{key:"starsza",label:"Grupa Starsza"}];return[{title:"Atmosfera Team",data:t.atmosfera_team,fields:y},{title:"MediaTeam",data:t.produkcja,fields:u},{title:"Scena",data:t.scena,fields:[{key:"prowadzenie",label:"Prowadzenie"},{key:"modlitwa",label:"Modlitwa"},{key:"kazanie",label:"Kazanie"},{key:"wieczerza",label:"Wieczerza"},{key:"ogloszenia",label:"Ogoszenia"}]},{title:"Szkka Niedzielna",data:t.szkolka,fields:b},{title:"Zesp Uwielbienia",data:t.zespol,fields:p}].map(N=>{const S=N.fields.filter(U=>{var Q,L;return(L=(Q=N.data)==null?void 0:Q[U.key])==null?void 0:L.trim()}).map(U=>{var Q;return{label:U.label,value:(Q=N.data)==null?void 0:Q[U.key]}});return A(N.title,S)}).filter(N=>N).join("")},d=()=>{var u;const p=[];return(u=t.schedule)==null||u.forEach(y=>{var b;((b=y.selectedSongs)==null?void 0:b.length)>0&&y.selectedSongs.forEach(v=>{const g=e[v.songId];if(g){const m=g.chords_bars||g.chords||"";p.push({...g,selectedKey:v.key,finalChords:m,songNumber:a[v.songId]})}})}),p.length===0?"":p.map(y=>`
      <div style="page-break-before: always; page-break-inside: avoid; padding: 20px 0 40px 0;">
        <!-- Song Header -->
        <div style="border-bottom: 1px solid ${i.border}; padding-bottom: 20px; margin-bottom: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <div style="font-family: 'Roboto', sans-serif; font-size: 12px; font-weight: 700; color: ${i.primary}; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">
                        Pie #${y.songNumber}
                    </div>
                    <h2 style="font-family: 'Roboto', sans-serif; font-size: 32px; font-weight: 800; color: ${i.textMain}; margin: 0; line-height: 1.2; letter-spacing: -0.5px;">${y.title}</h2>
                </div>
                <div style="display: flex; gap: 12px;">
                     <div style="background: ${i.bgGray}; border: 1px solid ${i.border}; padding: 8px 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 10px; text-transform: uppercase; color: ${i.textMuted}; font-weight: 600; letter-spacing: 0.5px;">Tonacja</div>
                        <div style="font-size: 18px; font-weight: 700; color: ${i.primary};">${y.selectedKey||"-"}</div>
                     </div>
                     ${y.tempo?`
                     <div style="background: ${i.bgGray}; border: 1px solid ${i.border}; padding: 8px 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 10px; text-transform: uppercase; color: ${i.textMuted}; font-weight: 600; letter-spacing: 0.5px;">Tempo</div>
                        <div style="font-size: 18px; font-weight: 700; color: ${i.textMain};">${y.tempo}</div>
                     </div>`:""}
                     ${y.meter?`
                     <div style="background: ${i.bgGray}; border: 1px solid ${i.border}; padding: 8px 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 10px; text-transform: uppercase; color: ${i.textMuted}; font-weight: 600; letter-spacing: 0.5px;">Metrum</div>
                        <div style="font-size: 18px; font-weight: 700; color: ${i.textMain};">${y.meter}</div>
                     </div>`:""}
                </div>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
          <!-- Lyrics Card -->
          <div>
            <div style="background: white; border: 1px solid ${i.border}; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); overflow: hidden;">
                <div style="background: ${i.bgGray}; padding: 10px 14px; border-bottom: 1px solid ${i.border};">
                    <h3 style="font-family: 'Roboto', sans-serif; font-size: 11px; font-weight: 700; color: ${i.textMuted}; text-transform: uppercase; letter-spacing: 0.5px; margin: 0;">Tekst</h3>
                </div>
                <div style="font-family: 'Roboto', sans-serif; font-size: 11px; line-height: 1.4; color: ${i.textMain}; white-space: pre-wrap; padding: 14px;">${(y.lyrics||"").trim()||'<span style="color:#9ca3af; font-style:italic;">Brak tekstu</span>'}</div>
            </div>
          </div>

          <!-- Chords Card -->
          <div>
            <div style="background: white; border: 1px solid ${i.border}; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); overflow: hidden;">
                <div style="background: ${i.primaryLight}; padding: 10px 14px; border-bottom: 1px solid ${i.primaryBorder};">
                    <h3 style="font-family: 'Roboto', sans-serif; font-size: 11px; font-weight: 700; color: ${i.primary}; text-transform: uppercase; letter-spacing: 0.5px; margin: 0;">Akordy</h3>
                </div>
                <div style="padding: 14px; font-size: 11px; line-height: 1.4; color: ${i.textMain}; white-space: pre-wrap; font-family: 'Roboto', sans-serif; font-weight: 600;">${o((y.finalChords||"").trim())}</div>
            </div>
          </div>
        </div>
      </div>
    `).join("")};return`
    <!DOCTYPE html>
    <html lang="pl">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Program naboestwa</title>
      <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap');
        
        /* Marginesy A4 i szerokoci */
        @page { size: A4; margin: 15mm; margin-bottom: 20mm; }
        
        @media print { 
           body { margin: 0; padding: 0; background: white; font-family: 'Roboto', sans-serif !important; -webkit-print-color-adjust: exact; } 
           /* FIX STOPKI: Fixed w media print dziaa poprawnie tylko jako bezporednie dziecko body */
           .footer-print { position: fixed; bottom: 0; left: 0; right: 0; display: block !important; }
           .container { margin-bottom: 40px; }
           .page-1 { page-break-after: always; }
           .sections-wrapper { page-break-before: always; }
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif; background: white; }
        body { color: ${i.textMain}; line-height: 1.5; }
        
        .container { max-width: 180mm; margin: 0 auto; padding: 0; background: white; padding-bottom: 50px; }
        
        /* Header */
        .header {
            margin-bottom: 60px;
            padding-bottom: 0;
            border-bottom: none;
        }
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }
        .header-content {
            flex: 1;
        }
        .header-content .subtitle {
            font-size: 11px;
            color: ${i.textMuted};
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 12px;
        }
        .header-content h1 {
            font-family: 'Roboto', sans-serif;
            font-size: 36px;
            font-weight: 900;
            color: ${i.textMain};
            margin: 0;
            letter-spacing: -1px;
            line-height: 1;
        }
        .date-badge {
            background-color: ${i.primaryLight};
            color: ${i.primary};
            font-family: 'Roboto', sans-serif;
            font-size: 15px;
            font-weight: 700;
            padding: 10px 24px;
            border-radius: 8px;
            border: 2px solid ${i.primaryBorder};
            white-space: nowrap;
            align-self: flex-end;
        }


        /* CSS STOPKA (dla window.print) */
        .footer-print {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 10px;
            color: ${i.textMuted};
            padding: 10px;
            background-color: white;
            border-top: 1px solid ${i.border};
            font-family: 'Roboto', sans-serif;
            z-index: 1000;
        }


        .page-1 { page-break-after: always; }
        .sections-wrapper { page-break-before: always; margin-bottom: 48px; }
      </style>
    </head>
    <body>
      <!-- STOPKA POZA KONTENEREM -->
      <div class="footer-print">
          Wygenerowano w App SchWro Poudnie
      </div>


      <div class="container">
        <!-- STRONA 1 -->
        <div class="page-1">
          <div class="header">
            <div class="header-top">
                <div class="header-content">
                    <div class="subtitle">App SchWro Poudnie</div>
                    <h1>Program naboestwa</h1>
                </div>
                <div class="date-badge">${JO(t.date)}</div>
            </div>
          </div>
          ${l()}
        </div>


        <!-- STRONA 2 -->
        <div class="sections-wrapper">
           <div style="margin-bottom: 32px;">
                <h2 style="font-family: 'Roboto', sans-serif; font-size: 24px; font-weight: 800; color: ${i.textMain}; margin-bottom: 8px;">Suby i Zespoy</h2>
                <p style="color: ${i.textMuted}; font-size: 14px;">Szczegowy podzia obowizkw na dzisiejsze naboestwo.</p>
           </div>
          ${c()}
        </div>


        <!-- STRONY 3+ -->
        ${d()}
      </div>
    </body>
    </html>
  `},YO=async(t,e,r={})=>{var b;const n=T_(t,e,r),i=new DOMParser().parseFromString(n,"text/html"),o=i.querySelector(".page-1"),l=i.querySelector(".sections-wrapper"),A=i.querySelectorAll('[style*="page-break-before"]'),c=Array.from(A).filter(v=>{var m;const g=(m=v.textContent)==null?void 0:m.trim();return g&&g.length>50}),d=new vt("p","mm","a4"),h=210,p=297;let u=1;const y=async v=>{var S;if(!v)return;const g=(S=v.textContent)==null?void 0:S.trim();if(!g||g.length===0){console.log("Pomijam pusty element");return}const m=document.createElement("div"),w=document.createElement("div");w.innerHTML=n;const k=w.querySelector("style");k&&m.appendChild(k.cloneNode(!0));const N=document.createElement("div");N.innerHTML=v.innerHTML,m.appendChild(N),m.style.position="absolute",m.style.left="-10000px",m.style.width="210mm",m.style.backgroundColor="#ffffff",m.style.color="#1e293b",m.style.padding="20px",m.style.fontFamily="'Roboto', sans-serif",document.body.appendChild(m);try{const U=await Fg(m,{scale:1.5,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1,onclone:D=>{D.documentElement.classList.remove("dark"),D.body.classList.remove("dark"),D.documentElement.style.backgroundColor="#ffffff",D.body.style.backgroundColor="#ffffff",D.body.style.color="#1e293b"}}),Q=U.toDataURL("image/jpeg",.85),L=U.height*h/U.width;if(L<50){console.log("Pomijam stron - zbyt maa wysoko");return}u>1&&d.addPage();let V=L,F=0;for(d.addImage(Q,"JPEG",0,0,h,Math.min(L,p)),V-=p;V>0;)F=V-L,d.addPage(),d.addImage(Q,"JPEG",0,F,h,p),V-=p;u++}finally{document.body.removeChild(m)}};try{if(o&&await y(o),l&&await y(l),c.length>0)for(const v of c)((b=v.textContent)==null?void 0:b.trim().length)>0?await y(v):console.log("Pomijam pust pie");return d.save(`${t.name||"Program"}.pdf`),d}catch(v){throw console.error("Error generating PDF:",v),v}},XO=async(t,e,r={})=>YO(t,e,r),ZO=async(t,e,r={})=>{var n;try{const a=T_(t,e,r),o=new DOMParser().parseFromString(a,"text/html"),l=o.querySelector(".page-1"),A=o.querySelector(".sections-wrapper"),c=o.querySelectorAll('[style*="page-break-before"]'),d=Array.from(c).filter(U=>{var L;const Q=(L=U.textContent)==null?void 0:L.trim();return Q&&Q.length>50}),h=new vt("p","mm","a4"),p=210,u=297;let y=1;const b=async U=>{var T;if(!U)return;const Q=(T=U.textContent)==null?void 0:T.trim();if(!Q||Q.length===0){console.log("Pomijam pusty element");return}const L=document.createElement("div"),V=document.createElement("div");V.innerHTML=a;const F=V.querySelector("style");F&&L.appendChild(F.cloneNode(!0));const D=document.createElement("div");D.innerHTML=U.innerHTML,L.appendChild(D),L.style.position="absolute",L.style.left="-10000px",L.style.width="210mm",L.style.backgroundColor="#ffffff",L.style.color="#1e293b",L.style.padding="20px",L.style.fontFamily="'Roboto', sans-serif",document.body.appendChild(L);try{const G=await Fg(L,{scale:1.5,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1,onclone:Ae=>{Ae.documentElement.classList.remove("dark"),Ae.body.classList.remove("dark"),Ae.documentElement.style.backgroundColor="#ffffff",Ae.body.style.backgroundColor="#ffffff",Ae.body.style.color="#1e293b"}}),ne=G.toDataURL("image/jpeg",.85),ce=G.height*p/G.width;if(ce<50){console.log("Pomijam stron - zbyt maa wysoko");return}y>1&&h.addPage();let ue=ce,Y=0;for(h.addImage(ne,"JPEG",0,0,p,Math.min(ce,u)),ue-=u;ue>0;)Y=ue-ce,h.addPage(),h.addImage(ne,"JPEG",0,Y,p,u),ue-=u;y++}finally{document.body.removeChild(L)}};if(l&&await b(l),A&&await b(A),d.length>0)for(const U of d)((n=U.textContent)==null?void 0:n.trim().length)>0?await b(U):console.log("Pomijam pust pie");const v=h.output("blob"),m=`Program-${t.date.split("T")[0]}.pdf`,w=`${t.id}/${m}`,{data:k,error:N}=await le.storage.from("programs").upload(w,v,{contentType:"application/pdf",upsert:!0});if(N)throw N;const{data:S}=le.storage.from("programs").getPublicUrl(w);return{success:!0,path:w,url:S.publicUrl}}catch(a){return console.error("Bd uploadu PDF:",a),{success:!1,error:a}}},Vm={titleSlide:null,transitionSlide:null,songBackground:null},Qs=(t,e)=>{if(!t||!Array.isArray(t))return null;const n=e.toLowerCase().split(".")[0],a=t.find(i=>{const o=(i.name||"").toLowerCase();return o.includes(n)||o===e.toLowerCase()});return(a==null?void 0:a.url)||null},eR=async(t,e)=>{var d,h;const r=window.open("","","width=1000,height=700");if(!r){alert("Nie mona otworzy nowego okna. Sprawd czy przegldarka nie blokuje wyskakujcych okien.");return}r.document.write('<html><body style="background:#000;color:#fff;display:flex;align-items:center;justify-content:center;height:100vh;font-family:Arial;"><h1>adowanie prezentacji...</h1></body></html>');let n={titleSlide:Vm.titleSlide,transitionSlide:Vm.transitionSlide,songBackground:Vm.songBackground};const a=(d=t.teaching)==null?void 0:d.series_id;if(a)try{const{data:p,error:u}=await le.from("teaching_series").select("*").eq("id",a).single();!u&&(p!=null&&p.graphics)&&(n.titleSlide=Qs(p.graphics,"zalacznik1")||Qs(p.graphics,"tytul")||Qs(p.graphics,"title")||((h=p.graphics[0])==null?void 0:h.url),n.transitionSlide=Qs(p.graphics,"zalacznik2")||Qs(p.graphics,"przejscie")||Qs(p.graphics,"transition"),n.songBackground=Qs(p.graphics,"piesn")||Qs(p.graphics,"song")||Qs(p.graphics,"lyrics")||Qs(p.graphics,"tlo"))}catch(p){console.error("Bd pobierania serii:",p)}const i=[],o=new Set;(t.schedule||[]).forEach(p=>{var u,y;((u=p.selectedSongs)==null?void 0:u.length)>0&&p.selectedSongs.forEach(b=>{const v=b.songId||b.id;v&&!o.has(v)&&(o.add(v),i.push(v))}),((y=p.songIds)==null?void 0:y.length)>0&&p.songIds.forEach(b=>{b&&!o.has(b)&&(o.add(b),i.push(b))})});let l="";const A=t.date?new Date(t.date).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"";n.titleSlide?l+=`
      <div class="slide title-slide" style="background-image: url('${n.titleSlide}'); background-size: cover; background-position: center;">
      </div>
    `:l+=`
      <div class="slide title-slide">
      </div>
    `,i.forEach((p,u)=>{const y=e[p];if(!y)return;n.transitionSlide&&(l+=`
        <div class="slide transition-slide" style="background-image: url('${n.transitionSlide}'); background-size: cover; background-position: center;">
        </div>
      `),(y.lyrics||"").split(/\n\s*\n/).forEach(g=>{const m=g.trim(),k=m.toLowerCase().includes("pusty slajd")?"":m;n.songBackground?l+=`
          <div class="slide content with-bg" style="background-image: url('${n.songBackground}'); background-size: cover; background-position: center;">
            ${k?`<div class="text">${k.replace(/\n/g,"<br/>")}</div>`:""}
          </div>
        `:l+=`
          <div class="slide content">
            ${k?`<div class="text">${k.replace(/\n/g,"<br/>")}</div>`:""}
          </div>
        `}),u<i.length-1&&(n.songBackground?l+=`
          <div class="slide content with-bg" style="background-image: url('${n.songBackground}'); background-size: cover; background-position: center;">
          </div>
        `:l+=`
          <div class="slide content">
          </div>
        `)}),i.length===0&&(l+=`
      <div class="slide content">
        <div class="text" style="color: #888;">Brak pieni w programie</div>
      </div>
    `);const c=`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="UTF-8">
        <title>Prezentacja - ${A}</title>
        <style>
          * { box-sizing: border-box; margin: 0; padding: 0; }
          body { background: #000; color: white; font-family: 'Segoe UI', Arial, sans-serif; }

          .slide {
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            page-break-after: always;
            position: relative;
            overflow: hidden;
          }

          /* Slajd tytuowy - tylko grafika */
          .title-slide {
            background: #000;
          }

          /* Slajd przejciowy - tylko grafika */
          .transition-slide {
            background: #000;
          }

          /* Slajd z tekstem */
          .content {
            background: #000;
          }
          .content .text {
            font-size: 48px;
            line-height: 1.5;
            font-weight: 600;
            max-width: 90%;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
          }

          /* Instrukcje */
          .no-print {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1f2937;
            color: white;
            padding: 24px;
            border-radius: 12px;
            font-size: 14px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            z-index: 1000;
          }
          .no-print p { margin: 0 0 8px 0; }
          .no-print p:last-child { margin: 0; }
          .no-print strong { color: #60a5fa; }

          @media print {
            .slide { border: none; }
            .no-print { display: none !important; }
          }
        </style>
      </head>
      <body>
        ${l}
        <div class="no-print">
          <p style="font-weight:600; font-size:16px; margin-bottom:12px;">Jak zapisa jako PDF:</p>
          <p>1. Nacinij <strong>Ctrl+P</strong> (lub Cmd+P)</p>
          <p>2. Wybierz <strong>"Zapisz jako PDF"</strong></p>
          <p>3. Otwrz PDF w PowerPoint</p>
          <hr style="border:none; border-top:1px solid #374151; margin:12px 0;">
          <p style="color:#9ca3af; font-size:12px;">Lub uyj rozszerzenia do konwersji HTMLPPT</p>
        </div>
      </body>
    </html>
  `;r.document.open(),r.document.write(c),r.document.close()};function tR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return C.useMemo(()=>n=>{e.forEach(a=>a(n))},e)}const Ug=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function uc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function mw(t){return"nodeType"in t}function ga(t){var e,r;return t?uc(t)?t:mw(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function xw(t){const{Document:e}=ga(t);return t instanceof e}function Eu(t){return uc(t)?!1:t instanceof ga(t).HTMLElement}function D_(t){return t instanceof ga(t).SVGElement}function hc(t){return t?uc(t)?t.document:mw(t)?xw(t)?t:Eu(t)||D_(t)?t.ownerDocument:document:document:document}const Ks=Ug?C.useLayoutEffect:C.useEffect;function yw(t){const e=C.useRef(t);return Ks(()=>{e.current=t}),C.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function rR(){const t=C.useRef(null),e=C.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=C.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function gu(t,e){e===void 0&&(e=[t]);const r=C.useRef(t);return Ks(()=>{r.current!==t&&(r.current=t)},e),r}function Fu(t,e){const r=C.useRef();return C.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Kf(t){const e=yw(t),r=C.useRef(null),n=C.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function My(t){const e=C.useRef();return C.useEffect(()=>{e.current=t},[t]),e.current}let Wm={};function Uu(t,e){return C.useMemo(()=>{if(e)return e;const r=Wm[t]==null?0:Wm[t]+1;return Wm[t]=r,t+"-"+r},[t,e])}function z_(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const l=Object.entries(o);for(const[A,c]of l){const d=i[A];d!=null&&(i[A]=d+t*c)}return i},{...e})}}const HA=z_(1),pu=z_(-1);function nR(t){return"clientX"in t&&"clientY"in t}function bw(t){if(!t)return!1;const{KeyboardEvent:e}=ga(t.target);return e&&t instanceof e}function aR(t){if(!t)return!1;const{TouchEvent:e}=ga(t.target);return e&&t instanceof e}function Hy(t){if(aR(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return nR(t)?{x:t.clientX,y:t.clientY}:null}const Po=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Po.Translate.toString(t),Po.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),Q5="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function sR(t){return t.matches(Q5)?t:t.querySelector(Q5)}const iR={display:"none"};function oR(t){let{id:e,value:r}=t;return Sn.createElement("div",{id:e,style:iR},r)}function lR(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Sn.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function AR(){const[t,e]=C.useState("");return{announce:C.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const O_=C.createContext(null);function cR(t){const e=C.useContext(O_);C.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function dR(){const[t]=C.useState(()=>new Set),e=C.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[C.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var l;return(l=o[a])==null?void 0:l.call(o,i)})},[t]),e]}const uR={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},hR={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function fR(t){let{announcements:e=hR,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=uR}=t;const{announce:i,announcement:o}=AR(),l=Uu("DndLiveRegion"),[A,c]=C.useState(!1);if(C.useEffect(()=>{c(!0)},[]),cR(C.useMemo(()=>({onDragStart(h){let{active:p}=h;i(e.onDragStart({active:p}))},onDragMove(h){let{active:p,over:u}=h;e.onDragMove&&i(e.onDragMove({active:p,over:u}))},onDragOver(h){let{active:p,over:u}=h;i(e.onDragOver({active:p,over:u}))},onDragEnd(h){let{active:p,over:u}=h;i(e.onDragEnd({active:p,over:u}))},onDragCancel(h){let{active:p,over:u}=h;i(e.onDragCancel({active:p,over:u}))}}),[i,e])),!A)return null;const d=Sn.createElement(Sn.Fragment,null,Sn.createElement(oR,{id:n,value:a.draggable}),Sn.createElement(lR,{id:l,announcement:o}));return r?Ht.createPortal(d,r):d}var dn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(dn||(dn={}));function $f(){}function mu(t,e){return C.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Lg(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return C.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const ws=Object.freeze({x:0,y:0});function R_(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function M_(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function gR(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function I5(t){let{left:e,top:r,height:n,width:a}=t;return[{x:e,y:r},{x:e+a,y:r},{x:e,y:r+n},{x:e+a,y:r+n}]}function H_(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function P5(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const Qg=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=P5(e,e.left,e.top),i=[];for(const o of n){const{id:l}=o,A=r.get(l);if(A){const c=R_(P5(A),a);i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(M_)},pR=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=I5(e),i=[];for(const o of n){const{id:l}=o,A=r.get(l);if(A){const c=I5(A),d=a.reduce((p,u,y)=>p+R_(c[y],u),0),h=Number((d/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:h}})}}return i.sort(M_)};function mR(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,l=i-r;if(n<a&&r<i){const A=e.width*e.height,c=t.width*t.height,d=o*l,h=d/(A+c-d);return Number(h.toFixed(4))}return 0}const xR=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,l=r.get(o);if(l){const A=mR(l,e);A>0&&a.push({id:o,data:{droppableContainer:i,value:A}})}}return a.sort(gR)};function yR(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function K_(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ws}function bR(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...r})}}const wR=bR(1);function vR(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function kR(t,e,r){const n=vR(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:l}=n,A=t.left-o-(1-a)*parseFloat(r),c=t.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?t.width/a:t.width,h=i?t.height/i:t.height;return{width:d,height:h,top:c,right:A+d,bottom:c+h,left:A}}const BR={ignoreTransform:!1};function fc(t,e){e===void 0&&(e=BR);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=ga(t).getComputedStyle(t);c&&(r=kR(r,c,d))}const{top:n,left:a,width:i,height:o,bottom:l,right:A}=r;return{top:n,left:a,width:i,height:o,bottom:l,right:A}}function T5(t){return fc(t,{ignoreTransform:!0})}function CR(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function jR(t,e){return e===void 0&&(e=ga(t).getComputedStyle(t)),e.position==="fixed"}function NR(t,e){e===void 0&&(e=ga(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function Ig(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(xw(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Eu(a)||D_(a)||r.includes(a))return r;const i=ga(t).getComputedStyle(a);return a!==t&&NR(a,i)&&r.push(a),jR(a,i)?r:n(a.parentNode)}return t?n(t):r}function $_(t){const[e]=Ig(t,1);return e??null}function qm(t){return!Ug||!t?null:uc(t)?t:mw(t)?xw(t)||t===hc(t).scrollingElement?window:Eu(t)?t:null:null}function G_(t){return uc(t)?t.scrollX:t.scrollLeft}function V_(t){return uc(t)?t.scrollY:t.scrollTop}function Ky(t){return{x:G_(t),y:V_(t)}}var mn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(mn||(mn={}));function W_(t){return!Ug||!t?!1:t===document.scrollingElement}function q_(t){const e={x:0,y:0},r=W_(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:l,maxScroll:n,minScroll:e}}const _R={x:.2,y:.2};function SR(t,e,r,n,a){let{top:i,left:o,right:l,bottom:A}=r;n===void 0&&(n=10),a===void 0&&(a=_R);const{isTop:c,isBottom:d,isLeft:h,isRight:p}=q_(t),u={x:0,y:0},y={x:0,y:0},b={height:e.height*a.y,width:e.width*a.x};return!c&&i<=e.top+b.height?(u.y=mn.Backward,y.y=n*Math.abs((e.top+b.height-i)/b.height)):!d&&A>=e.bottom-b.height&&(u.y=mn.Forward,y.y=n*Math.abs((e.bottom-b.height-A)/b.height)),!p&&l>=e.right-b.width?(u.x=mn.Forward,y.x=n*Math.abs((e.right-b.width-l)/b.width)):!h&&o<=e.left+b.width&&(u.x=mn.Backward,y.x=n*Math.abs((e.left+b.width-o)/b.width)),{direction:u,speed:y}}function ER(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function J_(t){return t.reduce((e,r)=>HA(e,Ky(r)),ws)}function FR(t){return t.reduce((e,r)=>e+G_(r),0)}function UR(t){return t.reduce((e,r)=>e+V_(r),0)}function LR(t,e){if(e===void 0&&(e=fc),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);$_(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const QR=[["x",["left","right"],FR],["y",["top","bottom"],UR]];class ww{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Ig(r),a=J_(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of QR)for(const A of o)Object.defineProperty(this,A,{get:()=>{const c=l(n),d=a[i]-c;return this.rect[A]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Td{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function IR(t){const{EventTarget:e}=ga(t);return t instanceof e?t:hc(t)}function Jm(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Ga;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ga||(Ga={}));function D5(t){t.preventDefault()}function PR(t){t.stopPropagation()}var Gt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Gt||(Gt={}));const Y_={start:[Gt.Space,Gt.Enter],cancel:[Gt.Esc],end:[Gt.Space,Gt.Enter,Gt.Tab]},TR=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Gt.Right:return{...r,x:r.x+25};case Gt.Left:return{...r,x:r.x-25};case Gt.Down:return{...r,y:r.y+25};case Gt.Up:return{...r,y:r.y-25}}};class vw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Td(hc(r)),this.windowListeners=new Td(ga(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ga.Resize,this.handleCancel),this.windowListeners.add(Ga.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ga.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&LR(n),r(ws)}handleKeyDown(e){if(bw(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=Y_,coordinateGetter:o=TR,scrollBehavior:l="smooth"}=a,{code:A}=e;if(i.end.includes(A)){this.handleEnd(e);return}if(i.cancel.includes(A)){this.handleCancel(e);return}const{collisionRect:c}=n.current,d=c?{x:c.left,y:c.top}:ws;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(e,{active:r,context:n.current,currentCoordinates:d});if(h){const p=pu(h,d),u={x:0,y:0},{scrollableAncestors:y}=n.current;for(const b of y){const v=e.code,{isTop:g,isRight:m,isLeft:w,isBottom:k,maxScroll:N,minScroll:S}=q_(b),U=ER(b),Q={x:Math.min(v===Gt.Right?U.right-U.width/2:U.right,Math.max(v===Gt.Right?U.left:U.left+U.width/2,h.x)),y:Math.min(v===Gt.Down?U.bottom-U.height/2:U.bottom,Math.max(v===Gt.Down?U.top:U.top+U.height/2,h.y))},L=v===Gt.Right&&!m||v===Gt.Left&&!w,V=v===Gt.Down&&!k||v===Gt.Up&&!g;if(L&&Q.x!==h.x){const F=b.scrollLeft+p.x,D=v===Gt.Right&&F<=N.x||v===Gt.Left&&F>=S.x;if(D&&!p.y){b.scrollTo({left:F,behavior:l});return}D?u.x=b.scrollLeft-F:u.x=v===Gt.Right?b.scrollLeft-N.x:b.scrollLeft-S.x,u.x&&b.scrollBy({left:-u.x,behavior:l});break}else if(V&&Q.y!==h.y){const F=b.scrollTop+p.y,D=v===Gt.Down&&F<=N.y||v===Gt.Up&&F>=S.y;if(D&&!p.x){b.scrollTo({top:F,behavior:l});return}D?u.y=b.scrollTop-F:u.y=v===Gt.Down?b.scrollTop-N.y:b.scrollTop-S.y,u.y&&b.scrollBy({top:-u.y,behavior:l});break}}this.handleMove(e,HA(pu(h,this.referenceCoordinates),u))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}vw.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=Y_,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function z5(t){return!!(t&&"distance"in t)}function O5(t){return!!(t&&"delay"in t)}class kw{constructor(e,r,n){var a;n===void 0&&(n=IR(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=hc(o),this.documentListeners=new Td(this.document),this.listeners=new Td(n),this.windowListeners=new Td(ga(o)),this.initialCoordinates=(a=Hy(i))!=null?a:ws,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ga.Resize,this.handleCancel),this.windowListeners.add(Ga.DragStart,D5),this.windowListeners.add(Ga.VisibilityChange,this.handleCancel),this.windowListeners.add(Ga.ContextMenu,D5),this.documentListeners.add(Ga.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(O5(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(z5(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ga.Click,PR,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ga.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!a)return;const A=(r=Hy(e))!=null?r:ws,c=pu(a,A);if(!n&&l){if(z5(l)){if(l.tolerance!=null&&Jm(c,l.tolerance))return this.handleCancel();if(Jm(c,l.distance))return this.handleStart()}if(O5(l)&&Jm(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}e.cancelable&&e.preventDefault(),o(A)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Gt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const DR={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gc extends kw{constructor(e){const{event:r}=e,n=hc(r.target);super(e,DR,n)}}gc.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const zR={move:{name:"mousemove"},end:{name:"mouseup"}};var $y;(function(t){t[t.RightClick=2]="RightClick"})($y||($y={}));class OR extends kw{constructor(e){super(e,zR,hc(e.event.target))}}OR.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===$y.RightClick?!1:(n==null||n({event:r}),!0)}}];const Ym={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class RR extends kw{constructor(e){super(e,Ym)}static setup(){return window.addEventListener(Ym.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ym.move.name,e)};function e(){}}}RR.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Dd;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Dd||(Dd={}));var Gf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gf||(Gf={}));function MR(t){let{acceleration:e,activator:r=Dd.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:l=Gf.TreeOrder,pointerCoordinates:A,scrollableAncestors:c,scrollableAncestorRects:d,delta:h,threshold:p}=t;const u=KR({delta:h,disabled:!i}),[y,b]=rR(),v=C.useRef({x:0,y:0}),g=C.useRef({x:0,y:0}),m=C.useMemo(()=>{switch(r){case Dd.Pointer:return A?{top:A.y,bottom:A.y,left:A.x,right:A.x}:null;case Dd.DraggableRect:return a}},[r,a,A]),w=C.useRef(null),k=C.useCallback(()=>{const S=w.current;if(!S)return;const U=v.current.x*g.current.x,Q=v.current.y*g.current.y;S.scrollBy(U,Q)},[]),N=C.useMemo(()=>l===Gf.TreeOrder?[...c].reverse():c,[l,c]);C.useEffect(()=>{if(!i||!c.length||!m){b();return}for(const S of N){if((n==null?void 0:n(S))===!1)continue;const U=c.indexOf(S),Q=d[U];if(!Q)continue;const{direction:L,speed:V}=SR(S,Q,m,e,p);for(const F of["x","y"])u[F][L[F]]||(V[F]=0,L[F]=0);if(V.x>0||V.y>0){b(),w.current=S,y(k,o),v.current=V,g.current=L;return}}v.current={x:0,y:0},g.current={x:0,y:0},b()},[e,k,n,b,i,o,JSON.stringify(m),JSON.stringify(u),y,c,N,d,JSON.stringify(p)])}const HR={x:{[mn.Backward]:!1,[mn.Forward]:!1},y:{[mn.Backward]:!1,[mn.Forward]:!1}};function KR(t){let{delta:e,disabled:r}=t;const n=My(e);return Fu(a=>{if(r||!n||!a)return HR;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[mn.Backward]:a.x[mn.Backward]||i.x===-1,[mn.Forward]:a.x[mn.Forward]||i.x===1},y:{[mn.Backward]:a.y[mn.Backward]||i.y===-1,[mn.Forward]:a.y[mn.Forward]||i.y===1}}},[r,e,n])}function $R(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return Fu(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function GR(t,e){return C.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var xu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(xu||(xu={}));var Gy;(function(t){t.Optimized="optimized"})(Gy||(Gy={}));const R5=new Map;function VR(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=C.useState(null),{frequency:l,measure:A,strategy:c}=a,d=C.useRef(t),h=v(),p=gu(h),u=C.useCallback(function(g){g===void 0&&(g=[]),!p.current&&o(m=>m===null?g:m.concat(g.filter(w=>!m.includes(w))))},[p]),y=C.useRef(null),b=Fu(g=>{if(h&&!r)return R5;if(!g||g===R5||d.current!==t||i!=null){const m=new Map;for(let w of t){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){m.set(w.id,w.rect.current);continue}const k=w.node.current,N=k?new ww(A(k),k):null;w.rect.current=N,N&&m.set(w.id,N)}return m}return g},[t,i,r,h,A]);return C.useEffect(()=>{d.current=t},[t]),C.useEffect(()=>{h||u()},[r,h]),C.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),C.useEffect(()=>{h||typeof l!="number"||y.current!==null||(y.current=setTimeout(()=>{u(),y.current=null},l))},[l,h,u,...n]),{droppableRects:b,measureDroppableContainers:u,measuringScheduled:i!=null};function v(){switch(c){case xu.Always:return!1;case xu.BeforeDragging:return r;default:return!r}}}function X_(t,e){return Fu(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function WR(t,e){return X_(t,e)}function qR(t){let{callback:e,disabled:r}=t;const n=yw(e),a=C.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return C.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Pg(t){let{callback:e,disabled:r}=t;const n=yw(e),a=C.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return C.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function JR(t){return new ww(fc(t),t)}function M5(t,e,r){e===void 0&&(e=JR);const[n,a]=C.useState(null);function i(){a(A=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=A??r)!=null?c:null}const d=e(t);return JSON.stringify(A)===JSON.stringify(d)?A:d})}const o=qR({callback(A){if(t)for(const c of A){const{type:d,target:h}=c;if(d==="childList"&&h instanceof HTMLElement&&h.contains(t)){i();break}}}}),l=Pg({callback:i});return Ks(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),n}function YR(t){const e=X_(t);return K_(t,e)}const H5=[];function XR(t){const e=C.useRef(t),r=Fu(n=>t?n&&n!==H5&&t&&e.current&&t.parentNode===e.current.parentNode?n:Ig(t):H5,[t]);return C.useEffect(()=>{e.current=t},[t]),r}function ZR(t){const[e,r]=C.useState(null),n=C.useRef(t),a=C.useCallback(i=>{const o=qm(i.target);o&&r(l=>l?(l.set(o,Ky(o)),new Map(l)):null)},[]);return C.useEffect(()=>{const i=n.current;if(t!==i){o(i);const l=t.map(A=>{const c=qm(A);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,Ky(c)]):null}).filter(A=>A!=null);r(l.length?new Map(l):null),n.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(A=>{const c=qm(A);c==null||c.removeEventListener("scroll",a)})}},[a,t]),C.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>HA(i,o),ws):J_(t):ws,[t,e])}function K5(t,e){e===void 0&&(e=[]);const r=C.useRef(null);return C.useEffect(()=>{r.current=null},e),C.useEffect(()=>{const n=t!==ws;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?pu(t,r.current):ws}function eM(t){C.useEffect(()=>{if(!Ug)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function tM(t,e){return C.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function Z_(t){return C.useMemo(()=>t?CR(t):null,[t])}const $5=[];function rM(t,e){e===void 0&&(e=fc);const[r]=t,n=Z_(r?ga(r):null),[a,i]=C.useState($5);function o(){i(()=>t.length?t.map(A=>W_(A)?n:new ww(e(A),A)):$5)}const l=Pg({callback:o});return Ks(()=>{l==null||l.disconnect(),o(),t.forEach(A=>l==null?void 0:l.observe(A))},[t]),a}function nM(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Eu(e)?e:t}function aM(t){let{measure:e}=t;const[r,n]=C.useState(null),a=C.useCallback(c=>{for(const{target:d}of c)if(Eu(d)){n(h=>{const p=e(d);return h?{...h,width:p.width,height:p.height}:p});break}},[e]),i=Pg({callback:a}),o=C.useCallback(c=>{const d=nM(c);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?e(d):null)},[e,i]),[l,A]=Kf(o);return C.useMemo(()=>({nodeRef:l,rect:r,setRef:A}),[r,l,A])}const sM=[{sensor:gc,options:{}},{sensor:vw,options:{}}],iM={current:{}},q0={draggable:{measure:T5},droppable:{measure:T5,strategy:xu.WhileDragging,frequency:Gy.Optimized},dragOverlay:{measure:fc}};class zd extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const oM={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$f},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:q0,measureDroppableContainers:$f,windowRect:null,measuringScheduled:!1},lM={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$f,draggableNodes:new Map,over:null,measureDroppableContainers:$f},Tg=C.createContext(lM),e3=C.createContext(oM);function AM(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zd}}}function cM(t,e){switch(e.type){case dn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case dn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case dn.DragEnd:case dn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case dn.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new zd(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case dn.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new zd(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case dn.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new zd(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function dM(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=C.useContext(Tg),i=My(n),o=My(r==null?void 0:r.id);return C.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!bw(i)||document.activeElement===i.target)return;const l=a.get(o);if(!l)return;const{activatorNode:A,node:c}=l;if(!A.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[A.current,c.current]){if(!d)continue;const h=sR(d);if(h){h.focus();break}}})}},[n,e,a,o,i]),null}function uM(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function hM(t){return C.useMemo(()=>({draggable:{...q0.draggable,...t==null?void 0:t.draggable},droppable:{...q0.droppable,...t==null?void 0:t.droppable},dragOverlay:{...q0.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function fM(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=C.useRef(!1),{x:o,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Ks(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!n)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=r(c),h=K_(d,n);if(o||(h.x=0),l||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=$_(c);p&&p.scrollBy({top:h.y,left:h.x})}},[e,o,l,n,r])}const t3=C.createContext({...ws,scaleX:1,scaleY:1});var so;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(so||(so={}));const Dg=C.memo(function(e){var r,n,a,i;let{id:o,accessibility:l,autoScroll:A=!0,children:c,sensors:d=sM,collisionDetection:h=xR,measuring:p,modifiers:u,...y}=e;const b=C.useReducer(cM,void 0,AM),[v,g]=b,[m,w]=dR(),[k,N]=C.useState(so.Uninitialized),S=k===so.Initialized,{draggable:{active:U,nodes:Q,translate:L},droppable:{containers:V}}=v,F=U!=null?Q.get(U):null,D=C.useRef({initial:null,translated:null}),T=C.useMemo(()=>{var We;return U!=null?{id:U,data:(We=F==null?void 0:F.data)!=null?We:iM,rect:D}:null},[U,F]),G=C.useRef(null),[ne,ce]=C.useState(null),[ue,Y]=C.useState(null),Ae=gu(y,Object.values(y)),fe=Uu("DndDescribedBy",o),we=C.useMemo(()=>V.getEnabled(),[V]),E=hM(p),{droppableRects:z,measureDroppableContainers:K,measuringScheduled:W}=VR(we,{dragging:S,dependencies:[L.x,L.y],config:E.droppable}),J=$R(Q,U),re=C.useMemo(()=>ue?Hy(ue):null,[ue]),be=de(),me=WR(J,E.draggable.measure);fM({activeNode:U!=null?Q.get(U):null,config:be.layoutShiftCompensation,initialRect:me,measure:E.draggable.measure});const ae=M5(J,E.draggable.measure,me),X=M5(J?J.parentElement:null),ye=C.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:Q,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xe=V.getNodeFor((r=ye.current.over)==null?void 0:r.id),Oe=aM({measure:E.dragOverlay.measure}),H=(n=Oe.nodeRef.current)!=null?n:J,$e=S?(a=Oe.rect)!=null?a:ae:null,lt=!!(Oe.nodeRef.current&&Oe.rect),nt=YR(lt?null:ae),Ne=Z_(H?ga(H):null),qe=XR(S?xe??J:null),Ye=rM(qe),ot=uM(u,{transform:{x:L.x-nt.x,y:L.y-nt.y,scaleX:1,scaleY:1},activatorEvent:ue,active:T,activeNodeRect:ae,containerNodeRect:X,draggingNodeRect:$e,over:ye.current.over,overlayNodeRect:Oe.rect,scrollableAncestors:qe,scrollableAncestorRects:Ye,windowRect:Ne}),it=re?HA(re,L):null,ke=ZR(qe),oe=K5(ke),Be=K5(ke,[ae]),Se=HA(ot,oe),Qe=$e?wR($e,ot):null,se=T&&Qe?h({active:T,collisionRect:Qe,droppableRects:z,droppableContainers:we,pointerCoordinates:it}):null,ze=H_(se,"id"),[O,Ee]=C.useState(null),Pe=lt?ot:HA(ot,Be),Le=yR(Pe,(i=O==null?void 0:O.rect)!=null?i:null,ae),Re=C.useRef(null),ht=C.useCallback((We,Je)=>{let{sensor:et,options:Zt}=Je;if(G.current==null)return;const Ft=Q.get(G.current);if(!Ft)return;const Rt=We.nativeEvent,ge=new et({active:G.current,activeNode:Ft,event:Rt,options:Zt,context:ye,onAbort(Ke){if(!Q.get(Ke))return;const{onDragAbort:Kt}=Ae.current,Ar={id:Ke};Kt==null||Kt(Ar),m({type:"onDragAbort",event:Ar})},onPending(Ke,gt,Kt,Ar){if(!Q.get(Ke))return;const{onDragPending:nr}=Ae.current,er={id:Ke,constraint:gt,initialCoordinates:Kt,offset:Ar};nr==null||nr(er),m({type:"onDragPending",event:er})},onStart(Ke){const gt=G.current;if(gt==null)return;const Kt=Q.get(gt);if(!Kt)return;const{onDragStart:Ar}=Ae.current,qt={activatorEvent:Rt,active:{id:gt,data:Kt.data,rect:D}};Ht.unstable_batchedUpdates(()=>{Ar==null||Ar(qt),N(so.Initializing),g({type:dn.DragStart,initialCoordinates:Ke,active:gt}),m({type:"onDragStart",event:qt}),ce(Re.current),Y(Rt)})},onMove(Ke){g({type:dn.DragMove,coordinates:Ke})},onEnd:Ce(dn.DragEnd),onCancel:Ce(dn.DragCancel)});Re.current=ge;function Ce(Ke){return async function(){const{active:Kt,collisions:Ar,over:qt,scrollAdjustedTranslate:nr}=ye.current;let er=null;if(Kt&&nr){const{cancelDrop:bn}=Ae.current;er={activatorEvent:Rt,active:Kt,collisions:Ar,delta:nr,over:qt},Ke===dn.DragEnd&&typeof bn=="function"&&await Promise.resolve(bn(er))&&(Ke=dn.DragCancel)}G.current=null,Ht.unstable_batchedUpdates(()=>{g({type:Ke}),N(so.Uninitialized),Ee(null),ce(null),Y(null),Re.current=null;const bn=Ke===dn.DragEnd?"onDragEnd":"onDragCancel";if(er){const Qn=Ae.current[bn];Qn==null||Qn(er),m({type:bn,event:er})}})}}},[Q]),rt=C.useCallback((We,Je)=>(et,Zt)=>{const Ft=et.nativeEvent,Rt=Q.get(Zt);if(G.current!==null||!Rt||Ft.dndKit||Ft.defaultPrevented)return;const ge={active:Rt};We(et,Je.options,ge)===!0&&(Ft.dndKit={capturedBy:Je.sensor},G.current=Zt,ht(et,Je))},[Q,ht]),ut=GR(d,rt);eM(d),Ks(()=>{ae&&k===so.Initializing&&N(so.Initialized)},[ae,k]),C.useEffect(()=>{const{onDragMove:We}=Ae.current,{active:Je,activatorEvent:et,collisions:Zt,over:Ft}=ye.current;if(!Je||!et)return;const Rt={active:Je,activatorEvent:et,collisions:Zt,delta:{x:Se.x,y:Se.y},over:Ft};Ht.unstable_batchedUpdates(()=>{We==null||We(Rt),m({type:"onDragMove",event:Rt})})},[Se.x,Se.y]),C.useEffect(()=>{const{active:We,activatorEvent:Je,collisions:et,droppableContainers:Zt,scrollAdjustedTranslate:Ft}=ye.current;if(!We||G.current==null||!Je||!Ft)return;const{onDragOver:Rt}=Ae.current,ge=Zt.get(ze),Ce=ge&&ge.rect.current?{id:ge.id,rect:ge.rect.current,data:ge.data,disabled:ge.disabled}:null,Ke={active:We,activatorEvent:Je,collisions:et,delta:{x:Ft.x,y:Ft.y},over:Ce};Ht.unstable_batchedUpdates(()=>{Ee(Ce),Rt==null||Rt(Ke),m({type:"onDragOver",event:Ke})})},[ze]),Ks(()=>{ye.current={activatorEvent:ue,active:T,activeNode:J,collisionRect:Qe,collisions:se,droppableRects:z,draggableNodes:Q,draggingNode:H,draggingNodeRect:$e,droppableContainers:V,over:O,scrollableAncestors:qe,scrollAdjustedTranslate:Se},D.current={initial:$e,translated:Qe}},[T,J,se,Qe,Q,H,$e,z,V,O,qe,Se]),MR({...be,delta:L,draggingRect:Qe,pointerCoordinates:it,scrollableAncestors:qe,scrollableAncestorRects:Ye});const at=C.useMemo(()=>({active:T,activeNode:J,activeNodeRect:ae,activatorEvent:ue,collisions:se,containerNodeRect:X,dragOverlay:Oe,draggableNodes:Q,droppableContainers:V,droppableRects:z,over:O,measureDroppableContainers:K,scrollableAncestors:qe,scrollableAncestorRects:Ye,measuringConfiguration:E,measuringScheduled:W,windowRect:Ne}),[T,J,ae,ue,se,X,Oe,Q,V,z,O,K,qe,Ye,E,W,Ne]),ct=C.useMemo(()=>({activatorEvent:ue,activators:ut,active:T,activeNodeRect:ae,ariaDescribedById:{draggable:fe},dispatch:g,draggableNodes:Q,over:O,measureDroppableContainers:K}),[ue,ut,T,ae,g,fe,Q,O,K]);return Sn.createElement(O_.Provider,{value:w},Sn.createElement(Tg.Provider,{value:ct},Sn.createElement(e3.Provider,{value:at},Sn.createElement(t3.Provider,{value:Le},c)),Sn.createElement(dM,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Sn.createElement(fR,{...l,hiddenTextDescribedById:fe}));function de(){const We=(ne==null?void 0:ne.autoScrollEnabled)===!1,Je=typeof A=="object"?A.enabled===!1:A===!1,et=S&&!We&&!Je;return typeof A=="object"?{...A,enabled:et}:{enabled:et}}}),gM=C.createContext(null),G5="button",pM="Draggable";function mM(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Uu(pM),{activators:o,activatorEvent:l,active:A,activeNodeRect:c,ariaDescribedById:d,draggableNodes:h,over:p}=C.useContext(Tg),{role:u=G5,roleDescription:y="draggable",tabIndex:b=0}=a??{},v=(A==null?void 0:A.id)===e,g=C.useContext(v?t3:gM),[m,w]=Kf(),[k,N]=Kf(),S=tM(o,e),U=gu(r);Ks(()=>(h.set(e,{id:e,key:i,node:m,activatorNode:k,data:U}),()=>{const L=h.get(e);L&&L.key===i&&h.delete(e)}),[h,e]);const Q=C.useMemo(()=>({role:u,tabIndex:b,"aria-disabled":n,"aria-pressed":v&&u===G5?!0:void 0,"aria-roledescription":y,"aria-describedby":d.draggable}),[n,u,b,v,y,d.draggable]);return{active:A,activatorEvent:l,activeNodeRect:c,attributes:Q,isDragging:v,listeners:n?void 0:S,node:m,over:p,setNodeRef:w,setActivatorNodeRef:N,transform:g}}function xM(){return C.useContext(e3)}const yM="Droppable",bM={timeout:25};function wM(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Uu(yM),{active:o,dispatch:l,over:A,measureDroppableContainers:c}=C.useContext(Tg),d=C.useRef({disabled:r}),h=C.useRef(!1),p=C.useRef(null),u=C.useRef(null),{disabled:y,updateMeasurementsFor:b,timeout:v}={...bM,...a},g=gu(b??n),m=C.useCallback(()=>{if(!h.current){h.current=!0;return}u.current!=null&&clearTimeout(u.current),u.current=setTimeout(()=>{c(Array.isArray(g.current)?g.current:[g.current]),u.current=null},v)},[v]),w=Pg({callback:m,disabled:y||!o}),k=C.useCallback((Q,L)=>{w&&(L&&(w.unobserve(L),h.current=!1),Q&&w.observe(Q))},[w]),[N,S]=Kf(k),U=gu(e);return C.useEffect(()=>{!w||!N.current||(w.disconnect(),h.current=!1,w.observe(N.current))},[N,w]),C.useEffect(()=>(l({type:dn.RegisterDroppable,element:{id:n,key:i,disabled:r,node:N,rect:p,data:U}}),()=>l({type:dn.UnregisterDroppable,key:i,id:n})),[n]),C.useEffect(()=>{r!==d.current.disabled&&(l({type:dn.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,l]),{active:o,rect:p,isOver:(A==null?void 0:A.id)===n,node:N,over:A,setNodeRef:S}}function pc(t,e,r){const n=t.slice();return n.splice(r<0?n.length+r:r,0,n.splice(e,1)[0]),n}function vM(t,e){return t.reduce((r,n,a)=>{const i=e.get(n);return i&&(r[a]=i),r},Array(t.length))}function k0(t){return t!==null&&t>=0}function kM(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function BM(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const r3=t=>{let{rects:e,activeIndex:r,overIndex:n,index:a}=t;const i=pc(e,n,r),o=e[a],l=i[a];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},B0={scaleX:1,scaleY:1},zg=t=>{var e;let{activeIndex:r,activeNodeRect:n,index:a,rects:i,overIndex:o}=t;const l=(e=i[r])!=null?e:n;if(!l)return null;if(a===r){const c=i[o];return c?{x:0,y:r<o?c.top+c.height-(l.top+l.height):c.top-l.top,...B0}:null}const A=CM(i,a,r);return a>r&&a<=o?{x:0,y:-l.height-A,...B0}:a<r&&a>=o?{x:0,y:l.height+A,...B0}:{x:0,y:0,...B0}};function CM(t,e,r){const n=t[e],a=t[e-1],i=t[e+1];return n?r<e?a?n.top-(a.top+a.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):a?n.top-(a.top+a.height):0:0}const n3="Sortable",a3=Sn.createContext({activeIndex:-1,containerId:n3,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:r3,disabled:{draggable:!1,droppable:!1}});function Og(t){let{children:e,id:r,items:n,strategy:a=r3,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:A,over:c,measureDroppableContainers:d}=xM(),h=Uu(n3,r),p=l.rect!==null,u=C.useMemo(()=>n.map(S=>typeof S=="object"&&"id"in S?S.id:S),[n]),y=o!=null,b=o?u.indexOf(o.id):-1,v=c?u.indexOf(c.id):-1,g=C.useRef(u),m=!kM(u,g.current),w=v!==-1&&b===-1||m,k=BM(i);Ks(()=>{m&&y&&d(u)},[m,u,y,d]),C.useEffect(()=>{g.current=u},[u]);const N=C.useMemo(()=>({activeIndex:b,containerId:h,disabled:k,disableTransforms:w,items:u,overIndex:v,useDragOverlay:p,sortedRects:vM(u,A),strategy:a}),[b,h,k.draggable,k.droppable,w,u,v,A,p,a]);return Sn.createElement(a3.Provider,{value:N},e)}const jM=t=>{let{id:e,items:r,activeIndex:n,overIndex:a}=t;return pc(r,n,a).indexOf(e)},NM=t=>{let{containerId:e,isSorting:r,wasDragging:n,index:a,items:i,newIndex:o,previousItems:l,previousContainerId:A,transition:c}=t;return!c||!n||l!==i&&a===o?!1:r?!0:o!==a&&e===A},_M={duration:200,easing:"ease"},s3="transform",SM=Po.Transition.toString({property:s3,duration:0,easing:"linear"}),EM={roleDescription:"sortable"};function FM(t){let{disabled:e,index:r,node:n,rect:a}=t;const[i,o]=C.useState(null),l=C.useRef(r);return Ks(()=>{if(!e&&r!==l.current&&n.current){const A=a.current;if(A){const c=fc(n.current,{ignoreTransform:!0}),d={x:A.left-c.left,y:A.top-c.top,scaleX:A.width/c.width,scaleY:A.height/c.height};(d.x||d.y)&&o(d)}}r!==l.current&&(l.current=r)},[e,r,n,a]),C.useEffect(()=>{i&&o(null)},[i]),i}function Rg(t){let{animateLayoutChanges:e=NM,attributes:r,disabled:n,data:a,getNewIndex:i=jM,id:o,strategy:l,resizeObserverConfig:A,transition:c=_M}=t;const{items:d,containerId:h,activeIndex:p,disabled:u,disableTransforms:y,sortedRects:b,overIndex:v,useDragOverlay:g,strategy:m}=C.useContext(a3),w=UM(n,u),k=d.indexOf(o),N=C.useMemo(()=>({sortable:{containerId:h,index:k,items:d},...a}),[h,a,k,d]),S=C.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:U,node:Q,isOver:L,setNodeRef:V}=wM({id:o,data:N,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...A}}),{active:F,activatorEvent:D,activeNodeRect:T,attributes:G,setNodeRef:ne,listeners:ce,isDragging:ue,over:Y,setActivatorNodeRef:Ae,transform:fe}=mM({id:o,data:N,attributes:{...EM,...r},disabled:w.draggable}),we=tR(V,ne),E=!!F,z=E&&!y&&k0(p)&&k0(v),K=!g&&ue,W=K&&z?fe:null,re=z?W??(l??m)({rects:b,activeNodeRect:T,activeIndex:p,overIndex:v,index:k}):null,be=k0(p)&&k0(v)?i({id:o,items:d,activeIndex:p,overIndex:v}):k,me=F==null?void 0:F.id,ae=C.useRef({activeId:me,items:d,newIndex:be,containerId:h}),X=d!==ae.current.items,ye=e({active:F,containerId:h,isDragging:ue,isSorting:E,id:o,index:k,items:d,newIndex:ae.current.newIndex,previousItems:ae.current.items,previousContainerId:ae.current.containerId,transition:c,wasDragging:ae.current.activeId!=null}),xe=FM({disabled:!ye,index:k,node:Q,rect:U});return C.useEffect(()=>{E&&ae.current.newIndex!==be&&(ae.current.newIndex=be),h!==ae.current.containerId&&(ae.current.containerId=h),d!==ae.current.items&&(ae.current.items=d)},[E,be,h,d]),C.useEffect(()=>{if(me===ae.current.activeId)return;if(me!=null&&ae.current.activeId==null){ae.current.activeId=me;return}const H=setTimeout(()=>{ae.current.activeId=me},50);return()=>clearTimeout(H)},[me]),{active:F,activeIndex:p,attributes:G,data:N,rect:U,index:k,newIndex:be,items:d,isOver:L,isSorting:E,isDragging:ue,listeners:ce,node:Q,overIndex:v,over:Y,setNodeRef:we,setActivatorNodeRef:Ae,setDroppableNodeRef:V,setDraggableNodeRef:ne,transform:xe??re,transition:Oe()};function Oe(){if(xe||X&&ae.current.newIndex===k)return SM;if(!(K&&!bw(D)||!c)&&(E||ye))return Po.Transition.toString({...c,property:s3})}}function UM(t,e){var r,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t==null?void 0:t.draggable)!=null?r:e.draggable,droppable:(n=t==null?void 0:t.droppable)!=null?n:e.droppable}}function Vf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const LM=[Gt.Down,Gt.Right,Gt.Up,Gt.Left],QM=(t,e)=>{let{context:{active:r,collisionRect:n,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:l}}=e;if(LM.includes(t.code)){if(t.preventDefault(),!r||!n)return;const A=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(t.code){case Gt.Down:n.top<p.top&&A.push(h);break;case Gt.Up:n.top>p.top&&A.push(h);break;case Gt.Left:n.left>p.left&&A.push(h);break;case Gt.Right:n.left<p.left&&A.push(h);break}});const c=pR({collisionRect:n,droppableRects:a,droppableContainers:A});let d=H_(c,"id");if(d===(o==null?void 0:o.id)&&c.length>1&&(d=c[1].id),d!=null){const h=i.get(r.id),p=i.get(d),u=p?a.get(p.id):null,y=p==null?void 0:p.node.current;if(y&&u&&h&&p){const v=Ig(y).some((S,U)=>l[U]!==S),g=i3(h,p),m=IM(h,p),w=v||!g?{x:0,y:0}:{x:m?n.width-u.width:0,y:m?n.height-u.height:0},k={x:u.left,y:u.top};return w.x&&w.y?k:pu(k,w)}}}};function i3(t,e){return!Vf(t)||!Vf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function IM(t,e){return!Vf(t)||!Vf(e)||!i3(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const PM=["Wstp","Uwielbienie","Modlitwa","Czytanie","Kazanie","Wieczerza","Uwielbienie / Kolekta","Ogoszenia","Zakoczenie"],TM=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function Lu(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a,!0),window.removeEventListener("resize",a)}}},[e]),r}const DM=(t,e)=>{const r=new Set;return t.zespol&&Object.values(t.zespol).forEach(n=>{typeof n=="string"&&n.split(",").map(i=>i.trim()).filter(Boolean).forEach(i=>{const o=e.find(l=>l.full_name===i);o!=null&&o.email&&r.add(o.email)})}),Array.from(r)},zM=t=>{const e=t.getFullYear(),r=t.getMonth(),n=new Date(e,r+1,0).getDate(),a=new Date(e,r,1).getDay();return{days:n,firstDay:a===0?6:a-1}},OM=({value:t,onChange:e})=>{const[r,n]=C.useState(!1),[a,i]=C.useState(t?new Date(t):new Date),o=C.useRef(null),l=Lu(o,r);C.useEffect(()=>{t&&i(new Date(t))},[t]),C.useEffect(()=>{const u=y=>{if(r&&o.current&&!o.current.contains(y.target)){const b=document.getElementById("datepicker-portal");b&&!b.contains(y.target)&&n(!1)}};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[r]);const A=u=>{const y=new Date(a.getFullYear(),a.getMonth(),u),b=y.getFullYear(),v=String(y.getMonth()+1).padStart(2,"0"),g=String(y.getDate()).padStart(2,"0");e(`${b}-${v}-${g}`),n(!1)},{days:c,firstDay:d}=zM(a),h=Array.from({length:c},(u,y)=>y+1),p=Array.from({length:d});return s.jsxs("div",{className:"relative",ref:o,children:[s.jsxs("div",{onClick:()=>n(!r),className:"flex items-center gap-2 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm px-3 py-1.5 rounded-xl border border-gray-200/50 dark:border-gray-700/50 cursor-pointer hover:border-pink-400 transition",children:[s.jsx(en,{size:16,className:"text-pink-600 dark:text-pink-400"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium text-sm",children:t?new Date(t).toLocaleDateString("pl-PL"):"Wybierz dat"})]}),r&&l.width>0&&Ht.createPortal(s.jsxs("div",{id:"datepicker-portal",className:"fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 w-[280px]",style:{top:l.top,left:l.left},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:u=>{u.stopPropagation(),i(new Date(a.setMonth(a.getMonth()-1)))},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-300",children:s.jsx(Ei,{size:18})}),s.jsx("span",{className:"text-sm font-bold capitalize text-gray-800 dark:text-gray-200",children:a.toLocaleDateString("pl-PL",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:u=>{u.stopPropagation(),i(new Date(a.setMonth(a.getMonth()+1)))},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-300",children:s.jsx(Fi,{size:18})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2 text-[10px] font-bold text-gray-400 uppercase",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(u=>s.jsx("div",{children:u},u))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[p.map((u,y)=>s.jsx("div",{},`e-${y}`)),h.map(u=>{const y=new Date(a.getFullYear(),a.getMonth(),u),b=`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}-${String(y.getDate()).padStart(2,"0")}`,v=t===b;return s.jsx("button",{onClick:g=>{g.stopPropagation(),A(u)},className:`h-8 w-8 rounded-lg text-xs font-medium transition 
                      ${v?"bg-pink-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                    `,children:u},u)})]})]}),document.body)]})},RM=({title:t,dataKey:e,fields:r,program:n,setProgram:a})=>s.jsxs("div",{className:"bg-white/60 dark:bg-gray-900/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/40 dark:border-gray-700/50 p-6 h-full hover:shadow-xl transition relative z-0",children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h3",{className:"font-bold text-lg bg-gradient-to-r from-pink-700 to-orange-700 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:t})}),s.jsx("div",{className:"space-y-4",children:r.map(i=>{var o;return s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:i.label}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-600",value:((o=n[e])==null?void 0:o[i.key])||"",onChange:l=>a(A=>({...A,[e]:{...A[e],[i.key]:l.target.value}}))})]},i.key)})})]}),MM=({value:t,onChange:e,options:r})=>{const[n,a]=C.useState(!1),i=C.useRef(null),o=Lu(i,n);return C.useEffect(()=>{const l=A=>{if(n&&i.current&&!i.current.contains(A.target)){const c=document.getElementById("element-selector-portal");c&&!c.contains(A.target)&&a(!1)}};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),s.jsxs("div",{className:"relative w-full",ref:i,children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-pink-500/20 outline-none placeholder:text-gray-400 dark:placeholder-gray-600",placeholder:"Wybierz lub wpisz...",value:t,onChange:l=>{e(l.target.value),a(!0)},onClick:()=>a(!0)}),s.jsx(tn,{size:16,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>a(!n)})]}),n&&o.width>0&&Ht.createPortal(s.jsx("div",{id:"element-selector-portal",className:"fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-in fade-in zoom-in-95 duration-100",style:{top:o.top,left:o.left,width:o.width},children:r.map(l=>s.jsx("div",{className:"px-4 py-2 hover:bg-pink-50 dark:hover:bg-pink-900/20 cursor-pointer text-sm text-gray-700 dark:text-gray-300 border-b border-gray-50 dark:border-gray-800 last:border-0",onClick:()=>{e(l),a(!1)},children:l},l))}),document.body)]})},Bw=({label:t,options:e,value:r,onChange:n,absentMembers:a=[]})=>{const[i,o]=C.useState(!1),l=C.useRef(null),A=Lu(l,i),c=r?r.split(",").map(h=>h.trim()).filter(Boolean):[];C.useEffect(()=>{const h=p=>{if(i&&l.current&&!l.current.contains(p.target)){const u=document.getElementById(`multiselect-portal-${t}`);u&&!u.contains(p.target)&&o(!1)}};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[i,t]);const d=(h,p)=>{if(p)return;let u;c.includes(h)?u=c.filter(y=>y!==h):u=[...c,h],n(u.join(", "))};return s.jsxs("div",{ref:l,className:"relative group",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsxs("div",{className:"w-full min-h-[42px] px-4 py-2 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus-within:ring-2 focus-within:ring-pink-500/20 cursor-pointer flex flex-wrap gap-2 items-center",onClick:()=>o(!i),children:[c.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Wybierz osoby..."}):c.map((h,p)=>s.jsxs("span",{className:"bg-pink-100 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-2 py-0.5 rounded-lg text-xs font-medium border border-pink-200 dark:border-pink-800 flex items-center gap-1",children:[h,s.jsx("span",{onClick:u=>{u.stopPropagation(),d(h)},className:"hover:bg-pink-200 dark:hover:bg-pink-800 rounded-full p-0.5 cursor-pointer",children:s.jsx(Nt,{size:10})})]},p)),s.jsx("div",{className:"ml-auto",children:s.jsx(tn,{size:16,className:"text-gray-400"})})]}),i&&A.width>0&&Ht.createPortal(s.jsxs("div",{id:`multiselect-portal-${t}`,className:"fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar",style:{top:A.top,left:A.left,width:A.width},children:[e.map(h=>{const p=c.includes(h.full_name),u=a.includes(h.full_name);return s.jsxs("div",{className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between transition 
                  ${u?"bg-gray-50 dark:bg-gray-800/50 text-gray-400 dark:text-gray-600 cursor-not-allowed":"hover:bg-pink-50 dark:hover:bg-pink-900/20 text-gray-700 dark:text-gray-300"}
                  ${p&&!u?"bg-pink-50 dark:bg-pink-900/20 text-pink-700 dark:text-pink-300 font-medium":""}
                `,onClick:()=>d(h.full_name,u),children:[s.jsxs("span",{className:u?"line-through decoration-gray-400":"",children:[h.full_name," ",s.jsxs("span",{className:"text-xs ml-1 opacity-60",children:["(",h.role,")"]})]}),p&&!u&&s.jsx(Un,{size:16}),u&&s.jsx(Li,{size:16,className:"text-red-300 dark:text-red-800"})]},h.id)}),e.length===0&&s.jsx("div",{className:"p-3 text-center text-gray-400 text-xs",children:"Brak czonkw w bazie"})]}),document.body)]})},HM=({songs:t,onSelect:e})=>{const[r,n]=C.useState(!1),[a,i]=C.useState(""),o=C.useRef(null),l=Lu(o,r);C.useEffect(()=>{const c=d=>{if(r&&o.current&&!o.current.contains(d.target)){const h=document.getElementById("song-selector-portal");h&&!h.contains(d.target)&&n(!1)}};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[r]);const A=t.filter(c=>c.title.toLowerCase().includes(a.toLowerCase()));return s.jsxs("div",{className:"relative w-full",ref:o,children:[s.jsxs("div",{className:"w-full px-3 py-2 bg-pink-50 dark:bg-pink-900/20 border border-pink-100 dark:border-pink-800 rounded-lg text-sm text-pink-800 dark:text-pink-300 font-medium flex items-center justify-between cursor-pointer hover:bg-pink-100 dark:hover:bg-pink-900/30 transition",onClick:()=>n(!r),children:[s.jsx("span",{children:"+ Wybierz pie..."}),s.jsx(tn,{size:16,className:"text-pink-400"})]}),r&&Ht.createPortal(s.jsxs("div",{id:"song-selector-portal",className:"fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{top:l.top,left:l.left,width:l.width},children:[s.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800",children:s.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-900 px-2 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx(No,{size:14,className:"text-gray-400"}),s.jsx("input",{autoFocus:!0,className:"bg-transparent outline-none text-sm w-full text-gray-700 dark:text-gray-200 placeholder-gray-400",placeholder:"Szukaj...",value:a,onChange:c=>i(c.target.value)})]})}),s.jsx("div",{className:"overflow-y-auto flex-1 max-h-48 custom-scrollbar",children:A.length===0?s.jsx("div",{className:"p-3 text-xs text-gray-400 text-center",children:"Brak wynikw"}):A.map(c=>s.jsxs("div",{className:"px-4 py-2 hover:bg-pink-50 dark:hover:bg-pink-900/20 cursor-pointer text-sm text-gray-700 dark:text-gray-300 flex justify-between items-center border-b border-gray-50 dark:border-gray-800 last:border-0",onClick:()=>{e(c),n(!1),i("")},children:[s.jsx("span",{className:"font-medium",children:c.title}),s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded border border-gray-200 dark:border-gray-700",children:c.key})]},c.id))})]}),document.body)]})},KM=({item:t,idx:e,songDef:r,onRemove:n,onChangeKey:a})=>{const{attributes:i,listeners:o,setNodeRef:l,transform:A,transition:c}=Rg({id:t.internalId}),d={transform:Po.Transform.toString(A),transition:c,zIndex:A?999:"auto",position:"relative"};return s.jsxs("div",{ref:l,style:d,className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 border border-pink-100 dark:border-pink-900/30 rounded-lg shadow-sm group",children:[s.jsx("div",{...i,...o,className:"cursor-grab text-gray-300 dark:text-gray-600 hover:text-pink-600 active:cursor-grabbing",children:s.jsx(gg,{size:14})}),s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsxs("span",{className:"text-pink-700 dark:text-pink-400 font-medium text-xs",children:[e+1,"."]}),s.jsx("span",{className:"text-gray-700 dark:text-gray-200 text-sm truncate",children:r.title})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{className:"appearance-none bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 text-[10px] font-bold py-0.5 pl-2 pr-4 rounded focus:outline-none cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",value:t.key,onChange:h=>a(t.internalId,h.target.value),children:TM.map(h=>s.jsx("option",{value:h,children:h},h))}),s.jsx(tn,{size:10,className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}),s.jsx("button",{onClick:()=>n(t.internalId),className:"text-gray-300 dark:text-gray-600 hover:text-red-500 p-1 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition",children:s.jsx(Nt,{size:14})})]})]})},$M=({row:t,index:e,program:r,setProgram:n,songs:a})=>{const{attributes:i,listeners:o,setNodeRef:l,transform:A,transition:c}=Rg({id:t.id}),d={transform:Po.Transform.toString(A),transition:c,zIndex:A?999:"auto",position:"relative"},h=t.selectedSongs||(t.songIds||[]).map(g=>{const m=a.find(w=>w.id===g);return{internalId:Math.random(),songId:g,key:(m==null?void 0:m.key)||"C"}}),p=g=>{const m=[...r.schedule];m[e].selectedSongs=g,m[e].songIds=g.map(w=>w.songId),n(w=>({...w,schedule:m}))},u=g=>{const{active:m,over:w}=g;if(m.id!==w.id){const k=h.findIndex(U=>U.internalId===m.id),N=h.findIndex(U=>U.internalId===w.id),S=pc(h,k,N);p(S)}},y=Lg(mu(gc,{activationConstraint:{distance:5}})),b=g=>{p(h.filter(m=>m.internalId!==g))},v=(g,m)=>{const w=h.map(k=>k.internalId===g?{...k,key:m}:k);p(w)};return s.jsxs("div",{ref:l,style:d,className:"grid grid-cols-12 gap-4 p-3 items-start hover:bg-pink-50/30 dark:hover:bg-pink-900/10 transition duration-150 bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsx("div",{className:"col-span-1 flex items-center justify-center pt-2 cursor-grab text-gray-300 dark:text-gray-600 hover:text-pink-500 active:cursor-grabbing",...i,...o,children:s.jsx(gg,{size:20})}),s.jsx("div",{className:"col-span-3",children:s.jsx(MM,{value:t.element||"",options:PM,onChange:g=>{const m=[...r.schedule];m[e].element=g,n(w=>({...w,schedule:m}))}})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-600",placeholder:"Jan Kowalski",value:t.person||"",onChange:g=>{const m=[...r.schedule];m[e].person=g.target.value,n(w=>({...w,schedule:m}))}})}),s.jsx("div",{className:"col-span-4",children:(t.element||"").toLowerCase().includes("uwielbienie")?s.jsxs("div",{className:"space-y-2",children:[s.jsx(HM,{songs:a,onSelect:g=>{const m={internalId:Date.now()+Math.random(),songId:g.id,key:g.key||"C"};p([...h,m])}}),s.jsx(Dg,{sensors:y,collisionDetection:Qg,onDragEnd:u,children:s.jsx(Og,{items:h.map(g=>g.internalId),strategy:zg,children:s.jsx("div",{className:"flex flex-col gap-1",children:h.map((g,m)=>{const w=a.find(k=>k.id===g.songId);return w?s.jsx(KM,{item:g,idx:m,songDef:w,onRemove:b,onChangeKey:v},g.internalId):null})})})})]}):s.jsx("input",{className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-600",value:t.details||"",onChange:g=>{const m=[...r.schedule];m[e].details=g.target.value,n(w=>({...w,schedule:m}))}})}),s.jsx("div",{className:"col-span-1 flex justify-center pt-2",children:s.jsx("button",{onClick:()=>{const g=r.schedule.filter(m=>m.id!==t.id);n(m=>({...m,schedule:g}))},className:"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 p-1.5 rounded-lg transition",children:s.jsx(Zr,{size:18})})})]})},V5=({title:t,dataKey:e,program:r,setProgram:n,roles:a,teamMembers:i,fallbackFields:o,absentList:l,memberRoles:A=[]})=>{const c=a.length>0?a.map(p=>({key:p.field_key,label:p.name,roleId:p.id})):o,d=(p,u)=>{n(y=>({...y,[e]:{...y[e],[p]:u}}))},h=p=>{if(!p||A.length===0)return i;const u=A.filter(y=>y.role_id===p).map(y=>String(y.member_id));return u.length===0?i:i.filter(y=>u.includes(String(y.id)))};return s.jsxs("div",{className:"bg-white/60 dark:bg-gray-900/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/40 dark:border-gray-700/50 p-6 h-full hover:shadow-xl transition relative z-0",children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h3",{className:"font-bold text-lg bg-gradient-to-r from-pink-700 to-orange-700 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:t})}),s.jsx("div",{className:"space-y-4",children:i.length>0?c.map(p=>{var u;return s.jsx(Bw,{label:p.label,options:h(p.roleId),value:((u=r[e])==null?void 0:u[p.key])||"",onChange:y=>d(p.key,y),absentMembers:l},p.key)}):c.map(p=>{var u;return s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:p.label}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200",value:((u=r[e])==null?void 0:u[p.key])||"",onChange:y=>d(p.key,y.target.value)})]},p.key)})})]})},GM=({program:t,setProgram:e,kidsGroups:r,kidsTeachers:n})=>{var l,A,c,d,h,p,u;const a=(l=t.szkolka)!=null&&l.absencja?t.szkolka.absencja.split(",").map(y=>y.trim()).filter(Boolean):[],i=(y,b)=>{e(v=>({...v,szkolka:{...v.szkolka,[y]:b}}))},o=(y,b)=>{e(v=>({...v,szkolka:{...v.szkolka,[y]:b}}))};return s.jsxs("div",{className:"bg-white/60 dark:bg-gray-900/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/40 dark:border-gray-700/50 p-6 h-full hover:shadow-xl transition relative z-0",children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h3",{className:"font-bold text-lg bg-gradient-to-r from-pink-700 to-orange-700 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Szkka Niedzielna"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Temat lekcji"}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-600",value:((A=t.szkolka)==null?void 0:A.temat)||"",onChange:y=>o("temat",y.target.value),placeholder:"Temat lekcji..."})]}),r.length>0?r.map(y=>{var b;return s.jsx(Bw,{label:y.name,options:n,value:((b=t.szkolka)==null?void 0:b[y.id])||"",onChange:v=>i(y.id,v),absentMembers:a},y.id)}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Grupa Modsza"}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200",value:((c=t.szkolka)==null?void 0:c.mlodsza)||"",onChange:y=>o("mlodsza",y.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Grupa rednia"}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200",value:((d=t.szkolka)==null?void 0:d.srednia)||"",onChange:y=>o("srednia",y.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Grupa Starsza"}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200",value:((h=t.szkolka)==null?void 0:h.starsza)||"",onChange:y=>o("starsza",y.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-red-500 dark:text-red-400 uppercase mb-1 ml-1",children:"Absencja nauczycieli"}),s.jsx("div",{className:"relative",children:s.jsx(VM,{options:n,value:((p=t.szkolka)==null?void 0:p.absencja)||"",onChange:y=>o("absencja",y)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Notatki"}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-600",value:((u=t.szkolka)==null?void 0:u.notatki)||"",onChange:y=>o("notatki",y.target.value),placeholder:"Notatki..."})]})]})]})},VM=({options:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),i=C.useRef(null),o=Lu(i,n),l=e?e.split(",").map(c=>c.trim()).filter(Boolean):[];C.useEffect(()=>{const c=d=>{if(n&&i.current&&!i.current.contains(d.target)){const h=document.getElementById("absence-multiselect-portal");h&&!h.contains(d.target)&&a(!1)}};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]);const A=c=>{const d=l.includes(c)?l.filter(h=>h!==c):[...l,c];r(d.join(", "))};return s.jsxs("div",{ref:i,className:"relative group",children:[s.jsxs("div",{className:"w-full min-h-[42px] px-4 py-2 bg-red-50/50 dark:bg-red-900/20 backdrop-blur-sm border border-red-200/50 dark:border-red-700/50 rounded-xl focus-within:ring-2 focus-within:ring-red-500/20 cursor-pointer flex flex-wrap gap-2 items-center",onClick:()=>a(!n),children:[l.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Wybierz nieobecnych..."}):l.map((c,d)=>s.jsxs("span",{className:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 px-2 py-0.5 rounded-lg text-xs font-medium border border-red-200 dark:border-red-800 flex items-center gap-1",children:[c,s.jsx("span",{onClick:h=>{h.stopPropagation(),A(c)},className:"hover:bg-red-200 dark:hover:bg-red-800 rounded-full p-0.5 cursor-pointer",children:s.jsx(Nt,{size:10})})]},d)),s.jsx("div",{className:"ml-auto",children:s.jsx(tn,{size:16,className:"text-gray-400"})})]}),n&&o.width>0&&Ht.createPortal(s.jsxs("div",{id:"absence-multiselect-portal",className:"fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar",style:{top:o.top,left:o.left,width:o.width},children:[t.map(c=>{const d=l.includes(c.full_name);return s.jsxs("div",{className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between transition
                  hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-700 dark:text-gray-300
                  ${d?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 font-medium":""}
                `,onClick:()=>A(c.full_name),children:[s.jsx("span",{children:c.full_name}),d&&s.jsx(Li,{size:16,className:"text-red-500"})]},c.id)}),t.length===0&&s.jsx("div",{className:"p-3 text-center text-gray-400 text-xs",children:"Brak nauczycieli w bazie"})]}),document.body)]})};function WM(){var Qe;const[t,e]=C.useState([]),[r,n]=C.useState(null),[a,i]=C.useState(""),[o,l]=C.useState(J()),[A,c]=C.useState([]),[d,h]=C.useState([]),[p,u]=C.useState(!1),[y,b]=C.useState("asc"),[v,g]=C.useState(!1),[m,w]=C.useState(!1),[k,N]=C.useState([]),[S,U]=C.useState([]),[Q,L]=C.useState([]),[V,F]=C.useState([]),[D,T]=C.useState([]),[G,ne]=C.useState([]),[ce,ue]=C.useState([]),[Y,Ae]=C.useState([]),[fe,we]=C.useState([]),[E,z]=C.useState([]),K=Lg(mu(gc,{activationConstraint:{distance:5}}),mu(vw,{coordinateGetter:QM}));C.useEffect(()=>{re(),be(),me(),W(),ae(),X()},[]);const W=async()=>{try{const{data:se}=await le.from("kids_groups").select("*").order("created_at"),{data:ze}=await le.from("kids_teachers").select("*").order("full_name");N(se||[]),U(ze||[])}catch(se){console.error("Bd pobierania danych Kids:",se)}};C.useEffect(()=>{if(r){const se=t.find(ze=>ze.id===r);se&&l(se)}else l(J())},[r,t]);function J(){return{date:new Date().toISOString().split("T")[0],schedule:[],atmosfera_team:{przygotowanie:"",witanie:""},produkcja:{naglosnienie:"",propresenter:"",social:"",host:""},scena:{prowadzenie:"",czytanie:"",kazanie:"",modlitwa:"",wieczerza:"",ogloszenia:""},szkolka:{mlodsza:"",srednia:"",starsza:""},zespol:{lider:"",piano:"",gitara_akustyczna:"",gitara_elektryczna:"",bas:"",wokale:"",cajon:"",notatki:"",absencja:""}}}const re=async()=>{const{data:se}=await le.from("programs").select("*").order("date",{ascending:!1});e(se||[])},be=async()=>{const{data:se}=await le.from("songs").select("*");c(se||[])},me=async()=>{const{data:se}=await le.from("worship_team").select("*").order("full_name");h(se||[])},ae=async()=>{try{const{data:se}=await le.from("team_roles").select("*").eq("is_active",!0).order("display_order");se&&(L(se.filter(O=>O.team_type==="worship")),F(se.filter(O=>O.team_type==="media")),T(se.filter(O=>O.team_type==="atmosfera")));const{data:ze}=await le.from("team_member_roles").select("*");ze&&(Ae(ze.filter(O=>O.member_table==="worship_team")),we(ze.filter(O=>O.member_table==="media_team")),z(ze.filter(O=>O.member_table==="atmosfera_members")))}catch(se){console.error("Bd pobierania sub:",se)}},X=async()=>{try{const{data:se}=await le.from("media_team").select("*").order("full_name"),{data:ze}=await le.from("atmosfera_members").select("*").order("full_name");ne(se||[]),ue(ze||[])}catch(se){console.error("Bd pobierania zespow:",se)}},ye=async()=>{o.id?await le.from("programs").update(o).eq("id",o.id):await le.from("programs").insert([o]),re(),alert("Zapisano!")},xe=async()=>{if(!o||!o.date){alert("Najpierw wybierz lub utwrz program.");return}w(!0);try{const{data:se}=await le.from("songs").select("*"),ze={};(se||[]).forEach(Pe=>{ze[Pe.id]=Pe});const O={worship:Q,media:V,atmosfera:D,kidsGroups:k};await XO(o,ze,O);const Ee=await ZO(o,ze,O);Ee.success?(alert("PDF zosta pobrany i zapisany w chmurze!"),console.log("PDF URL:",Ee.url)):(alert("PDF pobrany na dysk, ale wystpi bd zapisu w chmurze."),console.error("Upload error:",Ee.error))}catch(se){console.error("Critical error saving PDF:",se),alert("Wystpi bd podczas generowania PDF.")}finally{w(!1)}},Oe=async se=>{try{const{data:ze,error:O}=await le.from("songs").select("*");if(O)throw O;const Ee=(ze||[]).reduce((Pe,Le)=>(Pe[Le.id]=Le,Pe),{});se==="pdf"||await eR(o,Ee)}catch(ze){console.error("Bd generowania dokumentu:",ze),alert("Nie udao si wygenerowa dokumentu (bd pobierania piosenek).")}},H=async se=>{confirm("Na pewno usun?")&&(await le.from("programs").delete().eq("id",se),re(),r===se&&n(null))},$e=async se=>{const{id:ze,created_at:O,...Ee}=se;await le.from("programs").insert([Ee]),re()},lt=(se,ze)=>{const O=Pe=>{const Le={weekday:"long",year:"numeric",month:"long",day:"numeric"},ht=new Date(Pe).toLocaleDateString("pl-PL",Le);return ht.charAt(0).toUpperCase()+ht.slice(1)},Ee=()=>{var Pe;return((Pe=se.schedule)==null?void 0:Pe.map(Le=>{var ht;let Re="";return(Le.element||"").toLowerCase().includes("uwielbienie")&&((ht=Le.selectedSongs)==null?void 0:ht.length)>0?Re=Le.selectedSongs.map((ut,at)=>{const ct=ze[ut.songId];return ct?`
              <div style="display: flex; align-items: center; gap: 8px; margin-bottom: ${at<Le.selectedSongs.length-1?"6px":"0"};">
                <span style="display: inline-block; width: 20px; height: 20px; background: linear-gradient(135deg, #db2777, #ea580c); color: white; border-radius: 50%; text-align: center; line-height: 20px; font-size: 10px; font-weight: 700;">${at+1}</span>
                <span style="color: #374151; font-weight: 500;">${ct.title}</span>
                <span style="background: #fce7f3; color: #db2777; padding: 2px 8px; border-radius: 6px; font-size: 11px; font-weight: 600; border: 1px solid #fbcfe8;">${ut.key}</span>
              </div>
            `:""}).filter(Boolean).join(""):Re=`<span style="color: #6b7280;">${Le.details||"-"}</span>`,`
          <tr style="border-bottom: 1px solid #fecdd3;">
            <td style="padding: 12px; font-weight: 600; color: #be123c; vertical-align: top;">${Le.element||"-"}</td>
            <td style="padding: 12px; color: #4b5563; vertical-align: top;">${Le.person||"-"}</td>
            <td style="padding: 12px; font-size: 14px; vertical-align: top;">${Re}</td>
          </tr>
        `}).join(""))||'<tr><td colspan="3" style="padding: 20px; text-align: center; color: #9ca3af;">Brak elementw</td></tr>'};return`
      <!DOCTYPE html>
      <html lang="pl">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Program Naboestwa</title>
      </head>
      <body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: linear-gradient(135deg, #fce7f3 0%, #fed7aa 100%); min-height: 100vh;">

        <!-- Container -->
        <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #fce7f3 0%, #fed7aa 100%); padding: 40px 20px;">
          <tr>
            <td align="center">

              <!-- Main Content Card -->
              <table width="600" cellpadding="0" cellspacing="0" style="background: white; border-radius: 24px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); overflow: hidden; max-width: 100%;">

                <!-- Header with Gradient -->
                <tr>
                  <td style="background: linear-gradient(135deg, #db2777 0%, #ea580c 100%); padding: 40px 30px; text-align: center;">
                    <h1 style="margin: 0 0 8px 0; color: white; font-size: 32px; font-weight: 800; letter-spacing: -0.5px;">Program Naboestwa</h1>
                    <div style="display: inline-block; background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); padding: 8px 20px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.3);">
                      <p style="margin: 0; color: white; font-size: 16px; font-weight: 700;">${O(se.date)}</p>
                    </div>
                  </td>
                </tr>

                <!-- Content -->
                <tr>
                  <td style="padding: 40px 30px;">

                    <!-- Greeting -->
                    <p style="margin: 0 0 24px 0; color: #374151; font-size: 16px; line-height: 1.6;">
                      Cze! 
                    </p>
                    <p style="margin: 0 0 32px 0; color: #6b7280; font-size: 15px; line-height: 1.6;">
                      Poniej znajduje si szczegowy program naboestwa. Pena wersja PDF jest dostpna w zaczniku.
                    </p>

                    <!-- Schedule Title -->
                    <div style="margin-bottom: 20px; padding-bottom: 12px; border-bottom: 3px solid #db2777;">
                      <h2 style="margin: 0; color: #1f2937; font-size: 22px; font-weight: 700;"> Plan Szczegowy</h2>
                    </div>

                    <!-- Schedule Table -->
                    <table width="100%" cellpadding="0" cellspacing="0" style="border-collapse: collapse; border: 1px solid #fecdd3; border-radius: 12px; overflow: hidden; margin-bottom: 32px;">
                      <thead>
                        <tr style="background: linear-gradient(135deg, #fce7f3 0%, #fed7aa 50%, #fce7f3 100%);">
                          <th style="padding: 12px; text-align: left; font-size: 11px; font-weight: 700; color: #be123c; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #fda4af;">Element</th>
                          <th style="padding: 12px; text-align: left; font-size: 11px; font-weight: 700; color: #be123c; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #fda4af;">Osoba</th>
                          <th style="padding: 12px; text-align: left; font-size: 11px; font-weight: 700; color: #be123c; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #fda4af;">Szczegy</th>
                        </tr>
                      </thead>
                      <tbody>
                        ${Ee()}
                      </tbody>
                    </table>

                    <!-- Attachment Info -->
                    <div style="background: linear-gradient(135deg, #fef3c7 0%, #fce7f3 100%); border-left: 4px solid #f59e0b; padding: 16px 20px; border-radius: 12px; margin-bottom: 32px;">
                      <p style="margin: 0; color: #92400e; font-size: 14px; font-weight: 600;">
                         <strong>Peny program w zaczniku PDF</strong>
                      </p>
                      <p style="margin: 8px 0 0 0; color: #b45309; font-size: 13px;">
                        Szczegowe informacje, pieni z akordami oraz podzia zespow znajdziesz w zaczonym pliku PDF.
                      </p>
                    </div>

                    <!-- Footer Message -->
                    <p style="margin: 0 0 8px 0; color: #374151; font-size: 15px;">
                      Pozdrawiam ciepo,
                    </p>
                    <p style="margin: 0; color: #db2777; font-size: 16px; font-weight: 700;">
                      Liderzy SchWro
                    </p>
                  </td>
                </tr>

                <!-- Footer -->
                <tr>
                  <td style="background: #f9fafb; padding: 24px 30px; text-align: center; border-top: 1px solid #e5e7eb;">
                    <p style="margin: 0 0 4px 0; color: #9ca3af; font-size: 12px;">
                      Wygenerowano w <strong style="background: linear-gradient(135deg, #db2777, #ea580c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">App SchWro</strong>
                    </p>
                    <p style="margin: 0; color: #d1d5db; font-size: 11px;">
                      IT Excellence  SchWro Poudnie
                    </p>
                  </td>
                </tr>

              </table>

            </td>
          </tr>
        </table>

      </body>
      </html>
    `},nt=async()=>{if(!o||!o.id){alert("Najpierw zapisz program przed wysaniem maila.");return}if(confirm("Czy na pewno chcesz wysa program do wszystkich osb z listy?")){g(!0);try{const se=DM(o,d);if(se.length===0){alert("Brak adresw e-mail przypisanych do osb w programie. Upewnij si, e czonkowie zespou maj wpisane adresy e-mail w bazie."),g(!1);return}const{data:ze}=await le.from("songs").select("*"),O={};(ze||[]).forEach(at=>{O[at.id]=at});const Pe=`Program-${o.date.split("T")[0]}.pdf`,Le=`${o.id}/${Pe}`,{data:Re}=await le.storage.from("programs").list(o.id.toString(),{search:Pe});if(!Re||Re.length===0){alert('Nie znaleziono PDF w bazie. Najpierw wygeneruj PDF uywajc przycisku "PDF".'),g(!1);return}const ht=lt(o,O);console.log("Wysyanie maila z zacznikiem:",Le);const{data:rt,error:ut}=await le.functions.invoke("send-program-email",{body:{emailTo:se,subject:` Program Naboestwa: ${new Date(o.date).toLocaleDateString("pl-PL")}`,htmlBody:ht,filePath:Le,filename:Pe}});if(ut)throw ut;alert(` Wysano e-mail do ${se.length} osb!`)}catch(se){console.error("Bd wysyki:",se),alert("Wystpi bd podczas wysyania e-maila. Sprawd konsol.")}finally{g(!1)}}},Ne=se=>{const{active:ze,over:O}=se;ze.id!==O.id&&l(Ee=>{const Pe=Ee.schedule.findIndex(Re=>Re.id===ze.id),Le=Ee.schedule.findIndex(Re=>Re.id===O.id);return{...Ee,schedule:pc(Ee.schedule,Pe,Le)}})},qe=t.filter(se=>{const ze=a.toLowerCase();return(se.date||"").toLowerCase().includes(ze)||(se.title||"").toLowerCase().includes(ze)}),Ye=new Date().toISOString().split("T")[0],ot=se=>se.sort((ze,O)=>{const Ee=new Date(ze.date),Pe=new Date(O.date);return y==="asc"?Ee-Pe:Pe-Ee}),it=ot(qe.filter(se=>se.date>=Ye)),ke=ot(qe.filter(se=>se.date<Ye)),oe=se=>{const ze={weekday:"long",year:"numeric",month:"long",day:"numeric"},Ee=new Date(se).toLocaleDateString("pl-PL",ze);return Ee.charAt(0).toUpperCase()+Ee.slice(1)},Be=(Qe=o.zespol)!=null&&Qe.absencja?o.zespol.absencja.split(",").map(se=>se.trim()).filter(Boolean):[],Se=({p:se})=>{var ze;return s.jsxs("div",{onClick:()=>n(se.id),className:`p-3 rounded-xl border cursor-pointer transition group relative overflow-hidden mb-2 ${r===se.id?"bg-white dark:bg-gray-800 border-pink-200 dark:border-pink-700 shadow-md ring-1 ring-pink-100 dark:ring-pink-900":"bg-white/40 dark:bg-gray-800/40 border-white/60 dark:border-gray-700/60 hover:bg-white/80 dark:hover:bg-gray-800/80 hover:shadow-sm"}`,children:[s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsx("div",{className:`font-bold text-sm mb-0.5 ${r===se.id?"text-pink-700 dark:text-pink-400":"text-gray-700 dark:text-gray-200"}`,children:se.date?oe(se.date):"Brak daty"}),s.jsxs("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium bg-gray-100/50 dark:bg-gray-700/50 px-1.5 py-0.5 rounded inline-block",children:[((ze=se.schedule)==null?void 0:ze.length)||0," elem."]})]})}),s.jsxs("div",{className:"absolute right-2 top-2 flex gap-1 opacity-0 group-hover:opacity-100 transition duration-200",children:[s.jsx("button",{onClick:O=>{O.stopPropagation(),$e(se)},className:"p-1 bg-pink-50 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 rounded hover:bg-pink-100 dark:hover:bg-pink-900/50",title:"Duplikuj",children:s.jsx(cL,{size:14})}),s.jsx("button",{onClick:O=>{O.stopPropagation(),H(se.id)},className:"p-1 bg-red-50 dark:bg-red-900/30 text-red-500 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/50",title:"Usu",children:s.jsx(Zr,{size:14})})]}),r===se.id&&s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-pink-500"})]},se.id)};return s.jsxs("div",{className:"flex h-full bg-gradient-to-br from-pink-50 via-orange-50 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-gray-800 dark:text-gray-200",children:[s.jsxs("div",{className:"w-80 bg-white/40 dark:bg-gray-900/40 backdrop-blur-xl border-r border-white/40 dark:border-gray-700/50 flex flex-col h-full",children:[s.jsxs("div",{className:"p-6 border-b border-white/40 dark:border-gray-700/50",children:[s.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent mb-4",children:"Lista programw"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("div",{className:"relative flex-1",children:s.jsx("input",{placeholder:"Szukaj...",className:"w-full px-4 py-2 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl text-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-600",value:a,onChange:se=>i(se.target.value)})}),s.jsx("button",{onClick:()=>b(y==="asc"?"desc":"asc"),className:"px-3 py-2 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm transition",title:"Sortuj",children:s.jsx(nL,{size:18})})]}),s.jsxs("button",{onClick:()=>n(null),className:"w-full bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white py-2 rounded-xl font-bold shadow-lg hover:shadow-pink-500/30 transition transform hover:-translate-y-0.5 text-sm flex items-center justify-center gap-2",children:[s.jsx(Wt,{size:16})," Nowy Program"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Nadchodzce"}),it.length===0?s.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 italic ml-1",children:"Brak planw"}):it.map(se=>s.jsx(Se,{p:se},se.id))]}),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>u(!p),className:"flex items-center gap-2 text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1 hover:text-pink-600 dark:hover:text-pink-400 transition w-full text-left",children:[s.jsx(Dj,{size:12})," Historia ",p?s.jsx(Ui,{size:12}):s.jsx(tn,{size:12})]}),p&&s.jsx("div",{className:"animate-in fade-in slide-in-from-top-2 duration-200",children:ke.map(se=>s.jsx(Se,{p:se},se.id))})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:s.jsx("div",{className:"max-w-7xl mx-auto space-y-8",children:s.jsxs("div",{className:"bg-white/60 dark:bg-gray-900/60 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/40 dark:border-gray-700/50 p-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-8 pb-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-2",children:"Program Naboestwa"}),s.jsx(OM,{value:o.date,onChange:se=>l({...o,date:se})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:nt,disabled:v,className:"flex items-center gap-2 px-4 py-2 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors border border-blue-200 font-medium text-sm disabled:opacity-50",title:"Wylij program przez e-mail",children:[v?s.jsx(kl,{size:18,className:"animate-spin"}):s.jsx(xg,{size:18}),"Mail"]}),s.jsxs("button",{onClick:xe,disabled:m,className:"flex items-center gap-2 px-4 py-2 text-pink-600 bg-pink-50 hover:bg-pink-100 rounded-lg transition-colors border border-pink-200 font-medium text-sm disabled:opacity-50",title:"Zapisz PDF na dysku i w chmurze Supabase",children:[m?s.jsx(kl,{size:18,className:"animate-spin"}):s.jsx(xn,{size:18}),"PDF"]}),s.jsxs("button",{onClick:()=>Oe("ppt"),className:"flex items-center gap-2 px-4 py-2 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors border border-orange-200 font-medium text-sm",children:[s.jsx(vL,{size:18}),"PPT"]}),s.jsxs("button",{onClick:ye,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-pink-600 to-orange-500 hover:from-pink-700 hover:to-orange-600 text-white rounded-lg shadow-lg shadow-pink-500/20 hover:shadow-pink-500/30 transition-all font-medium text-sm",children:[s.jsx(ju,{size:18}),"Zapisz"]})]})]}),s.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/40 backdrop-blur-xl rounded-2xl shadow-lg border border-white/60 dark:border-gray-700/50 p-6 mb-8 min-h-[500px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-6 bg-pink-600 dark:bg-pink-500 rounded-full"}),"Plan szczegowy"]}),s.jsx("button",{onClick:()=>l({...o,schedule:[...o.schedule,{id:Date.now(),element:"",person:"",details:"",songIds:[],selectedSongs:[]}]}),className:"bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white text-sm px-4 py-2 rounded-xl font-bold hover:shadow-lg transition",children:"+ Dodaj Element"})]}),s.jsxs("div",{className:"bg-white/50 dark:bg-gray-900/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50 shadow-inner overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-4 p-4 border-b border-gray-200/50 dark:border-gray-700/50 bg-gray-50/50 dark:bg-gray-800/50 font-bold text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[s.jsx("div",{className:"col-span-1"}),s.jsx("div",{className:"col-span-3",children:"Element"}),s.jsx("div",{className:"col-span-3",children:"Osoba"}),s.jsx("div",{className:"col-span-4",children:"Szczegy / Notatki"}),s.jsx("div",{className:"col-span-1"})]}),s.jsx(Dg,{sensors:K,collisionDetection:Qg,onDragEnd:Ne,children:s.jsx(Og,{items:o.schedule.map(se=>se.id),strategy:zg,children:s.jsx("div",{children:o.schedule.map((se,ze)=>s.jsx($M,{row:se,index:ze,program:o,setProgram:l,songs:A},se.id))})})})]})]}),s.jsxs("div",{className:"bg-white/60 dark:bg-gray-900/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/40 dark:border-gray-700/50 p-6 mb-6 hover:shadow-xl transition relative z-50",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h3",{className:"font-bold text-lg bg-gradient-to-r from-pink-700 to-orange-700 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Zesp Uwielbienia"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(Q.length>0?Q.map(se=>({key:se.field_key,label:se.name,roleId:se.id})):[{key:"lider",label:"Lider Uwielbienia",roleId:null},{key:"piano",label:"Piano",roleId:null},{key:"gitara_akustyczna",label:"Gitara Akustyczna",roleId:null},{key:"gitara_elektryczna",label:"Gitara Elektryczna",roleId:null},{key:"bas",label:"Gitara Basowa",roleId:null},{key:"wokale",label:"Wokale",roleId:null},{key:"cajon",label:"Cajon / Perkusja",roleId:null}]).map(se=>{var O;const ze=Ee=>{if(!Ee||Y.length===0)return d;const Pe=Y.filter(Le=>Le.role_id===Ee).map(Le=>String(Le.member_id));return Pe.length===0?d:d.filter(Le=>Pe.includes(String(Le.id)))};return s.jsx(Bw,{label:se.label,options:ze(se.roleId),value:((O=o.zespol)==null?void 0:O[se.key])||"",onChange:Ee=>l(Pe=>({...Pe,zespol:{...Pe.zespol,[se.key]:Ee}})),absentMembers:Be},se.key)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 relative z-0",children:[s.jsx(V5,{title:"Atmosfera Team",dataKey:"atmosfera_team",program:o,setProgram:l,roles:D,teamMembers:ce,fallbackFields:[{key:"przygotowanie",label:"Przygotowanie"},{key:"witanie",label:"Witanie"}],absentList:Be,memberRoles:E}),s.jsx(V5,{title:"MediaTeam",dataKey:"produkcja",program:o,setProgram:l,roles:V,teamMembers:G,fallbackFields:[{key:"naglosnienie",label:"Nagonienie"},{key:"propresenter",label:"ProPresenter"},{key:"social",label:"Social Media"},{key:"host",label:"Host wydarzenia"}],absentList:Be,memberRoles:fe})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 relative z-0",children:[s.jsx(RM,{title:"Scena",dataKey:"scena",program:o,setProgram:l,fields:[{key:"prowadzenie",label:"Prowadzenie:"},{key:"modlitwa",label:"Modlitwa:"},{key:"kazanie",label:"Kazanie:"},{key:"wieczerza",label:"Wieczerza:"},{key:"ogloszenia",label:"Ogoszenia:"}]}),s.jsx(GM,{program:o,setProgram:l,kidsGroups:k,kidsTeachers:S})]})]})})})]})}function qM(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e,t]),r}function Pt({label:t,value:e,onChange:r,options:n,placeholder:a="Wybierz...",icon:i,compact:o=!1,mapOptionToLabel:l,mapOptionToValue:A}){const[c,d]=C.useState(!1),h=C.useRef(null),p=qM(h,c);C.useEffect(()=>{if(!c)return;function g(m){h.current&&!h.current.contains(m.target)&&(m.target.closest(".portal-dropdown-select")||d(!1))}return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[c]);const u=g=>l?l(g):typeof g=="object"&&(g.label||g.value)||g,y=g=>A?A(g):typeof g=="object"?g.value:g,b=n.find(g=>y(g)===e),v=b?u(b):a;return s.jsxs("div",{className:"w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsxs("div",{ref:h,onClick:()=>d(!c),className:`w-full ${o?"px-2 py-1 text-xs h-[26px]":"px-4 py-3"} border rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm cursor-pointer flex justify-between items-center transition-all
          ${c?"border-pink-500 ring-2 ring-pink-500/20 dark:border-pink-400":"border-gray-200/50 dark:border-gray-700/50 hover:border-pink-300 dark:hover:border-pink-600"}
        `,children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 truncate",children:[i&&s.jsx(i,{size:o?14:16,className:"text-gray-400 shrink-0"}),s.jsx("span",{className:`${o?"text-xs":"text-sm"} truncate ${b?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500"}`,children:v})]}),s.jsx(tn,{size:o?12:16,className:`text-gray-400 transition-transform duration-200 flex-shrink-0 ml-2 ${c?"rotate-180":""}`})]}),c&&p.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-dropdown-select fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-in fade-in zoom-in-95 duration-100",style:{top:p.top,left:p.left,width:p.width,minWidth:o?"120px":void 0},children:[n.map((g,m)=>{const w=y(g),k=w===e;return s.jsxs("div",{onClick:()=>{r(w),d(!1)},className:`px-4 py-2.5 text-sm cursor-pointer transition flex items-center justify-between
                  ${k?"bg-pink-50 dark:bg-pink-900/30 text-pink-600 dark:text-pink-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}
                `,children:[s.jsx("span",{children:u(g)}),k&&s.jsx(Un,{size:16,className:"flex-shrink-0 ml-2"})]},m)}),n.length===0&&s.jsx("div",{className:"p-3 text-gray-400 dark:text-gray-500 text-sm text-center",children:"Brak opcji"})]}),document.body)]})}const JM=["Wrocaw Pnoc","Wrocaw Poudnie","Wrocaw Centrum","Wrocaw Zachd","Online","Brak"],YM=["Aktywny","Nieaktywny","Go","Urlop"];function XM(){const[t,e]=C.useState([]),[r,n]=C.useState(!0),[a,i]=C.useState(""),[o,l]=C.useState("all"),[A,c]=C.useState(!1),[d,h]=C.useState({id:null,first_name:"",last_name:"",email:"",phone:"",address:"",ministry:"",home_group:"",status:"Aktywny"});C.useEffect(()=>{p()},[]);const p=async()=>{n(!0);try{const{data:g,error:m}=await le.from("members").select("*").order("last_name");if(m)throw m;e(g||[])}catch(g){console.error("Bd pobierania czonkw:",g)}finally{n(!1)}},u=async()=>{try{const{id:g,...m}=d;if(!m.first_name||!m.last_name){alert("Imi i nazwisko s wymagane");return}if(g){const{error:w}=await le.from("members").update(m).eq("id",g);if(w)throw w}else{const{error:w}=await le.from("members").insert([m]);if(w)throw w}c(!1),p()}catch(g){console.error("Bd zapisu:",g),alert('Wystpi bd podczas zapisywania. Sprawd czy baza danych posiada kolumny "address" i "home_group".')}},y=async g=>{if(confirm("Czy na pewno chcesz usun tego czonka?"))try{const{error:m}=await le.from("members").delete().eq("id",g);if(m)throw m;p()}catch(m){console.error("Bd usuwania:",m)}},b=(g=null)=>{h(g?{...g,address:g.address||"",home_group:g.home_group||"",ministry:g.ministry||""}:{id:null,first_name:"",last_name:"",email:"",phone:"",address:"",ministry:"",home_group:"",status:"Aktywny"}),c(!0)},v=t.filter(g=>{const m=(g.first_name||"").toLowerCase().includes(a.toLowerCase())||(g.last_name||"").toLowerCase().includes(a.toLowerCase())||(g.email||"").toLowerCase().includes(a.toLowerCase())||(g.home_group||"").toLowerCase().includes(a.toLowerCase()),w=o==="all"?!0:o==="active"?g.status==="Aktywny":g.status!=="Aktywny";return m&&w});return r?s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 dark:border-pink-400 mx-auto"}),s.jsx("div",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"adowanie bazy czonkw..."})]}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Baza Czonkw"})}),s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 transition-colors duration-300",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[s.jsxs("div",{className:"flex-1 w-full md:w-auto flex items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(No,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20}),s.jsx("input",{className:"w-full pl-10 pr-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors",placeholder:"Szukaj...",value:a,onChange:g=>i(g.target.value)})]}),s.jsxs("div",{className:"flex bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm p-1 rounded-xl border border-gray-200/50 dark:border-gray-700/50 gap-1",children:[s.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition ${o==="all"?"bg-white dark:bg-gray-700 shadow text-pink-600 dark:text-pink-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Wszyscy"}),s.jsx("button",{onClick:()=>l("active"),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition ${o==="active"?"bg-white dark:bg-gray-700 shadow text-green-600 dark:text-green-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Aktywni"})]})]}),s.jsxs("button",{onClick:()=>b(),className:"bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white text-sm px-6 py-2.5 rounded-xl font-bold hover:shadow-lg hover:shadow-pink-500/30 transition flex items-center gap-2 whitespace-nowrap",children:[s.jsx(Wt,{size:18})," Dodaj osob"]})]}),s.jsx("div",{className:"bg-white/50 dark:bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gradient-to-r from-pink-50/80 to-orange-50/80 dark:from-pink-900/20 dark:to-orange-900/20 text-gray-700 dark:text-gray-300 font-bold border-b border-gray-200/50 dark:border-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 pl-6",children:"Osoba"}),s.jsx("th",{className:"p-4",children:"Kontakt & Adres"}),s.jsx("th",{className:"p-4",children:"Zaangaowanie"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4 pr-6 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:v.map(g=>{var m,w,k;return s.jsxs("tr",{className:"hover:bg-pink-50/30 dark:hover:bg-pink-900/10 transition duration-200",children:[s.jsx("td",{className:"p-4 pl-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-100 to-orange-100 dark:from-pink-900 dark:to-orange-900 flex items-center justify-center text-pink-700 dark:text-pink-300 font-bold shadow-sm border border-white dark:border-gray-700",children:[(m=g.first_name)==null?void 0:m[0],(w=g.last_name)==null?void 0:w[0]]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-bold text-gray-800 dark:text-gray-200",children:[g.first_name," ",g.last_name]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",(k=g.id)==null?void 0:k.toString().slice(0,4)]})]})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"space-y-1",children:[g.email&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-xs",children:[s.jsx(xg,{size:14,className:"text-pink-400"})," ",g.email]}),g.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-xs",children:[s.jsx(bL,{size:14,className:"text-orange-400"})," ",g.phone]}),g.address&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-xs",children:[s.jsx(XA,{size:14,className:"text-green-500"})," ",g.address]})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-col gap-1.5 items-start",children:[g.ministry&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 px-2.5 py-1 rounded-md text-xs font-medium",children:[s.jsx(Ni,{size:12,className:"text-pink-500"})," ",g.ministry]}),g.home_group&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-pink-50 dark:bg-pink-900/20 border border-pink-100 dark:border-pink-800/30 text-pink-700 dark:text-pink-300 px-2.5 py-1 rounded-md text-xs font-medium",children:[s.jsx(nw,{size:12})," ",g.home_group]}),!g.ministry&&!g.home_group&&s.jsx("span",{className:"text-gray-400 dark:text-gray-600 text-xs",children:"-"})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold border ${g.status==="Aktywny"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200/50 dark:border-green-800/50":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 border-gray-200/50 dark:border-gray-700/50"}`,children:[g.status==="Aktywny"?s.jsx(fg,{size:12}):s.jsx(FL,{size:12}),g.status||"Nieaktywny"]})}),s.jsx("td",{className:"p-4 pr-6 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>b(g),className:"p-2 text-pink-600 dark:text-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded-lg transition",children:s.jsx(Sd,{size:18})}),s.jsx("button",{onClick:()=>y(g.id),className:"p-2 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition",children:s.jsx(Zr,{size:18})})]})})]},g.id)})})]})})]}),A&&s.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 transition-opacity",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-lg p-8 border border-white/20 dark:border-gray-700/50 relative animate-in fade-in zoom-in duration-200 max-h-[90vh] overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:d.id?"Edytuj dane":"Nowa osoba"}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-gray-100/50 dark:hover:bg-gray-800/50 rounded-full transition",children:s.jsx(Nt,{size:24,className:"text-gray-500 dark:text-gray-400"})})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Imi"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:d.first_name,onChange:g=>h({...d,first_name:g.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Nazwisko"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:d.last_name,onChange:g=>h({...d,last_name:g.target.value})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Email"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:d.email,onChange:g=>h({...d,email:g.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Telefon"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:d.phone,onChange:g=>h({...d,phone:g.target.value})})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Status",value:d.status,options:YM,onChange:g=>h({...d,status:g})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Adres Zamieszkania"}),s.jsxs("div",{className:"relative",children:[s.jsx(XA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{className:"w-full pl-10 pr-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",placeholder:"Ulica, numer domu, miasto",value:d.address,onChange:g=>h({...d,address:g.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(Pt,{label:"Grupa Domowa",placeholder:"Wybierz grup...",value:d.home_group,options:JM,onChange:g=>h({...d,home_group:g})})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Suba"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",placeholder:"np. Media, Lider",value:d.ministry,onChange:g=>h({...d,ministry:g.target.value})})]})]}),s.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>c(!1),className:"px-6 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Anuluj"}),s.jsx("button",{onClick:u,className:"px-8 py-3 bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-pink-500/30 transition",children:"Zapisz"})]})]})]})})]})}const ZM=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],e9=["Uwielbienie","Modlitwa","Na wejcie","Na ofiarowanie","Komunia","Uwielbienie (szybkie)","Kolda","Inne"],t9=["4/4","3/4","2/4","6/8","12/8","Inne"],r9=["intymna","modlitewna","niedzielna","popularna","szybko","wolna","nowo","klasyk"],n9=[{label:"Intro",template:`
[INTRO]
|      |      |      |      |
`},{label:"Zwrotka",template:`
[ZWROTKA]
|      |      |      |      |
`},{label:"Refren",template:`
[REFREN]
|      |      |      |      |
`},{label:"Bridge",template:`
[BRIDGE]
|      |      |      |      |
`},{label:"Solo",template:`
[SOLO]
|      |      |      |      |
`},{label:"Outro",template:`
[OUTRO]
|      |      |      |      |
`},{label:"Pusty Takt",template:"|      |      |      |      |"}],a9=({label:t,options:e,value:r=[],onChange:n})=>{const[a,i]=C.useState(!1),[o,l]=C.useState(""),A=C.useRef(null),c=C.useRef(null);C.useEffect(()=>{function u(y){A.current&&!A.current.contains(y.target)&&i(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const d=u=>{const y=r.includes(u)?r.filter(b=>b!==u):[...r,u];n(y)},h=()=>{const u=o.trim().toLowerCase();u&&!r.includes(u)&&(n([...r,u]),l(""))},p=u=>{u.key==="Enter"&&(u.preventDefault(),h())};return s.jsxs("div",{ref:A,className:"relative w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsxs("div",{onClick:()=>i(!a),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 cursor-pointer min-h-[50px] flex flex-wrap gap-2 hover:border-pink-400 dark:hover:border-pink-500 transition",children:[r.length===0&&s.jsx("span",{className:"text-gray-400 dark:text-gray-500 pt-0.5",children:"Wybierz tagi..."}),r.map(u=>s.jsxs("span",{className:"bg-orange-50 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1 border border-orange-100 dark:border-orange-800",children:[u,s.jsx("div",{onMouseDown:y=>{y.stopPropagation(),d(u)},className:"cursor-pointer hover:text-orange-900 dark:hover:text-white",children:s.jsx(Nt,{size:12})})]},u))]}),a&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[s.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{ref:c,type:"text",value:o,onChange:u=>l(u.target.value),onKeyDown:p,onClick:u=>u.stopPropagation(),placeholder:"Dodaj wasny tag...",className:"flex-1 px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 outline-none focus:border-pink-500"}),s.jsx("button",{onClick:u=>{u.stopPropagation(),h()},className:"px-3 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition text-sm font-bold",children:s.jsx(Oj,{size:16})})]})}),e.map(u=>{const y=r.includes(u);return s.jsxs("div",{onClick:()=>d(u),className:`px-4 py-2.5 text-sm cursor-pointer flex items-center justify-between transition
                  ${y?"bg-orange-50 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}
                `,children:[u,y&&s.jsx(Un,{size:14})]},u)})]})]})};function s9({initialData:t,onSave:e,onCancel:r}){const[n,a]=C.useState({id:null,title:"",author:"",category:"",key:"",tempo:"",meter:"",tags:[],lyrics:"",chords_bars:"",sheet_music_url:"",attachments:[]}),[i,o]=C.useState("basic"),[l,A]=C.useState(e9),[c,d]=C.useState(!1),[h,p]=C.useState(""),[u,y]=C.useState(""),[b,v]=C.useState(null),[g,m]=C.useState(""),w=C.useRef(null);C.useEffect(()=>{(async()=>{try{const{data:D}=await le.from("app_dictionaries").select("label").eq("category","song_category");D&&D.length>0&&A(D.map(T=>T.label))}catch(D){console.error("Bd pobierania kategorii:",D)}})()},[]),C.useEffect(()=>{t&&a({...t,tags:t.tags||[],title:t.title||"",author:t.author||"",category:t.category||"",key:t.key||"",tempo:t.tempo||"",meter:t.meter||"",lyrics:t.lyrics||"",chords_bars:t.chords_bars||""})},[t]);const k=()=>{if(!n.title)return alert("Podaj tytu pieni");e(n)},N=async F=>{const D=Array.from(F.target.files||[]);if(D.length!==0){d(!0);try{const T=[];for(const G of D){const ne=G.name.split(".").pop(),ue=`song_attachments/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${ne}`}`,{error:Y}=await le.storage.from("public-assets").upload(ue,G);if(Y)throw Y;const{data:Ae}=le.storage.from("public-assets").getPublicUrl(ue);T.push({type:"file",name:G.name,url:Ae.publicUrl,description:"",date:new Date().toISOString()})}a({...n,attachments:[...n.attachments||[],...T]})}catch(T){console.error("Error uploading file:",T),alert("Bd przesyania pliku: "+T.message)}finally{d(!1)}}},S=()=>{if(!h)return;const F={type:"link",name:u||h,url:h,description:u,date:new Date().toISOString()};a({...n,attachments:[...n.attachments||[],F]}),p(""),y("")},U=F=>{a({...n,attachments:(n.attachments||[]).filter((D,T)=>T!==F)})},Q=(F,D)=>{const T=[...n.attachments||[]];T[F]={...T[F],description:D,name:D||T[F].url},a({...n,attachments:T}),v(null),m("")},L=F=>{var D;v(F),m(((D=n.attachments[F])==null?void 0:D.description)||"")},V=F=>{const D=w.current;if(!D)return;const T=D.selectionStart,G=D.selectionEnd,ne=n.chords_bars||"",ce=ne.substring(0,T)+F+ne.substring(G);a({...n,chords_bars:ce}),setTimeout(()=>{D.focus(),D.setSelectionRange(T+F.length,T+F.length)},0)};return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-5xl rounded-3xl shadow-2xl border border-white/20 dark:border-gray-700 flex flex-col max-h-[92vh] my-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:n.id?"Edycja Pieni":"Nowa Pie"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Uzupenij szczegy utworu"})]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[s.jsxs("div",{className:"flex gap-2 mb-6 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl w-fit",children:[s.jsx("button",{onClick:()=>o("basic"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${i==="basic"?"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Informacje Podstawowe"}),s.jsx("button",{onClick:()=>o("lyrics"),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${i==="lyrics"?"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Tekst i Chwyty"}),s.jsxs("button",{onClick:()=>o("attachments"),className:`px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2 ${i==="attachments"?"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:[s.jsx(xn,{size:14}),"Zaczniki ",(n.attachments||[]).length>0&&s.jsx("span",{className:"bg-pink-100 dark:bg-pink-900 text-pink-600 dark:text-pink-300 px-1.5 py-0.5 rounded text-xs",children:n.attachments.length})]})]}),i==="basic"&&s.jsxs("div",{className:"space-y-6 min-h-[500px]",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Tytu"}),s.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-pink-500/20 outline-none transition",placeholder:"Np. Jak wielki jest Bg",value:n.title,onChange:F=>a({...n,title:F.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Autor"}),s.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-pink-500/20 outline-none transition",placeholder:"Np. Chris Tomlin",value:n.author,onChange:F=>a({...n,author:F.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Pt,{label:"Tonacja",options:ZM,value:n.key,onChange:F=>a({...n,key:F}),placeholder:"Klucz",icon:Ms}),s.jsx(Pt,{label:"Metrum",options:t9,value:n.meter,onChange:F=>a({...n,meter:F}),placeholder:"4/4",icon:Tj}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Tempo (BPM)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-pink-500/20 outline-none transition",placeholder:"120",value:n.tempo,onChange:F=>a({...n,tempo:F.target.value})})]}),s.jsx(Pt,{label:"Kategoria",options:l,value:n.category,onChange:F=>a({...n,category:F}),placeholder:"Rodzaj",icon:eL})]}),s.jsx(a9,{label:"Tagi",options:r9,value:n.tags,onChange:F=>a({...n,tags:F})})]}),i==="lyrics"&&s.jsx("div",{className:"space-y-6 h-full",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full min-h-[500px]",children:[s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Tekst Pieni (Lyrics)"}),s.jsx("textarea",{className:"flex-1 w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-pink-500/20 outline-none transition resize-none font-mono text-sm leading-relaxed",placeholder:"Wpisz tekst tutaj...",value:n.lyrics,onChange:F=>a({...n,lyrics:F.target.value})})]}),s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex justify-between items-end mb-1",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Chwyty / Takty (chords_bars)"}),s.jsx("span",{className:"text-[10px] text-gray-400",children:"Kliknij przycisk poniej, aby wstawi"})]}),s.jsx("textarea",{ref:w,className:"flex-1 w-full px-4 py-3 rounded-t-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 text-gray-800 dark:text-gray-300 focus:ring-2 focus:ring-pink-500/20 outline-none transition resize-none font-mono text-sm leading-relaxed",placeholder:"[INTRO] | C | G | Am | F |...",value:n.chords_bars,onChange:F=>a({...n,chords_bars:F.target.value})}),s.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-800 border-x border-b border-gray-200 dark:border-gray-700 rounded-b-xl flex flex-wrap gap-2",children:n9.map(F=>s.jsxs("button",{onClick:()=>V(F.template),className:"px-3 py-1.5 bg-white dark:bg-gray-700 hover:bg-pink-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 text-xs font-bold rounded-lg border border-gray-200 dark:border-gray-600 transition flex items-center gap-1",children:[s.jsx(Oj,{size:12,className:"text-pink-500 dark:text-pink-400"}),F.label]},F.label))})]})]})}),i==="attachments"&&s.jsxs("div",{className:"space-y-6 min-h-[500px]",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 uppercase mb-4 flex items-center gap-2",children:[s.jsx(Hs,{size:16,className:"text-pink-500"})," Przelij plik"]}),s.jsxs("label",{className:"w-full px-6 py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-900 cursor-pointer hover:border-pink-400 dark:hover:border-pink-500 transition flex flex-col items-center justify-center gap-2",children:[s.jsx(Hs,{size:32,className:"text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:c?"Przesyanie...":"Kliknij lub przecignij plik"}),s.jsx("span",{className:"text-xs text-gray-400",children:"PDF, JPG, PNG, MP3, DOC (max 10MB)"}),s.jsx("input",{type:"file",onChange:N,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.mp3,.wav",disabled:c,multiple:!0})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 uppercase mb-4 flex items-center gap-2",children:[s.jsx(Lo,{size:16,className:"text-orange-500"})," Dodaj link"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-800 dark:text-white text-sm outline-none focus:border-pink-500 transition",placeholder:"https://youtube.com/watch?v=...",value:h,onChange:F=>p(F.target.value)}),s.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-800 dark:text-white text-sm outline-none focus:border-pink-500 transition",placeholder:"Opis linku (np. Tutorial na YouTube)",value:u,onChange:F=>y(F.target.value)}),s.jsx("button",{onClick:S,disabled:!h,className:"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-pink-500 text-white rounded-xl font-bold text-sm hover:shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Dodaj Link"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 uppercase mb-4",children:["Zaczniki (",(n.attachments||[]).length,")"]}),!n.attachments||n.attachments.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-400 bg-gray-50 dark:bg-gray-800 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[s.jsx(xn,{size:40,className:"mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"Brak zacznikw"}),s.jsx("p",{className:"text-sm mt-1",children:"Dodaj pliki lub linki powyej"})]}):s.jsx("div",{className:"space-y-3",children:n.attachments.map((F,D)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-pink-300 dark:hover:border-pink-600 transition group",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${F.type==="link"?"bg-orange-100 dark:bg-orange-900/30 text-orange-600":"bg-pink-100 dark:bg-pink-900/30 text-pink-600"}`,children:F.type==="link"?s.jsx(Lo,{size:20}):s.jsx(xn,{size:20})}),s.jsx("div",{className:"min-w-0 flex-1",children:b===D?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-800 dark:text-white outline-none focus:border-pink-500",value:g,onChange:T=>m(T.target.value),placeholder:"Wpisz opis...",autoFocus:!0}),s.jsx("button",{onClick:()=>Q(D,g),className:"px-3 py-1.5 bg-pink-600 text-white rounded-lg text-sm font-bold hover:bg-pink-700",children:"OK"}),s.jsx("button",{onClick:()=>{v(null),m("")},className:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg text-sm",children:"Anuluj"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200 text-sm truncate",children:F.description||F.name||F.url}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:F.type==="link"?F.url:F.name})]})})]}),b!==D&&s.jsxs("div",{className:"flex gap-2 shrink-0 ml-3",children:[s.jsx("button",{onClick:()=>L(D),className:"p-2 text-gray-400 hover:text-pink-600 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded-lg transition",title:"Edytuj opis",children:s.jsx(ZA,{size:16})}),s.jsx("button",{onClick:()=>U(D),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition",title:"Usu zacznik",children:s.jsx(Zr,{size:16})})]})]},D))})]})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 rounded-b-3xl flex justify-end gap-3",children:[s.jsx("button",{onClick:r,className:"px-6 py-3 rounded-xl font-bold text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-800 border border-transparent hover:border-gray-200 dark:hover:border-gray-600 transition",children:"Anuluj"}),s.jsx("button",{onClick:k,className:"px-8 py-3 rounded-xl font-bold text-white bg-gradient-to-r from-pink-600 to-orange-600 hover:shadow-lg hover:shadow-pink-500/30 transition transform hover:-translate-y-0.5",children:"Zapisz Pie"})]})]})})}function Qu({ministry:t,budgetItems:e,expenses:r,onAddExpense:n,onRefresh:a}){const[i,o]=C.useState({}),l=y=>{o(b=>({...b,[y]:!b[y]}))},A=(y,b)=>r.filter(v=>v.category===y&&v.description===b).reduce((v,g)=>v+parseFloat(g.amount||0),0),c=y=>y<80?"from-green-500 to-green-600":y<=100?"from-yellow-500 to-yellow-600":"from-red-500 to-red-600",d=e.reduce((y,b)=>y+parseFloat(b.planned_amount||0),0),h=e.reduce((y,b)=>{const v=A(b.category,b.description);return y+v},0),p=d-h,u=d>0?h/d*100:0;return s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Budet i Wydatki: ",t]}),s.jsxs("button",{onClick:n,className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18}),"Dodaj wydatek"]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx("p",{className:"mb-4",children:"Brak pozycji budetowych dla tej suby"}),s.jsx("p",{className:"text-sm",children:"Dodaj pozycje budetowe w module Finanse"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Opis kosztu"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Plan (PLN)"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Wykorzystano (PLN)"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"% Realizacji"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Pozostao"})]})}),s.jsx("tbody",{children:e.map(y=>{const b=A(y.category,y.description),v=y.planned_amount-b,g=y.planned_amount>0?b/y.planned_amount*100:0,m=r.filter(w=>w.category===y.category&&w.description===y.description);return s.jsxs(Sn.Fragment,{children:[s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"py-4 px-4 text-gray-900 dark:text-white",children:y.description}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white font-medium",children:[y.planned_amount.toLocaleString("pl-PL")," z"]}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white font-medium cursor-pointer hover:text-pink-600 dark:hover:text-pink-400 transition",onClick:()=>l(y.id),children:[b.toLocaleString("pl-PL")," z",i[y.id]?s.jsx(Ui,{size:16,className:"inline ml-1"}):s.jsx(tn,{size:16,className:"inline ml-1"})]}),s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-center font-bold text-gray-900 dark:text-white",children:[g.toFixed(1),"%"]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${c(g)} transition-all`,style:{width:`${Math.min(g,100)}%`}})})]})}),s.jsxs("td",{className:`py-4 px-4 text-right font-bold ${v>=0?"text-green-600":"text-red-600"}`,children:[v.toLocaleString("pl-PL")," z"]})]}),i[y.id]&&s.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:s.jsx("td",{colSpan:5,className:"py-4 px-4",children:m.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Wydatki: ",y.description]}),s.jsx("div",{className:"space-y-1",children:m.map(w=>s.jsxs("div",{className:"grid grid-cols-5 gap-3 text-sm py-2 px-3 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Data"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(w.payment_date).toLocaleDateString("pl-PL")})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Kontrahent"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:w.contractor})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Kwota"}),s.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[w.amount.toLocaleString("pl-PL")," z"]})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Szczegowy opis"}),s.jsx("span",{className:"text-gray-900 dark:text-white text-xs",children:w.detailed_description||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Odpowiedzialny"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:w.responsible_person})]})]},w.id))}),s.jsx("div",{className:"flex justify-end pt-2 border-t border-gray-200 dark:border-gray-700 mt-2",children:s.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["Suma: ",m.reduce((w,k)=>w+k.amount,0).toLocaleString("pl-PL")," z"]})})]}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:"Brak wydatkw w tej pozycji budetu"})})})]},y.id)})})]})}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-pink-100 to-orange-100 dark:from-pink-900/40 dark:to-orange-900/40 rounded-xl",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Plan cakowity"}),s.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[d.toLocaleString("pl-PL")," z"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Wykorzystano"}),s.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[h.toLocaleString("pl-PL")," z"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"% Realizacji"}),s.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[u.toFixed(1),"%"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Pozostao"}),s.jsxs("div",{className:`text-xl font-bold ${p>=0?"text-green-600":"text-red-600"}`,children:[p.toLocaleString("pl-PL")," z"]})]})]})})]})]})}function o3({ministry:t,currentUserEmail:e,currentUserName:r}){const[n,a]=C.useState([]),[i,o]=C.useState(!0),[l,A]=C.useState(""),[c,d]=C.useState([]),[h,p]=C.useState(!1),[u,y]=C.useState(!1),[b,v]=C.useState(""),[g,m]=C.useState(""),[w,k]=C.useState({}),[N,S]=C.useState(null),U=C.useRef(null),Q=C.useRef(null),L=C.useRef(null),V=C.useRef(null);C.useEffect(()=>{T(),D()},[t]),C.useEffect(()=>{F()},[n]);const F=()=>{var X;(X=U.current)==null||X.scrollIntoView({behavior:"smooth"})},D=async()=>{try{const{data:X}=await le.from("app_users").select("email, full_name, avatar_url");if(X){const ye={};X.forEach(xe=>{ye[xe.email]={name:xe.full_name,avatar:xe.avatar_url}}),k(ye)}}catch(X){console.error("Error fetching avatars:",X)}},T=async()=>{o(!0);try{const{data:X,error:ye}=await le.from("wall_posts").select("*").eq("ministry",t).order("created_at",{ascending:!0});if(ye)throw ye;a(X||[])}catch(X){console.error("Error fetching posts:",X)}o(!1)},G=async(X,ye)=>{const xe=Array.from(X.target.files||[]);if(xe.length!==0){p(!0);try{const Oe=[];for(const H of xe){const $e=H.name.split(".").pop(),lt=`${Date.now()}_${Math.random().toString(36).substring(7)}.${$e}`,nt=`wall_attachments/${t.replace(/\s+/g,"_")}/${lt}`,{error:Ne}=await le.storage.from("public-assets").upload(nt,H);if(Ne)throw Ne;const{data:qe}=le.storage.from("public-assets").getPublicUrl(nt);Oe.push({type:ye==="image"?"image":"file",name:H.name,url:qe.publicUrl,size:H.size})}d(H=>[...H,...Oe])}catch(Oe){console.error("Error uploading file:",Oe),alert("Blad przesylania pliku: "+Oe.message)}finally{p(!1)}}},ne=()=>{b.trim()&&(d(X=>[...X,{type:"link",name:g.trim()||b,url:b.trim()}]),v(""),m(""),y(!1))},ce=X=>{d(ye=>ye.filter((xe,Oe)=>Oe!==X))},ue=X=>{var ye,xe,Oe;S({id:X.id,author:J(X),content:((ye=X.content)==null?void 0:ye.substring(0,100))+(((xe=X.content)==null?void 0:xe.length)>100?"...":"")}),(Oe=V.current)==null||Oe.focus()},Y=()=>{S(null)},Ae=async()=>{if(!(!l.trim()&&c.length===0))try{const X={ministry:t,title:"",content:l.trim(),author_email:e,author_name:r||e,pinned:!1,likes:[],attachments:c,comments:[]};N&&(X.reply_to={id:N.id,author:N.author,content:N.content});const{error:ye}=await le.from("wall_posts").insert([X]);if(ye)throw ye;A(""),d([]),S(null),T()}catch(X){console.error("Error sending message:",X),alert("Blad wysylania: "+X.message)}},fe=async X=>{if(confirm("Usunac ta wiadomosc?"))try{const{error:ye}=await le.from("wall_posts").delete().eq("id",X);if(ye)throw ye;T()}catch(ye){console.error("Error deleting post:",ye)}},we=async X=>{const ye=X.likes||[],Oe=ye.includes(e)?ye.filter(H=>H!==e):[...ye,e];try{const{error:H}=await le.from("wall_posts").update({likes:Oe}).eq("id",X.id);if(H)throw H;a($e=>$e.map(lt=>lt.id===X.id?{...lt,likes:Oe}:lt))}catch(H){console.error("Error toggling like:",H)}},E=async X=>{try{const{error:ye}=await le.from("wall_posts").update({pinned:!X.pinned}).eq("id",X.id);if(ye)throw ye;T()}catch(ye){console.error("Error toggling pin:",ye)}},z=X=>{const ye=new Date(X),Oe=new Date-ye,H=Math.floor(Oe/(1e3*60*60*24));return H===0?ye.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"}):H===1?"wczoraj "+ye.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"}):H<7?ye.toLocaleDateString("pl-PL",{weekday:"short"})+" "+ye.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"}):ye.toLocaleDateString("pl-PL",{day:"numeric",month:"short"})+" "+ye.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"})},K=X=>X<1024?X+" B":X<1024*1024?(X/1024).toFixed(1)+" KB":(X/(1024*1024)).toFixed(1)+" MB",W=X=>{var ye;return((ye=w[X])==null?void 0:ye.avatar)||null},J=X=>{var ye;return((ye=w[X.author_email])==null?void 0:ye.name)||X.author_name||X.author_email},re=X=>{const ye={};return X.forEach(xe=>{const Oe=new Date(xe.created_at).toLocaleDateString("pl-PL",{day:"numeric",month:"long",year:"numeric"});ye[Oe]||(ye[Oe]=[]),ye[Oe].push(xe)}),ye},be=n.filter(X=>X.pinned),me=n.filter(X=>!X.pinned),ae=re(me);return i?s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-pink-600"})}):s.jsxs("div",{className:"flex flex-col h-[calc(100vh-280px)] min-h-[500px]",children:[be.length>0&&s.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 border-b border-pink-200 dark:border-pink-800 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-pink-600 dark:text-pink-400 text-xs font-bold uppercase mb-2",children:[s.jsx(nm,{size:12})," Przypiete wiadomosci"]}),s.jsx("div",{className:"space-y-2",children:be.map(X=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 text-sm border border-pink-200 dark:border-pink-800",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:J(X)}),X.author_email===e&&s.jsx("button",{onClick:()=>E(X),className:"text-pink-500 hover:text-pink-700 p-1",children:s.jsx(nm,{size:14})})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:X.content})]},X.id))})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-gray-50 dark:bg-gray-900/50",children:[n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:s.jsx(_f,{size:24,className:"text-gray-400 dark:text-gray-500"})}),s.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Brak wiadomosci"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Napisz pierwsza wiadomosc do zespolu!"})]}):s.jsx(s.Fragment,{children:Object.entries(ae).map(([X,ye])=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-4 my-4",children:[s.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),s.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/50 px-2",children:X}),s.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),ye.map((xe,Oe)=>{var Ne;const H=xe.author_email===e,$e=(xe.likes||[]).includes(e),lt=W(xe.author_email),nt=Oe===0||((Ne=ye[Oe-1])==null?void 0:Ne.author_email)!==xe.author_email;return s.jsxs("div",{className:`flex gap-3 mb-2 group relative hover:z-10 ${H?"flex-row-reverse":""}`,children:[s.jsx("div",{className:`w-9 h-9 shrink-0 ${nt?"":"invisible"}`,children:lt?s.jsx("img",{src:lt,alt:"",className:"w-9 h-9 rounded-full object-cover"}):s.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-white font-bold text-sm ${H?"bg-gradient-to-br from-pink-500 to-orange-500":"bg-gradient-to-br from-blue-500 to-purple-500"}`,children:(J(xe)||"U").charAt(0).toUpperCase()})}),s.jsxs("div",{className:`max-w-[70%] ${H?"items-end":"items-start"}`,children:[nt&&s.jsxs("div",{className:`flex items-center gap-2 mb-1 ${H?"flex-row-reverse":""}`,children:[s.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:J(xe)}),s.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:z(xe.created_at)})]}),s.jsxs("div",{className:`relative rounded-2xl px-4 py-2.5 ${H?"bg-gradient-to-r from-pink-500 to-orange-500 text-white rounded-tr-sm":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700 rounded-tl-sm"}`,children:[xe.reply_to&&s.jsxs("div",{className:`mb-2 p-2 rounded-lg border-l-2 ${H?"bg-white/10 border-white/50":"bg-gray-100 dark:bg-gray-700 border-pink-400"}`,children:[s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[s.jsx(f2,{size:10,className:H?"text-white/70":"text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold ${H?"text-white/80":"text-pink-500"}`,children:xe.reply_to.author})]}),s.jsx("p",{className:`text-xs truncate ${H?"text-white/70":"text-gray-500 dark:text-gray-400"}`,children:xe.reply_to.content})]}),xe.content&&s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:xe.content}),xe.attachments&&xe.attachments.length>0&&s.jsx("div",{className:`mt-2 space-y-2 ${xe.content?"":"-mt-0.5"}`,children:xe.attachments.map((qe,Ye)=>s.jsx("div",{children:qe.type==="image"?s.jsx("a",{href:qe.url,target:"_blank",rel:"noreferrer",className:"block",children:s.jsx("img",{src:qe.url,alt:qe.name,className:"max-w-full max-h-64 rounded-lg cursor-pointer hover:opacity-90 transition"})}):qe.type==="link"?s.jsxs("a",{href:qe.url,target:"_blank",rel:"noreferrer",className:`flex items-center gap-2 p-2 rounded-lg transition ${H?"bg-white/20 hover:bg-white/30":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(oy,{size:16,className:H?"text-white/80":"text-blue-500"}),s.jsx("span",{className:`text-sm truncate ${H?"text-white/90":"text-blue-600 dark:text-blue-400"}`,children:qe.name})]}):s.jsxs("a",{href:qe.url,target:"_blank",rel:"noreferrer",className:`flex items-center gap-2 p-2 rounded-lg transition ${H?"bg-white/20 hover:bg-white/30":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(xn,{size:16,className:H?"text-white/80":"text-gray-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm truncate ${H?"text-white/90":"text-gray-800 dark:text-gray-200"}`,children:qe.name}),qe.size&&s.jsx("p",{className:`text-[10px] ${H?"text-white/60":"text-gray-400"}`,children:K(qe.size)})]}),s.jsx(Pj,{size:14,className:H?"text-white/60":"text-gray-400"})]})},Ye))}),s.jsxs("div",{className:`absolute -bottom-5 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition z-20 ${H?"right-0":"left-0"}`,children:[s.jsx("button",{onClick:()=>ue(xe),className:"p-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-blue-500 transition",title:"Odpowiedz",children:s.jsx(BL,{size:12})}),s.jsx("button",{onClick:()=>we(xe),className:`p-1 rounded-full transition ${$e?"bg-pink-100 dark:bg-pink-900/50 text-pink-500":"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-pink-500"}`,children:s.jsx(hL,{size:12,fill:$e?"currentColor":"none"})}),(xe.likes||[]).length>0&&s.jsx("span",{className:"text-[10px] text-gray-500",children:xe.likes.length}),H&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>E(xe),className:`p-1 rounded-full transition ${xe.pinned?"bg-pink-100 dark:bg-pink-900/50 text-pink-500":"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-pink-500"}`,children:s.jsx(nm,{size:12})}),s.jsx("button",{onClick:()=>fe(xe.id),className:"p-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-red-500 transition",children:s.jsx(Zr,{size:12})})]})]})]})]})]},xe.id)})]},X))}),s.jsx("div",{ref:U})]}),c.length>0&&s.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-3",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((X,ye)=>s.jsxs("div",{className:"relative group bg-white dark:bg-gray-700 rounded-lg p-2 pr-8 border border-gray-200 dark:border-gray-600",children:[X.type==="image"?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:X.url,alt:"",className:"w-10 h-10 rounded object-cover"}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 max-w-[100px] truncate",children:X.name})]}):X.type==="link"?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lo,{size:16,className:"text-blue-500"}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 max-w-[150px] truncate",children:X.name})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xn,{size:16,className:"text-gray-500"}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 max-w-[100px] truncate",children:X.name})]}),s.jsx("button",{onClick:()=>ce(ye),className:"absolute top-1 right-1 p-1 rounded-full bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-gray-300 hover:bg-red-100 hover:text-red-500 transition",children:s.jsx(Nt,{size:12})})]},ye))})}),u&&s.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"URL linku...",value:b,onChange:X=>v(X.target.value),className:"flex-1 px-3 py-2 text-sm rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),s.jsx("input",{type:"text",placeholder:"Tytul (opcjonalnie)",value:g,onChange:X=>m(X.target.value),className:"w-40 px-3 py-2 text-sm rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),s.jsx("button",{onClick:ne,className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition",children:"Dodaj"}),s.jsx("button",{onClick:()=>{y(!1),v(""),m("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Nt,{size:18})})]})}),N&&s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-800 px-4 py-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(f2,{size:14,className:"text-blue-500 shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsxs("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400",children:["Odpowiadasz do ",N.author]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:N.content})]})]}),s.jsx("button",{onClick:Y,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 shrink-0",children:s.jsx(Nt,{size:16})})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{ref:L,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:X=>G(X,"image")}),s.jsx("button",{onClick:()=>{var X;return(X=L.current)==null?void 0:X.click()},disabled:h,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-pink-100 dark:hover:bg-pink-900/30 hover:text-pink-500 transition",title:"Dodaj zdjecie",children:s.jsx(pg,{size:20})}),s.jsx("input",{ref:Q,type:"file",multiple:!0,className:"hidden",onChange:X=>G(X,"file")}),s.jsx("button",{onClick:()=>{var X;return(X=Q.current)==null?void 0:X.click()},disabled:h,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-pink-100 dark:hover:bg-pink-900/30 hover:text-pink-500 transition",title:"Dodaj plik",children:s.jsx(zj,{size:20})}),s.jsx("button",{onClick:()=>y(!u),className:`w-10 h-10 flex items-center justify-center rounded-xl transition ${u?"bg-blue-100 dark:bg-blue-900/30 text-blue-500":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-pink-100 dark:hover:bg-pink-900/30 hover:text-pink-500"}`,title:"Dodaj link",children:s.jsx(Lo,{size:20})})]}),s.jsx("div",{className:"flex-1",children:s.jsx("input",{ref:V,type:"text",value:l,onChange:X=>A(X.target.value),onKeyDown:X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),Ae())},placeholder:"Napisz wiadomosc...",className:"w-full h-10 px-4 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition text-sm"})}),s.jsx("button",{onClick:Ae,disabled:!l.trim()&&c.length===0,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-r from-pink-500 to-orange-500 text-white shadow-lg hover:shadow-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition transform hover:scale-105 active:scale-95",children:s.jsx(_f,{size:18})})]}),h&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-pink-500"}),"Przesylanie..."]})]})]})}function i9(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e]),r}const o9=({members:t,selectedIds:e,onChange:r,roleId:n})=>{const[a,i]=C.useState(!1),o=C.useRef(null),l=i9(o,a);C.useEffect(()=>{if(!a)return;const d=h=>{o.current&&!o.current.contains(h.target)&&!h.target.closest(`.member-select-portal-${n}`)&&i(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[a,n]);const A=d=>{const h=String(d),u=e.map(String).includes(h)?e.filter(y=>String(y)!==h):[...e,d];r(u)},c=t.filter(d=>e.map(String).includes(String(d.id)));return s.jsxs("div",{ref:o,className:"relative",children:[s.jsxs("div",{onClick:()=>i(!a),className:"w-full min-h-[42px] px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer flex flex-wrap gap-1.5 items-center hover:border-pink-300 dark:hover:border-pink-600 transition",children:[c.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Przypisz osoby..."}):c.map(d=>s.jsxs("span",{className:"bg-pink-50 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-2 py-0.5 rounded-lg text-xs font-medium border border-pink-100 dark:border-pink-800 flex items-center gap-1",children:[d.full_name,s.jsx("span",{onClick:h=>{h.stopPropagation(),A(d.id)},className:"hover:bg-pink-200 dark:hover:bg-pink-800 rounded-full p-0.5 cursor-pointer",children:s.jsx(Nt,{size:10})})]},d.id)),s.jsx("div",{className:"ml-auto",children:s.jsx(tn,{size:16,className:"text-gray-400"})})]}),a&&l.width>0&&Ht.createPortal(s.jsxs("div",{className:`member-select-portal-${n} fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar`,style:{top:l.top,left:l.left,width:Math.max(l.width,200)},children:[t.map(d=>{const h=e.map(String).includes(String(d.id));return s.jsxs("div",{className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between transition
                  hover:bg-pink-50 dark:hover:bg-pink-900/20 text-gray-700 dark:text-gray-300
                  ${h?"bg-pink-50 dark:bg-pink-900/20 text-pink-700 dark:text-pink-300 font-medium":""}
                `,onClick:()=>A(d.id),children:[s.jsx("span",{children:d.full_name}),h&&s.jsx(Un,{size:16,className:"text-pink-600"})]},d.id)}),t.length===0&&s.jsx("div",{className:"p-3 text-center text-gray-400 text-xs",children:"Brak czonkw w zespole"})]}),document.body)]})};function Cw({teamType:t,teamMembers:e,memberTable:r}){const[n,a]=C.useState([]),[i,o]=C.useState([]),[l,A]=C.useState(!0),[c,d]=C.useState(!1),[h,p]=C.useState({id:null,name:"",field_key:"",description:""});C.useEffect(()=>{u()},[t]);const u=async()=>{A(!0);try{const{data:m,error:w}=await le.from("team_roles").select("*").eq("team_type",t).eq("is_active",!0).order("display_order");w&&console.error("Bd pobierania sub:",w);const{data:k,error:N}=await le.from("team_member_roles").select("*").eq("member_table",r);N&&console.error("Bd pobierania przypisa:",N),a(m||[]),o(k||[])}catch(m){console.error("Bd pobierania danych sub:",m)}A(!1)},y=async()=>{if(!h.name.trim())return alert("Podaj nazw suby");const m=h.field_key.trim()||h.name.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").normalize("NFD").replace(/[\u0300-\u036f]/g,""),w={name:h.name.trim(),field_key:m,description:h.description.trim(),team_type:t,display_order:h.id?void 0:n.length+1};try{h.id?await le.from("team_roles").update(w).eq("id",h.id):await le.from("team_roles").insert([w]),d(!1),p({id:null,name:"",field_key:"",description:""}),u()}catch(k){alert("Bd zapisu: "+k.message)}},b=async m=>{if(confirm("Czy na pewno chcesz usun t sub? Spowoduje to usunicie wszystkich przypisa."))try{await le.from("team_roles").delete().eq("id",m),u()}catch(w){alert("Bd usuwania: "+w.message)}},v=async(m,w)=>{try{const{error:k}=await le.from("team_member_roles").delete().eq("role_id",m).eq("member_table",r);if(k&&console.error("Bd usuwania przypisa:",k),w.length>0){const N=w.map(U=>({member_id:String(U),member_table:r,role_id:m})),{error:S}=await le.from("team_member_roles").insert(N);if(S){console.error("Bd dodawania przypisa:",S),alert("Bd zapisywania przypisa: "+S.message);return}}u()}catch(k){console.error("Bd aktualizacji przypisa:",k),alert("Bd aktualizacji: "+k.message)}},g=m=>i.filter(w=>w.role_id===m).map(w=>String(w.member_id));return l?s.jsx("div",{className:"p-10 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"})}):s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Suby"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Zarzdzaj subami i przypisuj do nich czonkw zespou"})]}),s.jsxs("button",{onClick:()=>{p({id:null,name:"",field_key:"",description:""}),d(!0)},className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg hover:shadow-pink-500/50 transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj sub"]})]}),n.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-400 dark:text-gray-500",children:[s.jsx(ta,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"Brak zdefiniowanych sub"}),s.jsx("p",{className:"text-sm mt-1",children:"Dodaj pierwsz sub, aby mc przypisywa do niej czonkw zespou"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(m=>{const w=g(m.id);return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-lg hover:border-pink-300 dark:hover:border-pink-600 transition-all duration-200 overflow-hidden group",children:[s.jsx("div",{className:"bg-gradient-to-r from-pink-50 to-orange-50 dark:from-pink-900/20 dark:to-orange-900/20 px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center text-white shadow-md shadow-pink-500/20",children:s.jsx(ta,{size:18})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-sm",children:m.name}),m.description&&s.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400 line-clamp-1",children:m.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-bold text-pink-600 dark:text-pink-400 bg-pink-100 dark:bg-pink-900/40 px-2 py-0.5 rounded-full",children:w.length}),s.jsxs("div",{className:"flex gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>{p({id:m.id,name:m.name,field_key:m.field_key,description:m.description||""}),d(!0)},className:"p-1.5 text-gray-400 hover:text-pink-600 hover:bg-white dark:hover:bg-gray-700 rounded-lg transition",children:s.jsx(Sd,{size:14})}),s.jsx("button",{onClick:()=>b(m.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-white dark:hover:bg-gray-700 rounded-lg transition",children:s.jsx(Zr,{size:14})})]})]})]})}),s.jsx("div",{className:"p-3",children:s.jsx(o9,{members:e,selectedIds:w,onChange:k=>v(m.id,k),roleId:m.id})})]},m.id)})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-md p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:h.id?"Edytuj sub":"Nowa suba"}),s.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Nazwa suby"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"np. Piano, Nagonienie",value:h.name,onChange:m=>p({...h,name:m.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Klucz pola (opcjonalnie)"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 font-mono text-sm",placeholder:"np. piano, naglosnienie",value:h.field_key,onChange:m=>p({...h,field_key:m.target.value})}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 ml-1",children:"Klucz uywany w grafiku. Zostanie wygenerowany automatycznie jeli nie podano."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Opis (opcjonalnie)"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 resize-none",rows:2,placeholder:"Krtki opis suby...",value:h.description,onChange:m=>p({...h,description:m.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>d(!1),className:"px-5 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Anuluj"}),s.jsx("button",{onClick:y,className:"px-5 py-2.5 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg hover:shadow-pink-500/50 transition font-medium",children:"Zapisz"})]})]})]})})]})}const l9={homegroups:{schedule:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"]},media:{schedule:null,tasks:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"]},kids:{schedule:null,groups:null,teachers:["rada_starszych","koordynator","lider"],students:null,finances:["rada_starszych","koordynator"]},worship:{schedule:null,songs:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"],wall:null},atmosfera:{schedule:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"]},teaching:{wall:null,schedule:null,series:null,speakers:["rada_starszych","koordynator","lider"]}};function ha(t,e,r){if(!t||!e)return!0;const n=l9[t];if(!n)return!0;const a=n[e];return a==null?!0:Array.isArray(a)?a.includes(r):!0}class Od{constructor(){this._vector=new Float32Array,this._position=0,this._frameCount=0}get vector(){return this._vector}get position(){return this._position}get startIndex(){return this._position*2}get frameCount(){return this._frameCount}get endIndex(){return(this._position+this._frameCount)*2}clear(){this.receive(this._frameCount),this.rewind()}put(e){this._frameCount+=e}putSamples(e,r,n=0){r=r||0;const a=r*2;n>=0||(n=(e.length-a)/2);const i=n*2;this.ensureCapacity(n+this._frameCount);const o=this.endIndex;this.vector.set(e.subarray(a,a+i),o),this._frameCount+=n}putBuffer(e,r,n=0){r=r||0,n>=0||(n=e.frameCount-r),this.putSamples(e.vector,e.position+r,n)}receive(e){(!(e>=0)||e>this._frameCount)&&(e=this.frameCount),this._frameCount-=e,this._position+=e}receiveSamples(e,r=0){const n=r*2,a=this.startIndex;e.set(this._vector.subarray(a,a+n)),this.receive(r)}extract(e,r=0,n=0){const a=this.startIndex+r*2,i=n*2;e.set(this._vector.subarray(a,a+i))}ensureCapacity(e=0){const r=parseInt(e*2);if(this._vector.length<r){const n=new Float32Array(r);n.set(this._vector.subarray(this.startIndex,this.endIndex)),this._vector=n,this._position=0}else this.rewind()}ensureAdditionalCapacity(e=0){this.ensureCapacity(this._frameCount+e)}rewind(){this._position>0&&(this._vector.set(this._vector.subarray(this.startIndex,this.endIndex)),this._position=0)}}class l3{constructor(e){e?(this._inputBuffer=new Od,this._outputBuffer=new Od):this._inputBuffer=this._outputBuffer=null}get inputBuffer(){return this._inputBuffer}set inputBuffer(e){this._inputBuffer=e}get outputBuffer(){return this._outputBuffer}set outputBuffer(e){this._outputBuffer=e}clear(){this._inputBuffer.clear(),this._outputBuffer.clear()}}class jw extends l3{constructor(e){super(e),this.reset(),this._rate=1}set rate(e){this._rate=e}reset(){this.slopeCount=0,this.prevSampleL=0,this.prevSampleR=0}clone(){const e=new jw;return e.rate=this._rate,e}process(){const e=this._inputBuffer.frameCount;this._outputBuffer.ensureAdditionalCapacity(e/this._rate+1);const r=this.transpose(e);this._inputBuffer.receive(),this._outputBuffer.put(r)}transpose(e=0){if(e===0)return 0;const r=this._inputBuffer.vector,n=this._inputBuffer.startIndex,a=this._outputBuffer.vector,i=this._outputBuffer.endIndex;let o=0,l=0;for(;this.slopeCount<1;)a[i+2*l]=(1-this.slopeCount)*this.prevSampleL+this.slopeCount*r[n],a[i+2*l+1]=(1-this.slopeCount)*this.prevSampleR+this.slopeCount*r[n+1],l=l+1,this.slopeCount+=this._rate;if(this.slopeCount-=1,e!==1)e:for(;;){for(;this.slopeCount>1;)if(this.slopeCount-=1,o=o+1,o>=e-1)break e;const A=n+2*o;a[i+2*l]=(1-this.slopeCount)*r[A]+this.slopeCount*r[A+2],a[i+2*l+1]=(1-this.slopeCount)*r[A+1]+this.slopeCount*r[A+3],l=l+1,this.slopeCount+=this._rate}return this.prevSampleL=r[n+2*e-2],this.prevSampleR=r[n+2*e-1],l}}class A9{constructor(e){this._pipe=e}get pipe(){return this._pipe}get inputBuffer(){return this._pipe.inputBuffer}get outputBuffer(){return this._pipe.outputBuffer}fillInputBuffer(){throw new Error("fillInputBuffer() not overridden")}fillOutputBuffer(e=0){for(;this.outputBuffer.frameCount<e;){const r=16384-this.inputBuffer.frameCount;if(this.fillInputBuffer(r),this.inputBuffer.frameCount<8192*2)break;this._pipe.process()}}clear(){this._pipe.clear()}}const Nw=function(){};class c9 extends A9{constructor(e,r,n=Nw){super(r),this.callback=n,this.sourceSound=e,this.historyBufferSize=22050,this._sourcePosition=0,this.outputBufferPosition=0,this._position=0}get position(){return this._position}set position(e){if(e>this._position)throw new RangeError("New position may not be greater than current position");const r=this.outputBufferPosition-(this._position-e);if(r<0)throw new RangeError("New position falls outside of history buffer");this.outputBufferPosition=r,this._position=e}get sourcePosition(){return this._sourcePosition}set sourcePosition(e){this.clear(),this._sourcePosition=e}onEnd(){this.callback()}fillInputBuffer(e=0){const r=new Float32Array(e*2),n=this.sourceSound.extract(r,e,this._sourcePosition);this._sourcePosition+=n,this.inputBuffer.putSamples(r,0,n)}extract(e,r=0){this.fillOutputBuffer(this.outputBufferPosition+r);const n=Math.min(r,this.outputBuffer.frameCount-this.outputBufferPosition);this.outputBuffer.extract(e,this.outputBufferPosition,n);const a=this.outputBufferPosition+n;return this.outputBufferPosition=Math.min(this.historyBufferSize,a),this.outputBuffer.receive(Math.max(a-this.historyBufferSize,0)),this._position+=n,n}handleSampleData(e){this.extract(e.data,4096)}clear(){super.clear(),this.outputBufferPosition=0}}const d9=0,u9=d9,h9=0,f9=h9,g9=8,W5=[[124,186,248,310,372,434,496,558,620,682,744,806,868,930,992,1054,1116,1178,1240,1302,1364,1426,1488,0],[-100,-75,-50,-25,25,50,75,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-20,-15,-10,-5,5,10,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-4,-3,-2,-1,1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Mg=.25,A3=4,_w=125,c3=50,d3=(c3-_w)/(A3-Mg),p9=_w-d3*Mg,Sw=25,u3=15,h3=(u3-Sw)/(A3-Mg),m9=Sw-h3*Mg;class Ew extends l3{constructor(e){super(e),this._quickSeek=!0,this.midBufferDirty=!1,this.midBuffer=null,this.overlapLength=0,this.autoSeqSetting=!0,this.autoSeekSetting=!0,this._tempo=1,this.setParameters(44100,u9,f9,g9)}clear(){super.clear(),this.clearMidBuffer()}clearMidBuffer(){this.midBufferDirty&&(this.midBufferDirty=!1,this.midBuffer=null)}setParameters(e,r,n,a){e>0&&(this.sampleRate=e),a>0&&(this.overlapMs=a),r>0?(this.sequenceMs=r,this.autoSeqSetting=!1):this.autoSeqSetting=!0,n>0?(this.seekWindowMs=n,this.autoSeekSetting=!1):this.autoSeekSetting=!0,this.calculateSequenceParameters(),this.calculateOverlapLength(this.overlapMs),this.tempo=this._tempo}set tempo(e){let r;this._tempo=e,this.calculateSequenceParameters(),this.nominalSkip=this._tempo*(this.seekWindowLength-this.overlapLength),this.skipFract=0,r=Math.floor(this.nominalSkip+.5),this.sampleReq=Math.max(r+this.overlapLength,this.seekWindowLength)+this.seekLength}get tempo(){return this._tempo}get inputChunkSize(){return this.sampleReq}get outputChunkSize(){return this.overlapLength+Math.max(0,this.seekWindowLength-2*this.overlapLength)}calculateOverlapLength(e=0){let r;r=this.sampleRate*e/1e3,r=r<16?16:r,r-=r%8,this.overlapLength=r,this.refMidBuffer=new Float32Array(this.overlapLength*2),this.midBuffer=new Float32Array(this.overlapLength*2)}checkLimits(e,r,n){return e<r?r:e>n?n:e}calculateSequenceParameters(){let e,r;this.autoSeqSetting&&(e=p9+d3*this._tempo,e=this.checkLimits(e,c3,_w),this.sequenceMs=Math.floor(e+.5)),this.autoSeekSetting&&(r=m9+h3*this._tempo,r=this.checkLimits(r,u3,Sw),this.seekWindowMs=Math.floor(r+.5)),this.seekWindowLength=Math.floor(this.sampleRate*this.sequenceMs/1e3),this.seekLength=Math.floor(this.sampleRate*this.seekWindowMs/1e3)}set quickSeek(e){this._quickSeek=e}clone(){const e=new Ew;return e.tempo=this._tempo,e.setParameters(this.sampleRate,this.sequenceMs,this.seekWindowMs,this.overlapMs),e}seekBestOverlapPosition(){return this._quickSeek?this.seekBestOverlapPositionStereoQuick():this.seekBestOverlapPositionStereo()}seekBestOverlapPositionStereo(){let e,r,n,a=0;for(this.preCalculateCorrelationReferenceStereo(),e=0,r=Number.MIN_VALUE;a<this.seekLength;a=a+1)n=this.calculateCrossCorrelationStereo(2*a,this.refMidBuffer),n>r&&(r=n,e=a);return e}seekBestOverlapPositionStereoQuick(){let e,r,n,a=0,i,o;for(this.preCalculateCorrelationReferenceStereo(),r=Number.MIN_VALUE,e=0,i=0,o=0;a<4;a=a+1){let l=0;for(;W5[a][l]&&(o=i+W5[a][l],!(o>=this.seekLength));)n=this.calculateCrossCorrelationStereo(2*o,this.refMidBuffer),n>r&&(r=n,e=o),l=l+1;i=e}return e}preCalculateCorrelationReferenceStereo(){let e=0,r,n;for(;e<this.overlapLength;e=e+1)n=e*(this.overlapLength-e),r=e*2,this.refMidBuffer[r]=this.midBuffer[r]*n,this.refMidBuffer[r+1]=this.midBuffer[r+1]*n}calculateCrossCorrelationStereo(e,r){const n=this._inputBuffer.vector;e+=this._inputBuffer.startIndex;let a=0,i=2;const o=2*this.overlapLength;let l;for(;i<o;i=i+2)l=i+e,a+=n[l]*r[i]+n[l+1]*r[i+1];return a}overlap(e){this.overlapStereo(2*e)}overlapStereo(e){const r=this._inputBuffer.vector;e+=this._inputBuffer.startIndex;const n=this._outputBuffer.vector,a=this._outputBuffer.endIndex;let i=0,o,l;const A=1/this.overlapLength;let c,d,h;for(;i<this.overlapLength;i=i+1)l=(this.overlapLength-i)*A,c=i*A,o=2*i,d=o+e,h=o+a,n[h+0]=r[d+0]*c+this.midBuffer[o+0]*l,n[h+1]=r[d+1]*c+this.midBuffer[o+1]*l}process(){let e,r,n;if(this.midBuffer===null){if(this._inputBuffer.frameCount<this.overlapLength)return;this.midBuffer=new Float32Array(this.overlapLength*2),this._inputBuffer.receiveSamples(this.midBuffer,this.overlapLength)}for(;this._inputBuffer.frameCount>=this.sampleReq;){e=this.seekBestOverlapPosition(),this._outputBuffer.ensureAdditionalCapacity(this.overlapLength),this.overlap(Math.floor(e)),this._outputBuffer.put(this.overlapLength),r=this.seekWindowLength-2*this.overlapLength,r>0&&this._outputBuffer.putBuffer(this._inputBuffer,e+this.overlapLength,r);const a=this._inputBuffer.startIndex+2*(e+this.seekWindowLength-this.overlapLength);this.midBuffer.set(this._inputBuffer.vector.subarray(a,a+2*this.overlapLength)),this.skipFract+=this.nominalSkip,n=Math.floor(this.skipFract),this.skipFract-=n,this._inputBuffer.receive(n)}}}const q5=function(t,e){return(t>e?t-e:e-t)>1e-10};class Fw{constructor(){this.transposer=new jw(!1),this.stretch=new Ew(!1),this._inputBuffer=new Od,this._intermediateBuffer=new Od,this._outputBuffer=new Od,this._rate=0,this._tempo=0,this.virtualPitch=1,this.virtualRate=1,this.virtualTempo=1,this.calculateEffectiveRateAndTempo()}clear(){this.transposer.clear(),this.stretch.clear()}clone(){const e=new Fw;return e.rate=this.rate,e.tempo=this.tempo,e}get rate(){return this._rate}set rate(e){this.virtualRate=e,this.calculateEffectiveRateAndTempo()}set rateChange(e){this._rate=1+.01*e}get tempo(){return this._tempo}set tempo(e){this.virtualTempo=e,this.calculateEffectiveRateAndTempo()}set tempoChange(e){this.tempo=1+.01*e}set pitch(e){this.virtualPitch=e,this.calculateEffectiveRateAndTempo()}set pitchOctaves(e){this.pitch=Math.exp(.69314718056*e),this.calculateEffectiveRateAndTempo()}set pitchSemitones(e){this.pitchOctaves=e/12}get inputBuffer(){return this._inputBuffer}get outputBuffer(){return this._outputBuffer}calculateEffectiveRateAndTempo(){const e=this._tempo,r=this._rate;this._tempo=this.virtualTempo/this.virtualPitch,this._rate=this.virtualRate*this.virtualPitch,q5(this._tempo,e)&&(this.stretch.tempo=this._tempo),q5(this._rate,r)&&(this.transposer.rate=this._rate),this._rate>1?this._outputBuffer!=this.transposer.outputBuffer&&(this.stretch.inputBuffer=this._inputBuffer,this.stretch.outputBuffer=this._intermediateBuffer,this.transposer.inputBuffer=this._intermediateBuffer,this.transposer.outputBuffer=this._outputBuffer):this._outputBuffer!=this.stretch.outputBuffer&&(this.transposer.inputBuffer=this._inputBuffer,this.transposer.outputBuffer=this._intermediateBuffer,this.stretch.inputBuffer=this._intermediateBuffer,this.stretch.outputBuffer=this._outputBuffer)}process(){this._rate>1?(this.stretch.process(),this.transposer.process()):(this.transposer.process(),this.stretch.process())}}class x9{constructor(e){this.buffer=e,this._position=0}get dualChannel(){return this.buffer.numberOfChannels>1}get position(){return this._position}set position(e){this._position=e}extract(e,r=0,n=0){this.position=n;let a=this.buffer.getChannelData(0),i=this.dualChannel?this.buffer.getChannelData(1):this.buffer.getChannelData(0),o=0;for(;o<r;o++)e[o*2]=a[o+n],e[o*2+1]=i[o+n];return Math.min(r,a.length-n)}}const y9=function(t,e,r=Nw,n=4096){const a=t.createScriptProcessor(n,2,2),i=new Float32Array(n*2);return a.onaudioprocess=o=>{let l=o.outputBuffer.getChannelData(0),A=o.outputBuffer.getChannelData(1),c=e.extract(i,n);r(e.sourcePosition),c===0&&e.onEnd();let d=0;for(;d<c;d++)l[d]=i[d*2],A[d]=i[d*2+1]},a},b9=function(t,e,r){return r=r||"0",t=t+"",t.length>=e?t:new Array(e-t.length+1).join(r)+t},J5=function(t){const e=Math.floor(t/60),r=t-e*60;return`${e}:${b9(parseInt(r),2)}`},w9=function(t){const e=this.timePlayed,r=this.sampleRate;if(this.sourcePosition=t,this.timePlayed=t/r,e!==this.timePlayed){const n=new CustomEvent("play",{detail:{timePlayed:this.timePlayed,formattedTimePlayed:this.formattedTimePlayed,percentagePlayed:this.percentagePlayed}});this._node.dispatchEvent(n)}};class v9{constructor(e,r,n,a=Nw){this._soundtouch=new Fw;const i=new x9(r);this.timePlayed=0,this.sourcePosition=0,this._filter=new c9(i,this._soundtouch,a),this._node=y9(e,this._filter,o=>w9.call(this,o),n),this.tempo=1,this.rate=1,this.duration=r.duration,this.sampleRate=e.sampleRate,this.listeners=[]}get formattedDuration(){return J5(this.duration)}get formattedTimePlayed(){return J5(this.timePlayed)}get percentagePlayed(){return 100*this._filter.sourcePosition/(this.duration*this.sampleRate)}set percentagePlayed(e){this._filter.sourcePosition=parseInt(e*this.duration*this.sampleRate),this.sourcePosition=this._filter.sourcePosition,this.timePlayed=this.sourcePosition/this.sampleRate}get node(){return this._node}set pitch(e){this._soundtouch.pitch=e}set pitchSemitones(e){this._soundtouch.pitchSemitones=e}set rate(e){this._soundtouch.rate=e}set tempo(e){this._soundtouch.tempo=e}connect(e){this._node.connect(e)}disconnect(){this._node.disconnect()}on(e,r){this.listeners.push({name:e,cb:r}),this._node.addEventListener(e,n=>r(n.detail))}off(e=null){let r=this.listeners;e&&(r=r.filter(n=>n.name===e)),r.forEach(n=>{this._node.removeEventListener(n.name,a=>n.cb(a.detail))})}}const k9=["intymna","modlitewna","niedzielna","popularna","szybko","uwielbienie","wolna"];function Uw(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e,t]),r}const B9=({label:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),[i,o]=C.useState(e?new Date(e):new Date),l=C.useRef(null),A=Uw(l,n);C.useEffect(()=>{e&&o(new Date(e))},[e]),C.useEffect(()=>{if(!n)return;function k(N){l.current&&!l.current.contains(N.target)&&(N.target.closest(".portal-datepicker")||a(!1))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[n]);const c=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()-1,1))},d=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()+1,1))},h=k=>{const N=new Date(i.getFullYear(),i.getMonth(),k),S=N.getFullYear(),U=String(N.getMonth()+1).padStart(2,"0"),Q=String(N.getDate()).padStart(2,"0");r(`${S}-${U}-${Q}`),a(!1)},p=(k,N)=>new Date(k,N+1,0).getDate(),u=(k,N)=>{const S=new Date(k,N,1).getDay();return S===0?6:S-1},y=p(i.getFullYear(),i.getMonth()),b=u(i.getFullYear(),i.getMonth()),v=Array.from({length:y},(k,N)=>N+1),g=Array.from({length:b},(k,N)=>N),m=i.toLocaleDateString("pl-PL",{month:"long",year:"numeric"}),w=e?new Date(e).toLocaleDateString("pl-PL"):"";return s.jsxs("div",{className:"relative w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsx("div",{ref:l,onClick:()=>a(!n),className:`w-full px-4 py-3 border rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm cursor-pointer flex justify-between items-center transition-all
          ${n?"border-pink-500 ring-2 ring-pink-500/20 dark:border-pink-400":"border-gray-200/50 dark:border-gray-700/50 hover:border-pink-300 dark:hover:border-pink-600"}
        `,children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(en,{size:16,className:"text-gray-400"}),s.jsx("span",{className:w?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:w||"Wybierz dat"})]})}),n&&A.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-datepicker fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 animate-in fade-in zoom-in-95 duration-100",style:{top:A.top,left:A.left,width:"280px"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:c,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Ei,{size:18})}),s.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 capitalize",children:m}),s.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Fi,{size:18})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(k=>s.jsx("div",{className:"text-center text-[10px] font-bold text-gray-400 uppercase",children:k},k))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[g.map(k=>s.jsx("div",{},`blank-${k}`)),v.map(k=>{const N=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`,S=e===N,U=new Date().toDateString()===new Date(i.getFullYear(),i.getMonth(),k).toDateString();return s.jsx("button",{onClick:()=>h(k),className:`h-8 w-8 rounded-lg text-xs font-medium transition flex items-center justify-center
                    ${S?"bg-pink-600 text-white shadow-md shadow-pink-500/30":U?"bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 border border-pink-100 dark:border-pink-800":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                  `,children:k},k)})]})]}),document.body)]})},f3=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],Y5={Cb:"B",Db:"C#","D#":"Eb",Fb:"E","E#":"F",Gb:"F#","G#":"Ab","A#":"Bb","B#":"C"};function C9(t){let e=t;return Y5[e]&&(e=Y5[e]),f3.findIndex(r=>r===e)}function Wf(t,e){if(!t)return"";const r=C9(t);if(r===-1)return t;const n=(r+e+120)%12;return f3[n]}function X5(t,e){if(!t)return"";const r=/\b([A-G][#b]?)([^/\s]*)(\/[A-G][#b]?)?\b/g;return t.replace(r,(n,a,i,o)=>{const l=Wf(a,e);let A="";if(o){const c=o.substring(1);A="/"+Wf(c,e)}return l+(i||"")+A})}const j9=({options:t,value:e,onChange:r,absentMembers:n=[]})=>{const[a,i]=C.useState(!1),o=C.useRef(null),l=Uw(o,a),A=e?e.split(",").map(d=>d.trim()).filter(Boolean):[];C.useEffect(()=>{if(!a)return;function d(h){o.current&&!o.current.contains(h.target)&&!h.target.closest(".table-multi-select-portal")&&i(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[a]);const c=(d,h)=>{if(h)return;let p;A.includes(d)?p=A.filter(u=>u!==d):p=[...A,d],r(p.join(", "))};return s.jsxs("div",{ref:o,className:"relative w-full",children:[s.jsx("div",{className:"w-full min-h-[32px] px-2 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-xs cursor-pointer flex flex-wrap gap-1 items-center hover:border-pink-300 dark:hover:border-pink-500 transition",onClick:()=>i(!a),children:A.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-[10px] italic",children:"Wybierz..."}):A.map((d,h)=>s.jsx("span",{className:"bg-pink-50 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-1.5 py-0.5 rounded text-[10px] border border-pink-100 dark:border-pink-800 whitespace-nowrap",children:d},h))}),a&&l.width>0&&Ht.createPortal(s.jsx("div",{className:"table-multi-select-portal fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",style:{top:l.top,left:l.left,width:Math.max(180,l.width)},children:t.map(d=>{const h=A.includes(d.full_name),p=n.includes(d.full_name);return s.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer flex items-center justify-between transition
                  ${p?"bg-gray-50 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed":"hover:bg-pink-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}
                  ${h?"bg-pink-50 dark:bg-gray-800 text-pink-700 dark:text-pink-300 font-medium":""}
                `,onClick:()=>c(d.full_name,p),children:[s.jsx("span",{className:p?"line-through decoration-gray-400 dark:decoration-gray-600":"",children:d.full_name}),h&&!p&&s.jsx(Un,{size:12}),p&&s.jsx(Li,{size:12,className:"text-red-300 dark:text-red-500"})]},d.id)})}),document.body)]})},N9=({options:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),i=C.useRef(null),o=Uw(i,n),l=e?e.split(",").map(c=>c.trim()).filter(Boolean):[];C.useEffect(()=>{if(!n)return;function c(d){i.current&&!i.current.contains(d.target)&&!d.target.closest(".absence-multi-select-portal")&&a(!1)}return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]);const A=c=>{let d;l.includes(c)?d=l.filter(h=>h!==c):d=[...l,c],r(d.join(", "))};return s.jsxs("div",{ref:i,className:"relative w-full",children:[s.jsx("div",{className:"w-full min-h-[32px] px-2 py-1 bg-white dark:bg-gray-800 border border-red-200 dark:border-red-900/50 rounded-lg text-xs cursor-pointer flex flex-wrap gap-1 items-center hover:border-red-300 dark:hover:border-red-700 transition",onClick:()=>a(!n),children:l.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-[10px] italic",children:"Wybierz..."}):l.map((c,d)=>s.jsx("span",{className:"bg-red-50 dark:bg-red-900/40 text-red-700 dark:text-red-300 px-1.5 py-0.5 rounded text-[10px] border border-red-100 dark:border-red-800 whitespace-nowrap flex items-center gap-1",children:c},d))}),n&&o.width>0&&Ht.createPortal(s.jsx("div",{className:"absence-multi-select-portal fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",style:{top:o.top,left:o.left,width:Math.max(180,o.width)},children:t.map(c=>{const d=l.includes(c.full_name);return s.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/30 transition ${d?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 font-medium":"text-gray-700 dark:text-gray-300"}`,onClick:()=>A(c.full_name),children:[s.jsx("span",{children:c.full_name}),d&&s.jsx(Li,{size:12})]},c.id)})}),document.body)]})},_9=({programs:t,worshipTeam:e,onUpdateProgram:r,roles:n,memberRoles:a=[]})=>{const[i,o]=C.useState({}),l=t.reduce((g,m)=>{if(!m.date)return g;const w=new Date(m.date),k=`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`;return g[k]||(g[k]=[]),g[k].push(m),g},{}),A=Object.keys(l).sort().reverse();C.useEffect(()=>{const g=new Date().toISOString().slice(0,7);o(m=>({...m,[g]:!0}))},[]);const c=g=>{o(m=>({...m,[g]:!m[g]}))},d=g=>{const[m,w]=g.split("-");return new Date(m,w-1).toLocaleDateString("pl-PL",{month:"long",year:"numeric"}).replace(/^\w/,N=>N.toUpperCase())},h=g=>new Date(g).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"}),p=async(g,m,w)=>{const k=t.find(U=>U.id===g);if(!k)return;const S={...k.zespol||{},[m]:w};await r(g,{zespol:S})},u=async(g,m)=>{const w=t.find(S=>S.id===g);if(!w)return;const N={...w.zespol||{},notatki:m};await r(g,{zespol:N})},y=async(g,m)=>{const w=t.find(S=>S.id===g);if(!w)return;const N={...w.zespol||{},absencja:m};await r(g,{zespol:N})},b=n&&n.length>0?n.map(g=>({key:g.field_key,label:g.name,roleId:g.id})):[{key:"lider",label:"Lider",roleId:null},{key:"piano",label:"Piano",roleId:null},{key:"wokale",label:"Wokal",roleId:null},{key:"gitara_akustyczna",label:"Git. Akust.",roleId:null},{key:"gitara_elektryczna",label:"Git. Elektr.",roleId:null},{key:"bas",label:"Bas",roleId:null},{key:"cajon",label:"Cajon",roleId:null}],v=g=>{if(!g||a.length===0)return e;const m=a.filter(w=>w.role_id===g).map(w=>String(w.member_id));return m.length===0?e:e.filter(w=>m.includes(String(w.id)))};return s.jsx("div",{className:"space-y-4",children:A.map(g=>{const m=i[g];return s.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm relative z-0 transition-all duration-300 ${m?"mb-8":"mb-0"}`,children:[s.jsxs("button",{onClick:()=>c(g),className:`w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 flex justify-between items-center transition border-b border-gray-200 dark:border-gray-700 ${m?"rounded-t-2xl":"rounded-2xl"}`,children:[s.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-100 text-sm uppercase tracking-wider",children:d(g)}),m?s.jsx(Ui,{size:18,className:"text-gray-500 dark:text-gray-400"}):s.jsx(tn,{size:18,className:"text-gray-500 dark:text-gray-400"})]}),m&&s.jsx("div",{className:"overflow-x-auto pb-4 bg-white dark:bg-gray-900 rounded-b-2xl",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-max",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800 text-xs text-gray-500 dark:text-gray-400 uppercase border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"p-3 font-semibold w-24 min-w-[90px]",children:"Data"}),b.map(w=>s.jsx("th",{className:"p-3 font-semibold min-w-[130px]",children:w.label},w.key)),s.jsx("th",{className:"p-3 font-semibold min-w-[130px] text-red-500 dark:text-red-400",children:"Absencja"}),s.jsx("th",{className:"p-3 font-semibold min-w-[150px]",children:"Notatki"})]})}),s.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-800 relative",children:l[g].sort((w,k)=>new Date(w.date)-new Date(k.date)).map((w,k)=>{var S,U,Q;const N=(S=w.zespol)!=null&&S.absencja?w.zespol.absencja.split(",").map(L=>L.trim()).filter(Boolean):[];return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition relative",children:[s.jsx("td",{className:"p-3 font-medium text-gray-700 dark:text-gray-300 font-mono text-xs",children:h(w.date)}),b.map(L=>{var V;return s.jsx("td",{className:"p-2 relative",children:s.jsx(j9,{options:v(L.roleId),value:((V=w.zespol)==null?void 0:V[L.key])||"",onChange:F=>p(w.id,L.key,F),absentMembers:N})},L.key)}),s.jsx("td",{className:"p-2 relative",children:s.jsx(N9,{options:e,value:((U=w.zespol)==null?void 0:U.absencja)||"",onChange:L=>y(w.id,L)})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{className:"w-full bg-transparent border-b border-transparent hover:border-gray-300 dark:hover:border-gray-600 focus:border-pink-500 text-xs p-1 outline-none transition placeholder-gray-300 dark:placeholder-gray-600 text-gray-700 dark:text-gray-300",placeholder:"Wpisz...",defaultValue:((Q=w.zespol)==null?void 0:Q.notatki)||"",onBlur:L=>u(w.id,L.target.value)})})]},w.id)})})]})})]},g)})})},S9=({size:t=16})=>s.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),s.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),s.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"})]}),E9=({size:t=16})=>s.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"}),s.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"9"}),s.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"22"})]}),F9=({size:t=16})=>s.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M9 18V5l12-2v13"}),s.jsx("circle",{cx:"6",cy:"18",r:"3"}),s.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),U9=({size:t=16})=>s.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"m11.9 12.1 4.514-4.514"}),s.jsx("path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A1 1 0 0 0 17.3 4.5l1.8 1.8a1 1 0 0 0 1.086.287l1.114-.115a1 1 0 0 0 0-1.414Z"}),s.jsx("path",{d:"m6 16 2 2"}),s.jsx("path",{d:"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2Z"})]}),L9=({url:t,name:e})=>{const r=C.useRef(null),n=C.useRef(null),a=C.useRef(null),i=C.useRef(null),[o,l]=C.useState(!1),[A,c]=C.useState(0),[d,h]=C.useState(0),[p,u]=C.useState(0),[y,b]=C.useState(!1),[v,g]=C.useState(!1),[m,w]=C.useState(!1),[k,N]=C.useState({vocals:100,drums:100,bass:100,other:100}),[S,U]=C.useState({vocals:!0,drums:!0,bass:!0,other:!0}),Q=()=>{if(!r.current){const fe=window.AudioContext||window.webkitAudioContext;r.current=new fe}return r.current},L=async()=>{if(!(!t||v)){b(!0);try{const fe=Q(),E=await(await fetch(t)).arrayBuffer();n.current=new v9(fe,E,16384),n.current.tempo=1,n.current.pitch=1,a.current=fe.createGain(),a.current.connect(fe.destination),n.current.connect(a.current),h(n.current.duration),g(!0),n.current.on("play",z=>{c(z.timePlayed)})}catch(fe){console.error("Bd adowania audio:",fe)}b(!1)}};C.useEffect(()=>{if(n.current){const fe=Math.pow(2,p/12);n.current.pitch=fe}},[p]),C.useEffect(()=>{if(o&&n.current){const fe=()=>{n.current&&(c(n.current.timePlayed||0),n.current.timePlayed>=d?(l(!1),c(0),n.current.percentagePlayed=0):i.current=requestAnimationFrame(fe))};i.current=requestAnimationFrame(fe)}return()=>{i.current&&cancelAnimationFrame(i.current)}},[o,d]);const V=async()=>{v||await L();const fe=r.current,we=n.current;!fe||!we||(fe.state==="suspended"&&await fe.resume(),o?(we.disconnect(),l(!1)):(we.connect(a.current),l(!0)))},F=fe=>{const we=fe.currentTarget.getBoundingClientRect(),E=fe.clientX-we.left,z=Math.max(0,Math.min(E/we.width,1));n.current&&(n.current.percentagePlayed=z,c(z*d))},D=fe=>{if(isNaN(fe))return"0:00";const we=Math.floor(fe/60),E=Math.floor(fe%60);return`${we}:${E.toString().padStart(2,"0")}`},T=fe=>{u(we=>Math.max(-12,Math.min(12,we+fe)))},G=()=>{u(0)},ne=()=>p===0?"Orygina":`${p>0?"+":""}${p} pton${Math.abs(p)===1?"":p>=2&&p<=4?"y":"w"}`,ce=fe=>{U(we=>({...we,[fe]:!we[fe]}))},ue=(fe,we)=>{N(E=>({...E,[fe]:we}))},Y=d>0?A/d*100:0;C.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current),n.current&&n.current.disconnect(),r.current&&r.current.close()},[]);const Ae=[{key:"vocals",label:"Wokal",icon:S9,color:"pink"},{key:"drums",label:"Perkusja",icon:E9,color:"orange"},{key:"bass",label:"Bas",icon:F9,color:"purple"},{key:"other",label:"Inne",icon:U9,color:"blue"}];return s.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-gray-700 dark:to-gray-700 rounded-xl border border-pink-100 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:V,disabled:y,className:"w-10 h-10 flex items-center justify-center rounded-full bg-pink-600 dark:bg-pink-500 text-white shadow-lg shadow-pink-500/30 hover:bg-pink-700 dark:hover:bg-pink-600 transition disabled:opacity-50",children:y?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):o?s.jsx(yL,{size:18}):s.jsx(wL,{size:18,className:"ml-0.5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(EL,{size:12}),e||"Odtwarzacz MP3"]}),s.jsxs("span",{children:[D(A)," / ",D(d)]})]}),s.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-600 rounded-full cursor-pointer overflow-hidden",onClick:F,children:s.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 rounded-full transition-all duration-100",style:{width:`${Y}%`}})})]})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-pink-100 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[s.jsx(Ms,{size:12}),"Tonacja:"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>T(-1),disabled:p<=-12,className:"w-7 h-7 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-500 transition disabled:opacity-40 disabled:cursor-not-allowed text-sm font-bold",children:""}),s.jsx("button",{onClick:G,className:`px-3 py-1 rounded-lg text-xs font-medium transition min-w-[80px] ${p===0?"bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-400":"bg-pink-100 dark:bg-pink-900/50 text-pink-700 dark:text-pink-300 hover:bg-pink-200 dark:hover:bg-pink-800/50"}`,children:ne()}),s.jsx("button",{onClick:()=>T(1),disabled:p>=12,className:"w-7 h-7 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-500 transition disabled:opacity-40 disabled:cursor-not-allowed text-sm font-bold",children:"+"})]})]}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 text-center",children:"Zmiana tonacji bez zmiany tempa"})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-pink-100 dark:border-gray-600",children:[s.jsxs("button",{onClick:()=>w(!m),className:"w-full flex items-center justify-between px-3 py-2 bg-gray-100 dark:bg-gray-600 rounded-lg text-xs font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 transition",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(ta,{size:14}),"Kontrola instrumentw"]}),s.jsx(tn,{size:14,className:`transform transition ${m?"rotate-180":""}`})]}),m&&s.jsxs("div",{className:"mt-3 space-y-2",children:[Ae.map(({key:fe,label:we,icon:E,color:z})=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[s.jsx("button",{onClick:()=>ce(fe),className:`w-8 h-8 flex items-center justify-center rounded-lg transition ${S[fe]?`bg-${z}-100 dark:bg-${z}-900/30 text-${z}-600 dark:text-${z}-400`:"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,style:{backgroundColor:S[fe]?z==="pink"?"#fce7f3":z==="orange"?"#ffedd5":z==="purple"?"#f3e8ff":"#dbeafe":void 0,color:S[fe]?z==="pink"?"#db2777":z==="orange"?"#ea580c":z==="purple"?"#9333ea":"#2563eb":void 0},children:s.jsx(E,{size:16})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:we}),s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:[k[fe],"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:S[fe]?k[fe]:0,onChange:K=>ue(fe,parseInt(K.target.value)),disabled:!S[fe],className:"w-full h-1.5 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",style:{background:S[fe]?`linear-gradient(to right, ${z==="pink"?"#ec4899":z==="orange"?"#f97316":z==="purple"?"#a855f7":"#3b82f6"} 0%, ${z==="pink"?"#ec4899":z==="orange"?"#f97316":z==="purple"?"#a855f7":"#3b82f6"} ${k[fe]}%, #e5e7eb ${k[fe]}%, #e5e7eb 100%)`:void 0}})]})]},fe)),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center pt-2",children:"Wymaga oddzielnych cieek audio (vocals, drums, bass, other)"})]})]})]})};function Q9({song:t,onClose:e,onEdit:r}){const[n,a]=C.useState("overview"),[i,o]=C.useState([]),[l,A]=C.useState(!1),[c,d]=C.useState(null),[h,p]=C.useState(0),u=async(m,w)=>{d(m);try{const N=await(await fetch(m)).blob(),S=window.URL.createObjectURL(N),U=document.createElement("a");U.href=S,U.download=w||"attachment",document.body.appendChild(U),U.click(),document.body.removeChild(U),window.URL.revokeObjectURL(S)}catch(k){console.error("Bd pobierania:",k),window.open(m,"_blank")}finally{d(null)}};C.useEffect(()=>{n==="history"&&y()},[n]);async function y(){A(!0);try{const{data:m}=await le.from("programs").select("*").order("date",{ascending:!1}),w=(m||[]).filter(k=>k.schedule&&Array.isArray(k.schedule)?k.schedule.some(N=>N.selectedSongs&&Array.isArray(N.selectedSongs)?N.selectedSongs.some(S=>S.songId===t.id):N.songIds&&Array.isArray(N.songIds)?N.songIds.includes(t.id):!1):!1);o(w)}catch(m){console.error("Bd historii",m)}A(!1)}const b=async()=>{const m=t.chords_bars?X5(t.chords_bars,h):"",w=Wf(t.key,h),k=document.createElement("div");k.style.width="794px",k.style.padding="25px",k.style.background="white",k.style.fontFamily="Arial, sans-serif",k.style.position="absolute",k.style.left="-9999px",k.innerHTML=`
        <div style="padding: 15px 0; margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #f0f0f0;">
          <div style="flex: 1;">
            <h1 style="font-size: 28px; font-weight: 700; color: #ec4899; margin: 0;">${t.title}</h1>
          </div>
          <div style="display: flex; gap: 10px; align-items: stretch;">
            <div style="background: #fef3f8; padding: 8px 12px; border-radius: 6px; text-align: center; min-width: 65px; display: flex; flex-direction: column; justify-content: center;">
              <div style="font-size: 8px; color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 3px;">Tonacja</div>
              <div style="font-size: 16px; color: #ec4899; font-weight: 700;">${w||"-"}</div>
            </div>
            <div style="background: #fef3f8; padding: 8px 12px; border-radius: 6px; text-align: center; min-width: 65px; display: flex; flex-direction: column; justify-content: center;">
              <div style="font-size: 8px; color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 3px;">Tempo</div>
              <div style="font-size: 13px; color: #ec4899; font-weight: 700;">${t.tempo?t.tempo+" BPM":"-"}</div>
            </div>
            <div style="background: #fef3f8; padding: 8px 12px; border-radius: 6px; text-align: center; min-width: 65px; display: flex; flex-direction: column; justify-content: center;">
              <div style="font-size: 8px; color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 3px;">Metrum</div>
              <div style="font-size: 16px; color: #ec4899; font-weight: 700;">${t.meter||"-"}</div>
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
          <div style="background: #fafafa; border-radius: 6px; padding: 15px; border: 1px solid #e5e5e5;">
            <div style="font-size: 9px; text-transform: uppercase; color: #999; font-weight: 700; margin-bottom: 10px; padding-bottom: 6px; border-bottom: 1px solid #e5e5e5;">Tekst</div>
            <pre style="font-family: Arial, sans-serif; white-space: pre-wrap; font-size: 10px; line-height: 1.6; color: #333; margin: 0;">${t.lyrics||"Brak tekstu"}</pre>
          </div>

          <div style="background: #fafafa; border-radius: 6px; padding: 15px; border: 1px solid #e5e5e5;">
            <div style="font-size: 9px; text-transform: uppercase; color: #999; font-weight: 700; margin-bottom: 10px; padding-bottom: 6px; border-bottom: 1px solid #e5e5e5;">
              Akordy w taktach
              ${h!==0?`<span style="background: #ec4899; color: white; padding: 2px 5px; border-radius: 3px; font-size: 7px; margin-left: 6px; text-transform: none;">transp. ${h>0?"+"+h:h}</span>`:""}
            </div>
            <pre style="font-family: 'Courier New', monospace; white-space: pre-wrap; font-size: 10px; line-height: 1.6; color: #ec4899; font-weight: 600; margin: 0;">${m||"Brak akordw"}</pre>
          </div>
        </div>

        <div style="margin-top: 20px; text-align: center; color: #999; font-size: 9px;">
          Wygenerowano ${new Date().toLocaleDateString("pl-PL")} o ${new Date().toLocaleTimeString("pl-PL")} | App SchWro Poudnie
        </div>
      `,document.body.appendChild(k);try{const N=await Fg(k,{scale:2.5,useCORS:!0,logging:!1,backgroundColor:"#ffffff"});document.body.removeChild(k);const S=N.toDataURL("image/png"),U=new vt({orientation:"portrait",unit:"px",format:"a4",compress:!0}),Q=U.internal.pageSize.getWidth(),L=N.height*Q/N.width;U.addImage(S,"PNG",0,0,Q,L);const F=`${(D=>D.replace(//g,"a").replace(//g,"A").replace(//g,"c").replace(//g,"C").replace(//g,"e").replace(//g,"E").replace(//g,"l").replace(//g,"L").replace(//g,"n").replace(//g,"N").replace(//g,"o").replace(//g,"O").replace(//g,"s").replace(//g,"S").replace(//g,"z").replace(//g,"Z").replace(//g,"z").replace(//g,"Z").replace(/[^a-zA-Z0-9\s-]/g,"").replace(/\s+/g,"_").replace(/_+/g,"_").trim())(t.title)}.pdf`;U.save(F)}catch(N){console.error("Bd generowania PDF:",N),alert("Nie udao si wygenerowa PDF"),document.body.contains(k)&&document.body.removeChild(k)}},v=Wf(t.key,h),g=t.chords_bars?X5(t.chords_bars,h):t.chords||"Brak ukadu...";return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-4xl rounded-3xl shadow-2xl border border-white/20 dark:border-gray-700 flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center gap-3 mb-1",children:s.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:t.title})}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[t.author&&s.jsx("span",{children:t.author}),t.category&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-400"}),s.jsx("span",{children:t.category})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:b,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-xl font-bold text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition flex items-center gap-2",children:[s.jsx(uL,{size:16})," PDF"]}),s.jsx("button",{onClick:r,className:"px-4 py-2 bg-pink-50 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 rounded-xl font-bold text-sm hover:bg-pink-100 dark:hover:bg-pink-900/50 transition",children:"Edytuj"}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition",children:s.jsx(Nt,{size:24})})]})]}),s.jsx("div",{className:"px-6 pt-6 pb-0",children:s.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl w-fit",children:[s.jsxs("button",{onClick:()=>a("overview"),className:`px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2 ${n==="overview"?"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:[s.jsx(xn,{size:16})," Przegld"]}),s.jsxs("button",{onClick:()=>a("history"),className:`px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2 ${n==="history"?"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:[s.jsx(Dj,{size:16})," Historia uycia"]}),s.jsxs("button",{onClick:()=>a("materials"),className:`px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2 ${n==="materials"?"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:[s.jsx(Lo,{size:16})," Materiay"]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[n==="overview"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-2xl border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-gray-800 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 text-xs font-bold uppercase",children:[s.jsx(Ms,{size:14})," Tonacja"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>p(m=>m-1),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 transition",children:s.jsx(mL,{size:12})}),s.jsx("span",{className:"font-mono text-lg font-bold text-pink-600 dark:text-pink-400 min-w-[24px] text-center",children:v||"-"}),s.jsx("button",{onClick:()=>p(m=>m+1),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 transition",children:s.jsx(Wt,{size:12})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-gray-800 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 text-xs font-bold uppercase",children:[s.jsx(Au,{size:14})," Tempo"]}),s.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:t.tempo?`${t.tempo} BPM`:"-"})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-gray-800 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 text-xs font-bold uppercase",children:[s.jsx(Tj,{size:14})," Metrum"]}),s.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:t.meter||"-"})]}),s.jsx("div",{className:"flex items-center gap-2 ml-auto",children:(t.tags||[]).map(m=>s.jsxs("span",{className:"px-3 py-1 rounded-lg bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 text-xs font-bold border border-orange-100 dark:border-orange-800",children:["#",m]},m))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-5 border border-gray-100 dark:border-gray-700",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-3",children:"Tekst"}),s.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-800 dark:text-gray-200 text-sm leading-relaxed",children:t.lyrics||"Brak tekstu..."})]}),s.jsxs("div",{className:"bg-pink-50/50 dark:bg-gray-800 rounded-xl p-5 border border-pink-100 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Akordy w taktach"}),h!==0&&s.jsxs("span",{className:"text-[10px] font-bold text-pink-600 dark:text-pink-400 bg-pink-100 dark:bg-pink-900 px-2 py-0.5 rounded",children:["TRANSPONOWANO (",h>0?`+${h}`:h,")"]})]}),s.jsx("pre",{className:"whitespace-pre-wrap font-mono text-pink-800 dark:text-pink-300 text-sm leading-relaxed",children:g})]})]})]}),n==="history"&&s.jsx("div",{className:"space-y-4",children:l?s.jsx("div",{className:"text-center py-10 text-gray-400",children:"adowanie historii..."}):i.length===0?s.jsx("div",{className:"text-center py-10 text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-dashed border-gray-200 dark:border-gray-700",children:"Brak historii uycia tej pieni w programach."}):s.jsx("div",{className:"space-y-2",children:i.map(m=>{var w;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:shadow-sm transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-100 dark:bg-pink-900 flex items-center justify-center text-pink-600 dark:text-pink-300 font-bold text-xs",children:new Date(m.date).getDate()}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200",children:new Date(m.date).toLocaleDateString("pl-PL",{month:"long",year:"numeric"})}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Lider: ",((w=m.zespol)==null?void 0:w.lider)||"Nieznany"]})]})]}),s.jsx("div",{className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs font-bold",children:"Program"})]},m.id)})})}),n==="materials"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["Aby doda lub edytowa zaczniki, uyj przycisku ",s.jsx("strong",{children:'"Edytuj"'}),' i przejd do zakadki "Zaczniki".']})}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mt-2",children:["Zaczniki i Linki (",(t.attachments||[]).length,")"]}),(!t.attachments||t.attachments.length===0)&&s.jsxs("div",{className:"text-center py-8 text-gray-400 text-sm italic border border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:[s.jsx(xn,{size:32,className:"mx-auto mb-2 opacity-50"}),"Brak materiaw",s.jsx("p",{className:"text-xs mt-1",children:'Kliknij "Edytuj" aby doda zaczniki'})]}),(t.attachments||[]).map((m,w)=>{var N,S;const k=m.type==="file"&&(((N=m.name)==null?void 0:N.toLowerCase().endsWith(".mp3"))||((S=m.url)==null?void 0:S.toLowerCase().endsWith(".mp3")));return s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-pink-300 dark:hover:border-pink-500 transition group",children:[s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${m.type==="link"?"bg-orange-100 dark:bg-orange-900/30 text-orange-600":k?"bg-purple-100 dark:bg-purple-900/30 text-purple-600":"bg-pink-100 dark:bg-pink-900/30 text-pink-600"}`,children:m.type==="link"?s.jsx(Lo,{size:24}):k?s.jsx(Ms,{size:24}):s.jsx(xn,{size:24})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200 text-sm truncate",children:m.description||m.name||m.url}),m.description&&m.name&&m.description!==m.name&&s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:m.type==="file"?m.name:m.url}),s.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5 flex items-center gap-2",children:[s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${m.type==="link"?"bg-orange-100 dark:bg-orange-900/30 text-orange-600":k?"bg-purple-100 dark:bg-purple-900/30 text-purple-600":"bg-pink-100 dark:bg-pink-900/30 text-pink-600"}`,children:m.type==="link"?"Link":k?"MP3":"Plik"}),m.date&&new Date(m.date).toLocaleDateString("pl-PL")]})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0 ml-3",children:[m.type==="file"&&s.jsx("button",{onClick:()=>u(m.url,m.name),disabled:c===m.url,className:"p-2.5 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/50 transition disabled:opacity-50",title:"Pobierz plik",children:c===m.url?s.jsx("div",{className:"w-[18px] h-[18px] border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):s.jsx(Pj,{size:18})}),s.jsx("a",{href:m.url,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-pink-50 dark:hover:bg-pink-900 hover:text-pink-600 transition",title:m.type==="link"?"Otwrz link":"Podgld",children:s.jsx(oy,{size:18})})]})]}),k&&s.jsx("div",{className:"px-4 pb-4",children:s.jsx(L9,{url:m.url,name:m.description||m.name})})]},w)}),t.sheet_music_url&&s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-600 flex items-center justify-center",children:s.jsx(xn,{size:20})}),s.jsx("div",{children:s.jsx("div",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:"Nuty / PDF (Legacy)"})})]}),s.jsx("a",{href:t.sheet_music_url,target:"_blank",rel:"noreferrer",className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-lg hover:text-pink-600",children:s.jsx(oy,{size:18})})]})]})]})]})]})})}function I9(){const{userRole:t}=Ho(),[e,r]=C.useState("wall"),[n,a]=C.useState([]),[i,o]=C.useState([]),[l,A]=C.useState([]),[c,d]=C.useState(!0),[h,p]=C.useState({email:"",name:""}),[u,y]=C.useState(!1),[b,v]=C.useState(null),[g,m]=C.useState(!1),[w,k]=C.useState({}),[N,S]=C.useState({id:null,full_name:"",role:"",status:"Aktywny",phone:"",email:""}),[U,Q]=C.useState([]),[L,V]=C.useState(""),[F,D]=C.useState(""),[T,G]=C.useState([]),[ne,ce]=C.useState([]),[ue,Y]=C.useState([]),[Ae,fe]=C.useState([]),[we,E]=C.useState(!1),[z,K]=C.useState(!1),[W,J]=C.useState(""),[re,be]=C.useState({payment_date:"",amount:"",contractor:"",category:"Grupa Uwielbienia",description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:"Grupa Uwielbienia"});C.useEffect(()=>{$e(),me()},[]),C.useEffect(()=>{e==="finances"&&ae()},[e]);const me=async()=>{try{const{data:oe}=await le.from("team_roles").select("*").eq("team_type","worship").eq("is_active",!0).order("display_order");G(oe||[]);const{data:Be}=await le.from("team_member_roles").select("*").eq("member_table","worship_team");ce(Be||[])}catch(oe){console.error("Bd pobierania sub:",oe)}},ae=async()=>{const oe=new Date().getFullYear(),Be="Grupa Uwielbienia";try{const{data:Se,error:Qe}=await le.from("budget_items").select("*").eq("ministry",Be).eq("year",oe).order("id",{ascending:!0});if(Qe)throw Qe;Y(Se||[]);const{data:se,error:ze}=await le.from("expense_transactions").select("*").eq("ministry",Be).gte("payment_date",`${oe}-01-01`).lte("payment_date",`${oe}-12-31`).order("payment_date",{ascending:!1});if(ze)throw ze;fe(se||[])}catch(Se){console.error("Error fetching finance data:",Se)}},X=async oe=>{const Be=Array.from(oe.target.files||[]);if(Be.length!==0){K(!0);try{const Se=[];for(const Qe of Be){const se=Qe.name.split(".").pop(),O=`expense_documents/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${se}`}`,{error:Ee}=await le.storage.from("finance").upload(O,Qe);if(Ee)throw Ee;const{data:Pe}=le.storage.from("finance").getPublicUrl(O);Se.push({name:Qe.name,url:Pe.publicUrl,uploadedAt:new Date().toISOString()})}be({...re,documents:[...re.documents,...Se]})}catch(Se){console.error("Error uploading file:",Se),alert("Bd przesyania pliku: "+Se.message)}finally{K(!1)}}},ye=oe=>{be({...re,documents:re.documents.filter((Be,Se)=>Se!==oe)})},xe=()=>{W.trim()&&!re.tags.includes(W.trim())&&(be({...re,tags:[...re.tags,W.trim()]}),J(""))},Oe=oe=>{be({...re,tags:re.tags.filter(Be=>Be!==oe)})},H=async()=>{if(!re.payment_date||!re.amount||!re.contractor||!re.description||!re.responsible_person){alert("Wypenij wymagane pola");return}try{const{error:oe}=await le.from("expense_transactions").insert([{payment_date:re.payment_date,amount:parseFloat(re.amount),contractor:re.contractor,category:re.category,description:re.description,detailed_description:re.detailed_description,responsible_person:re.responsible_person,documents:re.documents,tags:re.tags,ministry:re.ministry}]);if(oe)throw oe;E(!1);const Be=re.ministry;be({payment_date:"",amount:"",contractor:"",category:Be,description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:Be}),ae()}catch(oe){console.error("Error saving expense:",oe),alert("Bd zapisywania: "+oe.message)}};async function $e(){d(!0);try{const{data:oe}=await le.from("worship_team").select("*").order("full_name"),{data:Be}=await le.from("songs").select("*").order("title"),{data:Se}=await le.from("programs").select("*").order("date",{ascending:!1}),{data:{user:Qe}}=await le.auth.getUser();if(Qe){const{data:se}=await le.from("app_users").select("full_name").eq("email",Qe.email).single();p({email:Qe.email,name:(se==null?void 0:se.full_name)||Qe.email})}a(oe||[]),o(Be||[]),A(Se||[])}catch(oe){console.error("Bd pobierania danych:",oe)}d(!1)}const lt=async()=>{try{let oe=N.id;if(N.id){const{id:Be,...Se}=N;await le.from("worship_team").update(Se).eq("id",N.id)}else{const{id:Be,...Se}=N,{data:Qe,error:se}=await le.from("worship_team").insert([Se]).select().single();if(se)throw se;oe=Qe.id}if(oe&&(await le.from("team_member_roles").delete().eq("member_id",String(oe)).eq("member_table","worship_team"),U.length>0)){const Be=U.map(Se=>({member_id:String(oe),member_table:"worship_team",role_id:Se}));await le.from("team_member_roles").insert(Be)}m(!1),Q([]),$e(),me()}catch(oe){alert("Bd: "+oe.message)}},nt=oe=>{const Be=ne.filter(Se=>String(Se.member_id)===String(oe)).map(Se=>Se.role_id);Q(Be)},Ne=oe=>{const Be=ne.filter(Se=>String(Se.member_id)===String(oe)).map(Se=>Se.role_id);return T.filter(Se=>Be.includes(Se.id)).map(Se=>Se.name)},qe=async oe=>{confirm("Usun?")&&(await le.from("worship_team").delete().eq("id",oe),$e())},Ye=async oe=>{confirm("Usun pie?")&&(await le.from("songs").delete().eq("id",oe),$e())},ot=async(oe,Be)=>{const Se=i.find(se=>se.id===oe);if(!Se)return;const Qe=(Se.tags||[]).filter(se=>se!==Be);try{await le.from("songs").update({tags:Qe}).eq("id",oe),o(se=>se.map(ze=>ze.id===oe?{...ze,tags:Qe}:ze))}catch(se){console.error("Bd usuwania tagu:",se)}},it=async(oe,Be)=>{A(Se=>Se.map(Qe=>Qe.id===oe?Be.zespol?{...Qe,...Be,zespol:{...Qe.zespol,...Be.zespol}}:{...Qe,...Be}:Qe)),await le.from("programs").update(Be).eq("id",oe)},ke=i.filter(oe=>(oe.title||"").toLowerCase().includes(L.toLowerCase())&&(F?Array.isArray(oe.tags)?oe.tags.map(String).map(Be=>Be.toLowerCase()).includes(F.toLowerCase()):!1:!0));return c?s.jsx("div",{className:"p-10 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Grupa Uwielbienia"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-2 inline-flex gap-2",children:[s.jsxs("button",{onClick:()=>r("wall"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="wall"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Cu,{size:16,className:"inline mr-2"}),"Tablica"]}),s.jsxs("button",{onClick:()=>r("schedule"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="schedule"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(en,{size:16,className:"inline mr-2"}),"Grafik"]}),s.jsxs("button",{onClick:()=>r("songs"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="songs"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ms,{size:16,className:"inline mr-2"}),"Baza Pieni"]}),ha("worship","members",t)&&s.jsxs("button",{onClick:()=>r("members"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="members"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ni,{size:16,className:"inline mr-2"}),"Czonkowie"]}),ha("worship","finances",t)&&s.jsxs("button",{onClick:()=>r("finances"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="finances"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Uo,{size:16,className:"inline mr-2"}),"Finanse"]}),ha("worship","members",t)&&s.jsxs("button",{onClick:()=>r("roles"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="roles"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(ta,{size:16,className:"inline mr-2"}),"Suby"]})]}),e==="schedule"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 relative z-[50] transition-colors",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Grafik Zespou"})}),s.jsx(_9,{programs:l,worshipTeam:n,onUpdateProgram:it,roles:T,memberRoles:ne})]}),e==="songs"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 relative z-[40] transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-3",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Baza Pieni"}),s.jsxs("button",{onClick:()=>{k({}),y(!0)},className:"bg-gradient-to-r from-orange-600 to-pink-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg hover:shadow-orange-500/50 transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj pie"]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 mb-4 rounded-2xl border border-gray-200 dark:border-gray-700 flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsx(No,{className:"text-gray-400 dark:text-gray-500",size:20}),s.jsx("input",{className:"w-full outline-none text-sm bg-transparent text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Szukaj pieni...",value:L,onChange:oe=>V(oe.target.value)})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsx("input",{className:"px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-xl text-sm bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 placeholder-gray-400",placeholder:"Szukaj po tagach...",value:F,onChange:oe=>D(oe.target.value)}),k9.map(oe=>F!==oe&&s.jsx("button",{onClick:()=>D(oe),className:"bg-gradient-to-r from-pink-50 to-orange-50 dark:from-pink-900/40 dark:to-orange-900/40 px-3 py-1.5 rounded-xl text-xs text-pink-800 dark:text-pink-300 border border-pink-200 dark:border-pink-800 hover:from-pink-100 hover:to-orange-100 dark:hover:from-pink-900/60 dark:hover:to-orange-900/60 transition font-medium",children:oe},oe)),F&&s.jsx("button",{onClick:()=>D(""),className:"ml-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition",children:"Wyczy"})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm align-middle",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-400 font-bold border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Tytu"}),s.jsx("th",{className:"p-4",children:"Kategoria"}),s.jsx("th",{className:"p-4",children:"Tonacja"}),s.jsx("th",{className:"p-4",children:"Tempo"}),s.jsx("th",{className:"p-4",children:"Tagi"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ke.map(oe=>s.jsxs("tr",{className:"hover:bg-pink-50/30 dark:hover:bg-gray-800/50 transition",children:[s.jsx("td",{className:"p-4 font-bold text-gray-800 dark:text-gray-200",children:oe.title}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:oe.category}),s.jsx("td",{className:"p-4 font-mono font-bold text-pink-600 dark:text-pink-400",children:oe.key}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:oe.tempo||"-"}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex gap-1 flex-wrap",children:Array.isArray(oe.tags)&&oe.tags.length>0?oe.tags.map((Be,Se)=>s.jsxs("span",{className:"bg-gradient-to-r from-pink-100 to-orange-100 dark:from-pink-900/30 dark:to-orange-900/30 px-2 py-1 text-xs rounded-full text-pink-800 dark:text-pink-300 border border-pink-200 dark:border-pink-800 font-medium flex items-center gap-1 group",children:[Be,s.jsx("button",{onClick:Qe=>{Qe.stopPropagation(),ot(oe.id,Be)},className:"opacity-0 group-hover:opacity-100 hover:text-red-500 transition-opacity",title:"Usu tag",children:s.jsx(Nt,{size:12})})]},Se)):s.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>v(oe),className:"text-gray-800 dark:text-gray-300 font-semibold px-3 py-1.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:"Szczegy"}),s.jsx("button",{onClick:()=>{k(oe),y(!0)},className:"text-pink-600 dark:text-pink-400 hover:text-orange-600 dark:hover:text-orange-400 font-medium transition",children:"Edytuj"}),s.jsx("button",{onClick:()=>Ye(oe.id),className:"text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 font-medium transition",children:"Usu"})]})]},oe.id))})]})})]}),e==="members"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 relative z-[30] transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Czonkowie Zespou"}),s.jsxs("button",{onClick:()=>{S({id:null,full_name:"",role:"",status:"Aktywny",phone:"",email:""}),Q([]),m(!0)},className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg hover:shadow-pink-500/50 transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj czonka"]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-400 font-bold border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Imi i nazwisko"}),s.jsx("th",{className:"p-4",children:"Suby"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4",children:"Telefon"}),s.jsx("th",{className:"p-4",children:"Email"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(oe=>{const Be=Ne(oe.id);return s.jsxs("tr",{className:"hover:bg-pink-50/30 dark:hover:bg-gray-800/50 transition",children:[s.jsx("td",{className:"p-4 font-medium text-gray-800 dark:text-gray-200",children:oe.full_name}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Be.length>0?Be.map((Se,Qe)=>s.jsx("span",{className:"bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 px-2 py-0.5 rounded-lg text-xs font-medium border border-pink-100 dark:border-pink-800",children:Se},Qe)):s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs italic",children:"Brak przypisanych"})})}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:"bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 text-green-700 dark:text-green-300 px-3 py-1 rounded-full text-xs font-medium border border-green-200 dark:border-green-800",children:oe.status})}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:oe.phone}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:oe.email}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{S(oe),nt(oe.id),m(!0)},className:"text-pink-600 dark:text-pink-400 hover:text-orange-600 dark:hover:text-orange-400 font-medium transition",children:"Edytuj"}),s.jsx("button",{onClick:()=>qe(oe.id),className:"text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 font-medium transition",children:"Usu"})]})]},oe.id)})})]})})]}),e==="finances"&&s.jsx(Qu,{ministry:"Grupa Uwielbienia",budgetItems:ue,expenses:Ae,onAddExpense:()=>E(!0),onRefresh:ae}),e==="wall"&&s.jsx("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:s.jsx(o3,{ministry:"Grupa Uwielbienia",currentUserEmail:h.email,currentUserName:h.name})}),e==="roles"&&s.jsx(Cw,{teamType:"worship",teamMembers:n,memberTable:"worship_team"}),g&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-lg p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:N.id?"Edytuj czonka":"Nowy czonek"}),s.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Imi i nazwisko"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Jan Kowalski",value:N.full_name,onChange:oe=>S({...N,full_name:oe.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Suby / Instrumenty"}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 p-3",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(oe=>{const Be=U.includes(oe.id);return s.jsxs("button",{type:"button",onClick:()=>{Q(Be?Se=>Se.filter(Qe=>Qe!==oe.id):Se=>[...Se,oe.id])},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition flex items-center gap-1.5 ${Be?"bg-gradient-to-r from-pink-500 to-orange-500 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[Be&&s.jsx(Un,{size:14}),oe.name]},oe.id)})}),T.length===0&&s.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center py-2",children:'Brak zdefiniowanych sub. Dodaj je w zakadce "Suby".'})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Telefon"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"+48 123 456 789",value:N.phone,onChange:oe=>S({...N,phone:oe.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Email"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"jan@example.com",value:N.email,onChange:oe=>S({...N,email:oe.target.value})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>m(!1),className:"px-5 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Anuluj"}),s.jsx("button",{onClick:lt,className:"px-5 py-2.5 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg hover:shadow-pink-500/50 transition font-medium",children:"Zapisz"})]})]})]})}),u&&s.jsx(s9,{initialData:w,onSave:async oe=>{try{const Be={title:(oe.title||"").trim(),category:(oe.category||"").trim(),key:(oe.key||"C").trim(),tempo:oe.tempo?parseInt(oe.tempo):null,meter:(oe.meter||"").trim(),tags:Array.isArray(oe.tags)?oe.tags:[],chords_bars:(oe.chords_bars||"").trim(),lyrics:(oe.lyrics||"").trim(),sheet_music_url:(oe.sheet_music_url||"").trim(),attachments:Array.isArray(oe.attachments)?oe.attachments:[]};oe.id?await le.from("songs").update(Be).eq("id",oe.id):await le.from("songs").insert([Be]),y(!1),$e()}catch(Be){alert("Bd: "+(Be.message||"Nie udao si zapisa pieni"))}},onCancel:()=>y(!1)}),b&&s.jsx(Q9,{song:b,onClose:()=>v(null),onEdit:()=>{k(b),y(!0),v(null)}}),we&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-4xl p-6 border border-white/20 dark:border-gray-700 my-8",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Nowy wydatek - ",re.ministry]}),s.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(B9,{label:"Data dokumentu",value:re.payment_date,onChange:oe=>be({...re,payment_date:oe})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:re.amount,onChange:oe=>be({...re,amount:oe.target.value}),placeholder:"0.00"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kontrahent"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:re.contractor,onChange:oe=>be({...re,contractor:oe.target.value}),placeholder:"Nazwa firmy/osoby"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Osoba odpowiedzialna"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:re.responsible_person,onChange:oe=>be({...re,responsible_person:oe.target.value}),placeholder:"Imi i nazwisko"})]})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Pozycja budetowa (opis kosztu)",value:re.description,onChange:oe=>be({...re,description:oe}),options:[{value:"",label:"Wybierz pozycj"},...ue.map(oe=>({value:oe.description,label:oe.description}))],placeholder:"Wybierz pozycj"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Szczegowy opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:2,value:re.detailed_description,onChange:oe=>be({...re,detailed_description:oe.target.value}),placeholder:"Dodatkowe informacje o wydatku..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Zaczniki (opcjonalnie)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white cursor-pointer hover:border-pink-300 dark:hover:border-pink-600 transition flex items-center gap-2",children:[s.jsx(Hs,{size:18,className:"text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:z?"Przesyanie...":"Dodaj plik(i)"}),s.jsx("input",{type:"file",onChange:X,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",disabled:z,multiple:!0})]}),re.documents&&re.documents.length>0&&s.jsx("div",{className:"space-y-2",children:re.documents.map((oe,Be)=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:[s.jsxs("span",{className:"text-xs text-green-700 dark:text-green-300 flex items-center gap-1 truncate",children:[s.jsx(xn,{size:14}),oe.name]}),s.jsx("button",{onClick:()=>ye(Be),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 ml-2 flex-shrink-0",children:s.jsx(Nt,{size:14})})]},Be))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tagi"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",value:W,onChange:oe=>J(oe.target.value),placeholder:"Dodaj tag",onKeyPress:oe=>oe.key==="Enter"&&xe()}),s.jsx("button",{onClick:xe,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:s.jsx(Wt,{size:18})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:re.tags.map((oe,Be)=>s.jsxs("span",{className:"px-2 py-1 bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300 rounded-lg text-xs flex items-center gap-1",children:[s.jsx(Bl,{size:12}),oe,s.jsx("button",{onClick:()=>Oe(oe),children:s.jsx(Nt,{size:12})})]},Be))})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:H,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})})]})}const Z5=["Do zrobienia","W trakcie","Gotowe"];function Lw(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e]),r}const eB=({label:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),[i,o]=C.useState(e?new Date(e):new Date),l=C.useRef(null),A=Lw(l,n);C.useEffect(()=>{e&&o(new Date(e))},[e]),C.useEffect(()=>{if(!n)return;function k(N){l.current&&!l.current.contains(N.target)&&(N.target.closest(".portal-datepicker")||a(!1))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[n]);const c=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()-1,1))},d=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()+1,1))},h=k=>{const N=new Date(i.getFullYear(),i.getMonth(),k),S=N.getFullYear(),U=String(N.getMonth()+1).padStart(2,"0"),Q=String(N.getDate()).padStart(2,"0");r(`${S}-${U}-${Q}`),a(!1)},p=(k,N)=>new Date(k,N+1,0).getDate(),u=(k,N)=>{const S=new Date(k,N,1).getDay();return S===0?6:S-1},y=p(i.getFullYear(),i.getMonth()),b=u(i.getFullYear(),i.getMonth()),v=Array.from({length:y},(k,N)=>N+1),g=Array.from({length:b},(k,N)=>N),m=i.toLocaleDateString("pl-PL",{month:"long",year:"numeric"}),w=e?new Date(e).toLocaleDateString("pl-PL"):"";return s.jsxs("div",{className:"relative w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsx("div",{ref:l,onClick:()=>a(!n),className:`w-full px-4 py-3 border rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm cursor-pointer flex justify-between items-center transition-all
          ${n?"border-pink-500 ring-2 ring-pink-500/20 dark:border-pink-400":"border-gray-200/50 dark:border-gray-700/50 hover:border-pink-300 dark:hover:border-pink-600"}
        `,children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(en,{size:16,className:"text-gray-400"}),s.jsx("span",{className:w?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:w||"Wybierz dat"})]})}),n&&A.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-datepicker fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 animate-in fade-in zoom-in-95 duration-100",style:{top:A.top,left:A.left,width:"280px"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:c,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Ei,{size:18})}),s.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 capitalize",children:m}),s.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Fi,{size:18})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(k=>s.jsx("div",{className:"text-center text-[10px] font-bold text-gray-400 uppercase",children:k},k))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[g.map(k=>s.jsx("div",{},`blank-${k}`)),v.map(k=>{const N=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`,S=e===N,U=new Date().toDateString()===new Date(i.getFullYear(),i.getMonth(),k).toDateString();return s.jsx("button",{onClick:()=>h(k),className:`h-8 w-8 rounded-lg text-xs font-medium transition flex items-center justify-center
                    ${S?"bg-pink-600 text-white shadow-md shadow-pink-500/30":U?"bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 border border-pink-100 dark:border-pink-800":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                  `,children:k},k)})]})]}),document.body)]})},P9=({options:t,value:e,onChange:r,absentMembers:n=[]})=>{const[a,i]=C.useState(!1),o=C.useRef(null),l=Lw(o,a),A=e?e.split(",").map(d=>d.trim()).filter(Boolean):[];C.useEffect(()=>{if(!a)return;function d(h){o.current&&!o.current.contains(h.target)&&(h.target.closest(".portal-table-multiselect")||i(!1))}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[a]);const c=(d,h)=>{if(h)return;let p;A.includes(d)?p=A.filter(u=>u!==d):p=[...A,d],r(p.join(", "))};return s.jsxs("div",{className:"relative w-full",children:[s.jsx("div",{ref:o,className:"w-full min-h-[32px] px-2 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-xs cursor-pointer flex flex-wrap gap-1 items-center hover:border-pink-300 dark:hover:border-pink-500 transition",onClick:()=>i(!a),children:A.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-[10px] italic",children:"Wybierz..."}):A.map((d,h)=>s.jsx("span",{className:"bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 px-1.5 py-0.5 rounded text-[10px] border border-pink-100 dark:border-pink-800 whitespace-nowrap",children:d},h))}),a&&l.width>0&&Ht.createPortal(s.jsx("div",{className:"portal-table-multiselect fixed z-[9999] w-48 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-in fade-in zoom-in-95 duration-100",style:{top:l.top,left:l.left},children:t.map(d=>{const h=A.includes(d.full_name),p=n.includes(d.full_name);return s.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer flex items-center justify-between transition 
                  ${p?"bg-gray-50 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed":"hover:bg-pink-50 dark:hover:bg-pink-900/20 text-gray-700 dark:text-gray-300"}
                  ${h?"bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 font-medium":""}
                `,onClick:()=>c(d.full_name,p),children:[s.jsx("span",{className:p?"line-through decoration-gray-400 dark:decoration-gray-600":"",children:d.full_name}),h&&!p&&s.jsx(Un,{size:12}),p&&s.jsx(Li,{size:12,className:"text-red-300 dark:text-red-400"})]},d.id)})}),document.body)]})},T9=({options:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),i=C.useRef(null),o=Lw(i,n),l=e?e.split(",").map(c=>c.trim()).filter(Boolean):[];C.useEffect(()=>{if(!n)return;function c(d){i.current&&!i.current.contains(d.target)&&(d.target.closest(".portal-absence-multiselect")||a(!1))}return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]);const A=c=>{let d;l.includes(c)?d=l.filter(h=>h!==c):d=[...l,c],r(d.join(", "))};return s.jsxs("div",{className:"relative w-full",children:[s.jsx("div",{ref:i,className:"w-full min-h-[32px] px-2 py-1 bg-white dark:bg-gray-800 border border-red-200 dark:border-red-900/50 rounded-lg text-xs cursor-pointer flex flex-wrap gap-1 items-center hover:border-red-300 dark:hover:border-red-700 transition",onClick:()=>a(!n),children:l.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-[10px] italic",children:"Wybierz..."}):l.map((c,d)=>s.jsx("span",{className:"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 px-1.5 py-0.5 rounded text-[10px] border border-red-100 dark:border-red-800 whitespace-nowrap flex items-center gap-1",children:c},d))}),n&&Ht.createPortal(s.jsx("div",{className:"portal-absence-multiselect fixed z-[9999] w-48 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-in fade-in zoom-in-95 duration-100",style:{top:o.top,left:o.left},children:t.map(c=>{const d=l.includes(c.full_name);return s.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition ${d?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 font-medium":"text-gray-700 dark:text-gray-300"}`,onClick:()=>A(c.full_name),children:[s.jsx("span",{children:c.full_name}),d&&s.jsx(Li,{size:12})]},c.id)})}),document.body)]})},D9=({programs:t,mediaTeam:e,onUpdateProgram:r,roles:n,memberRoles:a=[]})=>{const[i,o]=C.useState({}),l=t.reduce((g,m)=>{if(!m.date)return g;const w=new Date(m.date),k=`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`;return g[k]||(g[k]=[]),g[k].push(m),g},{}),A=Object.keys(l).sort().reverse();C.useEffect(()=>{const g=new Date().toISOString().slice(0,7);o(m=>({...m,[g]:!0}))},[]);const c=g=>{o(m=>({...m,[g]:!m[g]}))},d=g=>{const[m,w]=g.split("-");return new Date(m,w-1).toLocaleDateString("pl-PL",{month:"long",year:"numeric"}).replace(/^\w/,N=>N.toUpperCase())},h=g=>new Date(g).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"}),p=async(g,m,w)=>{const k=t.find(U=>U.id===g);if(!k)return;const S={...k.produkcja||{},[m]:w};await r(g,{produkcja:S})},u=async(g,m)=>{const w=t.find(S=>S.id===g);if(!w)return;const N={...w.produkcja||{},notatki:m};await r(g,{produkcja:N})},y=async(g,m)=>{const w=t.find(S=>S.id===g);if(!w)return;const N={...w.produkcja||{},absencja:m};await r(g,{produkcja:N})},b=n&&n.length>0?n.map(g=>({key:g.field_key,label:g.name,roleId:g.id})):[{key:"propresenter",label:"Prezentacja",roleId:null},{key:"social",label:"SocialMedia",roleId:null},{key:"video",label:"Video",roleId:null},{key:"foto",label:"Foto",roleId:null},{key:"naglosnienie",label:"Nagonienie",roleId:null}],v=g=>{if(!g||a.length===0)return e;const m=a.filter(w=>w.role_id===g).map(w=>String(w.member_id));return m.length===0?e:e.filter(w=>m.includes(String(w.id)))};return s.jsx("div",{className:"space-y-4",children:A.map(g=>{const m=i[g];return s.jsxs("div",{className:`bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-sm relative z-0 transition-all duration-300 ${m?"mb-8":"mb-0"}`,children:[s.jsxs("button",{onClick:()=>c(g),className:`w-full px-6 py-4 bg-white/50 dark:bg-gray-800/50 hover:bg-white/80 dark:hover:bg-gray-800/80 flex justify-between items-center transition border-b border-gray-100 dark:border-gray-700 ${m?"rounded-t-2xl":"rounded-2xl"}`,children:[s.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200 text-sm uppercase tracking-wider",children:d(g)}),m?s.jsx(Ui,{size:18,className:"text-gray-500 dark:text-gray-400"}):s.jsx(tn,{size:18,className:"text-gray-500 dark:text-gray-400"})]}),m&&s.jsx("div",{className:"overflow-x-auto pb-4",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-max",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-800/50 text-xs text-gray-500 dark:text-gray-400 uppercase",children:[s.jsx("th",{className:"p-3 font-semibold w-24 min-w-[90px]",children:"Data"}),b.map(w=>s.jsx("th",{className:"p-3 font-semibold min-w-[130px]",children:w.label},w.key)),s.jsx("th",{className:"p-3 font-semibold min-w-[130px] text-red-500 dark:text-red-400",children:"Absencja"}),s.jsx("th",{className:"p-3 font-semibold min-w-[150px]",children:"Notatki"})]})}),s.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-700 relative",children:l[g].sort((w,k)=>new Date(w.date)-new Date(k.date)).map((w,k)=>{var S,U,Q;const N=(S=w.produkcja)!=null&&S.absencja?w.produkcja.absencja.split(",").map(L=>L.trim()).filter(Boolean):[];return s.jsxs("tr",{className:"hover:bg-white/60 dark:hover:bg-gray-700/30 transition relative",children:[s.jsx("td",{className:"p-3 font-medium text-gray-700 dark:text-gray-300 font-mono text-xs",children:h(w.date)}),b.map(L=>{var V;return s.jsx("td",{className:"p-2 relative",children:s.jsx(P9,{options:v(L.roleId),value:((V=w.produkcja)==null?void 0:V[L.key])||"",onChange:F=>p(w.id,L.key,F),absentMembers:N})},L.key)}),s.jsx("td",{className:"p-2 relative",children:s.jsx(T9,{options:e,value:((U=w.produkcja)==null?void 0:U.absencja)||"",onChange:L=>y(w.id,L)})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{className:"w-full bg-transparent border-b border-transparent hover:border-gray-300 dark:hover:border-gray-600 focus:border-pink-500 dark:focus:border-pink-400 text-xs p-1 outline-none transition placeholder-gray-300 dark:placeholder-gray-600 text-gray-700 dark:text-gray-300",placeholder:"Wpisz...",defaultValue:((Q=w.produkcja)==null?void 0:Q.notatki)||"",onBlur:L=>u(w.id,L.target.value)})})]},w.id)})})]})})]},g)})})};function z9(){const{userRole:t}=Ho(),[e,r]=C.useState("schedule"),[n,a]=C.useState([]),[i,o]=C.useState([]),[l,A]=C.useState([]),[c,d]=C.useState(!0),[h,p]=C.useState(null),[u,y]=C.useState(null),[b,v]=C.useState("kanban"),[g,m]=C.useState("all"),[w,k]=C.useState("active"),[N,S]=C.useState(!1),[U,Q]=C.useState(!1),[L,V]=C.useState({id:null,full_name:"",role:"",email:"",phone:""}),[F,D]=C.useState([]),[T,G]=C.useState({id:null,title:"",description:"",due_date:"",assigned_to:null,status:"Do zrobienia",attachment:null}),[ne,ce]=C.useState([]),[ue,Y]=C.useState(""),[Ae,fe]=C.useState(!1),[we,E]=C.useState(null),[z,K]=C.useState(null),[W,J]=C.useState([]),[re,be]=C.useState([]),[me,ae]=C.useState([]),[X,ye]=C.useState([]),[xe,Oe]=C.useState(!1),[H,$e]=C.useState(!1),[lt,nt]=C.useState(""),[Ne,qe]=C.useState({payment_date:"",amount:"",contractor:"",category:"MediaTeam",description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:"MediaTeam"});C.useEffect(()=>{se(),ot(),Ye()},[]),C.useEffect(()=>{e==="finances"&&it()},[e]);const Ye=async()=>{try{const{data:ge}=await le.from("team_roles").select("*").eq("team_type","media").eq("is_active",!0).order("display_order");J(ge||[]);const{data:Ce}=await le.from("team_member_roles").select("*").eq("member_table","media_team");be(Ce||[])}catch(ge){console.error("Bd pobierania sub:",ge)}};async function ot(){const{data:ge}=await le.auth.getUser();ge!=null&&ge.user&&y(ge.user.email)}const it=async()=>{const ge=new Date().getFullYear(),Ce="MediaTeam";try{const{data:Ke,error:gt}=await le.from("budget_items").select("*").eq("ministry",Ce).eq("year",ge).order("id",{ascending:!0});if(gt)throw gt;ae(Ke||[]);const{data:Kt,error:Ar}=await le.from("expense_transactions").select("*").eq("ministry",Ce).gte("payment_date",`${ge}-01-01`).lte("payment_date",`${ge}-12-31`).order("payment_date",{ascending:!1});if(Ar)throw Ar;ye(Kt||[])}catch(Ke){console.error("Error fetching finance data:",Ke)}},ke=async ge=>{const Ce=Array.from(ge.target.files||[]);if(Ce.length!==0){$e(!0);try{const Ke=[];for(const gt of Ce){const Kt=gt.name.split(".").pop(),qt=`expense_documents/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${Kt}`}`,{error:nr}=await le.storage.from("finance").upload(qt,gt);if(nr)throw nr;const{data:er}=le.storage.from("finance").getPublicUrl(qt);Ke.push({name:gt.name,url:er.publicUrl,uploadedAt:new Date().toISOString()})}qe({...Ne,documents:[...Ne.documents,...Ke]})}catch(Ke){console.error("Error uploading file:",Ke),alert("Bd przesyania pliku: "+Ke.message)}finally{$e(!1)}}},oe=ge=>{qe({...Ne,documents:Ne.documents.filter((Ce,Ke)=>Ke!==ge)})},Be=()=>{lt.trim()&&!Ne.tags.includes(lt.trim())&&(qe({...Ne,tags:[...Ne.tags,lt.trim()]}),nt(""))},Se=ge=>{qe({...Ne,tags:Ne.tags.filter(Ce=>Ce!==ge)})},Qe=async()=>{if(!Ne.payment_date||!Ne.amount||!Ne.contractor||!Ne.description||!Ne.responsible_person){alert("Wypenij wymagane pola");return}try{const{error:ge}=await le.from("expense_transactions").insert([{payment_date:Ne.payment_date,amount:parseFloat(Ne.amount),contractor:Ne.contractor,category:Ne.category,description:Ne.description,detailed_description:Ne.detailed_description,responsible_person:Ne.responsible_person,documents:Ne.documents,tags:Ne.tags,ministry:Ne.ministry}]);if(ge)throw ge;Oe(!1);const Ce=Ne.ministry;qe({payment_date:"",amount:"",contractor:"",category:Ce,description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:Ce}),it()}catch(ge){console.error("Error saving expense:",ge),alert("Bd zapisywania: "+ge.message)}};async function se(){d(!0),p(null);try{const ge=new Date;ge.setMonth(ge.getMonth()-6);const Ce=ge.toISOString().split("T")[0],[Ke,gt,Kt]=await Promise.all([le.from("media_team").select("id, full_name, role, email, phone").order("full_name"),le.from("media_tasks").select("*").order("due_date"),le.from("programs").select("id, date, produkcja").gte("date",Ce).order("date",{ascending:!1})]);if(Ke.error)throw new Error(`Bd zespou: ${Ke.error.message}`);if(gt.error)throw new Error(`Bd zada: ${gt.error.message}`);if(Kt.error)throw new Error(`Bd programw: ${Kt.error.message}`);a(Ke.data||[]),o(gt.data||[]),A(Kt.data||[])}catch(ge){console.error(" Bd pobierania danych:",ge),p(ge.message)}finally{d(!1)}}const ze=async(ge,Ce)=>{A(Ke=>Ke.map(gt=>gt.id===ge?Ce.produkcja?{...gt,...Ce,produkcja:{...gt.produkcja,...Ce.produkcja}}:{...gt,...Ce}:gt)),await le.from("programs").update(Ce).eq("id",ge)},O=async ge=>{if(ge){fe(!0);try{const{data:Ce,error:Ke}=await le.from("media_task_comments").select("*").eq("task_id",ge).order("created_at",{ascending:!0});if(Ke)throw Ke;ce(Ce||[])}catch(Ce){console.error("Bd pobierania komentarzy:",Ce)}finally{fe(!1)}}},Ee=async()=>{if(!(!ue.trim()||!T.id))try{const ge=n.find(Kt=>Kt.email===u),Ce=ge?ge.full_name:u||"Nieznany",Ke={task_id:T.id,content:ue.trim(),author_email:u,author_name:Ce},{error:gt}=await le.from("media_task_comments").insert([Ke]);if(gt)throw gt;Y(""),O(T.id)}catch(ge){console.error("Bd dodawania komentarza:",ge),alert("Nie udao si doda komentarza")}},Pe=ge=>{G(ge||{id:null,title:"",description:"",due_date:"",assigned_to:null,status:"Do zrobienia",attachment:null}),ge&&ge.id?O(ge.id):ce([]),Q(!0)},Re=i.filter(ge=>{if(g==="mine"){const Ce=n.find(Ke=>Ke.email===u);if(!Ce||ge.assigned_to!==Ce.id)return!1}if(w==="active"){if(ge.status==="Gotowe")return!1}else if(w==="completed"&&ge.status!=="Gotowe")return!1;return!0}),ht=async ge=>{const Ce=ge.status==="Gotowe"?"Do zrobienia":"Gotowe",Ke=i.map(gt=>gt.id===ge.id?{...gt,status:Ce}:gt);o(Ke);try{const{error:gt}=await le.from("media_tasks").update({status:Ce}).eq("id",ge.id);if(gt)throw gt}catch(gt){console.error("Bd zmiany statusu:",gt),se()}},rt=async()=>{try{if(!L.full_name.trim()){alert("Imi i nazwisko jest wymagane");return}let ge=L.id;if(L.id){const{error:Ce}=await le.from("media_team").update({full_name:L.full_name,role:L.role,email:L.email,phone:L.phone}).eq("id",L.id);if(Ce)throw Ce}else{const{data:Ce,error:Ke}=await le.from("media_team").insert([{full_name:L.full_name,role:L.role,email:L.email,phone:L.phone}]).select().single();if(Ke)throw Ke;ge=Ce.id}if(ge&&(await le.from("team_member_roles").delete().eq("member_id",String(ge)).eq("member_table","media_team"),F.length>0)){const Ce=F.map(Ke=>({member_id:String(ge),member_table:"media_team",role_id:Ke}));await le.from("team_member_roles").insert(Ce)}S(!1),D([]),await se(),await Ye()}catch(ge){console.error("Bd zapisywania czonka:",ge),alert("Bd: "+ge.message)}},ut=ge=>{const Ce=re.filter(Ke=>String(Ke.member_id)===String(ge)).map(Ke=>Ke.role_id);D(Ce)},at=ge=>{const Ce=re.filter(Ke=>String(Ke.member_id)===String(ge)).map(Ke=>Ke.role_id);return W.filter(Ke=>Ce.includes(Ke.id)).map(Ke=>Ke.name)},ct=async ge=>{if(confirm("Usun czonka zespou?"))try{const{error:Ce}=await le.from("media_team").delete().eq("id",ge);if(Ce)throw Ce;await se()}catch(Ce){console.error("Bd usuwania czonka:",Ce),alert("Bd: "+Ce.message)}},de=async()=>{try{if(!T.title.trim()){alert("Tytu zadania jest wymagany");return}const ge={title:T.title.trim(),description:T.description.trim(),due_date:T.due_date||null,assigned_to:T.assigned_to||null,status:T.status,attachment:T.attachment};let Ce=T.id;if(T.id){const{error:Ke}=await le.from("media_tasks").update(ge).eq("id",T.id);if(Ke)throw Ke}else{const{data:Ke,error:gt}=await le.from("media_tasks").insert([ge]).select();if(gt)throw gt;Ke&&Ke[0]&&(Ce=Ke[0].id)}Q(!1),await se()}catch(ge){console.error("Bd zapisywania zadania:",ge),alert("Bd: "+ge.message)}},We=async ge=>{if(confirm("Usun zadanie?"))try{const{error:Ce}=await le.from("media_tasks").delete().eq("id",ge);if(Ce)throw Ce;await se()}catch(Ce){console.error("Bd usuwania zadania:",Ce),alert("Bd: "+Ce.message)}},Je=ge=>E(ge),et=(ge,Ce)=>{ge.preventDefault(),K(Ce)},Zt=()=>K(null),Ft=async(ge,Ce)=>{if(ge.preventDefault(),K(null),!we||we.status===Ce){E(null);return}try{const{error:Ke}=await le.from("media_tasks").update({status:Ce}).eq("id",we.id);if(Ke)throw Ke;await se()}catch(Ke){console.error("Bd:",Ke)}E(null)},Rt=ge=>{const Ce=ge.target.files[0];if(Ce){const Ke=new FileReader;Ke.onload=gt=>{G({...T,attachment:{name:Ce.name,type:Ce.type,size:Ce.size,data:gt.target.result.split(",")[1]}})},Ke.readAsDataURL(Ce)}};return c?s.jsx("div",{className:"p-10 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 dark:border-pink-400 mx-auto"})}):h?s.jsxs("div",{className:"p-10 text-red-600 dark:text-red-400",children:["Bd: ",h]}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Zesp Medialny"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-2 inline-flex gap-2",children:[s.jsxs("button",{onClick:()=>r("schedule"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="schedule"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(en,{size:16,className:"inline mr-2"}),"Grafik"]}),s.jsxs("button",{onClick:()=>r("tasks"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="tasks"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ij,{size:16,className:"inline mr-2"}),"Zadania"]}),ha("media","members",t)&&s.jsxs("button",{onClick:()=>r("members"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="members"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ni,{size:16,className:"inline mr-2"}),"Czonkowie"]}),ha("media","finances",t)&&s.jsxs("button",{onClick:()=>r("finances"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="finances"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Uo,{size:16,className:"inline mr-2"}),"Finanse"]}),ha("media","members",t)&&s.jsxs("button",{onClick:()=>r("roles"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="roles"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(ta,{size:16,className:"inline mr-2"}),"Suby"]})]}),e==="schedule"&&s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 relative z-[50] transition-colors duration-300",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Grafik Media Team"})}),s.jsx(D9,{programs:l,mediaTeam:n,onUpdateProgram:ze,roles:W,memberRoles:re})]}),e==="tasks"&&s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 relative z-[40] transition-colors duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:["Zadania (",Re.length,")"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm p-1 rounded-xl border border-gray-200/50 dark:border-gray-700/50 gap-2 items-center",children:[s.jsx("button",{onClick:()=>v("kanban"),className:`p-2 rounded-lg transition ${b==="kanban"?"bg-white dark:bg-gray-700 shadow text-pink-600 dark:text-pink-300":"text-gray-500 dark:text-gray-400"}`,children:s.jsx(aw,{size:18})}),s.jsx("button",{onClick:()=>v("list"),className:`p-2 rounded-lg transition ${b==="list"?"bg-white dark:bg-gray-700 shadow text-pink-600 dark:text-pink-300":"text-gray-500 dark:text-gray-400"}`,children:s.jsx(mg,{size:18})}),s.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600 mx-1"}),s.jsx("div",{className:"w-32",children:s.jsx(Pt,{value:g,onChange:m,options:[{value:"all",label:"Wszyscy"},{value:"mine",label:"Moje"}],placeholder:"Zakres"})}),s.jsx("div",{className:"w-32",children:s.jsx(Pt,{value:w,onChange:k,options:[{value:"active",label:"Otwarte"},{value:"completed",label:"Zakoczone"},{value:"all",label:"Wszystkie"}],placeholder:"Status"})})]}),s.jsxs("button",{onClick:()=>Pe(null),className:"bg-gradient-to-r from-orange-600 to-pink-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2 whitespace-nowrap",children:[s.jsx(Wt,{size:18})," Dodaj zadanie"]})]})]}),b==="kanban"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Z5.map(ge=>s.jsxs("div",{className:`bg-gradient-to-br from-gray-50/80 to-gray-100/50 dark:from-gray-800/40 dark:to-gray-900/20 backdrop-blur-sm rounded-2xl border-2 p-4 transition-all ${z===ge?"border-pink-400 dark:border-pink-500 bg-pink-50/50 dark:bg-pink-900/20 shadow-lg":"border-gray-200/50 dark:border-gray-700/50"}`,onDragOver:Ce=>et(Ce,ge),onDragLeave:Zt,onDrop:Ce=>Ft(Ce,ge),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:ge}),s.jsx("span",{className:"bg-pink-100 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-3 py-1 rounded-full text-xs font-bold",children:Re.filter(Ce=>Ce.status===ge).length})]}),s.jsx("div",{className:"space-y-3",children:Re.filter(Ce=>Ce.status===ge).map(Ce=>{var Ke;return s.jsx("div",{draggable:!0,onDragStart:()=>Je(Ce),className:`bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 p-4 shadow-sm hover:shadow-md transition cursor-move group ${Ce.status==="Gotowe"?"opacity-60":""}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1",children:s.jsx("input",{type:"checkbox",checked:Ce.status==="Gotowe",onChange:()=>ht(Ce),className:"w-5 h-5 rounded border-gray-300 text-pink-600 dark:text-pink-500 cursor-pointer"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`font-bold text-gray-800 dark:text-gray-100 mb-2 ${Ce.status==="Gotowe"?"line-through text-gray-500 dark:text-gray-500":""}`,children:Ce.title}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400 flex-wrap",children:[Ce.due_date&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(en,{size:14}),new Date(Ce.due_date).toLocaleDateString("pl-PL")]}),Ce.assigned_to&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ni,{size:14}),(Ke=n.find(gt=>gt.id===Ce.assigned_to))==null?void 0:Ke.full_name]})]}),s.jsx("div",{className:"flex justify-end gap-2 mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:s.jsx("button",{onClick:()=>Pe(Ce),className:"text-pink-600 dark:text-pink-400 text-xs font-medium",children:"Szczegy"})})]})]})},Ce.id)})})]},ge))}),b==="list"&&s.jsx("div",{className:"bg-white/50 dark:bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gradient-to-r from-pink-50/80 to-orange-50/80 dark:from-pink-900/20 dark:to-orange-900/20 text-gray-700 dark:text-gray-300 font-bold border-b border-gray-200/50 dark:border-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 w-10"}),s.jsx("th",{className:"p-4",children:"Zadanie"}),s.jsx("th",{className:"p-4",children:"Termin"}),s.jsx("th",{className:"p-4",children:"Przypisane"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:Re.map(ge=>{var Ce;return s.jsxs("tr",{className:"hover:bg-pink-50/30 dark:hover:bg-pink-900/10 transition",children:[s.jsx("td",{className:"p-4",children:s.jsx("input",{type:"checkbox",checked:ge.status==="Gotowe",onChange:()=>ht(ge),className:"w-5 h-5 rounded border-gray-300 text-pink-600 dark:text-pink-500 cursor-pointer"})}),s.jsx("td",{className:"p-4 font-bold text-gray-800 dark:text-gray-200",children:ge.title}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:ge.due_date?new Date(ge.due_date).toLocaleDateString("pl-PL"):"-"}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:((Ce=n.find(Ke=>Ke.id===ge.assigned_to))==null?void 0:Ce.full_name)||"-"}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:ge.status})}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("button",{onClick:()=>Pe(ge),className:"text-pink-600 dark:text-pink-400 font-medium",children:"Szczegy"})})]},ge.id)})})]})})]}),e==="members"&&s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 relative z-[30] transition-colors duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:["Czonkowie (",n.length,")"]}),s.jsxs("button",{onClick:()=>{V({id:null,full_name:"",role:"",email:"",phone:""}),D([]),S(!0)},className:"bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj czonka"]})]}),s.jsx("div",{className:"bg-white/50 dark:bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gradient-to-r from-pink-50/80 to-orange-50/80 dark:from-pink-900/20 dark:to-orange-900/20 text-gray-700 dark:text-gray-300 font-bold border-b border-gray-200/50 dark:border-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Imi i nazwisko"}),s.jsx("th",{className:"p-4",children:"Suby"}),s.jsx("th",{className:"p-4",children:"Email"}),s.jsx("th",{className:"p-4",children:"Telefon"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:n.map(ge=>{const Ce=at(ge.id);return s.jsxs("tr",{className:"hover:bg-pink-50/30 dark:hover:bg-pink-900/10 transition text-gray-700 dark:text-gray-300",children:[s.jsx("td",{className:"p-4 font-medium",children:ge.full_name}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Ce.length>0?Ce.map((Ke,gt)=>s.jsx("span",{className:"bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 px-2 py-0.5 rounded-lg text-xs font-medium border border-pink-100 dark:border-pink-800",children:Ke},gt)):s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs italic",children:"Brak przypisanych"})})}),s.jsx("td",{className:"p-4",children:ge.email}),s.jsx("td",{className:"p-4",children:ge.phone}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{V(ge),ut(ge.id),S(!0)},className:"text-pink-600 dark:text-pink-400 font-medium",children:"Edytuj"}),s.jsx("button",{onClick:()=>ct(ge.id),className:"text-red-500 dark:text-red-400 font-medium",children:"Usu"})]})]},ge.id)})})]})})]}),e==="finances"&&s.jsx(Qu,{ministry:"MediaTeam",budgetItems:me,expenses:X,onAddExpense:()=>Oe(!0),onRefresh:it}),e==="roles"&&s.jsx(Cw,{teamType:"media",teamMembers:n,memberTable:"media_team"}),U&&Ht.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto transition-opacity",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-4xl p-0 border border-white/20 dark:border-gray-700/50 my-8 flex overflow-hidden h-[80vh] animate-in fade-in zoom-in duration-200",children:[s.jsxs("div",{className:"w-3/5 p-8 overflow-y-auto border-r border-gray-200/50 dark:border-gray-700/50 custom-scrollbar",children:[s.jsx("div",{className:"flex justify-between mb-6",children:s.jsx("h3",{className:"font-bold text-2xl bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:T.id?"Edycja zadania":"Nowe zadanie"})}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tytu zadania"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:T.title,onChange:ge=>G({...T,title:ge.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm resize-none h-32 focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:T.description,onChange:ge=>G({...T,description:ge.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(eB,{label:"Termin",value:T.due_date,onChange:ge=>G({...T,due_date:ge})})}),s.jsx("div",{children:s.jsx(Pt,{label:"Status",value:T.status,onChange:ge=>G({...T,status:ge}),options:Z5})})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Przypisana osoba",value:T.assigned_to,onChange:ge=>G({...T,assigned_to:ge}),options:[{value:null,label:"Nie przypisano"},...n.map(ge=>({value:ge.id,label:ge.full_name}))],placeholder:"Wybierz osob..."})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Zacznik"}),s.jsx("input",{type:"file",className:"w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-pink-50 dark:file:bg-pink-900/30 file:text-pink-700 dark:file:text-pink-300 hover:file:bg-pink-100 dark:hover:file:bg-pink-900/50",onChange:Rt}),T.attachment&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-2 rounded-lg",children:[s.jsx(zj,{size:14}),T.attachment.name]})]}),s.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-end gap-3",children:[T.id&&s.jsx("button",{onClick:()=>{We(T.id),Q(!1)},className:"px-4 py-2 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:"Usu zadanie"}),s.jsx("button",{onClick:de,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white font-bold rounded-xl hover:shadow-lg transition",children:"Zapisz zmiany"})]})]})]}),s.jsxs("div",{className:"w-2/5 bg-gray-50/50 dark:bg-gray-800/30 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[s.jsx(Cu,{size:18})," Komentarze"]}),s.jsx("button",{onClick:()=>Q(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition",children:s.jsx(Nt,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 pr-2 custom-scrollbar",children:T.id?Ae?s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm",children:"adowanie..."}):ne.length===0?s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm mt-10",children:"Brak komentarzy. Bd pierwszy!"}):ne.map(ge=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"font-bold text-xs text-pink-700 dark:text-pink-300",children:ge.author_name}),s.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:new Date(ge.created_at).toLocaleString("pl-PL")})]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:ge.content})]},ge.id)):s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm mt-10",children:"Zapisz zadanie, aby dodawa komentarze."})}),T.id&&s.jsx("div",{className:"mt-auto",children:s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{className:"w-full pl-4 pr-12 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 focus:ring-2 focus:ring-pink-500/20 outline-none text-sm resize-none text-gray-800 dark:text-gray-200",placeholder:"Napisz komentarz...",rows:2,value:ue,onChange:ge=>Y(ge.target.value),onKeyDown:ge=>{ge.key==="Enter"&&!ge.shiftKey&&(ge.preventDefault(),Ee())}}),s.jsx("button",{onClick:Ee,disabled:!ue.trim(),className:"absolute right-2 bottom-2 p-2 bg-pink-600 dark:bg-pink-500 text-white rounded-lg hover:bg-pink-700 dark:hover:bg-pink-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(_f,{size:16})})]})})]})]})}),document.body),N&&Ht.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-lg p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:L.id?"Edytuj czonka":"Nowy czonek"}),s.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Imi i nazwisko"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Jan Kowalski",value:L.full_name,onChange:ge=>V({...L,full_name:ge.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Suby"}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 p-3",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:W.map(ge=>{const Ce=F.includes(ge.id);return s.jsxs("button",{type:"button",onClick:()=>{D(Ce?Ke=>Ke.filter(gt=>gt!==ge.id):Ke=>[...Ke,ge.id])},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition flex items-center gap-1.5 ${Ce?"bg-gradient-to-r from-pink-500 to-orange-500 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[Ce&&s.jsx(Un,{size:14}),ge.name]},ge.id)})}),W.length===0&&s.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center py-2",children:'Brak zdefiniowanych sub. Dodaj je w zakadce "Suby".'})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Telefon"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"+48 123 456 789",value:L.phone,onChange:ge=>V({...L,phone:ge.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Email"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"jan@example.com",value:L.email,onChange:ge=>V({...L,email:ge.target.value})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>S(!1),className:"px-5 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Anuluj"}),s.jsx("button",{onClick:rt,className:"px-5 py-2.5 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg hover:shadow-pink-500/50 transition font-medium",children:"Zapisz"})]})]})]})}),document.body),xe&&Ht.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-4xl p-6 border border-white/20 dark:border-gray-700 my-8",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Nowy wydatek - ",Ne.ministry]}),s.jsx("button",{onClick:()=>Oe(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(eB,{label:"Data dokumentu",value:Ne.payment_date,onChange:ge=>qe({...Ne,payment_date:ge})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:Ne.amount,onChange:ge=>qe({...Ne,amount:ge.target.value}),placeholder:"0.00"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kontrahent"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:Ne.contractor,onChange:ge=>qe({...Ne,contractor:ge.target.value}),placeholder:"Nazwa firmy/osoby"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Osoba odpowiedzialna"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:Ne.responsible_person,onChange:ge=>qe({...Ne,responsible_person:ge.target.value}),placeholder:"Imi i nazwisko"})]})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Pozycja budetowa (opis kosztu)",value:Ne.description,onChange:ge=>qe({...Ne,description:ge}),options:[{value:"",label:"Wybierz pozycj"},...me.map(ge=>({value:ge.description,label:ge.description}))],placeholder:"Wybierz pozycj"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Szczegowy opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:2,value:Ne.detailed_description,onChange:ge=>qe({...Ne,detailed_description:ge.target.value}),placeholder:"Dodatkowe informacje o wydatku..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Zaczniki (opcjonalnie)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white cursor-pointer hover:border-pink-300 dark:hover:border-pink-600 transition flex items-center gap-2",children:[s.jsx(Hs,{size:18,className:"text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:H?"Przesyanie...":"Dodaj plik(i)"}),s.jsx("input",{type:"file",onChange:ke,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",disabled:H,multiple:!0})]}),Ne.documents&&Ne.documents.length>0&&s.jsx("div",{className:"space-y-2",children:Ne.documents.map((ge,Ce)=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:[s.jsxs("span",{className:"text-xs text-green-700 dark:text-green-300 flex items-center gap-1 truncate",children:[s.jsx(xn,{size:14}),ge.name]}),s.jsx("button",{onClick:()=>oe(Ce),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 ml-2 flex-shrink-0",children:s.jsx(Nt,{size:14})})]},Ce))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tagi"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",value:lt,onChange:ge=>nt(ge.target.value),placeholder:"Dodaj tag",onKeyPress:ge=>ge.key==="Enter"&&Be()}),s.jsx("button",{onClick:Be,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:s.jsx(Wt,{size:18})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:Ne.tags.map((ge,Ce)=>s.jsxs("span",{className:"px-2 py-1 bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300 rounded-lg text-xs flex items-center gap-1",children:[s.jsx(Bl,{size:12}),ge,s.jsx("button",{onClick:()=>Se(ge),children:s.jsx(Nt,{size:12})})]},Ce))})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:()=>Oe(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:Qe,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})}),document.body)]})}function g3(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e]),r}const O9=({label:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),[i,o]=C.useState(e?new Date(e):new Date),l=C.useRef(null),A=g3(l,n);C.useEffect(()=>{e&&o(new Date(e))},[e]),C.useEffect(()=>{if(!n)return;const u=y=>{l.current&&!l.current.contains(y.target)&&!y.target.closest(".portal-datepicker")&&a(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[n]);const c=u=>{const y=new Date(i.getFullYear(),i.getMonth(),u),b=y.getFullYear(),v=String(y.getMonth()+1).padStart(2,"0"),g=String(y.getDate()).padStart(2,"0");r(`${b}-${v}-${g}`),a(!1)},d=i.toLocaleDateString("pl-PL",{month:"long",year:"numeric"}),h=new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),p=(new Date(i.getFullYear(),i.getMonth(),1).getDay()+6)%7;return s.jsxs("div",{className:"relative w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsx("div",{ref:l,onClick:()=>a(!n),className:`w-full px-4 py-3 border rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm cursor-pointer flex justify-between items-center transition-all
          ${n?"border-pink-500 ring-2 ring-pink-500/20 dark:border-pink-400":"border-gray-200/50 dark:border-gray-700/50 hover:border-pink-300 dark:hover:border-pink-600"}
        `,children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(en,{size:16,className:"text-gray-400"}),s.jsx("span",{className:e?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:e?new Date(e).toLocaleDateString("pl-PL"):"Wybierz dat"})]})}),n&&A.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-datepicker fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 animate-in fade-in zoom-in-95 duration-100 w-[280px]",style:{top:A.top,left:A.left},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:u=>{u.stopPropagation(),o(new Date(i.setMonth(i.getMonth()-1)))},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:s.jsx(Ei,{size:18,className:"text-gray-600 dark:text-gray-400"})}),s.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 capitalize",children:d}),s.jsx("button",{onClick:u=>{u.stopPropagation(),o(new Date(i.setMonth(i.getMonth()+1)))},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:s.jsx(Fi,{size:18,className:"text-gray-600 dark:text-gray-400"})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(u=>s.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:u},u))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:p}).map((u,y)=>s.jsx("div",{},`empty-${y}`)),Array.from({length:h}).map((u,y)=>{const b=y+1,v=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`,g=e===v;return s.jsx("button",{onClick:m=>{m.stopPropagation(),c(b)},className:`h-8 w-8 rounded-lg text-xs font-medium transition ${g?"bg-pink-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:b},b)})]})]}),document.body)]})},R9=({options:t,value:e,onChange:r,absentMembers:n=[]})=>{const[a,i]=C.useState(!1),o=C.useRef(null),l=g3(o,a),A=e?e.split(",").map(d=>d.trim()).filter(Boolean):[];C.useEffect(()=>{if(!a)return;const d=h=>{o.current&&!o.current.contains(h.target)&&!h.target.closest(".portal-multiselect")&&i(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[a]);const c=(d,h)=>{if(h)return;let p;A.includes(d)?p=A.filter(u=>u!==d):p=[...A,d],r(p.join(", "))};return s.jsxs("div",{className:"relative w-full",children:[s.jsx("div",{ref:o,className:"w-full min-h-[32px] px-2 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-xs cursor-pointer flex flex-wrap gap-1 items-center hover:border-pink-300 dark:hover:border-pink-500 transition",onClick:()=>i(!a),children:A.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-[10px] italic",children:"Wybierz..."}):A.map((d,h)=>s.jsx("span",{className:"bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 px-1.5 py-0.5 rounded text-[10px] border border-pink-100 dark:border-pink-800 whitespace-nowrap",children:d},h))}),a&&l.width>0&&Ht.createPortal(s.jsx("div",{className:"portal-multiselect fixed z-[9999] w-48 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-in fade-in zoom-in-95 duration-100",style:{top:l.top,left:l.left},children:t.map(d=>{const h=A.includes(d.full_name),p=n.includes(d.full_name);return s.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer flex items-center justify-between transition 
                  ${p?"bg-gray-50 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed":"hover:bg-pink-50 dark:hover:bg-pink-900/20 text-gray-700 dark:text-gray-300"}
                  ${h?"bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 font-medium":""}
                `,onClick:()=>c(d.full_name,p),children:[s.jsx("span",{className:p?"line-through decoration-gray-400 dark:decoration-gray-600":"",children:d.full_name}),h&&!p&&s.jsx(Un,{size:12}),p&&s.jsx(Li,{size:12,className:"text-red-300 dark:text-red-400"})]},d.id)})}),document.body)]})},M9=({programs:t,team:e,onUpdateProgram:r,roles:n,memberRoles:a=[]})=>{const[i,o]=C.useState({}),l=t.reduce((v,g)=>{if(!g.date)return v;const m=new Date(g.date),w=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`;return v[w]||(v[w]=[]),v[w].push(g),v},{}),A=Object.keys(l).sort().reverse();C.useEffect(()=>{const v=new Date().toISOString().slice(0,7);o(g=>({...g,[v]:!0}))},[]);const c=v=>{o(g=>({...g,[v]:!g[v]}))},d=v=>{const[g,m]=v.split("-");return new Date(g,m-1).toLocaleDateString("pl-PL",{month:"long",year:"numeric"}).replace(/^\w/,k=>k.toUpperCase())},h=v=>new Date(v).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"}),p=async(v,g,m)=>{const w=t.find(S=>S.id===v);if(!w)return;const N={...w.atmosfera_team||{},[g]:m};await r(v,{atmosfera_team:N})},u=async(v,g)=>{const m=t.find(N=>N.id===v);if(!m)return;const k={...m.atmosfera_team||{},notatki:g};await r(v,{atmosfera_team:k})},y=n&&n.length>0?n.map(v=>({key:v.field_key,label:v.name,roleId:v.id})):[{key:"przygotowanie",label:"Przygotowanie",roleId:null},{key:"witanie",label:"Witanie",roleId:null}],b=v=>{if(!v||a.length===0)return e;const g=a.filter(m=>m.role_id===v).map(m=>m.member_id);return g.length===0?e:e.filter(m=>g.includes(m.id))};return s.jsx("div",{className:"space-y-4",children:A.map(v=>{const g=i[v];return s.jsxs("div",{className:`bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-sm relative z-0 transition-all duration-300 ${g?"mb-8":"mb-0"}`,children:[s.jsxs("button",{onClick:()=>c(v),className:`w-full px-6 py-4 bg-white/50 dark:bg-gray-800/50 hover:bg-white/80 dark:hover:bg-gray-800/80 flex justify-between items-center transition border-b border-gray-100 dark:border-gray-700 ${g?"rounded-t-2xl":"rounded-2xl"}`,children:[s.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200 text-sm uppercase tracking-wider",children:d(v)}),g?s.jsx(Ui,{size:18,className:"text-gray-500 dark:text-gray-400"}):s.jsx(tn,{size:18,className:"text-gray-500 dark:text-gray-400"})]}),g&&s.jsx("div",{className:"overflow-x-auto pb-4",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-max",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-800/50 text-xs text-gray-500 dark:text-gray-400 uppercase",children:[s.jsx("th",{className:"p-3 font-semibold w-24 min-w-[90px]",children:"Data"}),y.map(m=>s.jsx("th",{className:"p-3 font-semibold min-w-[130px]",children:m.label},m.key)),s.jsx("th",{className:"p-3 font-semibold min-w-[150px]",children:"Notatki"})]})}),s.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-700 relative",children:l[v].sort((m,w)=>new Date(m.date)-new Date(w.date)).map(m=>{var w;return s.jsxs("tr",{className:"hover:bg-white/60 dark:hover:bg-gray-700/30 transition relative",children:[s.jsx("td",{className:"p-3 font-medium text-gray-700 dark:text-gray-300 font-mono text-xs",children:h(m.date)}),y.map(k=>{var N;return s.jsx("td",{className:"p-2 relative",children:s.jsx(R9,{options:b(k.roleId),value:((N=m.atmosfera_team)==null?void 0:N[k.key])||"",onChange:S=>p(m.id,k.key,S)})},k.key)}),s.jsx("td",{className:"p-2",children:s.jsx("input",{className:"w-full bg-transparent border-b border-transparent hover:border-gray-300 dark:hover:border-gray-600 focus:border-pink-500 dark:focus:border-pink-400 text-xs p-1 outline-none transition placeholder-gray-300 dark:placeholder-gray-600 text-gray-700 dark:text-gray-300",placeholder:"Wpisz...",defaultValue:((w=m.atmosfera_team)==null?void 0:w.notatki)||"",onBlur:k=>u(m.id,k.target.value)})})]},m.id)})})]})})]},v)})})};function H9(){const{userRole:t}=Ho(),[e,r]=C.useState("schedule"),[n,a]=C.useState([]),[i,o]=C.useState([]),[l,A]=C.useState(!0),[c,d]=C.useState(null),[h,p]=C.useState(!1),[u,y]=C.useState({id:null,full_name:"",role:"Atmosfera",email:"",phone:""}),[b,v]=C.useState([]),[g,m]=C.useState([]),[w,k]=C.useState([]),[N,S]=C.useState([]),[U,Q]=C.useState([]),[L,V]=C.useState(!1),[F,D]=C.useState(!1),[T,G]=C.useState(""),[ne,ce]=C.useState({payment_date:"",amount:"",contractor:"",category:"AtmosferaTeam",description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:"AtmosferaTeam"});C.useEffect(()=>{K(),ue()},[]),C.useEffect(()=>{e==="finances"&&Y()},[e]);const ue=async()=>{try{const{data:ae}=await le.from("team_roles").select("*").eq("team_type","atmosfera").eq("is_active",!0).order("display_order");m(ae||[]);const{data:X}=await le.from("team_member_roles").select("*").eq("member_table","atmosfera_members");k(X||[])}catch(ae){console.error("Bd pobierania sub:",ae)}},Y=async()=>{const ae=new Date().getFullYear(),X="AtmosferaTeam";try{const{data:ye,error:xe}=await le.from("budget_items").select("*").eq("ministry",X).eq("year",ae).order("id",{ascending:!0});if(xe)throw xe;S(ye||[]);const{data:Oe,error:H}=await le.from("expense_transactions").select("*").eq("ministry",X).gte("payment_date",`${ae}-01-01`).lte("payment_date",`${ae}-12-31`).order("payment_date",{ascending:!1});if(H)throw H;Q(Oe||[])}catch(ye){console.error("Error fetching finance data:",ye)}},Ae=async ae=>{const X=Array.from(ae.target.files||[]);if(X.length!==0){D(!0);try{const ye=[];for(const xe of X){const Oe=xe.name.split(".").pop(),$e=`expense_documents/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${Oe}`}`,{error:lt}=await le.storage.from("finance").upload($e,xe);if(lt)throw lt;const{data:nt}=le.storage.from("finance").getPublicUrl($e);ye.push({name:xe.name,url:nt.publicUrl,uploadedAt:new Date().toISOString()})}ce({...ne,documents:[...ne.documents,...ye]})}catch(ye){console.error("Error uploading file:",ye),alert("Bd przesyania pliku: "+ye.message)}finally{D(!1)}}},fe=ae=>{ce({...ne,documents:ne.documents.filter((X,ye)=>ye!==ae)})},we=()=>{T.trim()&&!ne.tags.includes(T.trim())&&(ce({...ne,tags:[...ne.tags,T.trim()]}),G(""))},E=ae=>{ce({...ne,tags:ne.tags.filter(X=>X!==ae)})},z=async()=>{if(!ne.payment_date||!ne.amount||!ne.contractor||!ne.description||!ne.responsible_person){alert("Wypenij wymagane pola");return}try{const{error:ae}=await le.from("expense_transactions").insert([{payment_date:ne.payment_date,amount:parseFloat(ne.amount),contractor:ne.contractor,category:ne.category,description:ne.description,detailed_description:ne.detailed_description,responsible_person:ne.responsible_person,documents:ne.documents,tags:ne.tags,ministry:ne.ministry}]);if(ae)throw ae;V(!1);const X=ne.ministry;ce({payment_date:"",amount:"",contractor:"",category:X,description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:X}),Y()}catch(ae){console.error("Error saving expense:",ae),alert("Bd zapisywania: "+ae.message)}};async function K(){A(!0);try{let{data:ae,error:X}=await le.from("atmosfera_members").select("*").order("full_name");if(X&&X.code==="42P01")console.warn("Tabela atmosfera_members nie istnieje. Uywam pustej listy."),ae=[];else if(X)throw X;const{data:ye,error:xe}=await le.from("programs").select("*").order("date",{ascending:!1});if(xe)throw xe;a(ae||[]),o(ye||[])}catch(ae){console.error("Bd:",ae),d(ae.message)}finally{A(!1)}}const W=async(ae,X)=>{o(ye=>ye.map(xe=>xe.id===ae?X.atmosfera_team?{...xe,...X,atmosfera_team:{...xe.atmosfera_team,...X.atmosfera_team}}:{...xe,...X}:xe)),await le.from("programs").update(X).eq("id",ae)},J=async()=>{try{if(!u.full_name.trim())return alert("Imi wymagane");let ae=u.id;if(u.id){const{error:X}=await le.from("atmosfera_members").update({full_name:u.full_name,role:u.role,email:u.email,phone:u.phone}).eq("id",u.id);if(X)throw X}else{const{data:X,error:ye}=await le.from("atmosfera_members").insert([{full_name:u.full_name,role:u.role,email:u.email,phone:u.phone}]).select().single();if(ye)throw ye;ae=X.id}if(ae&&(await le.from("team_member_roles").delete().eq("member_id",String(ae)).eq("member_table","atmosfera_members"),b.length>0)){const X=b.map(ye=>({member_id:String(ae),member_table:"atmosfera_members",role_id:ye}));await le.from("team_member_roles").insert(X)}p(!1),v([]),K(),ue()}catch(ae){alert("Bd zapisu: "+ae.message)}},re=ae=>{const X=w.filter(ye=>String(ye.member_id)===String(ae)).map(ye=>ye.role_id);v(X)},be=ae=>{const X=w.filter(ye=>String(ye.member_id)===String(ae)).map(ye=>ye.role_id);return g.filter(ye=>X.includes(ye.id)).map(ye=>ye.name)},me=async ae=>{if(confirm("Usun?"))try{const{error:X}=await le.from("atmosfera_members").delete().eq("id",ae);if(X)throw X;K()}catch(X){alert("Bd: "+X.message)}};return l?s.jsx("div",{className:"p-10 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 dark:border-pink-400 mx-auto"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent flex items-center gap-3",children:[s.jsx(rw,{size:40,className:"text-pink-600 dark:text-pink-400"}),"Atmosfera Team"]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-2 inline-flex gap-2",children:[s.jsxs("button",{onClick:()=>r("schedule"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="schedule"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(en,{size:16,className:"inline mr-2"}),"Grafik"]}),ha("atmosfera","members",t)&&s.jsxs("button",{onClick:()=>r("members"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="members"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ni,{size:16,className:"inline mr-2"}),"Czonkowie"]}),ha("atmosfera","finances",t)&&s.jsxs("button",{onClick:()=>r("finances"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="finances"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Uo,{size:16,className:"inline mr-2"}),"Finanse"]}),ha("atmosfera","members",t)&&s.jsxs("button",{onClick:()=>r("roles"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="roles"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(ta,{size:16,className:"inline mr-2"}),"Suby"]})]}),e==="schedule"&&s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 relative z-[50] transition-colors duration-300",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Grafik"})}),s.jsx(M9,{programs:i,team:n,onUpdateProgram:W,roles:g,memberRoles:w})]}),e==="members"&&s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 relative z-[30] transition-colors duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:["Czonkowie (",n.length,")"]}),s.jsxs("button",{onClick:()=>{y({id:null,full_name:"",role:"Atmosfera",email:"",phone:""}),v([]),p(!0)},className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj"]})]}),s.jsx("div",{className:"bg-white/50 dark:bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gradient-to-r from-pink-50/80 to-orange-50/80 dark:from-pink-900/20 dark:to-orange-900/20 text-gray-700 dark:text-gray-300 font-bold border-b border-gray-200/50 dark:border-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Imi i nazwisko"}),s.jsx("th",{className:"p-4",children:"Suby"}),s.jsx("th",{className:"p-4",children:"Email"}),s.jsx("th",{className:"p-4",children:"Telefon"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:n.map(ae=>{const X=be(ae.id);return s.jsxs("tr",{className:"hover:bg-pink-50/30 dark:hover:bg-pink-900/10 transition text-gray-700 dark:text-gray-300",children:[s.jsx("td",{className:"p-4 font-medium",children:ae.full_name}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:X.length>0?X.map((ye,xe)=>s.jsx("span",{className:"bg-pink-50 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 px-2 py-0.5 rounded-lg text-xs font-medium border border-pink-100 dark:border-pink-800",children:ye},xe)):s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs italic",children:"Brak przypisanych"})})}),s.jsx("td",{className:"p-4",children:ae.email}),s.jsx("td",{className:"p-4",children:ae.phone}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{y(ae),re(ae.id),p(!0)},className:"text-pink-600 dark:text-pink-400 font-medium",children:"Edytuj"}),s.jsx("button",{onClick:()=>me(ae.id),className:"text-red-500 dark:text-red-400 font-medium",children:"Usu"})]})]},ae.id)})})]})})]}),e==="finances"&&s.jsx(Qu,{ministry:"AtmosferaTeam",budgetItems:N,expenses:U,onAddExpense:()=>V(!0),onRefresh:Y}),e==="roles"&&s.jsx(Cw,{teamType:"atmosfera",teamMembers:n,memberTable:"atmosfera_members"}),h&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-lg p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:u.id?"Edytuj czonka":"Nowy czonek"}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Imi i nazwisko"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Jan Kowalski",value:u.full_name,onChange:ae=>y({...u,full_name:ae.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Suby"}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 p-3",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(ae=>{const X=b.includes(ae.id);return s.jsxs("button",{type:"button",onClick:()=>{v(X?ye=>ye.filter(xe=>xe!==ae.id):ye=>[...ye,ae.id])},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition flex items-center gap-1.5 ${X?"bg-gradient-to-r from-pink-500 to-orange-500 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[X&&s.jsx(Un,{size:14}),ae.name]},ae.id)})}),g.length===0&&s.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center py-2",children:'Brak zdefiniowanych sub. Dodaj je w zakadce "Suby".'})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Telefon"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"+48 123 456 789",value:u.phone,onChange:ae=>y({...u,phone:ae.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Email"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",placeholder:"jan@example.com",value:u.email,onChange:ae=>y({...u,email:ae.target.value})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>p(!1),className:"px-5 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Anuluj"}),s.jsx("button",{onClick:J,className:"px-5 py-2.5 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg hover:shadow-pink-500/50 transition font-medium",children:"Zapisz"})]})]})]})}),L&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-4xl p-6 border border-white/20 dark:border-gray-700 my-8",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Nowy wydatek - ",ne.ministry]}),s.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(O9,{label:"Data dokumentu",value:ne.payment_date,onChange:ae=>ce({...ne,payment_date:ae})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:ne.amount,onChange:ae=>ce({...ne,amount:ae.target.value}),placeholder:"0.00"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kontrahent"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:ne.contractor,onChange:ae=>ce({...ne,contractor:ae.target.value}),placeholder:"Nazwa firmy/osoby"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Osoba odpowiedzialna"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:ne.responsible_person,onChange:ae=>ce({...ne,responsible_person:ae.target.value}),placeholder:"Imi i nazwisko"})]})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Pozycja budetowa (opis kosztu)",value:ne.description,onChange:ae=>ce({...ne,description:ae}),options:[{value:"",label:"Wybierz pozycj"},...N.map(ae=>({value:ae.description,label:ae.description}))],placeholder:"Wybierz pozycj"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Szczegowy opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:2,value:ne.detailed_description,onChange:ae=>ce({...ne,detailed_description:ae.target.value}),placeholder:"Dodatkowe informacje o wydatku..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Zaczniki (opcjonalnie)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white cursor-pointer hover:border-pink-300 dark:hover:border-pink-600 transition flex items-center gap-2",children:[s.jsx(Hs,{size:18,className:"text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:F?"Przesyanie...":"Dodaj plik(i)"}),s.jsx("input",{type:"file",onChange:Ae,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",disabled:F,multiple:!0})]}),ne.documents&&ne.documents.length>0&&s.jsx("div",{className:"space-y-2",children:ne.documents.map((ae,X)=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:[s.jsxs("span",{className:"text-xs text-green-700 dark:text-green-300 flex items-center gap-1 truncate",children:[s.jsx(xn,{size:14}),ae.name]}),s.jsx("button",{onClick:()=>fe(X),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 ml-2 flex-shrink-0",children:s.jsx(Nt,{size:14})})]},X))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tagi"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",value:T,onChange:ae=>G(ae.target.value),placeholder:"Dodaj tag",onKeyPress:ae=>ae.key==="Enter"&&we()}),s.jsx("button",{onClick:we,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:s.jsx(Wt,{size:18})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:ne.tags.map((ae,X)=>s.jsxs("span",{className:"px-2 py-1 bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300 rounded-lg text-xs flex items-center gap-1",children:[s.jsx(Bl,{size:12}),ae,s.jsx("button",{onClick:()=>E(ae),children:s.jsx(Nt,{size:12})})]},X))})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:()=>V(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:z,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})})]})}function K9(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e,t]),r}const $9=({label:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),[i,o]=C.useState(e?new Date(e):new Date),l=C.useRef(null),A=K9(l,n);C.useEffect(()=>{e&&o(new Date(e))},[e]),C.useEffect(()=>{if(!n)return;function k(N){l.current&&!l.current.contains(N.target)&&(N.target.closest(".portal-datepicker")||a(!1))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[n]);const c=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()-1,1))},d=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()+1,1))},h=k=>{const N=new Date(i.getFullYear(),i.getMonth(),k),S=N.getFullYear(),U=String(N.getMonth()+1).padStart(2,"0"),Q=String(N.getDate()).padStart(2,"0");r(`${S}-${U}-${Q}`),a(!1)},p=(k,N)=>new Date(k,N+1,0).getDate(),u=(k,N)=>{const S=new Date(k,N,1).getDay();return S===0?6:S-1},y=p(i.getFullYear(),i.getMonth()),b=u(i.getFullYear(),i.getMonth()),v=Array.from({length:y},(k,N)=>N+1),g=Array.from({length:b},(k,N)=>N),m=i.toLocaleDateString("pl-PL",{month:"long",year:"numeric"}),w=e?new Date(e).toLocaleDateString("pl-PL"):"";return s.jsxs("div",{className:"relative w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsx("div",{ref:l,onClick:()=>a(!n),className:`w-full px-4 py-3 border rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm cursor-pointer flex justify-between items-center transition-all
          ${n?"border-pink-500 ring-2 ring-pink-500/20 dark:border-pink-400":"border-gray-200/50 dark:border-gray-700/50 hover:border-pink-300 dark:hover:border-pink-600"}
        `,children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(en,{size:16,className:"text-gray-400"}),s.jsx("span",{className:w?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:w||"Wybierz dat"})]})}),n&&A.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-datepicker fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 animate-in fade-in zoom-in-95 duration-100",style:{top:A.top,left:A.left,width:"280px"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:c,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Ei,{size:18})}),s.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 capitalize",children:m}),s.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Fi,{size:18})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(k=>s.jsx("div",{className:"text-center text-[10px] font-bold text-gray-400 uppercase",children:k},k))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[g.map(k=>s.jsx("div",{},`blank-${k}`)),v.map(k=>{const N=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`,S=e===N,U=new Date().toDateString()===new Date(i.getFullYear(),i.getMonth(),k).toDateString();return s.jsx("button",{onClick:()=>h(k),className:`h-8 w-8 rounded-lg text-xs font-medium transition flex items-center justify-center
                    ${S?"bg-pink-600 text-white shadow-md shadow-pink-500/30":U?"bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 border border-pink-100 dark:border-pink-800":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                  `,children:k},k)})]})]}),document.body)]})},G9=({teachers:t,selectedIds:e,onChange:r})=>{const[n,a]=C.useState(!1),i=C.useRef(null);C.useEffect(()=>{function l(A){i.current&&!i.current.contains(A.target)&&a(!1)}return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const o=l=>{const A=e.includes(l)?e.filter(c=>c!==l):[...e,l];r(A)};return s.jsxs("div",{ref:i,className:"relative",children:[s.jsxs("div",{onClick:()=>a(!n),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 cursor-pointer min-h-[50px] flex flex-wrap gap-2 hover:border-pink-400 transition",children:[e.length===0&&s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm pt-1",children:"Wybierz nauczycieli..."}),e.map(l=>{const A=t.find(c=>c.id===l);return A?s.jsxs("span",{className:"bg-pink-50 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1 border border-pink-100 dark:border-pink-800",children:[A.full_name," ",s.jsx(Nt,{size:12,className:"cursor-pointer hover:text-pink-900",onClick:c=>{c.stopPropagation(),o(l)}})]},l):null})]}),n&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:t.map(l=>s.jsxs("div",{onClick:()=>o(l.id),className:`p-3 text-sm hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer flex justify-between items-center ${e.includes(l.id)?"bg-pink-50 dark:bg-gray-800 text-pink-700 dark:text-pink-300 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[s.jsx("span",{children:l.full_name}),e.includes(l.id)&&s.jsx(Un,{size:16})]},l.id))})]})},V9=({options:t,value:e,onChange:r,absentMembers:n=[]})=>{const[a,i]=C.useState(!1),o=C.useRef(null),l=e?e.split(",").map(c=>c.trim()).filter(Boolean):[];C.useEffect(()=>{function c(d){o.current&&!o.current.contains(d.target)&&i(!1)}return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const A=(c,d)=>{if(d)return;const h=l.includes(c)?l.filter(p=>p!==c):[...l,c];r(h.join(", "))};return s.jsxs("div",{ref:o,className:"relative w-full h-full",children:[s.jsx("div",{className:"w-full h-full min-h-[36px] px-2 py-1.5 text-xs cursor-pointer flex flex-wrap gap-1 items-center hover:bg-gray-50 dark:hover:bg-gray-800 rounded transition",onClick:()=>i(!a),children:l.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-[10px] italic",children:"Wybierz..."}):l.map((c,d)=>s.jsx("span",{className:"bg-pink-50 dark:bg-pink-900/60 text-pink-700 dark:text-pink-200 px-1.5 py-0.5 rounded text-[10px] border border-pink-100 dark:border-pink-800 whitespace-nowrap",children:c},d))}),a&&s.jsx("div",{className:"absolute z-[9999] left-0 top-full mt-1 w-48 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:t.map(c=>s.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer flex items-center justify-between transition ${n.includes(c.full_name)?"bg-gray-50 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed":"hover:bg-pink-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"} ${l.includes(c.full_name)?"bg-pink-50 dark:bg-gray-800 text-pink-700 dark:text-pink-300 font-medium":""}`,onClick:()=>A(c.full_name,n.includes(c.full_name)),children:[s.jsx("span",{className:n.includes(c.full_name)?"line-through":"",children:c.full_name}),l.includes(c.full_name)&&!n.includes(c.full_name)&&s.jsx(Un,{size:12})]},c.id))})]})},W9=({options:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),i=C.useRef(null),o=e?e.split(",").map(A=>A.trim()).filter(Boolean):[];C.useEffect(()=>{function A(c){i.current&&!i.current.contains(c.target)&&a(!1)}return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const l=A=>{const c=o.includes(A)?o.filter(d=>d!==A):[...o,A];r(c.join(", "))};return s.jsxs("div",{ref:i,className:"relative w-full h-full",children:[s.jsx("div",{className:"w-full h-full min-h-[36px] px-2 py-1.5 text-xs cursor-pointer flex flex-wrap gap-1 items-center hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition",onClick:()=>a(!n),children:o.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-[10px] italic",children:"Wybierz..."}):o.map((A,c)=>s.jsx("span",{className:"bg-red-50 dark:bg-red-900/60 text-red-700 dark:text-red-300 px-1.5 py-0.5 rounded text-[10px] border border-red-100 dark:border-red-800 whitespace-nowrap flex items-center gap-1",children:A},c))}),n&&s.jsx("div",{className:"absolute z-[9999] left-0 top-full mt-1 w-48 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:t.map(A=>s.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/30 transition ${o.includes(A.full_name)?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 font-medium":"text-gray-700 dark:text-gray-300"}`,onClick:()=>l(A.full_name),children:[s.jsx("span",{children:A.full_name}),o.includes(A.full_name)&&s.jsx(Li,{size:12})]},A.id))})]})},q9=({programs:t,teachers:e,groups:r,onUpdateProgram:n})=>{const[a,i]=C.useState({}),o=t.reduce((h,p)=>{if(!p.date)return h;const u=new Date(p.date),y=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;return h[y]||(h[y]=[]),h[y].push(p),h},{}),l=Object.keys(o).sort().reverse();C.useEffect(()=>{i(h=>({...h,[new Date().toISOString().slice(0,7)]:!0}))},[]);const A=r.map(h=>({id:h.id,label:h.name})),c=async(h,p,u)=>{const y=t.find(v=>v.id===h);if(!y)return;const b={...y.szkolka,[p]:u};await n(h,{szkolka:b})},d=async(h,p,u)=>{const y=t.find(v=>v.id===h);if(!y)return;const b={...y.szkolka,[p]:u};await n(h,{szkolka:b})};return s.jsx("div",{className:"space-y-6",children:l.map(h=>{const p=a[h];return s.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg overflow-hidden transition-all duration-300 ${p?"mb-8":"mb-0"}`,children:[s.jsxs("button",{onClick:()=>i(u=>({...u,[h]:!u[h]})),className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 flex justify-between items-center transition border-b border-gray-200 dark:border-gray-700",children:[s.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-100 text-sm uppercase tracking-wider",children:new Date(h).toLocaleDateString("pl-PL",{month:"long",year:"numeric"})}),p?s.jsx(Ui,{size:18,className:"text-gray-500 dark:text-gray-400"}):s.jsx(tn,{size:18,className:"text-gray-500 dark:text-gray-400"})]}),p&&s.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-900 p-0",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-max",children:[s.jsx("thead",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 font-semibold w-24 min-w-[90px]",children:"Data"}),s.jsx("th",{className:"p-4 font-semibold min-w-[150px] text-pink-600 dark:text-pink-400",children:"Temat lekcji"}),A.map(u=>s.jsx("th",{className:"p-4 font-semibold min-w-[130px]",children:u.label},u.id)),s.jsx("th",{className:"p-4 font-semibold min-w-[130px] text-red-500 dark:text-red-400",children:"Absencja"}),s.jsx("th",{className:"p-4 font-semibold min-w-[150px]",children:"Notatki"})]})}),s.jsx("tbody",{className:"text-sm divide-y divide-gray-200 dark:divide-gray-800",children:o[h].sort((u,y)=>new Date(u.date)-new Date(y.date)).map(u=>{var b,v,g,m;const y=(b=u.szkolka)!=null&&b.absencja?u.szkolka.absencja.split(",").map(w=>w.trim()).filter(Boolean):[];return s.jsxs("tr",{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"p-4 font-medium text-gray-700 dark:text-gray-300 font-mono text-xs border-r border-gray-100 dark:border-gray-800",children:new Date(u.date).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"})}),s.jsx("td",{className:"p-2 border-r border-gray-100 dark:border-gray-800",children:s.jsx("input",{className:"w-full bg-transparent rounded px-2 py-1.5 text-xs outline-none font-semibold text-pink-700 dark:text-pink-300 placeholder-pink-200 dark:placeholder-gray-600 hover:bg-pink-50 dark:hover:bg-pink-900/20 focus:bg-pink-50 dark:focus:bg-pink-900/20 transition",placeholder:"Temat...",defaultValue:((v=u.szkolka)==null?void 0:v.temat)||"",onBlur:w=>d(u.id,"temat",w.target.value)})}),A.map(w=>{var k;return s.jsx("td",{className:"p-2 border-r border-gray-100 dark:border-gray-800 relative",children:s.jsx(V9,{options:e,value:((k=u.szkolka)==null?void 0:k[w.id])||"",onChange:N=>c(u.id,w.id,N),absentMembers:y})},w.id)}),s.jsx("td",{className:"p-2 border-r border-gray-100 dark:border-gray-800 relative",children:s.jsx(W9,{options:e,value:((g=u.szkolka)==null?void 0:g.absencja)||"",onChange:w=>d(u.id,"absencja",w)})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{className:"w-full bg-transparent rounded px-2 py-1.5 text-xs outline-none text-gray-700 dark:text-gray-300 placeholder-gray-300 dark:placeholder-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 focus:bg-gray-50 dark:focus:bg-gray-800 transition",placeholder:"Notatki...",defaultValue:((m=u.szkolka)==null?void 0:m.notatki)||"",onBlur:w=>d(u.id,"notatki",w.target.value)})})]},u.id)})})]})})]},h)})})};function J9(){const{userRole:t}=Ho(),[e,r]=C.useState("schedule"),[n,a]=C.useState([]),[i,o]=C.useState([]),[l,A]=C.useState([]),[c,d]=C.useState([]),[h,p]=C.useState(!0),[u,y]=C.useState(!1),[b,v]=C.useState(""),[g,m]=C.useState(!1),[w,k]=C.useState(!1),[N,S]=C.useState(!1),[U,Q]=C.useState(!1),[L,V]=C.useState(!1),[F,D]=C.useState({id:null,full_name:"",role:"Nauczyciel",email:"",phone:""}),[T,G]=C.useState({id:null,name:"",teacher_ids:[],room:"",age_range:""}),[ne,ce]=C.useState({id:null,full_name:"",birth_year:"",parent_info:"",notes:"",group_id:null}),[ue,Y]=C.useState({title:"",type:"Lekcja",attachment:null}),[Ae,fe]=C.useState(null),[we,E]=C.useState(""),[z,K]=C.useState([]),[W,J]=C.useState([]),[re,be]=C.useState(!1),[me,ae]=C.useState(!1),[X,ye]=C.useState(""),[xe,Oe]=C.useState({payment_date:"",amount:"",contractor:"",category:"mae schWro",description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:"mae schWro"});C.useEffect(()=>{Ye()},[]),C.useEffect(()=>{e==="finances"&&H()},[e]);const H=async()=>{const de=new Date().getFullYear(),We="mae schWro";try{const{data:Je,error:et}=await le.from("budget_items").select("*").eq("ministry",We).eq("year",de).order("id",{ascending:!0});if(et)throw et;K(Je||[]);const{data:Zt,error:Ft}=await le.from("expense_transactions").select("*").eq("ministry",We).gte("payment_date",`${de}-01-01`).lte("payment_date",`${de}-12-31`).order("payment_date",{ascending:!1});if(Ft)throw Ft;J(Zt||[])}catch(Je){console.error("Error fetching finance data:",Je)}},$e=async de=>{const We=Array.from(de.target.files||[]);if(We.length!==0){ae(!0);try{const Je=[];for(const et of We){const Zt=et.name.split(".").pop(),Rt=`expense_documents/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${Zt}`}`,{error:ge}=await le.storage.from("finance").upload(Rt,et);if(ge)throw ge;const{data:Ce}=le.storage.from("finance").getPublicUrl(Rt);Je.push({name:et.name,url:Ce.publicUrl,uploadedAt:new Date().toISOString()})}Oe({...xe,documents:[...xe.documents,...Je]})}catch(Je){console.error("Error uploading file:",Je),alert("Bd przesyania pliku: "+Je.message)}finally{ae(!1)}}},lt=de=>{Oe({...xe,documents:xe.documents.filter((We,Je)=>Je!==de)})},nt=()=>{X.trim()&&!xe.tags.includes(X.trim())&&(Oe({...xe,tags:[...xe.tags,X.trim()]}),ye(""))},Ne=de=>{Oe({...xe,tags:xe.tags.filter(We=>We!==de)})},qe=async()=>{if(!xe.payment_date||!xe.amount||!xe.contractor||!xe.description||!xe.responsible_person){alert("Wypenij wymagane pola");return}try{const{error:de}=await le.from("expense_transactions").insert([{payment_date:xe.payment_date,amount:parseFloat(xe.amount),contractor:xe.contractor,category:xe.category,description:xe.description,detailed_description:xe.detailed_description,responsible_person:xe.responsible_person,documents:xe.documents,tags:xe.tags,ministry:xe.ministry}]);if(de)throw de;be(!1);const We=xe.ministry;Oe({payment_date:"",amount:"",contractor:"",category:We,description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:We}),H()}catch(de){console.error("Error saving expense:",de),alert("Bd zapisywania: "+de.message)}};async function Ye(){p(!0);try{const{data:de}=await le.from("kids_teachers").select("*").order("full_name"),{data:We}=await le.from("kids_groups").select("*").order("created_at"),{data:Je}=await le.from("kids_students").select("*").order("full_name"),{data:et}=await le.from("programs").select("*").order("date",{ascending:!1});a(de||[]),o(We||[]),A(Je||[]),d(et||[])}catch(de){console.error("Bd:",de)}p(!1)}const ot=async()=>{if(!F.full_name)return alert("Podaj imi");try{if(F.id){const{error:de}=await le.from("kids_teachers").update({full_name:F.full_name,role:F.role,email:F.email,phone:F.phone}).eq("id",F.id);if(de)throw de}else{const{error:de}=await le.from("kids_teachers").insert([{full_name:F.full_name,role:F.role||"Nauczyciel",email:F.email,phone:F.phone}]);if(de)throw de}k(!1),Ye()}catch(de){console.error("Bd zapisywania nauczyciela:",de),alert("Bd zapisywania: "+de.message)}},it=async de=>{confirm("Usun?")&&(await le.from("kids_teachers").delete().eq("id",de),Ye())},ke=async()=>{if(!T.name)return alert("Podaj nazw");const de={name:T.name,room:T.room,age_range:T.age_range,teacher_ids:T.teacher_ids};try{T.id?await le.from("kids_groups").update(de).eq("id",T.id):await le.from("kids_groups").insert([{...de,materials:[]}]),m(!1),Ye()}catch(We){alert(We.message)}},oe=async de=>{confirm("Usun?")&&(await le.from("kids_groups").delete().eq("id",de),Ye())},Be=async()=>{if(!ne.full_name)return alert("Podaj imi");const de={full_name:ne.full_name,birth_year:ne.birth_year,parent_info:ne.parent_info,notes:ne.notes,group_id:ne.group_id?parseInt(ne.group_id):null};try{ne.id?await le.from("kids_students").update(de).eq("id",ne.id):await le.from("kids_students").insert([de]),V(!1),Ye()}catch(We){alert(We.message)}},Se=async de=>{confirm("Usun?")&&(await le.from("kids_students").delete().eq("id",de),Ye())},Qe=de=>{ce({id:de.id,full_name:de.full_name,birth_year:de.birth_year,parent_info:de.parent_info,notes:de.notes,group_id:de.group_id}),V(!0)},se=async()=>{if(!we)return alert("Wybierz ucznia");await le.from("kids_students").update({group_id:Ae.id}).eq("id",we),E(""),Ye()},ze=async de=>{await le.from("kids_students").update({group_id:null}).eq("id",de),Ye()},O=async de=>{if(!de)return null;const We=`${Date.now()}_${Math.floor(Math.random()*1e3)}.${de.name.split(".").pop()}`,{error:Je}=await le.storage.from("kids-materials").upload(We,de);if(Je)throw Je;const{data:et}=le.storage.from("kids-materials").getPublicUrl(We);return{url:et.publicUrl,name:de.name}},Ee=async()=>{if(!ue.title)return alert("Podaj nazw");y(!0);try{let de=null;ue.attachment&&(de=await O(ue.attachment));const We={id:Date.now(),title:ue.title,type:ue.type,date:new Date().toISOString(),attachmentUrl:(de==null?void 0:de.url)||null,attachmentName:(de==null?void 0:de.name)||null},Je=[...Ae.materials||[],We];await le.from("kids_groups").update({materials:Je}).eq("id",Ae.id),Y({title:"",type:"Lekcja",attachment:null}),Ye()}catch(de){alert(de.message)}finally{y(!1)}},Pe=async de=>{if(!confirm("Usun?"))return;const We=Ae.materials.filter(Je=>Je.id!==de);await le.from("kids_groups").update({materials:We}).eq("id",Ae.id),Ye()},Le=async(de,We)=>{d(Je=>Je.map(et=>et.id===de?{...et,...We,szkolka:{...et.szkolka,...We.szkolka}}:et)),await le.from("programs").update(We).eq("id",de)},Re=l.filter(de=>de.full_name.toLowerCase().includes(b.toLowerCase())),ht=Ae?l.filter(de=>de.group_id===Ae.id):[],rt=l.filter(de=>de.group_id!==((Ae==null?void 0:Ae.id)||-1)),ut=i.map(de=>({value:de.id,label:de.name})),at=rt.map(de=>({value:de.id,label:de.full_name})),ct=["Lekcja","Kolorowanka","Gra","Film","Ksika","Inne"].map(de=>({value:de,label:de}));return h?s.jsx("div",{className:"p-10 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Mae SchWro"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-2 inline-flex gap-2",children:[s.jsxs("button",{onClick:()=>r("schedule"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="schedule"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(en,{size:16,className:"inline mr-2"}),"Grafik"]}),s.jsxs("button",{onClick:()=>r("groups"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="groups"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(ta,{size:16,className:"inline mr-2"}),"Grupy"]}),ha("kids","teachers",t)&&s.jsxs("button",{onClick:()=>r("teachers"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="teachers"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(g2,{size:16,className:"inline mr-2"}),"Nauczyciele"]}),s.jsxs("button",{onClick:()=>r("students"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="students"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Nf,{size:16,className:"inline mr-2"}),"Uczniowie"]}),ha("kids","finances",t)&&s.jsxs("button",{onClick:()=>r("finances"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="finances"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Uo,{size:16,className:"inline mr-2"}),"Finanse"]})]}),e==="schedule"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Grafik Nauczycieli"})}),s.jsx(q9,{programs:c,teachers:n,groups:i,onUpdateProgram:Le})]}),e==="groups"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Grupy Wiekowe"}),s.jsxs("button",{onClick:()=>{G({id:null,name:"",teacher_ids:[],room:"",age_range:""}),m(!0)},className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj grup"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(de=>{var et;const We=(de.teacher_ids||[]).map(Zt=>{var Ft;return(Ft=n.find(Rt=>Rt.id===Zt))==null?void 0:Ft.full_name}).filter(Boolean).join(", "),Je=l.filter(Zt=>Zt.group_id===de.id).length;return s.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl p-5 hover:shadow-lg transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:de.name}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>{G(de),m(!0)},className:"p-1.5 text-pink-600 dark:text-pink-400 hover:bg-pink-50 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(xn,{size:16})}),s.jsx("button",{onClick:()=>oe(de.id),className:"p-1.5 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(Zr,{size:16})})]})]}),s.jsxs("div",{className:"space-y-2 mb-4 text-sm text-gray-600 dark:text-gray-300",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g2,{size:16,className:"text-pink-500"})," ",s.jsx("span",{className:"font-medium",children:"Nauczyciele:"})," ",We||"Brak"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(XA,{size:16,className:"text-orange-500"})," ",s.jsx("span",{className:"font-medium",children:"Sala:"})," ",de.room||"-"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nf,{size:16,className:"text-green-500"})," ",s.jsx("span",{className:"font-medium",children:"Wiek:"})," ",de.age_range||"-"]})]}),s.jsxs("div",{className:"flex gap-2 border-t border-gray-100 dark:border-gray-700 pt-3 mt-2",children:[s.jsxs("button",{onClick:()=>{fe(de),S(!0)},className:"flex-1 bg-pink-50 dark:bg-gray-800 text-pink-700 dark:text-pink-300 text-xs font-bold py-2 rounded-xl hover:bg-pink-100 dark:hover:bg-gray-700 transition flex items-center justify-center gap-1",children:[s.jsx(ta,{size:14})," Uczniowie (",Je,")"]}),s.jsxs("button",{onClick:()=>{fe(de),Q(!0)},className:"flex-1 bg-orange-50 dark:bg-gray-800 text-orange-700 dark:text-orange-300 text-xs font-bold py-2 rounded-xl hover:bg-orange-100 dark:hover:bg-gray-700 transition flex items-center justify-center gap-1",children:[s.jsx(Rs,{size:14})," Materiay (",((et=de.materials)==null?void 0:et.length)||0,")"]})]})]},de.id)})})]}),e==="teachers"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:["Nauczyciele (",n.length,")"]}),s.jsxs("button",{onClick:()=>{D({id:null,full_name:"",role:"Nauczyciel",email:"",phone:""}),k(!0)},className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj nauczyciela"]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"text-gray-700 dark:text-gray-400 font-bold border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Imi i nazwisko"}),s.jsx("th",{className:"p-4",children:"Rola"}),s.jsx("th",{className:"p-4",children:"Email"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:n.map(de=>s.jsxs("tr",{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"p-4 font-medium text-gray-800 dark:text-gray-200",children:de.full_name}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:de.role}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:de.email}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{D(de),k(!0)},className:"text-pink-600 dark:text-pink-400 font-medium",children:"Edytuj"}),s.jsx("button",{onClick:()=>it(de.id),className:"text-red-500 dark:text-red-400 font-medium",children:"Usu"})]})]},de.id))})]})})]}),e==="students"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:["Wszyscy Uczniowie (",Re.length,")"]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-900 px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 w-64",children:[s.jsx(No,{size:16,className:"text-gray-400 dark:text-gray-500"}),s.jsx("input",{className:"bg-transparent text-sm outline-none w-full text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Szukaj ucznia...",value:b,onChange:de=>v(de.target.value)})]}),s.jsxs("button",{onClick:()=>{ce({id:null,full_name:"",birth_year:"",parent_info:"",notes:"",group_id:null}),V(!0)},className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-4 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Sf,{size:18})," Nowy ucze"]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"text-gray-700 dark:text-gray-400 font-bold border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Imi i nazwisko"}),s.jsx("th",{className:"p-4",children:"Wiek/Rocznik"}),s.jsx("th",{className:"p-4",children:"Rodzic/Opiekun"}),s.jsx("th",{className:"p-4",children:"Grupa"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:[Re.map(de=>{var We;return s.jsxs("tr",{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"p-4 font-medium text-gray-800 dark:text-gray-200",children:de.full_name}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:de.birth_year||"-"}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:de.parent_info||"-"}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${de.group_id?"bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:((We=i.find(Je=>Je.id===de.group_id))==null?void 0:We.name)||"-"})}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Qe(de),className:"text-pink-600 dark:text-pink-400 font-medium hover:underline",children:"Edytuj"}),s.jsx("button",{onClick:()=>Se(de.id),className:"text-red-500 dark:text-red-400 font-medium hover:underline",children:"Usu"})]})]},de.id)}),Re.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400 dark:text-gray-500",children:"Brak uczniw"})})]})]})})]}),e==="finances"&&s.jsx(Qu,{ministry:"mae schWro",budgetItems:z,expenses:W,onAddExpense:()=>be(!0),onRefresh:H}),g&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-md p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Grupa Wiekowa"}),s.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Nazwa grupy",value:T.name,onChange:de=>G({...T,name:de.target.value})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Nauczyciele"}),s.jsx(G9,{teachers:n,selectedIds:T.teacher_ids||[],onChange:de=>G({...T,teacher_ids:de})})]}),s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Numer sali",value:T.room,onChange:de=>G({...T,room:de.target.value})}),s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Przedzia wiekowy",value:T.age_range,onChange:de=>G({...T,age_range:de.target.value})}),s.jsx("button",{onClick:ke,className:"w-full py-3 bg-pink-600 text-white rounded-xl font-bold mt-4",children:"Zapisz"})]})]})}),L&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-md p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Ucze"}),s.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Imi i nazwisko",value:ne.full_name,onChange:de=>ce({...ne,full_name:de.target.value})}),s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Rocznik",value:ne.birth_year,onChange:de=>ce({...ne,birth_year:de.target.value})}),s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Kontakt do rodzica",value:ne.parent_info,onChange:de=>ce({...ne,parent_info:de.target.value})}),s.jsx(Pt,{options:ut,value:ne.group_id,onChange:de=>ce({...ne,group_id:de}),placeholder:"Przypisz do grupy...",icon:ta}),s.jsx("textarea",{className:"w-full p-3 rounded-xl border resize-none dark:bg-gray-900 dark:border-gray-600 dark:text-white",rows:3,placeholder:"Uwagi",value:ne.notes,onChange:de=>ce({...ne,notes:de.target.value})}),s.jsx("button",{onClick:Be,className:"w-full py-3 bg-pink-600 text-white rounded-xl font-bold mt-2",children:"Zapisz"})]})]})}),w&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-md p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Nauczyciel"}),s.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Imi i nazwisko",value:F.full_name,onChange:de=>D({...F,full_name:de.target.value})}),s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Rola",value:F.role,onChange:de=>D({...F,role:de.target.value})}),s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Telefon",value:F.phone,onChange:de=>D({...F,phone:de.target.value})}),s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Email",value:F.email,onChange:de=>D({...F,email:de.target.value})}),s.jsx("button",{onClick:ot,className:"w-full py-3 bg-pink-600 text-white rounded-xl font-bold mt-4",children:"Zapisz"})]})]})}),N&&Ae&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-3xl p-6 border border-white/20 dark:border-gray-700 flex flex-col max-h-[80vh]",children:[s.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b dark:border-gray-700",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Uczniowie: ",Ae.name]}),s.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{})})]}),s.jsxs("div",{className:"bg-pink-50 dark:bg-gray-800 p-4 rounded-xl mb-4 flex gap-3 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Dodaj ucznia"}),s.jsx(Pt,{options:at,value:we,onChange:E,placeholder:"Wybierz...",icon:Sf})]}),s.jsx("button",{onClick:se,className:"bg-pink-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-pink-700 h-[46px]",children:"Dodaj"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3",children:"Imi"}),s.jsx("th",{className:"p-3",children:"Wiek"}),s.jsx("th",{className:"p-3",children:"Kontakt"}),s.jsx("th",{className:"p-3",children:"Akcja"})]})}),s.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:ht.map(de=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-800 dark:text-gray-200",children:[s.jsx("td",{className:"p-3 font-medium",children:de.full_name}),s.jsx("td",{className:"p-3",children:de.birth_year}),s.jsx("td",{className:"p-3",children:de.parent_info}),s.jsx("td",{className:"p-3",children:s.jsx("button",{onClick:()=>ze(de.id),className:"text-red-500 dark:text-red-400 hover:underline text-xs uppercase font-bold",children:"Odcz"})})]},de.id))})]})})]})}),U&&Ae&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-2xl p-6 border border-white/20 dark:border-gray-700 flex flex-col max-h-[80vh]",children:[s.jsxs("div",{className:"flex justify-between mb-4 pb-4 border-b dark:border-gray-700",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Materiay"}),s.jsx("button",{onClick:()=>Q(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{})})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-gray-800 p-4 rounded-xl mb-4 space-y-2",children:[s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Nazwa",value:ue.title,onChange:de=>Y({...ue,title:de.target.value})}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Pt,{options:ct,value:ue.type,onChange:de=>Y({...ue,type:de}),icon:Rs})}),s.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:de=>Y({...ue,attachment:de.target.files[0]})}),s.jsxs("button",{onClick:()=>document.getElementById("file-upload").click(),className:`border px-4 rounded-xl flex items-center gap-2 h-[46px] transition ${ue.attachment?"bg-orange-100 border-orange-300 text-orange-700":"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-500 text-gray-600 dark:text-gray-300"}`,children:[s.jsx(Hs,{size:16})," ",ue.attachment?"Plik wybrany":"Plik"]}),s.jsx("button",{onClick:Ee,disabled:u,className:"bg-orange-600 text-white px-6 rounded-xl font-bold hover:bg-orange-700 h-[46px]",children:u?"...":"Dodaj"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:(Ae.materials||[]).map(de=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/40 p-2 rounded-lg text-orange-600 dark:text-orange-300",children:s.jsx(Rs,{size:18})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200",children:de.title}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:de.type})]})]}),s.jsxs("div",{className:"flex gap-2",children:[de.attachmentUrl&&s.jsx("a",{href:de.attachmentUrl,target:"_blank",rel:"noreferrer",className:"text-orange-600 hover:bg-orange-50 p-2 rounded-lg",children:s.jsx(Lo,{size:18})}),s.jsx("button",{onClick:()=>Pe(de.id),className:"text-red-400 hover:bg-red-50 p-2 rounded-lg",children:s.jsx(Zr,{size:18})})]})]},de.id))})]})}),re&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-4xl p-6 border border-white/20 dark:border-gray-700 my-8",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Nowy wydatek - ",xe.ministry]}),s.jsx("button",{onClick:()=>be(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx($9,{label:"Data dokumentu",value:xe.payment_date,onChange:de=>Oe({...xe,payment_date:de})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:xe.amount,onChange:de=>Oe({...xe,amount:de.target.value}),placeholder:"0.00"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kontrahent"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:xe.contractor,onChange:de=>Oe({...xe,contractor:de.target.value}),placeholder:"Nazwa firmy/osoby"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Osoba odpowiedzialna"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:xe.responsible_person,onChange:de=>Oe({...xe,responsible_person:de.target.value}),placeholder:"Imi i nazwisko"})]})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Pozycja budetowa (opis kosztu)",value:xe.description,onChange:de=>Oe({...xe,description:de}),options:[{value:"",label:"Wybierz pozycj"},...z.map(de=>({value:de.description,label:de.description}))],placeholder:"Wybierz pozycj"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Szczegowy opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:2,value:xe.detailed_description,onChange:de=>Oe({...xe,detailed_description:de.target.value}),placeholder:"Dodatkowe informacje o wydatku..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Zaczniki (opcjonalnie)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white cursor-pointer hover:border-pink-300 dark:hover:border-pink-600 transition flex items-center gap-2",children:[s.jsx(Hs,{size:18,className:"text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:me?"Przesyanie...":"Dodaj plik(i)"}),s.jsx("input",{type:"file",onChange:$e,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",disabled:me,multiple:!0})]}),xe.documents&&xe.documents.length>0&&s.jsx("div",{className:"space-y-2",children:xe.documents.map((de,We)=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:[s.jsxs("span",{className:"text-xs text-green-700 dark:text-green-300 flex items-center gap-1 truncate",children:[s.jsx(xn,{size:14}),de.name]}),s.jsx("button",{onClick:()=>lt(We),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 ml-2 flex-shrink-0",children:s.jsx(Nt,{size:14})})]},We))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tagi"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",value:X,onChange:de=>ye(de.target.value),placeholder:"Dodaj tag",onKeyPress:de=>de.key==="Enter"&&nt()}),s.jsx("button",{onClick:nt,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:s.jsx(Wt,{size:18})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:xe.tags.map((de,We)=>s.jsxs("span",{className:"px-2 py-1 bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300 rounded-lg text-xs flex items-center gap-1",children:[s.jsx(Bl,{size:12}),de,s.jsx("button",{onClick:()=>Ne(de),children:s.jsx(Nt,{size:12})})]},We))})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:()=>be(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:qe,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})})]})}const tB=["Do zrobienia","W trakcie","Gotowe"];function Y9(){const{userRole:t}=Ho(),[e,r]=C.useState("groups"),[n,a]=C.useState([]),[i,o]=C.useState([]),[l,A]=C.useState([]),[c,d]=C.useState([]),[h,p]=C.useState(""),[u,y]=C.useState(!0),[b,v]=C.useState(null),[g,m]=C.useState(!1),[w,k]=C.useState("group"),[N,S]=C.useState(null),[U,Q]=C.useState(!1),[L,V]=C.useState(!1),[F,D]=C.useState(!1),[T,G]=C.useState(null),[ne,ce]=C.useState("kanban"),[ue,Y]=C.useState("all"),[Ae,fe]=C.useState("active"),[we,E]=C.useState(null),[z,K]=C.useState(null),[W,J]=C.useState({name:"",description:"",leader_id:"",meeting_day:"",meeting_time:"",location:"",address:"",phone:"",email:"",materials:[]}),[re,be]=C.useState({full_name:"",email:"",phone:"",group_id:""}),[me,ae]=C.useState({id:null,title:"",description:"",due_date:"",assigned_to:null,status:"Do zrobienia",attachment:null,group_id:null}),[X,ye]=C.useState({title:"",type:"Dokument",attachment:null}),[xe,Oe]=C.useState(null),[H,$e]=C.useState(!1),[lt,nt]=C.useState([]),[Ne,qe]=C.useState(""),[Ye,ot]=C.useState(!1),[it,ke]=C.useState([]),[oe,Be]=C.useState([]),[Se,Qe]=C.useState(!1),[se,ze]=C.useState({payment_date:"",amount:"",contractor:"",category:"Grupy domowe",description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:"Grupy domowe"});C.useEffect(()=>{Le(),O()},[]),C.useEffect(()=>{e==="finances"&&Ee()},[e]);async function O(){const{data:ie}=await le.auth.getUser();ie!=null&&ie.user&&v(ie.user.email)}const Ee=async()=>{const ie=new Date().getFullYear(),Ie="Grupy domowe";try{const{data:mt,error:Qt}=await le.from("budget_items").select("*").eq("ministry",Ie).eq("year",ie).order("id",{ascending:!0});if(Qt)throw Qt;ke(mt||[]);const{data:Fr,error:Da}=await le.from("expense_transactions").select("*").eq("ministry",Ie).gte("payment_date",`${ie}-01-01`).lte("payment_date",`${ie}-12-31`).order("payment_date",{ascending:!1});if(Da)throw Da;Be(Fr||[])}catch(mt){console.error("Error fetching finance data:",mt)}},Pe=async()=>{if(!se.payment_date||!se.amount||!se.contractor||!se.description||!se.responsible_person){alert("Wypenij wymagane pola");return}try{const{error:ie}=await le.from("expense_transactions").insert([{payment_date:se.payment_date,amount:parseFloat(se.amount),contractor:se.contractor,category:se.category,description:se.description,detailed_description:se.detailed_description,responsible_person:se.responsible_person,documents:se.documents,tags:se.tags,ministry:se.ministry}]);if(ie)throw ie;Qe(!1);const Ie=se.ministry;ze({payment_date:"",amount:"",contractor:"",category:Ie,description:"",detailed_description:"",responsible_person:"",documents:[],tags:[],ministry:Ie}),Ee()}catch(ie){console.error("Error saving expense:",ie),alert("Bd zapisywania: "+ie.message)}},Le=async()=>{y(!0);try{const[ie,Ie,mt,Qt]=await Promise.all([le.from("home_groups").select("*, home_group_leaders(full_name)").order("name"),le.from("home_group_leaders").select("*").order("full_name"),le.from("home_group_members").select("*, home_groups(name)").order("full_name"),le.from("home_group_tasks").select("*").order("due_date")]);ie.data&&a(ie.data),Ie.data&&o(Ie.data),mt.data&&A(mt.data),Qt.data&&d(Qt.data)}catch(ie){console.error("Error fetching data:",ie),alert("Bd pobierania danych: "+ie.message)}finally{y(!1)}},Re=async()=>{var ie;if(!((ie=W.name)!=null&&ie.trim())){alert("Podaj nazw grupy");return}try{const Ie={name:W.name,description:W.description||null,leader_id:W.leader_id||null,meeting_day:W.meeting_day||null,meeting_time:W.meeting_time||null,location:W.location||null,address:W.address||null,phone:W.phone||null,email:W.email||null,materials:W.materials||[]};if(N){const{error:mt}=await le.from("home_groups").update(Ie).eq("id",N.id);if(mt)throw mt}else{const{error:mt}=await le.from("home_groups").insert([Ie]);if(mt)throw mt}Le(),at()}catch(Ie){console.error("Error saving group:",Ie),alert("Bd zapisywania grupy: "+Ie.message)}},ht=async ie=>{var Ie;if(!((Ie=re.full_name)!=null&&Ie.trim())){alert("Podaj imi i nazwisko");return}try{const mt={full_name:re.full_name,email:re.email||null,phone:re.phone||null};ie==="member"&&(mt.group_id=re.group_id||null);const Qt=ie==="leader"?"home_group_leaders":"home_group_members";if(N){const{error:Fr}=await le.from(Qt).update(mt).eq("id",N.id);if(Fr)throw Fr}else{const{error:Fr}=await le.from(Qt).insert([mt]);if(Fr)throw Fr}Le(),at()}catch(mt){console.error("Error saving person:",mt),alert("Bd zapisywania: "+mt.message)}},rt=async(ie,Ie)=>{if(confirm("Czy na pewno chcesz usun?"))try{const mt=Ie==="group"?"home_groups":Ie==="leader"?"home_group_leaders":"home_group_members",{error:Qt}=await le.from(mt).delete().eq("id",ie);if(Qt)throw Qt;Le()}catch(mt){console.error("Error deleting:",mt),alert("Bd usuwania: "+mt.message)}},ut=(ie,Ie=null)=>{k(ie),S(Ie),ie==="group"?J(Ie?{name:Ie.name||"",description:Ie.description||"",leader_id:Ie.leader_id||"",meeting_day:Ie.meeting_day||"",meeting_time:Ie.meeting_time||"",location:Ie.location||"",address:Ie.address||"",phone:Ie.phone||"",email:Ie.email||"",materials:Ie.materials||[]}:{name:"",description:"",leader_id:"",meeting_day:"",meeting_time:"",location:"",address:"",phone:"",email:"",materials:[]}):be(Ie?{full_name:Ie.full_name||"",email:Ie.email||"",phone:Ie.phone||"",group_id:Ie.group_id||""}:{full_name:"",email:"",phone:"",group_id:""}),m(!0)},at=()=>{m(!1),S(null)},ct=(ie=null)=>{ie?(ae(ie),ie.id&&ge(ie.id)):(ae({id:null,title:"",description:"",due_date:"",assigned_to:null,status:"Do zrobienia",attachment:null,group_id:null}),nt([])),D(!0)},de=async()=>{var ie;if(!((ie=me.title)!=null&&ie.trim())){alert("Tytu zadania jest wymagany");return}try{const Ie={title:me.title,description:me.description||null,status:me.status||"Do zrobienia",due_date:me.due_date||null,assigned_to:me.assigned_to||null,attachment:me.attachment||null,group_id:me.group_id||null};if(me.id){const{error:mt}=await le.from("home_group_tasks").update(Ie).eq("id",me.id);if(mt)throw mt}else{const{data:mt,error:Qt}=await le.from("home_group_tasks").insert([Ie]).select();if(Qt)throw Qt;mt&&mt[0]&&ae({...me,id:mt[0].id})}Le()}catch(Ie){console.error("Bd zapisywania zadania:",Ie),alert("Bd zapisywania zadania: "+Ie.message)}},We=async ie=>{if(confirm("Czy na pewno chcesz usun to zadanie?"))try{const{error:Ie}=await le.from("home_group_tasks").delete().eq("id",ie);if(Ie)throw Ie;Le()}catch(Ie){console.error("Bd usuwania zadania:",Ie),alert("Bd usuwania zadania: "+Ie.message)}},Je=async ie=>{const Ie=ie.status==="Gotowe"?"Do zrobienia":"Gotowe",mt=c.map(Qt=>Qt.id===ie.id?{...Qt,status:Ie}:Qt);d(mt);try{const{error:Qt}=await le.from("home_group_tasks").update({status:Ie}).eq("id",ie.id);if(Qt)throw Qt}catch(Qt){console.error("Bd aktualizacji zadania:",Qt),Le()}},et=ie=>{E(ie)},Zt=(ie,Ie)=>{ie.preventDefault(),K(Ie)},Ft=()=>{K(null)},Rt=async(ie,Ie)=>{if(ie.preventDefault(),K(null),!we||we.status===Ie){E(null);return}try{const{error:mt}=await le.from("home_group_tasks").update({status:Ie}).eq("id",we.id);if(mt)throw mt;Le()}catch(mt){console.error("Bd aktualizacji zadania:",mt)}E(null)},ge=async ie=>{ot(!0);try{const{data:Ie,error:mt}=await le.from("home_group_task_comments").select("*").eq("task_id",ie).order("created_at",{ascending:!0});if(mt)throw mt;nt(Ie||[])}catch(Ie){console.error("Bd pobierania komentarzy:",Ie)}finally{ot(!1)}},Ce=async()=>{if(!(!Ne.trim()||!me.id))try{const{error:ie}=await le.from("home_group_task_comments").insert([{task_id:me.id,content:Ne,author_name:b||"Uytkownik"}]);if(ie)throw ie;qe(""),ge(me.id)}catch(ie){console.error("Bd dodawania komentarza:",ie),alert("Bd dodawania komentarza: "+ie.message)}},gt=c.filter(ie=>!(ue==="mine"&&ie.assigned_to!==b||Ae==="active"&&ie.status==="Gotowe"||Ae==="completed"&&ie.status!=="Gotowe")),Kt=async()=>{if(!xe){alert("Wybierz czonka");return}try{const{error:ie}=await le.from("home_group_members").update({group_id:T.id}).eq("id",xe);if(ie)throw ie;Oe(null),Le()}catch(ie){console.error("Bd dodawania czonka:",ie),alert("Bd dodawania czonka: "+ie.message)}},Ar=async ie=>{if(confirm("Czy na pewno chcesz odczy czonka od tej grupy?"))try{const{error:Ie}=await le.from("home_group_members").update({group_id:null}).eq("id",ie);if(Ie)throw Ie;Le()}catch(Ie){console.error("Bd odczania czonka:",Ie),alert("Bd odczania czonka: "+Ie.message)}},qt=async()=>{var ie;if(!((ie=X.title)!=null&&ie.trim())){alert("Podaj nazw materiau");return}$e(!0);try{let Ie=null;if(X.attachment){const Da=`${Date.now()}_${X.attachment.name}`,{error:Ws}=await le.storage.from("kids-materials").upload(Da,X.attachment);if(Ws)throw Ws;const{data:Qi}=le.storage.from("kids-materials").getPublicUrl(Da);Ie=Qi.publicUrl}const mt={id:Date.now().toString(),title:X.title,type:X.type,attachmentUrl:Ie},Qt=[...T.materials||[],mt],{error:Fr}=await le.from("home_groups").update({materials:Qt}).eq("id",T.id);if(Fr)throw Fr;ye({title:"",type:"Dokument",attachment:null}),Le()}catch(Ie){console.error("Bd dodawania materiau:",Ie),alert("Bd dodawania materiau: "+Ie.message)}finally{$e(!1)}},nr=async ie=>{if(confirm("Czy na pewno chcesz usun ten materia?"))try{const Ie=(T.materials||[]).filter(Qt=>Qt.id!==ie),{error:mt}=await le.from("home_groups").update({materials:Ie}).eq("id",T.id);if(mt)throw mt;Le()}catch(Ie){console.error("Bd usuwania materiau:",Ie),alert("Bd usuwania materiau: "+Ie.message)}},er=n.filter(ie=>{var Ie;return(Ie=ie.name)==null?void 0:Ie.toLowerCase().includes(h.toLowerCase())}),bn=i.filter(ie=>{var Ie;return(Ie=ie.full_name)==null?void 0:Ie.toLowerCase().includes(h.toLowerCase())}),Qn=l.filter(ie=>{var Ie;return(Ie=ie.full_name)==null?void 0:Ie.toLowerCase().includes(h.toLowerCase())}),aa=l.filter(ie=>ie.group_id===(T==null?void 0:T.id)),Ta=l.filter(ie=>!ie.group_id),pa=[{value:"Dokument",label:"Dokument"},{value:"Video",label:"Video"},{value:"Audio",label:"Audio"},{value:"Prezentacja",label:"Prezentacja"},{value:"Inne",label:"Inne"}];return u?s.jsx("div",{className:"p-10 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Grupy Domowe"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-2 inline-flex gap-2",children:[s.jsxs("button",{onClick:()=>r("groups"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="groups"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(ta,{size:16,className:"inline mr-2"}),"Grupy"]}),s.jsxs("button",{onClick:()=>r("tasks"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="tasks"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ij,{size:16,className:"inline mr-2"}),"Zadania"]}),s.jsxs("button",{onClick:()=>r("leaders"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="leaders"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Sf,{size:16,className:"inline mr-2"}),"Liderzy"]}),ha("homegroups","members",t)&&s.jsxs("button",{onClick:()=>r("members"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="members"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(ta,{size:16,className:"inline mr-2"}),"Czonkowie"]}),ha("homegroups","finances",t)&&s.jsxs("button",{onClick:()=>r("finances"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="finances"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Uo,{size:16,className:"inline mr-2"}),"Finanse"]})]}),e==="groups"&&s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:["Grupy Domowe (",er.length,")"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(No,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{type:"text",placeholder:"Szukaj...",value:h,onChange:ie=>p(ie.target.value),className:"pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500 outline-none"})]}),s.jsxs("button",{onClick:()=>ut("group"),className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18}),"Dodaj Grup"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:er.map(ie=>{var Qt;const Ie=l.filter(Fr=>Fr.group_id===ie.id).length,mt=i.find(Fr=>Fr.id===ie.leader_id);return s.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl p-5 hover:shadow-lg transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:ie.name}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>ut("group",ie),className:"p-1.5 text-pink-600 dark:text-pink-400 hover:bg-pink-50 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(xn,{size:16})}),s.jsx("button",{onClick:()=>rt(ie.id,"group"),className:"p-1.5 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-gray-800 rounded-lg",children:s.jsx(Zr,{size:16})})]})]}),ie.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:ie.description}),s.jsxs("div",{className:"space-y-2 mb-4",children:[mt&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(Sf,{size:14}),s.jsx("span",{children:mt.full_name})]}),ie.meeting_day&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(en,{size:14}),s.jsxs("span",{children:[ie.meeting_day," ",ie.meeting_time&&`o ${ie.meeting_time}`]})]}),ie.location&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(XA,{size:14}),s.jsx("span",{children:ie.location})]})]}),s.jsxs("div",{className:"flex gap-2 border-t border-gray-100 dark:border-gray-700 pt-3 mt-2",children:[s.jsxs("button",{onClick:()=>{G(ie),Q(!0)},className:"flex-1 bg-pink-50 dark:bg-gray-800 text-pink-700 dark:text-pink-300 text-xs font-bold py-2 rounded-xl hover:bg-pink-100 dark:hover:bg-gray-700 transition flex items-center justify-center gap-1",children:[s.jsx(ta,{size:14})," Czonkowie (",Ie,")"]}),s.jsxs("button",{onClick:()=>{G(ie),V(!0)},className:"flex-1 bg-orange-50 dark:bg-gray-800 text-orange-700 dark:text-orange-300 text-xs font-bold py-2 rounded-xl hover:bg-orange-100 dark:hover:bg-gray-700 transition flex items-center justify-center gap-1",children:[s.jsx(Rs,{size:14})," Materiay (",((Qt=ie.materials)==null?void 0:Qt.length)||0,")"]})]})]},ie.id)})})]}),e==="tasks"&&s.jsxs("section",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:["Zadania (",gt.length,")"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm p-1 rounded-xl border border-gray-200/50 dark:border-gray-700/50 gap-2 items-center",children:[s.jsx("button",{onClick:()=>ce("kanban"),className:`p-2 rounded-lg transition ${ne==="kanban"?"bg-white dark:bg-gray-700 shadow text-pink-600 dark:text-pink-300":"text-gray-500 dark:text-gray-400"}`,children:s.jsx(aw,{size:18})}),s.jsx("button",{onClick:()=>ce("list"),className:`p-2 rounded-lg transition ${ne==="list"?"bg-white dark:bg-gray-700 shadow text-pink-600 dark:text-pink-300":"text-gray-500 dark:text-gray-400"}`,children:s.jsx(mg,{size:18})}),s.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600 mx-1"}),s.jsx("div",{className:"w-32",children:s.jsx(Pt,{value:ue,onChange:Y,options:[{value:"all",label:"Wszyscy"},{value:"mine",label:"Moje"}],placeholder:"Zakres"})}),s.jsx("div",{className:"w-32",children:s.jsx(Pt,{value:Ae,onChange:fe,options:[{value:"active",label:"Otwarte"},{value:"completed",label:"Zakoczone"},{value:"all",label:"Wszystkie"}],placeholder:"Status"})})]}),s.jsxs("button",{onClick:()=>ct(null),className:"bg-gradient-to-r from-orange-600 to-pink-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2 whitespace-nowrap",children:[s.jsx(Wt,{size:18})," Dodaj zadanie"]})]})]}),ne==="kanban"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:tB.map(ie=>s.jsxs("div",{className:`bg-gradient-to-br from-gray-50/80 to-gray-100/50 dark:from-gray-800/40 dark:to-gray-900/20 backdrop-blur-sm rounded-2xl border-2 p-4 transition-all ${z===ie?"border-pink-400 dark:border-pink-500 bg-pink-50/50 dark:bg-pink-900/20 shadow-lg":"border-gray-200/50 dark:border-gray-700/50"}`,onDragOver:Ie=>Zt(Ie,ie),onDragLeave:Ft,onDrop:Ie=>Rt(Ie,ie),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:ie}),s.jsx("span",{className:"bg-pink-100 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-3 py-1 rounded-full text-xs font-bold",children:gt.filter(Ie=>Ie.status===ie).length})]}),s.jsx("div",{className:"space-y-3",children:gt.filter(Ie=>Ie.status===ie).map(Ie=>{var mt;return s.jsx("div",{draggable:!0,onDragStart:()=>et(Ie),className:`bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 p-4 shadow-sm hover:shadow-md transition cursor-move group ${Ie.status==="Gotowe"?"opacity-60":""}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1",children:s.jsx("input",{type:"checkbox",checked:Ie.status==="Gotowe",onChange:()=>Je(Ie),className:"w-5 h-5 rounded border-gray-300 text-pink-600 dark:text-pink-500 cursor-pointer"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`font-bold text-gray-800 dark:text-gray-100 mb-2 ${Ie.status==="Gotowe"?"line-through text-gray-500 dark:text-gray-500":""}`,children:Ie.title}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400 flex-wrap",children:[Ie.due_date&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(en,{size:14}),new Date(Ie.due_date).toLocaleDateString("pl-PL")]}),Ie.assigned_to&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ni,{size:14}),(mt=i.find(Qt=>Qt.id===Ie.assigned_to))==null?void 0:mt.full_name]})]}),s.jsx("div",{className:"flex justify-end gap-2 mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:s.jsx("button",{onClick:()=>ct(Ie),className:"text-pink-600 dark:text-pink-400 text-xs font-medium",children:"Szczegy"})})]})]})},Ie.id)})})]},ie))}),ne==="list"&&s.jsx("div",{className:"bg-white/50 dark:bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gradient-to-r from-pink-50/80 to-orange-50/80 dark:from-pink-900/20 dark:to-orange-900/20 text-gray-700 dark:text-gray-300 font-bold border-b border-gray-200/50 dark:border-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 w-10"}),s.jsx("th",{className:"p-4",children:"Zadanie"}),s.jsx("th",{className:"p-4",children:"Termin"}),s.jsx("th",{className:"p-4",children:"Przypisane"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:gt.map(ie=>{var Ie;return s.jsxs("tr",{className:"hover:bg-pink-50/30 dark:hover:bg-pink-900/10 transition",children:[s.jsx("td",{className:"p-4",children:s.jsx("input",{type:"checkbox",checked:ie.status==="Gotowe",onChange:()=>Je(ie),className:"w-5 h-5 rounded border-gray-300 text-pink-600 dark:text-pink-500 cursor-pointer"})}),s.jsx("td",{className:"p-4 font-bold text-gray-800 dark:text-gray-200",children:ie.title}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:ie.due_date?new Date(ie.due_date).toLocaleDateString("pl-PL"):"-"}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:((Ie=i.find(mt=>mt.id===ie.assigned_to))==null?void 0:Ie.full_name)||"-"}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:ie.status})}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("button",{onClick:()=>ct(ie),className:"text-pink-600 dark:text-pink-400 font-medium",children:"Szczegy"})})]},ie.id)})})]})})]}),e==="leaders"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:["Liderzy (",bn.length,")"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(No,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{type:"text",placeholder:"Szukaj...",value:h,onChange:ie=>p(ie.target.value),className:"pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500 outline-none"})]}),s.jsxs("button",{onClick:()=>ut("leader"),className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18}),"Dodaj Lidera"]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"text-gray-700 dark:text-gray-400 font-bold border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Imi i nazwisko"}),s.jsx("th",{className:"p-4",children:"Email"}),s.jsx("th",{className:"p-4",children:"Telefon"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:[bn.map(ie=>s.jsxs("tr",{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"p-4 font-medium text-gray-800 dark:text-gray-200",children:ie.full_name}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:ie.email||"-"}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:ie.phone||"-"}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>ut("leader",ie),className:"text-pink-600 dark:text-pink-400 font-medium hover:underline",children:"Edytuj"}),s.jsx("button",{onClick:()=>rt(ie.id,"leader"),className:"text-red-500 dark:text-red-400 font-medium hover:underline",children:"Usu"})]})]},ie.id)),bn.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-6 text-center text-gray-400 dark:text-gray-500",children:"Brak liderw"})})]})]})})]}),e==="members"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:["Czonkowie (",Qn.length,")"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(No,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{type:"text",placeholder:"Szukaj...",value:h,onChange:ie=>p(ie.target.value),className:"pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-pink-500 outline-none"})]}),s.jsxs("button",{onClick:()=>ut("member"),className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white text-sm px-5 py-2.5 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18}),"Dodaj Czonka"]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"text-gray-700 dark:text-gray-400 font-bold border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Imi i nazwisko"}),s.jsx("th",{className:"p-4",children:"Email"}),s.jsx("th",{className:"p-4",children:"Telefon"}),s.jsx("th",{className:"p-4",children:"Grupa"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:[Qn.map(ie=>{var Ie;return s.jsxs("tr",{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"p-4 font-medium text-gray-800 dark:text-gray-200",children:ie.full_name}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:ie.email||"-"}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:ie.phone||"-"}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${ie.group_id?"bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:((Ie=n.find(mt=>mt.id===ie.group_id))==null?void 0:Ie.name)||"-"})}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>ut("member",ie),className:"text-pink-600 dark:text-pink-400 font-medium hover:underline",children:"Edytuj"}),s.jsx("button",{onClick:()=>rt(ie.id,"member"),className:"text-red-500 dark:text-red-400 font-medium hover:underline",children:"Usu"})]})]},ie.id)}),Qn.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400 dark:text-gray-500",children:"Brak czonkw"})})]})]})})]}),e==="finances"&&s.jsx(Qu,{ministry:"Grupy domowe",budgetItems:it,expenses:oe,onAddExpense:()=>Qe(!0),onRefresh:Ee}),g&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-2xl border border-white/20 dark:border-gray-700 flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsxs("h3",{className:"font-bold text-2xl bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:[N?"Edytuj":"Dodaj"," ",w==="group"?"Grup":w==="leader"?"Lidera":"Czonka"]}),s.jsx("button",{onClick:at,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:s.jsx(Nt,{size:24})})]}),s.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:w==="group"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Nazwa grupy"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:W.name,onChange:ie=>J({...W,name:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none resize-none",rows:3,value:W.description,onChange:ie=>J({...W,description:ie.target.value})})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Lider",value:W.leader_id,onChange:ie=>J({...W,leader_id:ie}),options:[{value:"",label:"Brak"},...i.map(ie=>({value:ie.id,label:ie.full_name}))],placeholder:"Wybierz lidera..."})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Dzie spotkania"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:W.meeting_day,onChange:ie=>J({...W,meeting_day:ie.target.value}),placeholder:"np. Poniedziaek"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Godzina"}),s.jsx("input",{type:"time",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:W.meeting_time,onChange:ie=>J({...W,meeting_time:ie.target.value})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Lokalizacja"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:W.location,onChange:ie=>J({...W,location:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Adres"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:W.address,onChange:ie=>J({...W,address:ie.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Telefon"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:W.phone,onChange:ie=>J({...W,phone:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Email"}),s.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:W.email,onChange:ie=>J({...W,email:ie.target.value})})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Imi i nazwisko"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:re.full_name,onChange:ie=>be({...re,full_name:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Email"}),s.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:re.email,onChange:ie=>be({...re,email:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Telefon"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none",value:re.phone,onChange:ie=>be({...re,phone:ie.target.value})})]}),w==="member"&&s.jsx("div",{children:s.jsx(Pt,{label:"Grupa",value:re.group_id,onChange:ie=>be({...re,group_id:ie}),options:[{value:"",label:"Brak"},...n.map(ie=>({value:ie.id,label:ie.name}))],placeholder:"Wybierz grup..."})})]})}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[s.jsx("button",{onClick:at,className:"px-6 py-3 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium rounded-xl transition",children:"Anuluj"}),s.jsx("button",{onClick:()=>w==="group"?Re():ht(w),className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white font-bold rounded-xl hover:shadow-lg transition",children:"Zapisz"})]})]})}),U&&T&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-3xl border border-white/20 dark:border-gray-700 flex flex-col max-h-[80vh]",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Czonkowie: ",T.name]}),s.jsx("button",{onClick:()=>Q(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"bg-pink-50 dark:bg-gray-800 p-4 rounded-xl mb-4 flex gap-3 items-end",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Pt,{label:"Dodaj czonka",value:xe,onChange:Oe,options:[{value:null,label:"Wybierz..."},...Ta.map(ie=>({value:ie.id,label:ie.full_name}))],placeholder:"Wybierz..."})}),s.jsx("button",{onClick:Kt,className:"bg-pink-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-pink-700 h-[46px]",children:"Dodaj"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3",children:"Imi"}),s.jsx("th",{className:"p-3",children:"Email"}),s.jsx("th",{className:"p-3",children:"Telefon"}),s.jsx("th",{className:"p-3",children:"Akcja"})]})}),s.jsxs("tbody",{className:"divide-y dark:divide-gray-700",children:[aa.map(ie=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-800 dark:text-gray-200",children:[s.jsx("td",{className:"p-3 font-medium",children:ie.full_name}),s.jsx("td",{className:"p-3",children:ie.email||"-"}),s.jsx("td",{className:"p-3",children:ie.phone||"-"}),s.jsx("td",{className:"p-3",children:s.jsx("button",{onClick:()=>Ar(ie.id),className:"text-red-500 dark:text-red-400 hover:underline text-xs uppercase font-bold",children:"Odcz"})})]},ie.id)),aa.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-6 text-center text-gray-400 dark:text-gray-500",children:"Brak czonkw w tej grupie"})})]})]})})]})]})}),L&&T&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-2xl border border-white/20 dark:border-gray-700 flex flex-col max-h-[80vh]",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Materiay: ",T.name]}),s.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"bg-orange-50 dark:bg-gray-800 p-4 rounded-xl mb-4 space-y-2",children:[s.jsx("input",{className:"w-full p-3 rounded-xl border dark:bg-gray-900 dark:border-gray-600 dark:text-white",placeholder:"Nazwa",value:X.title,onChange:ie=>ye({...X,title:ie.target.value})}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Pt,{value:X.type,onChange:ie=>ye({...X,type:ie}),options:pa})}),s.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:ie=>ye({...X,attachment:ie.target.files[0]})}),s.jsxs("button",{onClick:()=>document.getElementById("file-upload").click(),className:`border px-4 rounded-xl flex items-center gap-2 h-[46px] transition ${X.attachment?"bg-orange-100 border-orange-300 text-orange-700":"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-500 text-gray-600 dark:text-gray-300"}`,children:[s.jsx(Hs,{size:16})," ",X.attachment?"Plik wybrany":"Plik"]}),s.jsx("button",{onClick:qt,disabled:H,className:"bg-orange-600 text-white px-6 rounded-xl font-bold hover:bg-orange-700 h-[46px] disabled:opacity-50",children:H?"...":"Dodaj"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[(T.materials||[]).map(ie=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/40 p-2 rounded-lg text-orange-600 dark:text-orange-300",children:s.jsx(Rs,{size:18})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200",children:ie.title}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:ie.type})]})]}),s.jsxs("div",{className:"flex gap-2",children:[ie.attachmentUrl&&s.jsx("a",{href:ie.attachmentUrl,target:"_blank",rel:"noreferrer",className:"text-orange-600 hover:bg-orange-50 p-2 rounded-lg",children:s.jsx(Lo,{size:18})}),s.jsx("button",{onClick:()=>nr(ie.id),className:"text-red-400 hover:bg-red-50 p-2 rounded-lg",children:s.jsx(Zr,{size:18})})]})]},ie.id)),(!T.materials||T.materials.length===0)&&s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 py-8",children:"Brak materiaw"})]})]})]})}),F&&s.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto transition-opacity",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-4xl p-0 border border-white/20 dark:border-gray-700/50 my-8 flex overflow-hidden h-[80vh] animate-in fade-in zoom-in duration-200",children:[s.jsxs("div",{className:"w-3/5 p-8 overflow-y-auto border-r border-gray-200/50 dark:border-gray-700/50 custom-scrollbar",children:[s.jsx("div",{className:"flex justify-between mb-6",children:s.jsx("h3",{className:"font-bold text-2xl bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:me.id?"Edycja zadania":"Nowe zadanie"})}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tytu zadania"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:me.title,onChange:ie=>ae({...me,title:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm resize-none h-32 focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-900 dark:text-gray-100",value:me.description,onChange:ie=>ae({...me,description:ie.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(CustomDatePicker,{label:"Termin",value:me.due_date,onChange:ie=>ae({...me,due_date:ie})})}),s.jsx("div",{children:s.jsx(Pt,{label:"Status",value:me.status,onChange:ie=>ae({...me,status:ie}),options:tB})})]}),s.jsx("div",{children:s.jsx(Pt,{label:"Przypisana osoba",value:me.assigned_to,onChange:ie=>ae({...me,assigned_to:ie}),options:[{value:null,label:"Nie przypisano"},...i.map(ie=>({value:ie.id,label:ie.full_name}))],placeholder:"Wybierz osob..."})}),s.jsx("div",{children:s.jsx(Pt,{label:"Grupa",value:me.group_id,onChange:ie=>ae({...me,group_id:ie}),options:[{value:null,label:"Brak"},...n.map(ie=>({value:ie.id,label:ie.name}))],placeholder:"Wybierz grup..."})}),s.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-end gap-3",children:[me.id&&s.jsx("button",{onClick:()=>{We(me.id),D(!1)},className:"px-4 py-2 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:"Usu zadanie"}),s.jsx("button",{onClick:de,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white font-bold rounded-xl hover:shadow-lg transition",children:"Zapisz zmiany"})]})]})]}),s.jsxs("div",{className:"w-2/5 bg-gray-50/50 dark:bg-gray-800/30 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h4",{className:"font-bold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[s.jsx(Cu,{size:18})," Komentarze"]}),s.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition",children:s.jsx(Nt,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 pr-2 custom-scrollbar",children:me.id?Ye?s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm",children:"adowanie..."}):lt.length===0?s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm mt-10",children:"Brak komentarzy. Bd pierwszy!"}):lt.map(ie=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"font-bold text-xs text-pink-700 dark:text-pink-300",children:ie.author_name}),s.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:new Date(ie.created_at).toLocaleString("pl-PL")})]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:ie.content})]},ie.id)):s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm mt-10",children:"Zapisz zadanie, aby dodawa komentarze."})}),me.id&&s.jsx("div",{className:"mt-auto",children:s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{className:"w-full pl-4 pr-12 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 focus:ring-2 focus:ring-pink-500/20 outline-none text-sm resize-none text-gray-800 dark:text-gray-200",placeholder:"Napisz komentarz...",rows:2,value:Ne,onChange:ie=>qe(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),Ce())}}),s.jsx("button",{onClick:Ce,disabled:!Ne.trim(),className:"absolute right-2 bottom-2 p-2 bg-pink-600 dark:bg-pink-500 text-white rounded-lg hover:bg-pink-700 dark:hover:bg-pink-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(_f,{size:16})})]})})]})]})}),Se&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-2xl p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Dodaj wydatek - ",se.ministry]}),s.jsx("button",{onClick:()=>Qe(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Data"}),s.jsx("input",{type:"date",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:se.payment_date,onChange:ie=>ze({...se,payment_date:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:se.amount,onChange:ie=>ze({...se,amount:ie.target.value}),placeholder:"0.00"})]}),s.jsx(Pt,{label:"Pozycja budetowa",value:se.description,onChange:ie=>ze({...se,description:ie}),options:[{value:"",label:"Wybierz pozycj"},...it.map(ie=>({value:ie.description,label:ie.description}))],placeholder:"Wybierz pozycj"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kontrahent"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:se.contractor,onChange:ie=>ze({...se,contractor:ie.target.value}),placeholder:"Nazwa firmy/osoby"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Szczegowy opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:2,value:se.detailed_description,onChange:ie=>ze({...se,detailed_description:ie.target.value}),placeholder:"Dodatkowe informacje..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Osoba odpowiedzialna"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:se.responsible_person,onChange:ie=>ze({...se,responsible_person:ie.target.value}),placeholder:"Imi i nazwisko"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>Qe(!1),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:Pe,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition",children:"Zapisz wydatek"})]})]})})]})}function X9(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e,t]),r}const cA=({label:t,value:e,onChange:r})=>{const[n,a]=C.useState(!1),[i,o]=C.useState(e?new Date(e):new Date),l=C.useRef(null),A=X9(l,n);C.useEffect(()=>{e&&o(new Date(e))},[e]),C.useEffect(()=>{if(!n)return;function k(N){l.current&&!l.current.contains(N.target)&&(N.target.closest(".portal-datepicker")||a(!1))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[n]);const c=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()-1,1))},d=k=>{k.stopPropagation(),o(new Date(i.getFullYear(),i.getMonth()+1,1))},h=k=>{const N=new Date(i.getFullYear(),i.getMonth(),k),S=N.getFullYear(),U=String(N.getMonth()+1).padStart(2,"0"),Q=String(N.getDate()).padStart(2,"0");r(`${S}-${U}-${Q}`),a(!1)},p=(k,N)=>new Date(k,N+1,0).getDate(),u=(k,N)=>{const S=new Date(k,N,1).getDay();return S===0?6:S-1},y=p(i.getFullYear(),i.getMonth()),b=u(i.getFullYear(),i.getMonth()),v=Array.from({length:y},(k,N)=>N+1),g=Array.from({length:b},(k,N)=>N),m=i.toLocaleDateString("pl-PL",{month:"long",year:"numeric"}),w=e?new Date(e).toLocaleDateString("pl-PL"):"";return s.jsxs("div",{className:"relative w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsx("div",{ref:l,onClick:()=>a(!n),className:`w-full px-4 py-3 border rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm cursor-pointer flex justify-between items-center transition-all
          ${n?"border-pink-500 ring-2 ring-pink-500/20 dark:border-pink-400":"border-gray-200/50 dark:border-gray-700/50 hover:border-pink-300 dark:hover:border-pink-600"}
        `,children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(en,{size:16,className:"text-gray-400"}),s.jsx("span",{className:w?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:w||"Wybierz dat"})]})}),n&&A.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-datepicker fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 animate-in fade-in zoom-in-95 duration-100",style:{top:A.top,left:A.left,width:"280px"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:c,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Ei,{size:18})}),s.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 capitalize",children:m}),s.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Fi,{size:18})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(k=>s.jsx("div",{className:"text-center text-[10px] font-bold text-gray-400 uppercase",children:k},k))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[g.map(k=>s.jsx("div",{},`blank-${k}`)),v.map(k=>{const N=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`,S=e===N,U=new Date().toDateString()===new Date(i.getFullYear(),i.getMonth(),k).toDateString();return s.jsx("button",{onClick:()=>h(k),className:`h-8 w-8 rounded-lg text-xs font-medium transition flex items-center justify-center
                    ${S?"bg-pink-600 text-white shadow-md shadow-pink-500/30":U?"bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 border border-pink-100 dark:border-pink-800":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                  `,children:k},k)})]})]}),document.body)]})},Z9=()=>{const[t,e]=C.useState("budget"),[r,n]=C.useState(new Date().getFullYear()),[a,i]=C.useState([]),[o,l]=C.useState([]),[A,c]=C.useState([]),[d,h]=C.useState(!1),[p,u]=C.useState(!1),[y,b]=C.useState(!1),[v,g]=C.useState(!1),[m,w]=C.useState({category:"",description:"",planned_amount:""}),[k,N]=C.useState({date:"",amount:"",type:"Kolekta",source:"",notes:"",tags:[]}),[S,U]=C.useState({payment_date:"",amount:"",contractor:"",category:"",description:"",detailed_description:"",responsible_person:"",documents:[],tags:[]}),[Q,L]=C.useState(!1),[V,F]=C.useState({}),[D,T]=C.useState(""),[G,ne]=C.useState({type:"",source:"",tag:"",dateFrom:"",dateTo:""}),[ce,ue]=C.useState({category:"",contractor:"",responsible:"",tag:"",dateFrom:"",dateTo:""}),[Y,Ae]=C.useState({bank_pln:0,bank_currency:0,cash_pln:0,cash_currency:0,currency_type:"EUR"}),[fe,we]=C.useState(!1),[E,z]=C.useState({bank_pln:"",bank_currency:"",cash_pln:"",cash_currency:"",currency_type:"EUR"});C.useEffect(()=>{t==="budget"&&re()},[t,r]),C.useEffect(()=>{t==="income"&&be()},[t,r]),C.useEffect(()=>{(t==="expenses"||t==="budget")&&me()},[t,r]),C.useEffect(()=>{t==="reports"&&(re(),be(),me(),K())},[t,r]),C.useEffect(()=>{K()},[r]);const K=async()=>{try{const{data:O,error:Ee}=await le.from("finance_balances").select("*").eq("year",r).single();if(Ee&&Ee.code!=="PGRST116"){console.error("Error fetching balances:",Ee);return}O&&Ae({bank_pln:O.bank_pln||0,bank_currency:O.bank_currency||0,cash_pln:O.cash_pln||0,cash_currency:O.cash_currency||0,currency_type:O.currency_type||"EUR"})}catch(O){console.error("Error fetching account balances:",O)}},W=async()=>{try{const O={year:r,bank_pln:parseFloat(E.bank_pln)||0,bank_currency:parseFloat(E.bank_currency)||0,cash_pln:parseFloat(E.cash_pln)||0,cash_currency:parseFloat(E.cash_currency)||0,currency_type:E.currency_type},{data:Ee}=await le.from("finance_balances").select("id").eq("year",r).single();if(Ee){const{error:Pe}=await le.from("finance_balances").update(O).eq("year",r);if(Pe)throw Pe}else{const{error:Pe}=await le.from("finance_balances").insert([O]);if(Pe)throw Pe}Ae(O),we(!1),alert("Stan kont zapisany pomylnie")}catch(O){console.error("Error saving balances:",O),alert("Bd zapisywania: "+O.message)}},J=()=>{z({bank_pln:Y.bank_pln.toString(),bank_currency:Y.bank_currency.toString(),cash_pln:Y.cash_pln.toString(),cash_currency:Y.cash_currency.toString(),currency_type:Y.currency_type}),we(!0)},re=async()=>{h(!0);try{const{data:O,error:Ee}=await le.from("budget_items").select("*").eq("year",r).order("category");if(Ee)throw Ee;i(O||[])}catch(O){console.error("Error fetching budget items:",O)}finally{h(!1)}},be=async()=>{h(!0);try{const{data:O,error:Ee}=await le.from("income_transactions").select("*").gte("date",`${r}-01-01`).lte("date",`${r}-12-31`).order("date",{ascending:!1});if(Ee)throw Ee;l(O||[])}catch(O){console.error("Error fetching income transactions:",O)}finally{h(!1)}},me=async()=>{h(!0);try{const{data:O,error:Ee}=await le.from("expense_transactions").select("*").gte("payment_date",`${r}-01-01`).lte("payment_date",`${r}-12-31`).order("payment_date",{ascending:!1});if(Ee)throw Ee;c(O||[])}catch(O){console.error("Error fetching expense transactions:",O)}finally{h(!1)}},ae=async()=>{if(!m.category||!m.planned_amount){alert("Wypenij wymagane pola");return}try{if(m.id){const{error:O}=await le.from("budget_items").update({category:m.category,description:m.description,planned_amount:parseFloat(m.planned_amount)}).eq("id",m.id);if(O)throw O}else{const{error:O}=await le.from("budget_items").insert([{year:r,category:m.category,description:m.description,planned_amount:parseFloat(m.planned_amount)}]);if(O)throw O}u(!1),w({category:"",description:"",planned_amount:""}),re()}catch(O){console.error("Error saving budget item:",O),alert("Bd zapisywania: "+O.message)}},X=async O=>{if(confirm("Czy na pewno chcesz usun t pozycj budetow?"))try{const{error:Ee}=await le.from("budget_items").delete().eq("id",O);if(Ee)throw Ee;re()}catch(Ee){console.error("Error deleting budget item:",Ee),alert("Bd usuwania: "+Ee.message)}},ye=async()=>{if(!k.date||!k.amount||!k.source){alert("Wypenij wymagane pola");return}try{if(k.id){const{error:O}=await le.from("income_transactions").update({date:k.date,amount:parseFloat(k.amount),type:k.type,source:k.source,notes:k.notes,tags:k.tags}).eq("id",k.id);if(O)throw O}else{const{error:O}=await le.from("income_transactions").insert([{date:k.date,amount:parseFloat(k.amount),type:k.type,source:k.source,notes:k.notes,tags:k.tags}]);if(O)throw O}b(!1),N({date:"",amount:"",type:"Kolekta",source:"",notes:"",tags:[]}),be()}catch(O){console.error("Error saving income:",O),alert("Bd zapisywania: "+O.message)}},xe=async O=>{if(confirm("Czy na pewno chcesz usun ten wpyw?"))try{const{error:Ee}=await le.from("income_transactions").delete().eq("id",O);if(Ee)throw Ee;be()}catch(Ee){console.error("Error deleting income:",Ee),alert("Bd usuwania: "+Ee.message)}},Oe=async O=>{const Ee=Array.from(O.target.files||[]);if(Ee.length!==0){L(!0);try{const Pe=[];for(const Le of Ee){const Re=Le.name.split(".").pop(),rt=`expense_documents/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${Re}`}`,{error:ut}=await le.storage.from("finance").upload(rt,Le);if(ut)throw ut;const{data:{publicUrl:at}}=le.storage.from("finance").getPublicUrl(rt);Pe.push({url:at,name:Le.name})}U({...S,documents:[...S.documents,...Pe]})}catch(Pe){console.error("Error uploading file:",Pe),alert("Bd przesyania pliku: "+Pe.message)}finally{L(!1)}}},H=O=>{U({...S,documents:S.documents.filter((Ee,Pe)=>Pe!==O)})},$e=async()=>{if(!S.payment_date||!S.amount||!S.contractor||!S.category||!S.description||!S.responsible_person){alert("Wypenij wymagane pola");return}try{if(S.id){const{error:O}=await le.from("expense_transactions").update({payment_date:S.payment_date,amount:parseFloat(S.amount),contractor:S.contractor,category:S.category,description:S.description,detailed_description:S.detailed_description,responsible_person:S.responsible_person,documents:S.documents,tags:S.tags}).eq("id",S.id);if(O)throw O}else{const{error:O}=await le.from("expense_transactions").insert([{payment_date:S.payment_date,amount:parseFloat(S.amount),contractor:S.contractor,category:S.category,description:S.description,detailed_description:S.detailed_description,responsible_person:S.responsible_person,documents:S.documents,tags:S.tags}]);if(O)throw O}g(!1),U({payment_date:"",amount:"",contractor:"",category:"",description:"",detailed_description:"",responsible_person:"",documents:[],tags:[]}),me()}catch(O){console.error("Error saving expense:",O),alert("Bd zapisywania: "+O.message)}},lt=async O=>{if(confirm("Czy na pewno chcesz usun ten wydatek?"))try{const{error:Ee}=await le.from("expense_transactions").delete().eq("id",O);if(Ee)throw Ee;me()}catch(Ee){console.error("Error deleting expense:",Ee),alert("Bd usuwania: "+Ee.message)}},nt=(O,Ee)=>{D.trim()&&!O.tags.includes(D.trim())&&(Ee({...O,tags:[...O.tags,D.trim()]}),T(""))},Ne=(O,Ee,Pe)=>{Pe({...Ee,tags:Ee.tags.filter(Le=>Le!==O)})},qe=(O,Ee)=>A.filter(Le=>Le.category===O&&Le.description===Ee).reduce((Le,Re)=>Le+(Re.amount||0),0),Ye=O=>O<80?"from-green-500 to-green-600":O<=100?"from-yellow-500 to-yellow-600":"from-red-500 to-red-600",ot=o.filter(O=>!(G.type&&O.type!==G.type||G.source&&!O.source.toLowerCase().includes(G.source.toLowerCase())||G.tag&&(!O.tags||!O.tags.includes(G.tag))||G.dateFrom&&O.date<G.dateFrom||G.dateTo&&O.date>G.dateTo)),it=A.filter(O=>!(ce.category&&O.category!==ce.category||ce.contractor&&!O.contractor.toLowerCase().includes(ce.contractor.toLowerCase())||ce.responsible&&!O.responsible_person.toLowerCase().includes(ce.responsible.toLowerCase())||ce.tag&&(!O.tags||!O.tags.includes(ce.tag))||ce.dateFrom&&O.payment_date<ce.dateFrom||ce.dateTo&&O.payment_date>ce.dateTo)),ke=[...new Set(o.map(O=>O.source))],oe=[...new Set(o.flatMap(O=>O.tags||[]))],Be=[...new Set(A.map(O=>O.contractor))],Se=[...new Set(A.map(O=>O.responsible_person))],Qe=[...new Set(A.flatMap(O=>O.tags||[]))],se=Array.from({length:10},(O,Ee)=>new Date().getFullYear()-2+Ee),ze=[...new Set(a.map(O=>O.category))].map(O=>({value:O,label:O}));return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent mb-2",children:"Finanse"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Zarzdzanie budetem i finansami kocioa"})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx(Pt,{value:r,onChange:O=>n(parseInt(O)),options:se.map(O=>({value:O,label:O.toString()}))})})]}),s.jsxs("div",{className:"flex gap-3 border-b border-gray-200 dark:border-gray-700 pb-2",children:[s.jsxs("button",{onClick:()=>e("budget"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${t==="budget"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Uo,{size:16,className:"inline mr-2"}),"Budet"]}),s.jsxs("button",{onClick:()=>e("income"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${t==="income"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(_L,{size:16,className:"inline mr-2"}),"Wpywy"]}),s.jsxs("button",{onClick:()=>e("expenses"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${t==="expenses"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(kL,{size:16,className:"inline mr-2"}),"Wydatki"]}),s.jsxs("button",{onClick:()=>e("reports"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${t==="reports"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(h2,{size:16,className:"inline mr-2"}),"Raporty"]})]}),t==="budget"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Budet ",r]}),s.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18}),"Dodaj pozycj budetow"]})]}),d?s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"adowanie..."}):a.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:["Brak pozycji budetowych na rok ",r]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Suba"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Opis kosztu"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Plan (PLN)"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Realizacja (PLN)"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"% Realizacji"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Pozostao"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Akcje"})]})}),s.jsx("tbody",{children:(()=>{const O=a.reduce((rt,ut)=>(rt[ut.category]||(rt[ut.category]=[]),rt[ut.category].push(ut),rt),{});let Ee=0,Pe=0,Le=0;const Re=[];Object.keys(O).forEach(rt=>{const ut=O[rt];let at=0,ct=0,de=0;const We=ut.reduce((et,Zt)=>et+1+(V[`${Zt.id}`]?1:0),0);ut.forEach((et,Zt)=>{const Ft=qe(et.category,et.description),Rt=et.planned_amount>0?Ft/et.planned_amount*100:0,ge=et.planned_amount-Ft;if(at+=et.planned_amount,ct+=Ft,de+=ge,Re.push(s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition",children:[Zt===0&&s.jsx("td",{className:"py-4 px-4 text-gray-900 dark:text-white font-bold",rowSpan:We,children:et.category}),s.jsx("td",{className:"py-4 px-4 text-gray-600 dark:text-gray-400",children:et.description}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white font-medium",children:[et.planned_amount.toLocaleString("pl-PL")," z"]}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white font-medium cursor-pointer hover:text-pink-600 dark:hover:text-pink-400 transition",onClick:()=>{const Ce=`${et.id}`;F(Ke=>({...Ke,[Ce]:!Ke[Ce]}))},children:[Ft.toLocaleString("pl-PL")," z",V[`${et.id}`]?s.jsx(Ui,{size:16,className:"inline ml-1"}):s.jsx(tn,{size:16,className:"inline ml-1"})]}),s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-center font-bold text-gray-900 dark:text-white",children:[Rt.toFixed(1),"%"]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${Ye(Rt)} transition-all`,style:{width:`${Math.min(Rt,100)}%`}})})]})}),s.jsxs("td",{className:`py-4 px-4 text-right font-bold ${ge>=0?"text-green-600":"text-red-600"}`,children:[ge.toLocaleString("pl-PL")," z"]}),s.jsx("td",{className:"py-4 px-4 text-center",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx("button",{onClick:()=>{w(et),u(!0)},className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Edytuj",children:s.jsx(Sd,{size:16})}),s.jsx("button",{onClick:()=>X(et.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Usu",children:s.jsx(Zr,{size:16})})]})})]},et.id)),V[`${et.id}`]){const Ce=A.filter(Ke=>Ke.category===et.category&&Ke.description===et.description);Re.push(s.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:s.jsx("td",{colSpan:7,className:"py-4 px-4",children:Ce.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Wydatki: ",et.category," - ",et.description]}),s.jsx("div",{className:"space-y-1",children:Ce.map(Ke=>s.jsxs("div",{className:"grid grid-cols-5 gap-3 text-sm py-2 px-3 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Data"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(Ke.payment_date).toLocaleDateString("pl-PL")})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Kontrahent"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:Ke.contractor})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Kwota"}),s.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[Ke.amount.toLocaleString("pl-PL")," z"]})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Szczegowy opis"}),s.jsx("span",{className:"text-gray-900 dark:text-white text-xs",children:Ke.detailed_description||"-"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Odpowiedzialny"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:Ke.responsible_person})]})]},Ke.id))}),s.jsx("div",{className:"flex justify-end pt-2 border-t border-gray-200 dark:border-gray-700 mt-2",children:s.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["Suma: ",Ce.reduce((Ke,gt)=>Ke+gt.amount,0).toLocaleString("pl-PL")," z"]})})]}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:"Brak wydatkw w tej pozycji budetu"})})},`expenses-${et.id}`))}}),Ee+=at,Pe+=ct,Le+=de;const Je=at>0?ct/at*100:0;Re.push(s.jsxs("tr",{className:"bg-pink-100 dark:bg-pink-900/40 border-b-2 border-pink-300 dark:border-pink-700 font-bold",children:[s.jsxs("td",{className:"py-3 px-4 text-gray-900 dark:text-white",colSpan:2,children:["Podsumowanie: ",rt]}),s.jsxs("td",{className:"py-3 px-4 text-right text-gray-900 dark:text-white",children:[at.toLocaleString("pl-PL")," z"]}),s.jsxs("td",{className:"py-3 px-4 text-right text-gray-900 dark:text-white",children:[ct.toLocaleString("pl-PL")," z"]}),s.jsxs("td",{className:"py-3 px-4 text-center text-gray-900 dark:text-white",children:[Je.toFixed(1),"%"]}),s.jsxs("td",{className:`py-3 px-4 text-right ${de>=0?"text-green-600":"text-red-600"}`,children:[de.toLocaleString("pl-PL")," z"]}),s.jsx("td",{className:"py-3 px-4"})]},`subtotal-${rt}`))});const ht=Ee>0?Pe/Ee*100:0;return Re.push(s.jsxs("tr",{className:"bg-gradient-to-r from-pink-200 to-orange-200 dark:from-pink-900/60 dark:to-orange-900/60 border-t-4 border-pink-500 dark:border-pink-400 font-bold text-lg",children:[s.jsx("td",{className:"py-4 px-4 text-gray-900 dark:text-white",colSpan:2,children:"SUMA CAKOWITA"}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white",children:[Ee.toLocaleString("pl-PL")," z"]}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white",children:[Pe.toLocaleString("pl-PL")," z"]}),s.jsxs("td",{className:"py-4 px-4 text-center text-gray-900 dark:text-white",children:[ht.toFixed(1),"%"]}),s.jsxs("td",{className:`py-4 px-4 text-right ${Le>=0?"text-green-600":"text-red-600"}`,children:[Le.toLocaleString("pl-PL")," z"]}),s.jsx("td",{className:"py-4 px-4"})]},"grand-total")),Re})()})]})})]}),t==="income"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Wpywy ",r]}),s.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18}),"Dodaj wpyw"]})]}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 uppercase",children:"Filtry"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[s.jsx(Pt,{label:"Typ",value:G.type,onChange:O=>ne({...G,type:O}),options:[{value:"",label:"Wszystkie"},{value:"Kolekta",label:"Kolekta"},{value:"Darowizny",label:"Darowizny"},{value:"Inne",label:"Inne"}],placeholder:"Wszystkie"}),s.jsx(Pt,{label:"rdo",value:G.source,onChange:O=>ne({...G,source:O}),options:[{value:"",label:"Wszystkie"},...ke.map(O=>({value:O,label:O}))],placeholder:"Wszystkie"}),s.jsx(Pt,{label:"Tag",value:G.tag,onChange:O=>ne({...G,tag:O}),options:[{value:"",label:"Wszystkie"},...oe.map(O=>({value:O,label:O}))],placeholder:"Wszystkie"}),s.jsx(cA,{label:"Data od",value:G.dateFrom,onChange:O=>ne({...G,dateFrom:O})}),s.jsx(cA,{label:"Data do",value:G.dateTo,onChange:O=>ne({...G,dateTo:O})})]}),(G.type||G.source||G.tag||G.dateFrom||G.dateTo)&&s.jsx("button",{onClick:()=>ne({type:"",source:"",tag:"",dateFrom:"",dateTo:""}),className:"mt-3 text-sm text-pink-600 dark:text-pink-400 hover:underline",children:"Wyczy filtry"})]}),d?s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"adowanie..."}):ot.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:o.length===0?`Brak wpyww na rok ${r}`:"Brak wpyww pasujcych do filtrw"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Data"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Typ"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"rdo"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Kwota"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Notatka"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Tagi"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Akcje"})]})}),s.jsx("tbody",{children:ot.map(O=>s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"py-4 px-4 text-gray-900 dark:text-white text-sm",children:new Date(O.date).toLocaleDateString("pl-PL")}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-medium",children:O.type})}),s.jsx("td",{className:"py-4 px-4 text-gray-900 dark:text-white text-sm",children:O.source}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white font-bold",children:[O.amount.toLocaleString("pl-PL")," z"]}),s.jsx("td",{className:"py-4 px-4 text-gray-600 dark:text-gray-400 text-sm",children:O.notes||"-"}),s.jsx("td",{className:"py-4 px-4 text-center",children:O.tags&&O.tags.length>0?s.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:O.tags.map((Ee,Pe)=>s.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg text-xs flex items-center gap-1",children:[s.jsx(Bl,{size:10}),Ee]},Pe))}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("td",{className:"py-4 px-4 text-center",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx("button",{onClick:()=>{N(O),b(!0)},className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Edytuj",children:s.jsx(Sd,{size:16})}),s.jsx("button",{onClick:()=>xe(O.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Usu",children:s.jsx(Zr,{size:16})})]})})]},O.id))})]})})]}),t==="expenses"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Wydatki ",r]}),s.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18}),"Dodaj wydatek"]})]}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 uppercase",children:"Filtry"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-3",children:[s.jsx(Pt,{label:"Kategoria",value:ce.category,onChange:O=>ue({...ce,category:O}),options:[{value:"",label:"Wszystkie"},...ze],placeholder:"Wszystkie"}),s.jsx(Pt,{label:"Kontrahent",value:ce.contractor,onChange:O=>ue({...ce,contractor:O}),options:[{value:"",label:"Wszystkie"},...Be.map(O=>({value:O,label:O}))],placeholder:"Wszystkie"}),s.jsx(Pt,{label:"Osoba odpowiedzialna",value:ce.responsible,onChange:O=>ue({...ce,responsible:O}),options:[{value:"",label:"Wszystkie"},...Se.map(O=>({value:O,label:O}))],placeholder:"Wszystkie"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[s.jsx(Pt,{label:"Tag",value:ce.tag,onChange:O=>ue({...ce,tag:O}),options:[{value:"",label:"Wszystkie"},...Qe.map(O=>({value:O,label:O}))],placeholder:"Wszystkie"}),s.jsx(cA,{label:"Data od",value:ce.dateFrom,onChange:O=>ue({...ce,dateFrom:O})}),s.jsx(cA,{label:"Data do",value:ce.dateTo,onChange:O=>ue({...ce,dateTo:O})})]}),(ce.category||ce.contractor||ce.responsible||ce.tag||ce.dateFrom||ce.dateTo)&&s.jsx("button",{onClick:()=>ue({category:"",contractor:"",responsible:"",tag:"",dateFrom:"",dateTo:""}),className:"mt-3 text-sm text-pink-600 dark:text-pink-400 hover:underline",children:"Wyczy filtry"})]}),d?s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"adowanie..."}):it.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:A.length===0?`Brak wydatkw na rok ${r}`:"Brak wydatkw pasujcych do filtrw"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Data"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Kategoria"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Opis"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Kontrahent"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Kwota"}),s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Odpowiedzialny"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Zaczniki"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium",children:"Akcje"})]})}),s.jsx("tbody",{children:it.map(O=>s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[s.jsx("td",{className:"py-4 px-4 text-gray-900 dark:text-white text-sm",children:new Date(O.payment_date).toLocaleDateString("pl-PL")}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-full text-xs font-medium",children:O.category})}),s.jsx("td",{className:"py-4 px-4 text-gray-900 dark:text-white text-sm",children:O.description||"-"}),s.jsx("td",{className:"py-4 px-4 text-gray-600 dark:text-gray-400 text-sm",children:O.contractor}),s.jsxs("td",{className:"py-4 px-4 text-right text-gray-900 dark:text-white font-bold",children:[O.amount.toLocaleString("pl-PL")," z"]}),s.jsx("td",{className:"py-4 px-4 text-gray-600 dark:text-gray-400 text-sm",children:O.responsible_person}),s.jsx("td",{className:"py-4 px-4 text-center",children:O.documents&&O.documents.length>0?s.jsx("div",{className:"flex flex-col gap-1",children:O.documents.map((Ee,Pe)=>s.jsxs("a",{href:Ee.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 justify-center",children:[s.jsx(xn,{size:12}),Ee.name]},Pe))}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("td",{className:"py-4 px-4 text-center",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx("button",{onClick:()=>{U(O),g(!0)},className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Edytuj",children:s.jsx(Sd,{size:16})}),s.jsx("button",{onClick:()=>lt(O.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Usu",children:s.jsx(Zr,{size:16})})]})})]},O.id))})]})})]}),t==="reports"&&s.jsxs("section",{className:"space-y-6",children:[(()=>{const O=o.reduce((at,ct)=>at+(ct.amount||0),0),Ee=A.reduce((at,ct)=>at+(ct.amount||0),0),Pe=O-Ee,Le=Y.bank_pln+Pe,Re=Y.cash_pln,ht=Le+Re,rt=a.reduce((at,ct)=>at+(ct.planned_amount||0),0),ut=rt>0?Ee/rt*100:0;return s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-pink-600 to-orange-600 p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-pink-100 text-sm font-medium mb-1",children:["Aktualny stan finansw  ",r]}),s.jsxs("p",{className:"text-4xl font-bold",children:[ht.toLocaleString("pl-PL")," z"]})]}),s.jsx("button",{onClick:J,className:"p-2 bg-white/20 hover:bg-white/30 rounded-xl transition",title:"Edytuj stany pocztkowe",children:s.jsx(Rj,{size:20})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[s.jsx(Kh,{size:16}),s.jsx("span",{className:"text-xs font-medium uppercase",children:"Bank PLN"})]}),s.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Le.toLocaleString("pl-PL")," z"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Start: ",Y.bank_pln.toLocaleString("pl-PL")," z"]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[s.jsx(Hh,{size:16}),s.jsx("span",{className:"text-xs font-medium uppercase",children:"Gotwka"})]}),s.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Re.toLocaleString("pl-PL")," z"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Start: ",Y.cash_pln.toLocaleString("pl-PL")," z"]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[Pe>=0?s.jsx(aL,{size:16,className:"text-green-500"}):s.jsx(tL,{size:16,className:"text-red-500"}),s.jsxs("span",{className:"text-xs font-medium uppercase",children:["Bilans ",r]})]}),s.jsxs("p",{className:`text-xl font-bold ${Pe>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[Pe>=0?"+":"",Pe.toLocaleString("pl-PL")," z"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["+",O.toLocaleString("pl-PL")," / -",Ee.toLocaleString("pl-PL")]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[s.jsx(x2,{size:16}),s.jsx("span",{className:"text-xs font-medium uppercase",children:"Budet"})]}),s.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[ut.toFixed(1),"%"]}),s.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${ut<80?"bg-green-500":ut<=100?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(ut,100)}%`}})})]})]}),(Y.bank_currency>0||Y.cash_currency>0)&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-3",children:["Waluta (",Y.currency_type,")"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[s.jsx(Kh,{size:18,className:"text-amber-600 dark:text-amber-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Rachunek"}),s.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[Y.bank_currency.toLocaleString("pl-PL")," ",Y.currency_type]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg",children:[s.jsx(Hh,{size:18,className:"text-cyan-600 dark:text-cyan-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:"Gotwka"}),s.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[Y.cash_currency.toLocaleString("pl-PL")," ",Y.currency_type]})]})]})]})]})]})]})})(),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(h2,{size:20,className:"text-pink-600"}),"Wpywy vs Wydatki - miesicznie"]}),s.jsxs("div",{className:"space-y-3",children:[(()=>{const Ee=["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"].map((Le,Re)=>{const ht=String(Re+1).padStart(2,"0"),rt=`${r}-${ht}-01`,ut=`${r}-${ht}-31`,at=o.filter(de=>de.date>=rt&&de.date<=ut).reduce((de,We)=>de+(We.amount||0),0),ct=A.filter(de=>de.payment_date>=rt&&de.payment_date<=ut).reduce((de,We)=>de+(We.amount||0),0);return{name:Le,income:at,expense:ct}}),Pe=Math.max(...Ee.map(Le=>Math.max(Le.income,Le.expense)),1);return s.jsx("div",{className:"grid grid-cols-12 gap-2",children:Ee.map((Le,Re)=>s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"h-32 w-full flex items-end justify-center gap-1",children:[s.jsx("div",{className:"w-3 bg-gradient-to-t from-green-500 to-green-400 rounded-t transition-all hover:opacity-80",style:{height:`${Le.income/Pe*100}%`,minHeight:Le.income>0?"4px":"0"},title:`Wpywy: ${Le.income.toLocaleString("pl-PL")} z`}),s.jsx("div",{className:"w-3 bg-gradient-to-t from-red-500 to-red-400 rounded-t transition-all hover:opacity-80",style:{height:`${Le.expense/Pe*100}%`,minHeight:Le.expense>0?"4px":"0"},title:`Wydatki: ${Le.expense.toLocaleString("pl-PL")} z`})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:Le.name})]},Re))})})(),s.jsxs("div",{className:"flex justify-center gap-6 mt-4 pt-4 border-t border-gray-100 dark:border-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wpywy"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wydatki"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(x2,{size:20,className:"text-pink-600"}),"Wydatki wg kategorii"]}),(()=>{const O=A.reduce((Re,ht)=>(Re[ht.category]=(Re[ht.category]||0)+(ht.amount||0),Re),{}),Ee=Object.entries(O).sort(([,Re],[,ht])=>ht-Re),Pe=Ee.reduce((Re,[,ht])=>Re+ht,0),Le=["from-pink-500 to-rose-500","from-blue-500 to-indigo-500","from-green-500 to-emerald-500","from-yellow-500 to-orange-500","from-purple-500 to-violet-500","from-cyan-500 to-teal-500"];return Ee.length>0?s.jsx("div",{className:"space-y-3",children:Ee.map(([Re,ht],rt)=>{const ut=Pe>0?ht/Pe*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:Re}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-bold",children:[ht.toLocaleString("pl-PL")," z"]})]}),s.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-800 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${Le[rt%Le.length]} transition-all`,style:{width:`${ut}%`}})}),s.jsxs("div",{className:"text-right text-xs text-gray-500 dark:text-gray-400 mt-1",children:[ut.toFixed(1),"%"]})]},Re)})}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Brak danych o wydatkach"})})()]}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(iL,{size:20,className:"text-pink-600"}),"Top kontrahenci"]}),(()=>{const O=A.reduce((Le,Re)=>(Le[Re.contractor]=(Le[Re.contractor]||0)+(Re.amount||0),Le),{}),Ee=Object.entries(O).sort(([,Le],[,Re])=>Re-Le).slice(0,8),Pe=Ee.reduce((Le,[,Re])=>Le+Re,0);return Ee.length>0?s.jsx("div",{className:"space-y-2",children:Ee.map(([Le,Re],ht)=>{const rt=Pe>0?Re/Pe*100:0;return s.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center text-white text-sm font-bold",children:ht+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:Le}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[rt.toFixed(1),"% caoci"]})]}),s.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[Re.toLocaleString("pl-PL")," z"]})]},Le)})}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Brak danych o kontrahentach"})})()]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(Uo,{size:20,className:"text-pink-600"}),"Realizacja budetu wg sub"]}),a.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-3 px-4 text-gray-600 dark:text-gray-400 font-medium text-sm",children:"Suba"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium text-sm",children:"Planowany"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium text-sm",children:"Zrealizowany"}),s.jsx("th",{className:"text-center py-3 px-4 text-gray-600 dark:text-gray-400 font-medium text-sm",children:"Realizacja"}),s.jsx("th",{className:"text-right py-3 px-4 text-gray-600 dark:text-gray-400 font-medium text-sm",children:"Pozostao"})]})}),s.jsx("tbody",{children:(()=>{const O={};return a.forEach(Ee=>{O[Ee.category]||(O[Ee.category]={planned:0,realized:0}),O[Ee.category].planned+=Ee.planned_amount||0;const Pe=A.filter(Le=>Le.category===Ee.category&&Le.description===Ee.description).reduce((Le,Re)=>Le+(Re.amount||0),0);O[Ee.category].realized+=Pe}),Object.entries(O).map(([Ee,Pe])=>{const Le=Pe.planned>0?Pe.realized/Pe.planned*100:0,Re=Pe.planned-Pe.realized,ht=Le<80?"from-green-500 to-green-600":Le<=100?"from-yellow-500 to-yellow-600":"from-red-500 to-red-600";return s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition",children:[s.jsx("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-white",children:Ee}),s.jsxs("td",{className:"py-3 px-4 text-right text-gray-700 dark:text-gray-300",children:[Pe.planned.toLocaleString("pl-PL")," z"]}),s.jsxs("td",{className:"py-3 px-4 text-right text-gray-700 dark:text-gray-300",children:[Pe.realized.toLocaleString("pl-PL")," z"]}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${ht} transition-all`,style:{width:`${Math.min(Le,100)}%`}})}),s.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white w-14 text-right",children:[Le.toFixed(0),"%"]})]})}),s.jsxs("td",{className:`py-3 px-4 text-right font-bold ${Re>=0?"text-green-600":"text-red-600"}`,children:[Re.toLocaleString("pl-PL")," z"]})]},Ee)})})()})]})}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Brak pozycji budetowych"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(ta,{size:20,className:"text-pink-600"}),"Wpywy wg typu"]}),(()=>{const O=o.reduce((Le,Re)=>(Le[Re.type]=(Le[Re.type]||0)+(Re.amount||0),Le),{}),Ee=Object.entries(O).sort(([,Le],[,Re])=>Re-Le),Pe=Ee.reduce((Le,[,Re])=>Le+Re,0);return Ee.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Ee.map(([Le,Re])=>{const ht=Pe>0?Re/Pe*100:0,rt=Le==="Kolekta"?"from-green-500 to-emerald-600":Le==="Darowizny"?"from-blue-500 to-indigo-600":"from-purple-500 to-violet-600";return s.jsxs("div",{className:`bg-gradient-to-br ${rt} rounded-xl p-4 text-white`,children:[s.jsx("p",{className:"text-white/80 text-sm font-medium",children:Le}),s.jsxs("p",{className:"text-2xl font-bold mt-1",children:[Re.toLocaleString("pl-PL")," z"]}),s.jsxs("p",{className:"text-white/60 text-sm mt-2",children:[ht.toFixed(1),"% caoci"]})]},Le)})}):s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Brak danych o wpywach"})})()]})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-md p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Nowa pozycja budetowa"}),s.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Pt,{label:"Kategoria (Suba)",value:m.category,onChange:O=>w({...m,category:O}),options:[{value:"Grupa Uwielbienia",label:"Grupa Uwielbienia"},{value:"MediaTeam",label:"MediaTeam"},{value:"Grupy domowe",label:"Grupy domowe"},{value:"mae schWro",label:"mae schWro"},{value:"AtmosferaTeam",label:"AtmosferaTeam"}],placeholder:"Wybierz sub"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:3,value:m.description,onChange:O=>w({...m,description:O.target.value}),placeholder:"Opis kosztw"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Planowana kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:m.planned_amount,onChange:O=>w({...m,planned_amount:O.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:ae,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-md p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Nowy wpyw"}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(cA,{label:"Data wpywu",value:k.date,onChange:O=>N({...k,date:O})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:k.amount,onChange:O=>N({...k,amount:O.target.value}),placeholder:"0.00"})]}),s.jsx(Pt,{label:"Typ wpywu",value:k.type,onChange:O=>N({...k,type:O}),options:[{value:"Kolekta",label:"Kolekta"},{value:"Darowizny",label:"Darowizny"},{value:"Inne",label:"Inne"}]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"rdo"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:k.source,onChange:O=>N({...k,source:O.target.value}),placeholder:"np. Kolekta niedzielna"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Notatka"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:2,value:k.notes,onChange:O=>N({...k,notes:O.target.value}),placeholder:"Dodatkowe informacje"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tagi"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",value:D,onChange:O=>T(O.target.value),placeholder:"Dodaj tag",onKeyPress:O=>O.key==="Enter"&&nt(k,N)}),s.jsx("button",{onClick:()=>nt(k,N),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:s.jsx(Wt,{size:18})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:k.tags.map((O,Ee)=>s.jsxs("span",{className:"px-2 py-1 bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300 rounded-lg text-xs flex items-center gap-1",children:[s.jsx(Bl,{size:12}),O,s.jsx("button",{onClick:()=>Ne(O,k,N),children:s.jsx(Nt,{size:12})})]},Ee))})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:ye,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})}),v&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-4xl p-6 border border-white/20 dark:border-gray-700 my-8",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Nowy wydatek"}),s.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(cA,{label:"Data dokumentu",value:S.payment_date,onChange:O=>U({...S,payment_date:O})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kwota (PLN)"}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:S.amount,onChange:O=>U({...S,amount:O.target.value}),placeholder:"0.00"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Kontrahent"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:S.contractor,onChange:O=>U({...S,contractor:O.target.value}),placeholder:"Nazwa firmy/osoby"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Osoba odpowiedzialna"}),s.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:S.responsible_person,onChange:O=>U({...S,responsible_person:O.target.value}),placeholder:"Imi i nazwisko"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Pt,{label:"Kategoria (powizana z budetem)",value:S.category,onChange:O=>U({...S,category:O,description:""}),options:ze.length>0?ze:[{value:"",label:"Najpierw dodaj pozycje budetowe"}],placeholder:"Wybierz kategori"}),S.category&&s.jsx(Pt,{label:"Opis kosztu (z budetu)",value:S.description,onChange:O=>U({...S,description:O}),options:a.filter(O=>O.category===S.category).map(O=>({value:O.description,label:O.description})),placeholder:"Wybierz opis kosztu"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Szczegowy opis"}),s.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none",rows:2,value:S.detailed_description,onChange:O=>U({...S,detailed_description:O.target.value}),placeholder:"Dodatkowe informacje o wydatku..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Zaczniki (opcjonalnie)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white cursor-pointer hover:border-pink-300 dark:hover:border-pink-600 transition flex items-center gap-2",children:[s.jsx(Hs,{size:18,className:"text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q?"Przesyanie...":"Dodaj plik(i)"}),s.jsx("input",{type:"file",onChange:Oe,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",disabled:Q,multiple:!0})]}),S.documents&&S.documents.length>0&&s.jsx("div",{className:"space-y-2",children:S.documents.map((O,Ee)=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:[s.jsxs("span",{className:"text-xs text-green-700 dark:text-green-300 flex items-center gap-1 truncate",children:[s.jsx(xn,{size:14}),O.name]}),s.jsx("button",{onClick:()=>H(Ee),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 ml-2 flex-shrink-0",children:s.jsx(Nt,{size:14})})]},Ee))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Tagi"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",value:D,onChange:O=>T(O.target.value),placeholder:"Dodaj tag",onKeyPress:O=>O.key==="Enter"&&nt(S,U)}),s.jsx("button",{onClick:()=>nt(S,U),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:s.jsx(Wt,{size:18})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:S.tags.map((O,Ee)=>s.jsxs("span",{className:"px-2 py-1 bg-pink-100 dark:bg-pink-900 text-pink-700 dark:text-pink-300 rounded-lg text-xs flex items-center gap-1",children:[s.jsx(Bl,{size:12}),O,s.jsx("button",{onClick:()=>Ne(O,S,U),children:s.jsx(Nt,{size:12})})]},Ee))})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:$e,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})}),fe&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-lg p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:["Stan pocztkowy kont - ",r]}),s.jsx("button",{onClick:()=>we(!1),className:"text-gray-500 dark:text-gray-400",children:s.jsx(Nt,{size:24})})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 uppercase mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Zotwki (PLN)"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[s.jsx(Kh,{size:12,className:"inline mr-1"}),"Rachunek bankowy"]}),s.jsx("input",{type:"number",step:"0.01",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:E.bank_pln,onChange:O=>z({...E,bank_pln:O.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[s.jsx(Hh,{size:12,className:"inline mr-1"}),"Gotwka"]}),s.jsx("input",{type:"number",step:"0.01",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:E.cash_pln,onChange:O=>z({...E,cash_pln:O.target.value}),placeholder:"0.00"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 uppercase mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full"}),"Waluta obca"]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Typ waluty"}),s.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:E.currency_type,onChange:O=>z({...E,currency_type:O.target.value}),children:[s.jsx("option",{value:"EUR",children:"EUR - Euro"}),s.jsx("option",{value:"USD",children:"USD - Dolar amerykaski"}),s.jsx("option",{value:"GBP",children:"GBP - Funt brytyjski"}),s.jsx("option",{value:"CHF",children:"CHF - Frank szwajcarski"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[s.jsx(Kh,{size:12,className:"inline mr-1"}),"Rachunek walutowy"]}),s.jsx("input",{type:"number",step:"0.01",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:E.bank_currency,onChange:O=>z({...E,bank_currency:O.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[s.jsx(Hh,{size:12,className:"inline mr-1"}),"Gotwka walutowa"]}),s.jsx("input",{type:"number",step:"0.01",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:E.cash_currency,onChange:O=>z({...E,cash_currency:O.target.value}),placeholder:"0.00"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 text-sm text-blue-700 dark:text-blue-300",children:[s.jsx("p",{className:"font-medium mb-1",children:" Wskazwka"}),s.jsxs("p",{children:["Wprowad stany kont na pocztek roku ",r,". System automatycznie doliczy wpywy i wydatki, aby pokaza aktualny stan."]})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{onClick:()=>we(!1),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Anuluj"}),s.jsx("button",{onClick:W,className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-medium",children:"Zapisz"})]})]})]})})]})},eH={members:{label:"Czonkowie",resourceKey:"module:members",tabs:{}},homegroups:{label:"Grupy Domowe",resourceKey:"module:homegroups",tabs:{groups:"Grupy",leaders:"Liderzy",members:"Czonkowie",finances:"Finanse"}},media:{label:"Media Team",resourceKey:"module:media",tabs:{schedule:"Grafik",tasks:"Zadania",members:"Czonkowie",finances:"Finanse"}},kids:{label:"Mae SchWro",resourceKey:"module:kids",tabs:{schedule:"Grafik",groups:"Grupy",teachers:"Nauczyciele",students:"Uczniowie",finances:"Finanse"}},worship:{label:"Grupa Uwielbienia",resourceKey:"module:worship",tabs:{schedule:"Grafik",songs:"Baza Pieni",members:"Czonkowie",finances:"Finanse",wall:"Tablica"}},atmosfera:{label:"Atmosfera Team",resourceKey:"module:atmosfera",tabs:{schedule:"Grafik",members:"Czonkowie",finances:"Finanse"}},finance:{label:"Finanse",resourceKey:"module:finance",tabs:{}},teaching:{label:"Nauczanie",resourceKey:"module:teaching",tabs:{wall:"Tablica",schedule:"Grafik",series:"Serie",speakers:"Mwcy"}},settings:{label:"Ustawienia",resourceKey:"module:settings",tabs:{}}},C0=({title:t,description:e})=>s.jsxs("div",{className:"mb-6 border-b border-gray-100 dark:border-gray-700 pb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:t}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e})]}),sd=({category:t,title:e,items:r,onAdd:n,onDelete:a})=>{const[i,o]=C.useState("");return s.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border border-gray-200 dark:border-gray-700 rounded-2xl p-6 mb-6 shadow-sm transition-colors",children:[s.jsxs("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[s.jsx(mg,{size:20,className:"text-pink-500"})," ",e]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{className:"flex-1 p-2.5 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-sm outline-none focus:border-pink-500 transition",placeholder:"Nowa opcja...",value:i,onChange:l=>o(l.target.value)}),s.jsx("button",{onClick:()=>{i&&(n(t,i),o(""))},className:"bg-pink-600 text-white px-4 rounded-xl font-bold hover:bg-pink-700",children:s.jsx(Wt,{size:18})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.filter(l=>l.category===t).map(l=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 px-3 py-1.5 rounded-lg text-sm flex items-center gap-2 group hover:border-pink-300 transition",children:[s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:l.label}),s.jsx("button",{onClick:()=>a(l.id),className:"text-gray-400 hover:text-red-500 transition",children:s.jsx(Zr,{size:14})})]},l.id))})]})};function tH(){var ot,it;const[t,e]=C.useState("general"),[r,n]=C.useState(!0),[a,i]=C.useState(null),[o,l]=C.useState([]),[A,c]=C.useState([]),[d,h]=C.useState([]),[p,u]=C.useState([]),[y,b]=C.useState({id:null,full_name:"",email:"",password:"",role:"",is_active:!0}),[v,g]=C.useState(!1),[m,w]=C.useState(!1),[k,N]=C.useState([]),S=[{key:"worship",label:"Grupa Uwielbienia",table:"worship_team"},{key:"media",label:"Media Team",table:"media_team"},{key:"atmosfera",label:"Atmosfera Team",table:"atmosfera_members"},{key:"kids",label:"Mae SchWro",table:"kids_teachers"},{key:"homegroups",label:"Grupy Domowe (Lider)",table:"home_group_leaders"}],[U,Q]=C.useState(null),[L,V]=C.useState(null),[F,D]=C.useState({}),[T,G]=C.useState(null),[ne,ce]=C.useState(null),ue=[{key:"superadmin",label:"Super Administrator"},{key:"rada_starszych",label:"Rada Starszych"},{key:"koordynator",label:"Koordynator"},{key:"lider",label:"Lider Suby"},{key:"czlonek",label:"Czonek"}];C.useEffect(()=>{Ae(),Y(),xe()},[]);const Y=()=>{const ke=localStorage.getItem("tabPermissions");V(ke?JSON.parse(ke):{homegroups:{groups:null,leaders:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"]},media:{schedule:null,tasks:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"]},kids:{schedule:null,groups:null,teachers:["rada_starszych","koordynator","lider"],students:null,finances:["rada_starszych","koordynator"]},worship:{schedule:null,songs:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"]},atmosfera:{schedule:null,members:["rada_starszych","koordynator","lider"],finances:["rada_starszych","koordynator"]}})},Ae=async()=>{n(!0);const{data:ke}=await le.from("app_settings").select("*"),{data:oe}=await le.from("app_dictionaries").select("*"),{data:Be}=await le.from("app_permissions").select("*"),{data:Se,error:Qe}=await le.from("app_users").select("*").order("full_name");Qe&&console.error("Bd pobierania uytkownikw:",Qe),ke&&l(ke),oe&&c(oe),Be&&h(Be),Se&&u(Se),console.log("Pobrani uytkownicy:",Se),await fe(),n(!1)},fe=async()=>{const ke="lukasz@schwro.pl",{data:oe}=await le.from("app_users").select("*").eq("email",ke).single();oe||(await le.from("app_users").insert([{email:ke,full_name:"ukasz Dobrowolski",role:"superadmin",is_active:!0}]),console.log("Utworzono superadmina"))},we=async ke=>{const oe=ke.target.files[0];if(oe)try{const Be=oe.name.split(".").pop(),Se=`org-logo-${Date.now()}.${Be}`;await le.storage.from("public-assets").upload(Se,oe);const{data:Qe}=le.storage.from("public-assets").getPublicUrl(Se);await le.from("app_settings").upsert({key:"org_logo_url",value:Qe.publicUrl},{onConflict:"key"}),Ae(),window.location.reload()}catch{alert("Bd uploadu")}},E=async(ke,oe)=>{const Be=oe==="true"?"false":"true";await le.from("app_settings").update({value:Be}).eq("key",ke),l(Se=>Se.map(Qe=>Qe.key===ke?{...Qe,value:Be}:Qe)),setTimeout(()=>window.location.reload(),500)},z=async()=>{var ke;if(!y.email||!y.role)return alert("Wymagany Email i Rola");w(!0);try{if(y.id){const oe={full_name:y.full_name||"",email:y.email,role:y.role,is_active:y.is_active};await le.from("app_users").update(oe).eq("id",y.id),i({type:"success",text:"Zaktualizowano uytkownika"})}else{const{data:{session:oe}}=await le.auth.getSession(),Be=crypto.randomUUID()+"Aa1!",{data:Se,error:Qe}=await le.auth.signUp({email:y.email,password:Be,options:{data:{full_name:y.full_name}}});if(Qe)throw new Error(`Bd tworzenia konta: ${Qe.message}`);if(oe&&await le.auth.setSession({access_token:oe.access_token,refresh_token:oe.refresh_token}),(ke=Se==null?void 0:Se.user)!=null&&ke.id){const{error:ze}=await le.from("app_users").insert({email:y.email,full_name:y.full_name||"",role:y.role,is_active:y.is_active,auth_user_id:Se.user.id});ze&&console.error("Bd dodawania do app_users:",ze)}const{error:se}=await le.auth.resetPasswordForEmail(y.email,{redirectTo:`${window.location.origin}/reset-password`});if(se?(console.error("Bd wysyania emaila:",se),i({type:"warning",text:`Utworzono uytkownika, ale nie udao si wysa emaila: ${se.message}`})):i({type:"success",text:`Utworzono uytkownika ${y.email}. Email z linkiem do ustawienia hasa zosta wysany.`}),k.length>0){const ze={full_name:y.full_name||y.email,email:y.email,phone:""};for(const O of k){const Ee=S.find(Pe=>Pe.key===O);if(Ee)try{await le.from(Ee.table).insert([ze])}catch(Pe){console.error(`Bd dodawania do ${Ee.table}:`,Pe)}}}}g(!1),N([]),Ae()}catch(oe){alert("Bd zapisu: "+oe.message)}finally{w(!1)}},K=async ke=>{const oe=p.find(Be=>Be.id===ke);if((oe==null?void 0:oe.email)==="lukasz@schwro.pl")return alert("Nie mona usun superadmina!");if(confirm("Usun uytkownika? To rwnie usunie jego konto z systemu autentykacji."))try{await le.from("app_users").delete().eq("id",ke),Ae(),i({type:"success",text:"Uytkownik zosta usunity"})}catch(Be){alert("Bd usuwania: "+Be.message)}},W=async ke=>{await le.from("app_users").update({is_active:!ke.is_active}).eq("id",ke.id),Ae()},J=async(ke,oe)=>{const{data:Be}=await le.from("app_dictionaries").insert([{category:ke,label:oe,value:oe}]).select();Be&&c([...A,Be[0]])},re=async ke=>{confirm("Usun?")&&(await le.from("app_dictionaries").delete().eq("id",ke),Ae())},be=async(ke,oe,Be,Se)=>{const Qe=d.find(ze=>ze.role===ke&&ze.resource===oe),se={role:ke,resource:oe,[Be]:Se,[Be==="can_read"?"can_write":"can_read"]:Qe?Qe[Be==="can_read"?"can_write":"can_read"]:!1};await le.from("app_permissions").upsert(se,{onConflict:"role, resource"}),Ae()},me=(ke,oe,Be)=>{L&&V(Se=>{var se;const Qe=(se=Se[ke])==null?void 0:se[oe];if(Qe===null)return{...Se,[ke]:{...Se[ke],[oe]:[Be]}};if(Array.isArray(Qe))if(Qe.includes(Be)){const ze=Qe.filter(O=>O!==Be);return{...Se,[ke]:{...Se[ke],[oe]:ze}}}else return{...Se,[ke]:{...Se[ke],[oe]:[...Qe,Be]}};return Se})},ae=(ke,oe)=>{L&&V(Be=>{var Qe;return((Qe=Be[ke])==null?void 0:Qe[oe])===null?{...Be,[ke]:{...Be[ke],[oe]:[]}}:{...Be,[ke]:{...Be[ke],[oe]:null}}})},X=(ke,oe,Be)=>{var Qe;if(!L)return!1;const Se=(Qe=L[ke])==null?void 0:Qe[oe];return Se===null?!0:Array.isArray(Se)?Se.includes(Be):!1},ye=()=>{localStorage.setItem("tabPermissions",JSON.stringify(L)),i({type:"success",text:"Uprawnienia zaktualizowane. Odwie stron, aby zobaczy zmiany."}),setTimeout(()=>window.location.reload(),1500)},xe=()=>{const ke=localStorage.getItem("userPermissions");ke&&D(JSON.parse(ke))},Oe=(ke,oe,Be)=>{D(Se=>{const Qe=Se[ke]||{modules:{},tabs:{}},se=Qe.modules[oe]||{can_read:!1,can_write:!1};return{...Se,[ke]:{...Qe,modules:{...Qe.modules,[oe]:{...se,[Be]:!se[Be]}}}}})},H=(ke,oe,Be)=>{D(Se=>{const Qe=Se[ke]||{modules:{},tabs:{}},se=Qe.tabs[oe]||{};return{...Se,[ke]:{...Qe,tabs:{...Qe.tabs,[oe]:{...se,[Be]:!se[Be]}}}}})},$e=(ke,oe,Be)=>{var Se,Qe,se;return((se=(Qe=(Se=F[ke])==null?void 0:Se.tabs)==null?void 0:Qe[oe])==null?void 0:se[Be])||!1},lt=(ke,oe,Be)=>{var Se,Qe,se;return((se=(Qe=(Se=F[ke])==null?void 0:Se.modules)==null?void 0:Qe[oe])==null?void 0:se[Be])||!1},nt=()=>{localStorage.setItem("userPermissions",JSON.stringify(F)),i({type:"success",text:"Uprawnienia uytkownikw zapisane. Odwie stron, aby zobaczy zmiany."}),setTimeout(()=>window.location.reload(),1500)},Ne=ke=>{p.find(Be=>Be.id===ke)&&(D(Be=>{const Se={...Be};return delete Se[ke],Se}),i({type:"success",text:"Przywrcono uprawnienia z roli uytkownika"}))},qe=(ot=o.find(ke=>ke.key==="org_logo_url"))==null?void 0:ot.value,Ye=o.filter(ke=>ke.key.startsWith("module_"));return s.jsxs("div",{className:"flex flex-col h-full space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end flex-wrap gap-4",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Konfiguracja"})}),s.jsx("div",{className:"flex bg-white/50 dark:bg-gray-800/50 p-1 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-x-auto",children:["general","modules","users","permissions","dictionaries"].map(ke=>s.jsx("button",{onClick:()=>e(ke),className:`px-4 py-2 rounded-lg text-sm font-bold transition capitalize whitespace-nowrap ${t===ke?"bg-white dark:bg-gray-700 shadow text-pink-600 dark:text-pink-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:{general:"Organizacja",modules:"Moduy",users:"Uytkownicy",permissions:"Uprawnienia",dictionaries:"Sowniki"}[ke]},ke))})]}),a&&s.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 cursor-pointer ${a.type==="success"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800"}`,onClick:()=>i(null),children:[a.type==="success"?s.jsx(fg,{size:20}):s.jsx(Qj,{size:20})," ",a.text]}),s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700 p-8 flex-1 overflow-y-auto transition-colors",children:[t==="general"&&s.jsxs("div",{className:"max-w-2xl",children:[s.jsx(C0,{title:"Identyfikacja",description:"Logo i nazwa wywietlana w aplikacji."}),s.jsxs("div",{className:"flex gap-8 items-start",children:[s.jsxs("div",{className:"w-48 text-center",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-2xl aspect-square flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-700 relative overflow-hidden group hover:border-pink-400 transition mb-2",children:[qe?s.jsx("img",{src:qe,alt:"Logo",className:"w-full h-full object-contain p-4"}):s.jsx(pg,{size:40,className:"text-gray-300 dark:text-gray-500"}),s.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:s.jsxs("button",{onClick:()=>document.getElementById("logo-u").click(),className:"bg-white text-gray-900 px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-lg",children:[s.jsx(Hs,{size:16})," Zmie"]})}),s.jsx("input",{id:"logo-u",type:"file",className:"hidden",accept:"image/*",onChange:we})]}),s.jsx("span",{className:"text-xs text-gray-400",children:"Kliknij by zmieni"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Nazwa Organizacji"}),s.jsx("input",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:border-pink-500 outline-none transition",defaultValue:(it=o.find(ke=>ke.key==="org_name"))==null?void 0:it.value,onBlur:async ke=>{await le.from("app_settings").update({value:ke.target.value}).eq("key","org_name"),i({type:"success",text:"Zapisano"})}})]})]})]}),t==="modules"&&s.jsxs("div",{className:"max-w-3xl",children:[s.jsx(C0,{title:"Zarzdzanie Moduami",description:"Wczaj lub ukrywaj funkcje systemu."}),s.jsx("div",{className:"space-y-3",children:Ye.map(ke=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl hover:shadow-sm transition",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:ke.description}),s.jsx("div",{className:"text-xs text-gray-400 font-mono",children:ke.key})]}),s.jsxs("button",{onClick:()=>E(ke.key,ke.value),className:`px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 transition ${ke.value==="true"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-500 dark:bg-gray-600 dark:text-gray-400"}`,children:[ke.value==="true"?s.jsx(NL,{size:24}):s.jsx(jL,{size:24}),ke.value==="true"?"Wczony":"Wyczony"]})]},ke.key))})]}),t==="users"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx(C0,{title:"Uytkownicy Systemu",description:"Zarzdzanie dostpem, rolami i statusem kont."}),s.jsxs("button",{onClick:()=>{b({id:null,full_name:"",email:"",role:"",is_active:!0}),N([]),g(!0)},className:"bg-pink-600 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 hover:shadow-lg transition",children:[s.jsx(Wt,{size:18})," Dodaj Uytkownika"]})]}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700",children:s.jsxs("table",{className:"w-full text-sm text-left bg-white dark:bg-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Uytkownik"}),s.jsx("th",{className:"p-4",children:"Email"}),s.jsx("th",{className:"p-4",children:"Rola"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4 text-right",children:"Akcje"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-600",children:p.map(ke=>{var Se;const oe=((Se=ue.find(Qe=>Qe.key===ke.role))==null?void 0:Se.label)||ke.role,Be=ke.email==="lukasz@schwro.pl";return s.jsxs("tr",{className:`hover:bg-pink-50/30 dark:hover:bg-gray-600 transition text-gray-800 dark:text-gray-200 ${Be?"bg-yellow-50/30 dark:bg-yellow-900/10":""}`,children:[s.jsxs("td",{className:"p-4 font-medium flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold uppercase ${Be?"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300":"bg-pink-100 dark:bg-pink-900/50 text-pink-600 dark:text-pink-300"}`,children:(ke.full_name||ke.email||"?").charAt(0)}),ke.full_name||"Brak imienia",Be&&s.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 px-2 py-0.5 rounded font-bold",children:"SUPERADMIN"})]}),s.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:ke.email}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${Be?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300"}`,children:oe})}),s.jsx("td",{className:"p-4",children:s.jsxs("button",{onClick:()=>W(ke),disabled:Be,className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-bold border ${ke.is_active?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800"} ${Be?"opacity-50 cursor-not-allowed":""}`,children:[ke.is_active?s.jsx(SL,{size:12}):s.jsx(Li,{size:12})," ",ke.is_active?"Aktywny":"Zablokowany"]})}),s.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{b({...ke,password:""}),g(!0)},className:"text-pink-600 dark:text-pink-400 hover:bg-pink-50 dark:hover:bg-gray-600 p-2 rounded-lg",children:s.jsx(ZA,{size:16})}),s.jsx("button",{onClick:()=>K(ke.id),disabled:Be,className:`text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-gray-600 p-2 rounded-lg ${Be?"opacity-30 cursor-not-allowed":""}`,children:s.jsx(Zr,{size:16})})]})]},ke.id)})})]})})]}),t==="permissions"&&s.jsxs("div",{children:[s.jsx(C0,{title:"Uprawnienia",description:"Zarzdzaj dostpem do moduw i zakadek wedug rl uytkownikw oraz indywidualnych uytkownikw."}),s.jsxs("div",{className:"flex gap-2 mb-6 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl w-fit",children:[s.jsx("button",{onClick:()=>G(null),className:`px-4 py-2 rounded-lg text-sm font-bold transition ${T?"text-gray-500 dark:text-gray-400 hover:text-gray-700":"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm"}`,children:"Uprawnienia Rl"}),s.jsx("button",{onClick:()=>{var ke;return G(((ke=p[0])==null?void 0:ke.id)||null)},className:`px-4 py-2 rounded-lg text-sm font-bold transition ${T?"bg-white dark:bg-gray-700 text-pink-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Uprawnienia Uytkownikw"})]}),T&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex-1 max-w-md",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Wybierz uytkownika"}),s.jsx(Pt,{options:p.map(ke=>{var oe;return{value:ke.id,label:`${ke.full_name||ke.email} (${((oe=ue.find(Be=>Be.key===ke.role))==null?void 0:oe.label)||ke.role})`}}),value:T,onChange:ke=>G(ke),placeholder:"Wybierz uytkownika..."})]}),s.jsx("button",{onClick:()=>Ne(T),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition text-sm font-bold",children:"Przywr z roli"})]}),s.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl mb-4",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("strong",{children:"Uwaga:"}),' Domylnie uytkownik dziedziczy uprawnienia ze swojej roli. Moesz nadpisa je indywidualnymi uprawnieniami poniej. Uyj przycisku "Przywr z roli" aby zresetowa do ustawie domylnych.']})})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(eH).map(([ke,oe])=>{const Be=T?ne===ke:U===ke;return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden shadow-sm",children:[s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("button",{onClick:()=>T?ce(Be?null:ke):Q(Be?null:ke),className:"text-gray-400 hover:text-pink-600 dark:hover:text-pink-400 transition",children:Be?s.jsx(Ui,{size:20}):s.jsx(tn,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:oe.label}),s.jsx("p",{className:"text-xs text-gray-400 font-mono",children:oe.resourceKey})]})]}),T?s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex flex-col items-center gap-1 cursor-pointer group",children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:"Odczyt"}),s.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-pink-600 cursor-pointer",checked:lt(T,ke,"can_read"),onChange:()=>Oe(T,ke,"can_read")})]}),s.jsxs("label",{className:"flex flex-col items-center gap-1 cursor-pointer group",children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:"Zapis"}),s.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-red-500 cursor-pointer",checked:lt(T,ke,"can_write"),onChange:()=>Oe(T,ke,"can_write")})]})]}):s.jsx("div",{className:"flex gap-6",children:ue.map(Se=>{const Qe=d.find(se=>se.role===Se.key&&se.resource===oe.resourceKey)||{can_read:!1,can_write:!1};return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-2",children:Se.label}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("label",{className:"flex flex-col items-center gap-1 cursor-pointer group",children:[s.jsx(dL,{size:12,className:"text-gray-400 group-hover:text-pink-500"}),s.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-pink-600 cursor-pointer",checked:Qe.can_read,onChange:()=>be(Se.key,oe.resourceKey,"can_read",!Qe.can_read)})]}),s.jsxs("label",{className:"flex flex-col items-center gap-1 cursor-pointer group",children:[s.jsx(ZA,{size:12,className:"text-gray-400 group-hover:text-red-500"}),s.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-red-500 cursor-pointer",checked:Qe.can_write,onChange:()=>be(Se.key,oe.resourceKey,"can_write",!Qe.can_write)})]})]})]},Se.key)})})]})}),Be&&s.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700",children:[s.jsx("h4",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 mb-4 uppercase tracking-wide",children:T?"Dostp do zakadek":"Widoczno zakadek"}),T?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(oe.tabs).map(([Se,Qe])=>{const se=$e(T,ke,Se);return s.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition ${se?"bg-pink-50 dark:bg-pink-900/20 border-pink-300 dark:border-pink-700":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-600 hover:border-pink-200 dark:hover:border-pink-800"}`,children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-pink-600 cursor-pointer",checked:se,onChange:()=>H(T,ke,Se)}),s.jsx("span",{className:`text-sm font-medium ${se?"text-pink-700 dark:text-pink-300":"text-gray-700 dark:text-gray-300"}`,children:Qe})]},Se)})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[s.jsx("th",{className:"text-left py-3 px-4 font-bold text-gray-600 dark:text-gray-300",children:"Zakadka"}),s.jsx("th",{className:"text-center py-3 px-4 font-bold text-gray-600 dark:text-gray-300",children:"Wszyscy"}),ue.map(Se=>s.jsx("th",{className:"text-center py-3 px-4 font-bold text-gray-600 dark:text-gray-300",children:Se.label},Se.key))]})}),s.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-600",children:Object.entries(oe.tabs).map(([Se,Qe])=>{var ze;const se=((ze=L==null?void 0:L[ke])==null?void 0:ze[Se])===null;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-600/50",children:[s.jsxs("td",{className:"py-3 px-4 font-medium text-gray-800 dark:text-gray-200",children:[Qe,s.jsx("div",{className:"text-xs text-gray-400 font-mono",children:Se})]}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("button",{onClick:()=>ae(ke,Se),className:`w-6 h-6 rounded flex items-center justify-center transition mx-auto ${se?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-500"}`,children:se&&s.jsx(Un,{size:14})})}),ue.map(O=>{const Ee=X(ke,Se,O.key);return s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("button",{onClick:()=>me(ke,Se,O.key),disabled:se,className:`w-6 h-6 rounded flex items-center justify-center mx-auto transition ${se?"bg-gray-100 dark:bg-gray-700 text-gray-300 cursor-not-allowed":Ee?"bg-pink-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-500"}`,children:Ee&&!se&&s.jsx(Un,{size:14})})},O.key)})]},Se)})})]})})]})]},ke)})}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[!T&&s.jsx("button",{onClick:()=>{Y(),i({type:"success",text:"Przywrcono domylne uprawnienia zakadek"})},className:"px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Przywr domylne zakadki"}),s.jsx("button",{onClick:T?nt:ye,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl hover:shadow-lg transition font-bold",children:"Zapisz wszystkie uprawnienia"})]}),!T&&s.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("strong",{children:"Instrukcja:"}),' Rozwi modu aby zarzdza widocznoci zakadek. Zaznacz "Wszyscy", aby da dostp wszystkim uytkownikom do danej zakadki. W przeciwnym razie zaznacz konkretne role, ktre maj mie dostp.']})})]}),t==="dictionaries"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(sd,{title:"Statusy Czonkw",category:"member_status",items:A,onAdd:J,onDelete:re}),s.jsx(sd,{title:"Role w Zespole",category:"team_role",items:A,onAdd:J,onDelete:re}),s.jsx(sd,{title:"Typy Materiaw",category:"material_type",items:A,onAdd:J,onDelete:re}),s.jsx(sd,{title:"Kategorie Pieni",category:"song_category",items:A,onAdd:J,onDelete:re}),s.jsx(sd,{title:"Kategorie Wydarze",category:"event_category",items:A,onAdd:J,onDelete:re})]})]}),v&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md p-6 border border-white/20 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"Uytkownik"}),s.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:s.jsx(Nt,{})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Imi i nazwisko"}),s.jsx("input",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Jan Kowalski",value:y.full_name||"",onChange:ke=>b({...y,full_name:ke.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Email (Login)"}),s.jsx("input",{type:"email",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"jan@example.com",value:y.email||"",onChange:ke=>b({...y,email:ke.target.value})})]}),!y.id&&s.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:s.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Uytkownik otrzyma email z linkiem do ustawienia wasnego hasa."})}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1 mb-1 block",children:"Rola w systemie"}),s.jsx(Pt,{options:ue.filter(ke=>ke.key!=="superadmin").map(ke=>({value:ke.key,label:ke.label})),value:y.role,onChange:ke=>b({...y,role:ke}),placeholder:"Wybierz rol..."})]}),!y.id&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1 mb-2 block",children:"Suby / Zespoy"}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 p-3",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(ke=>{const oe=k.includes(ke.key);return s.jsxs("button",{type:"button",onClick:()=>{N(oe?Be=>Be.filter(Se=>Se!==ke.key):Be=>[...Be,ke.key])},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition flex items-center gap-1.5 ${oe?"bg-gradient-to-r from-pink-500 to-orange-500 text-white shadow-md":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500"}`,children:[oe&&s.jsx(Un,{size:14}),ke.label]},ke.key)})}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Uytkownik zostanie automatycznie dodany jako czonek wybranych sub."})]})]}),s.jsx("button",{onClick:z,disabled:m,className:"w-full py-3 bg-pink-600 text-white rounded-xl font-bold mt-2 hover:bg-pink-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Tworzenie konta...":"Zapisz"})]})]})})]})}function rH(){const[t,e]=C.useState(!0),[r,n]=C.useState(!1),[a,i]=C.useState(null),[o,l]=C.useState(null),[A,c]=C.useState({full_name:"",email:"",avatar_url:null}),[d,h]=C.useState({newPassword:"",confirmPassword:""});C.useEffect(()=>{p()},[]);const p=async()=>{e(!0);try{const{data:{user:g}}=await le.auth.getUser();if(!g)return;l(g);const{data:m}=await le.from("app_users").select("*").eq("email",g.email).single();c(m?{full_name:m.full_name||"",email:m.email,avatar_url:m.avatar_url}:{full_name:"",email:g.email,avatar_url:null})}catch(g){console.error(g)}e(!1)},u=async g=>{const m=g.target.files[0];if(m){n(!0);try{const w=m.name.split(".").pop(),k=`avatar-${o.id}-${Date.now()}.${w}`,{error:N}=await le.storage.from("public-assets").upload(k,m);if(N)throw N;const{data:S}=le.storage.from("public-assets").getPublicUrl(k),U=S.publicUrl;c(Q=>({...Q,avatar_url:U})),await y({avatar_url:U}),i({type:"success",text:"Zdjcie profilowe zaktualizowane!"}),setTimeout(()=>window.location.reload(),1e3)}catch{i({type:"error",text:"Bd wysyania zdjcia."})}n(!1)}},y=async(g={})=>{const m={full_name:A.full_name,...g};try{const{error:w}=await le.from("app_users").update(m).eq("email",A.email);if(w)throw w;await le.auth.updateUser({data:{full_name:m.full_name}})}catch(w){throw console.error("Bd aktualizacji profilu:",w),w}},b=async()=>{n(!0);try{await y(),i({type:"success",text:"Dane zapisane pomylnie."})}catch{i({type:"error",text:"Nie udao si zapisa danych."})}n(!1)},v=async()=>{if(i(null),d.newPassword!==d.confirmPassword)return i({type:"error",text:"Hasa nie s identyczne."});if(d.newPassword.length<6)return i({type:"error",text:"Haso musi mie min. 6 znakw."});n(!0);try{const{error:g}=await le.auth.updateUser({password:d.newPassword});if(g)throw g;i({type:"success",text:"Haso zostao zmienione."}),h({newPassword:"",confirmPassword:""})}catch(g){i({type:"error",text:g.message})}n(!1)};return t?s.jsx("div",{className:"p-10 flex justify-center",children:s.jsx(kl,{className:"animate-spin text-pink-600 dark:text-pink-400"})}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-10",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Mj Profil"})}),a&&s.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 cursor-pointer animate-fade-in ${a.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,onClick:()=>i(null),children:[a.type==="success"?s.jsx(fg,{size:20}):s.jsx(Qj,{size:20})," ",a.text]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1 space-y-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-lg border border-gray-100 dark:border-gray-700 flex flex-col items-center text-center relative overflow-hidden transition-colors duration-300",children:[s.jsx("div",{className:"w-full h-24 bg-gradient-to-r from-pink-500 to-orange-500 absolute top-0 left-0 opacity-10"}),s.jsxs("div",{className:"relative mt-4 mb-4 group",children:[s.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-700 shadow-xl overflow-hidden bg-gray-100 dark:bg-gray-900 flex items-center justify-center transition-colors duration-300",children:A.avatar_url?s.jsx("img",{src:A.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):s.jsx(Ni,{size:48,className:"text-gray-300 dark:text-gray-600"})}),s.jsxs("label",{className:"absolute bottom-0 right-0 bg-pink-600 text-white p-2.5 rounded-full cursor-pointer hover:bg-pink-700 dark:hover:bg-pink-500 shadow-lg transition-transform hover:scale-110",children:[s.jsx(oL,{size:18}),s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:u,disabled:r})]})]}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:A.full_name||"Uytkownik"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.email})]})}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-8 transition-colors duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-gray-100 dark:border-gray-700 pb-4",children:[s.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/30 rounded-xl text-pink-600 dark:text-pink-400",children:s.jsx(Ni,{size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Dane Osobowe"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Imi i Nazwisko"}),s.jsx("input",{className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:border-pink-500 dark:focus:border-pink-400 outline-none transition",value:A.full_name,onChange:g=>c({...A,full_name:g.target.value}),placeholder:"Np. Jan Kowalski"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Adres Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(xg,{size:18,className:"absolute left-3 top-3.5 text-gray-400 dark:text-gray-500"}),s.jsx("input",{className:"w-full p-3 pl-10 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed",value:A.email,disabled:!0})]}),s.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 mt-1 ml-1",children:"Zmiana adresu email wymaga kontaktu z administratorem."})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsxs("button",{onClick:b,disabled:r,className:"bg-pink-600 dark:bg-pink-500 text-white px-6 py-2.5 rounded-xl font-bold hover:shadow-lg hover:bg-pink-700 dark:hover:bg-pink-600 transition flex items-center gap-2",children:[r?s.jsx(kl,{size:18,className:"animate-spin"}):s.jsx(ju,{size:18})," Zapisz zmiany"]})})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/20 dark:border-gray-700/50 p-8 transition-colors duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-gray-100 dark:border-gray-700 pb-4",children:[s.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 dark:text-red-400",children:s.jsx(m2,{size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Bezpieczestwo"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Nowe haso"}),s.jsxs("div",{className:"relative",children:[s.jsx(p2,{size:18,className:"absolute left-3 top-3.5 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"password",className:"w-full p-3 pl-10 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:border-red-400 dark:focus:border-red-500 outline-none transition",placeholder:"",value:d.newPassword,onChange:g=>h({...d,newPassword:g.target.value})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:"Potwierd haso"}),s.jsxs("div",{className:"relative",children:[s.jsx(p2,{size:18,className:"absolute left-3 top-3.5 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"password",className:"w-full p-3 pl-10 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:border-red-400 dark:focus:border-red-500 outline-none transition",placeholder:"",value:d.confirmPassword,onChange:g=>h({...d,confirmPassword:g.target.value})})]})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsxs("button",{onClick:v,disabled:r,className:"bg-gray-800 dark:bg-gray-700 text-white px-6 py-2.5 rounded-xl font-bold hover:shadow-lg hover:bg-black dark:hover:bg-gray-600 transition flex items-center gap-2",children:[r?s.jsx(kl,{size:18,className:"animate-spin"}):s.jsx(m2,{size:18})," Zmie haso"]})})]})]})]})]})}const Ao={program:{label:"Naboestwa",color:"pink",icon:Ms},media:{label:"Media Team",color:"orange",icon:Mj},atmosfera:{label:"Atmosfera",color:"teal",icon:rw},worship:{label:"Zesp Uwielbienia",color:"purple",icon:Ms},kids:{label:"Mae SchWro",color:"yellow",icon:Nf},groups:{label:"Grupy Domowe",color:"blue",icon:nw}},nH=["Wstp","Uwielbienie","Modlitwa","Czytanie","Kazanie","Wieczerza","Uwielbienie / Kolekta","Ogoszenia","Zakoczenie"],aH=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function Qw(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e]),r}const Iw=({value:t,onChange:e})=>{const[r,n]=C.useState(!1),[a,i]=C.useState(t?new Date(t):new Date),o=C.useRef(null),l=Qw(o,r);C.useEffect(()=>{t&&i(new Date(t))},[t]);const A=u=>{const y=new Date(a.getFullYear(),a.getMonth(),u),b=String(y.getMonth()+1).padStart(2,"0"),v=String(y.getDate()).padStart(2,"0");e(`${y.getFullYear()}-${b}-${v}`),n(!1)},{days:c,firstDay:d}=p3(a),h=Array.from({length:c},(u,y)=>y+1),p=Array.from({length:d});return s.jsxs("div",{className:"relative w-full",children:[s.jsxs("div",{ref:o,onClick:()=>n(!r),className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl flex items-center gap-2 cursor-pointer hover:border-pink-400 transition",children:[s.jsx(en,{size:16,className:"text-pink-600 dark:text-pink-400"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200 font-medium",children:t?new Date(t).toLocaleDateString("pl-PL"):"Wybierz dat"})]}),r&&l.width>0&&Ht.createPortal(s.jsxs("div",{className:"fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 animate-in fade-in zoom-in-95 duration-100 w-[280px]",style:{top:l.top,left:l.left},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:u=>{u.stopPropagation(),i(new Date(a.setMonth(a.getMonth()-1)))},className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsx(Ei,{size:18})}),s.jsx("span",{className:"text-sm font-bold capitalize",children:a.toLocaleDateString("pl-PL",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:u=>{u.stopPropagation(),i(new Date(a.setMonth(a.getMonth()+1)))},className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsx(Fi,{size:18})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2 text-[10px] font-bold text-gray-400 uppercase",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(u=>s.jsx("div",{children:u},u))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[p.map((u,y)=>s.jsx("div",{},`e-${y}`)),h.map(u=>{const y=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`;return s.jsx("button",{onClick:b=>{b.stopPropagation(),A(u)},className:`h-8 w-8 rounded-lg text-xs font-medium transition ${t===y?"bg-pink-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:u},u)})]})]}),document.body)]})},sH=({label:t,options:e,value:r,onChange:n})=>{const[a,i]=C.useState(!1),o=C.useRef(null),l=Qw(o,a),A=r?r.split(",").map(d=>d.trim()).filter(Boolean):[],c=d=>{let h;A.includes(d)?h=A.filter(p=>p!==d):h=[...A,d],n(h.join(", "))};return s.jsxs("div",{className:"relative group",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsxs("div",{ref:o,className:"w-full min-h-[42px] px-3 py-2 bg-white/50 dark:bg-gray-800/50 border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus-within:ring-2 focus-within:ring-pink-500/20 cursor-pointer flex flex-wrap gap-2 items-center",onClick:()=>i(!a),children:[A.length===0?s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Wybierz osoby..."}):A.map((d,h)=>s.jsxs("span",{className:"bg-pink-100 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-2 py-0.5 rounded-lg text-xs font-medium border border-pink-200 dark:border-pink-800 flex items-center gap-1",children:[d," ",s.jsx("span",{onClick:p=>{p.stopPropagation(),c(d)},className:"hover:bg-pink-200 rounded-full cursor-pointer",children:s.jsx(Nt,{size:10})})]},h)),s.jsx("div",{className:"ml-auto",children:s.jsx(tn,{size:16,className:"text-gray-400"})})]}),a&&l.width>0&&Ht.createPortal(s.jsx("div",{className:"fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar",style:{top:l.top,left:l.left,width:l.width},children:!e||e.length===0?s.jsx("div",{className:"p-3 text-center text-gray-400 text-xs",children:"Brak osb w bazie"}):e.map(d=>{const h=d.fullname||d.name||"Brak danych",p=A.includes(h);return s.jsxs("div",{className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-pink-50 dark:hover:bg-pink-900/20 ${p?"bg-pink-50 dark:bg-pink-900/30 text-pink-700":"text-gray-700 dark:text-gray-300"}`,onClick:()=>c(h),children:[s.jsx("span",{children:h}),p&&s.jsx(Un,{size:16})]},d.id)})}),document.body)]})},p3=t=>{const e=t.getFullYear(),r=t.getMonth(),n=new Date(e,r+1,0).getDate(),a=new Date(e,r,1).getDay();return{days:n,firstDay:a===0?6:a-1}},iH=({songs:t,onSelect:e})=>{const[r,n]=C.useState(!1),[a,i]=C.useState(""),o=C.useRef(null),l=Qw(o,r);C.useEffect(()=>{if(!r)return;const c=d=>{o.current&&!o.current.contains(d.target)&&!d.target.closest(".portal-song-selector")&&n(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[r]);const A=t.filter(c=>c.title.toLowerCase().includes(a.toLowerCase()));return s.jsxs("div",{className:"relative w-full",children:[s.jsxs("div",{ref:o,className:"w-full px-3 py-2 bg-pink-50 dark:bg-pink-900/20 border border-pink-100 dark:border-pink-800 rounded-lg text-sm text-pink-800 dark:text-pink-300 font-medium flex items-center justify-between cursor-pointer hover:bg-pink-100 dark:hover:bg-pink-900/30 transition",onClick:()=>n(!r),children:[s.jsx("span",{children:"Wybierz pie..."}),s.jsx(tn,{size:16,className:"text-pink-400"})]}),r&&Ht.createPortal(s.jsxs("div",{className:"portal-song-selector fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl max-h-60 flex flex-col overflow-hidden",style:{top:l.top,left:l.left,width:l.width},children:[s.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:s.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-900 px-2 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx(No,{size:14,className:"text-gray-400"}),s.jsx("input",{autoFocus:!0,className:"bg-transparent outline-none text-sm w-full text-gray-700 dark:text-gray-200 placeholder-gray-400",placeholder:"Szukaj...",value:a,onChange:c=>i(c.target.value)})]})}),s.jsx("div",{className:"overflow-y-auto flex-1 max-h-48 custom-scrollbar",children:A.length===0?s.jsx("div",{className:"p-3 text-xs text-gray-400 text-center",children:"Brak wynikw"}):A.map(c=>s.jsxs("div",{className:"px-4 py-2 hover:bg-pink-50 dark:hover:bg-pink-900/20 cursor-pointer text-sm text-gray-700 dark:text-gray-300 flex justify-between items-center border-b border-gray-50 dark:border-gray-800 last:border-0",onClick:()=>{e(c),n(!1),i("")},children:[s.jsx("span",{className:"font-medium",children:c.title}),s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded border border-gray-200 dark:border-gray-700",children:c.key})]},c.id))})]}),document.body)]})},oH=({item:t,idx:e,songDef:r,onRemove:n,onChangeKey:a})=>{const{attributes:i,listeners:o,setNodeRef:l,transform:A,transition:c}=Rg({id:t.internalId}),d={transform:Po.Transform.toString(A),transition:c,zIndex:A?999:"auto",position:"relative"};return s.jsxs("div",{ref:l,style:d,className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-white dark:bg-gray-800 border border-pink-100 dark:border-pink-900/30 rounded-lg shadow-sm group",children:[s.jsx("div",{...i,...o,className:"cursor-grab text-gray-300 dark:text-gray-600 hover:text-pink-600 dark:hover:text-pink-400 active:cursor-grabbing",children:s.jsx(gg,{size:14})}),s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsxs("span",{className:"text-pink-700 dark:text-pink-400 font-medium text-xs",children:[e+1,"."]}),s.jsx("span",{className:"text-gray-700 dark:text-gray-200 text-sm truncate",children:(r==null?void 0:r.title)||"Nieznana pie"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-[60px]",children:s.jsx(Pt,{compact:!0,options:aH.map(h=>({value:h,label:h})),value:t.key,onChange:h=>a(t.internalId,h)})}),s.jsx("button",{onClick:()=>n(t.internalId),className:"text-gray-300 dark:text-gray-600 hover:text-red-500 dark:hover:text-red-400 p-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition",children:s.jsx(Nt,{size:14})})]})]})},j0=({title:t,dataKey:e,fields:r,program:n,setProgram:a})=>s.jsxs("div",{className:"bg-white/60 dark:bg-gray-900/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/40 dark:border-gray-700/50 p-6 h-full hover:shadow-xl transition relative z-0",children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h3",{className:"font-bold text-lg bg-gradient-to-r from-pink-700 to-orange-700 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:t})}),s.jsx("div",{className:"space-y-4",children:r.map(i=>{var o;return s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:i.label}),s.jsx("input",{className:"w-full px-4 py-2.5 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-pink-500/20 outline-none text-sm transition text-gray-700 dark:text-gray-200",value:((o=n[e])==null?void 0:o[i.key])||"",onChange:l=>a(A=>({...A,[e]:{...A[e],[i.key]:l.target.value}}))})]},i.key)})})]}),lH=({row:t,index:e,program:r,setProgram:n,onRemove:a,songs:i})=>{const{attributes:o,listeners:l,setNodeRef:A,transform:c,transition:d}=Rg({id:t.id}),h={transform:Po.Transform.toString(c),transition:d,zIndex:c?999:"auto",position:"relative"},p=Lg(mu(gc,{activationConstraint:{distance:5}})),u=(t.element||"").toLowerCase().includes("uwielbienie"),y=(t.selectedSongs||t.songIds||[]).map(m=>{if(typeof m=="object")return m;const w=i.find(k=>k.id===m);return{internalId:Math.random(),songId:m,key:(w==null?void 0:w.key)||"C"}}),b=(m,w)=>{const k=[...r.schedule];k[e][m]=w,n(N=>({...N,schedule:k}))},v=m=>{const w=[...r.schedule];w[e].selectedSongs=m,w[e].songIds=m.map(k=>k.songId),n(k=>({...k,schedule:w}))},g=m=>{const{active:w,over:k}=m;if(w.id!==k.id){const N=y.findIndex(U=>U.internalId===w.id),S=y.findIndex(U=>U.internalId===k.id);v(pc(y,N,S))}};return s.jsxs("div",{ref:A,style:h,className:"grid grid-cols-12 gap-4 p-3 items-start hover:bg-pink-50/30 dark:hover:bg-pink-900/10 transition duration-150 bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsx("div",{className:"col-span-1 flex items-center justify-center pt-2 cursor-grab text-gray-300 dark:text-gray-600 hover:text-pink-500 dark:hover:text-pink-400 active:cursor-grabbing",...o,...l,children:s.jsx(gg,{size:20})}),s.jsx("div",{className:"col-span-3",children:s.jsx(Pt,{value:t.element,onChange:m=>b("element",m),options:nH.map(m=>({value:m,label:m}))})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-700 dark:text-gray-200",placeholder:"Osoba",value:t.person||"",onChange:m=>b("person",m.target.value)})}),s.jsxs("div",{className:"col-span-4 space-y-2",children:[s.jsx("input",{className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-pink-500/20 outline-none text-gray-700 dark:text-gray-200",placeholder:"Szczegy / Notatka",value:t.details||"",onChange:m=>b("details",m.target.value)}),u&&s.jsxs("div",{className:"mt-2",children:[s.jsx(iH,{songs:i,onSelect:m=>{const w={internalId:Date.now()+Math.random(),songId:m.id,key:m.key||"C"};v([...y,w])}}),s.jsx("div",{className:"mt-2 flex flex-col gap-1",children:s.jsx(Dg,{sensors:p,collisionDetection:Qg,onDragEnd:g,children:s.jsx(Og,{items:y.map(m=>m.internalId),strategy:zg,children:y.map((m,w)=>{const k=i.find(N=>N.id===m.songId);return k?s.jsx(oH,{item:m,idx:w,songDef:k,onRemove:N=>v(y.filter(S=>S.internalId!==N)),onChangeKey:(N,S)=>v(y.map(U=>U.internalId===N?{...U,key:S}:U))},m.internalId):null})})})})]})]}),s.jsx("div",{className:"col-span-1 flex justify-center pt-2",children:s.jsx("button",{onClick:()=>a(t.id),className:"text-gray-400 dark:text-gray-600 hover:text-red-500 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 p-1.5 rounded-lg transition",children:s.jsx(Zr,{size:18})})})]})},AH=({eventId:t,onClose:e,onSave:r,songs:n})=>{const[a,i]=C.useState(null),[o,l]=C.useState(!0),[A,c]=C.useState([]),d=Lg(mu(gc,{activationConstraint:{distance:5}}));C.useEffect(()=>{(async()=>{const{data:y}=await le.from("programs").select("*").eq("id",t).single(),{data:b}=await le.from("worshipteam").select("*");y&&(y.schedule||(y.schedule=[]),["atmosferateam","produkcja","scena","szkolka","zespol"].forEach(v=>{y[v]||(y[v]={})}),i(y)),b&&c(b),l(!1)})()},[t]);const h=async()=>{await le.from("programs").update(a).eq("id",a.id),r(),e()},p=u=>{const{active:y,over:b}=u;y.id!==b.id&&i(v=>{const g=v.schedule.findIndex(w=>w.id===y.id),m=v.schedule.findIndex(w=>w.id===b.id);return{...v,schedule:pc(v.schedule,g,m)}})};return o||!a?null:Ht.createPortal(s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-7xl h-[90vh] flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"p-6 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-b border-gray-200/50 dark:border-gray-700/50 flex justify-between items-center shrink-0 z-10",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500 to-orange-500 rounded-xl text-white shadow-lg shadow-pink-500/30",children:s.jsx(Ms,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Edycja Naboestwa"}),s.jsx("div",{className:"mt-1 w-48",children:s.jsx(Iw,{value:a.date,onChange:u=>i({...a,date:u})})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 rounded-xl transition font-medium",children:"Anuluj"}),s.jsxs("button",{onClick:h,className:"px-6 py-2.5 bg-gradient-to-r from-pink-600 to-orange-600 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-pink-500/30 flex items-center gap-2 transition transform hover:-translate-y-0.5",children:[s.jsx(ju,{size:18})," Zapisz"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar bg-gradient-to-br from-pink-50/50 via-white to-orange-50/50 dark:from-gray-900 dark:to-gray-800",children:[s.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/40 backdrop-blur-xl rounded-2xl shadow-lg border border-white/60 dark:border-gray-700/50 p-6 min-h-[500px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-6 bg-pink-600 dark:bg-pink-500 rounded-full"}),"Plan szczegowy"]}),s.jsx("button",{onClick:()=>i(u=>({...u,schedule:[...u.schedule,{id:Date.now(),element:"",person:"",details:""}]})),className:"bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-500 dark:to-orange-500 text-white text-sm px-4 py-2 rounded-xl font-bold hover:shadow-lg transition",children:"Dodaj Element"})]}),s.jsxs("div",{className:"bg-white/50 dark:bg-gray-900/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50 shadow-inner overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-4 p-4 border-b border-gray-200/50 dark:border-gray-700/50 bg-gray-50/50 dark:bg-gray-800/50 font-bold text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[s.jsx("div",{className:"col-span-1"}),s.jsx("div",{className:"col-span-3",children:"Element"}),s.jsx("div",{className:"col-span-3",children:"Osoba"}),s.jsx("div",{className:"col-span-4",children:"Szczegy / Notatki"}),s.jsx("div",{className:"col-span-1"})]}),s.jsx(Dg,{sensors:d,collisionDetection:Qg,onDragEnd:p,children:s.jsx(Og,{items:a.schedule.map(u=>u.id),strategy:zg,children:s.jsx("div",{children:a.schedule.map((u,y)=>s.jsx(lH,{row:u,index:y,program:a,setProgram:i,songs:n,onRemove:b=>i(v=>({...v,schedule:v.schedule.filter(g=>g.id!==b)}))},u.id))})})})]})]}),s.jsxs("div",{className:"bg-white/60 dark:bg-gray-900/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/40 dark:border-gray-700/50 p-6 relative z-50",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h3",{className:"font-bold text-lg bg-gradient-to-r from-pink-700 to-orange-700 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Zesp Uwielbienia"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{key:"lider",label:"Lider Uwielbienia"},{key:"piano",label:"Piano"},{key:"gitaraakustyczna",label:"Gitara Akustyczna"},{key:"gitaraelektryczna",label:"Gitara Elektryczna"},{key:"bas",label:"Gitara Basowa"},{key:"wokale",label:"Wokale"},{key:"cajon",label:"Cajon / Perkusja"}].map(u=>{var y;return s.jsx(sH,{label:u.label,options:A,value:(y=a.zespol)==null?void 0:y[u.key],onChange:b=>i(v=>({...v,zespol:{...v.zespol,[u.key]:b}}))},u.key)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 relative z-0",children:[s.jsx(j0,{title:"Atmosfera Team",dataKey:"atmosferateam",program:a,setProgram:i,fields:[{key:"przygotowanie",label:"Przygotowanie"},{key:"witanie",label:"Witanie"}]}),s.jsx(j0,{title:"Produkcja",dataKey:"produkcja",program:a,setProgram:i,fields:[{key:"naglosnienie",label:"Nagonienie"},{key:"propresenter",label:"ProPresenter"},{key:"social",label:"Social Media"},{key:"host",label:"Host wydarzenia"}]}),s.jsx(j0,{title:"Scena",dataKey:"scena",program:a,setProgram:i,fields:[{key:"prowadzenie",label:"Prowadzenie"},{key:"modlitwa",label:"Modlitwa"},{key:"kazanie",label:"Kazanie"},{key:"wieczerza",label:"Wieczerza"},{key:"ogloszenia",label:"Ogoszenia"}]}),s.jsx(j0,{title:"Szkka Niedzielna",dataKey:"szkolka",program:a,setProgram:i,fields:[{key:"mlodsza",label:"Grupa Modsza"},{key:"srednia",label:"Grupa rednia"},{key:"starsza",label:"Grupa Starsza"}]})]})]})]})}),document.body)},cH=({date:t,onClose:e,onSelectTask:r,onSelectEvent:n})=>Ht.createPortal(s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-md w-full p-6 border border-white/20 dark:border-gray-700 relative",children:[s.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:s.jsx(Nt,{size:20,className:"text-gray-500"})}),s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2 flex items-center gap-2",children:[s.jsx(Wt,{size:24,className:"text-pink-600"})," Co chcesz doda?"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:t?new Date(t).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long"}):"Wybierz typ"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-3 p-6 bg-gradient-to-br from-pink-50 to-orange-50 dark:from-pink-900/20 dark:to-orange-900/20 border-2 border-pink-200 dark:border-pink-800 rounded-2xl hover:border-pink-400 dark:hover:border-pink-600 hover:shadow-lg transition group",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center text-white shadow-lg shadow-pink-500/30 group-hover:scale-110 transition",children:s.jsx(tw,{size:28})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:"Wydarzenie"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Naboestwo, spotkanie..."})]})]}),s.jsxs("button",{onClick:r,className:"flex flex-col items-center gap-3 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-2xl hover:border-blue-400 dark:hover:border-blue-600 hover:shadow-lg transition group",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center text-white shadow-lg shadow-blue-500/30 group-hover:scale-110 transition",children:s.jsx(gL,{size:28})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:"Zadanie"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Do zrobienia, reminder..."})]})]})]})]})}),document.body),dH=({date:t,categories:e,onClose:r,onSelectCategory:n})=>Ht.createPortal(s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20 dark:border-gray-700 relative",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:s.jsx(Nt,{size:20,className:"text-gray-500"})}),s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2 flex items-center gap-2",children:[s.jsx(tw,{size:24,className:"text-pink-600"})," Wybierz kategori wydarzenia"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:t?new Date(t).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long"}):""}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>n("naboestwo"),className:"w-full flex items-center gap-4 p-4 bg-gradient-to-r from-pink-50 to-orange-50 dark:from-pink-900/20 dark:to-orange-900/20 border-2 border-pink-200 dark:border-pink-800 rounded-xl hover:border-pink-400 dark:hover:border-pink-600 hover:shadow-md transition group",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center text-white shadow-lg shadow-pink-500/30 group-hover:scale-105 transition",children:s.jsx(Ms,{size:24})}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:"Naboestwo"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Peny program z pieniami i subami"})]})]}),e.map(a=>s.jsxs("button",{onClick:()=>n(a.label),className:"w-full flex items-center gap-4 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-pink-300 dark:hover:border-pink-600 hover:bg-pink-50/50 dark:hover:bg-pink-900/10 transition group",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-hover:bg-pink-100 dark:group-hover:bg-pink-900/30 group-hover:text-pink-600 dark:group-hover:text-pink-400 transition",children:s.jsx(en,{size:24})}),s.jsx("div",{className:"text-left flex-1",children:s.jsx("div",{className:"font-bold text-gray-800 dark:text-white",children:a.label})})]},a.id)),e.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-400 dark:text-gray-500 text-sm",children:[s.jsx("p",{children:"Brak dodatkowych kategorii."}),s.jsx("p",{className:"text-xs mt-1",children:"Dodaj kategorie w Ustawienia  Sowniki  Kategorie Wydarze"})]})]})]})}),document.body),uH=({initialEvent:t,category:e,onClose:r,onSave:n,onDelete:a})=>{const[i,o]=C.useState(t||{title:"",description:"",category:e||"",date:new Date().toISOString().split("T")[0],time:"10:00",end_time:"12:00",location:""});C.useEffect(()=>{t&&o({...t,category:t.category||e||"",location:t.location||"",description:t.description||""})},[t,e]);const l=async()=>{if(!i.title)return alert("Podaj tytu wydarzenia");const A={title:i.title,description:i.description||"",category:i.category||e,date:i.date,time:i.time||"10:00",end_time:i.end_time||"",location:i.location||""};i.id&&(A.id=i.id),n(A),r()};return Ht.createPortal(s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20 dark:border-gray-700 relative",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:s.jsx(Nt,{size:20,className:"text-gray-500"})}),s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-1 flex items-center gap-2",children:[s.jsx(tw,{size:24,className:"text-pink-600"}),i.id?"Edytuj Wydarzenie":"Nowe Wydarzenie"]}),s.jsx("div",{className:"mb-6",children:s.jsx("span",{className:"inline-block px-3 py-1 bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 text-xs font-bold rounded-full",children:i.category||e})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tytu"}),s.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-pink-500/20 outline-none",value:i.title,onChange:A=>o({...i,title:A.target.value}),placeholder:"Nazwa wydarzenia"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Data"}),s.jsx(Iw,{value:i.date,onChange:A=>o({...i,date:A})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Godzina rozpoczcia"}),s.jsxs("div",{className:"relative",children:[s.jsx(Au,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"time",className:"w-full pl-9 pr-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white text-sm",value:i.time,onChange:A=>o({...i,time:A.target.value})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Godzina zakoczenia"}),s.jsxs("div",{className:"relative",children:[s.jsx(Au,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"time",className:"w-full pl-9 pr-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white text-sm",value:i.end_time||"",onChange:A=>o({...i,end_time:A.target.value})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Miejsce"}),s.jsxs("div",{className:"relative",children:[s.jsx(XA,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white text-sm",value:i.location||"",onChange:A=>o({...i,location:A.target.value}),placeholder:"np. Sala gwna"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Opis"}),s.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white text-sm h-24 resize-none",value:i.description||"",onChange:A=>o({...i,description:A.target.value}),placeholder:"Szczegy wydarzenia..."})]})]}),s.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.id&&a?s.jsxs("button",{onClick:()=>a(i.id),className:"text-red-500 hover:bg-red-50 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1",children:[s.jsx(Zr,{size:16})," Usu"]}):s.jsx("div",{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition",children:"Anuluj"}),s.jsxs("button",{onClick:l,className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-orange-600 text-white font-bold rounded-xl hover:shadow-lg shadow-pink-500/30 flex items-center gap-2 transition",children:[s.jsx(ju,{size:16})," Zapisz"]})]})]})]})}),document.body)},hH=({initialTask:t,onClose:e,onSave:r,onDelete:n})=>{const[a,i]=C.useState(t||{title:"",description:"",team:"media",due_date:new Date().toISOString().split("T")[0],due_time:"10:00",location:"",status:"Do zrobienia"});C.useEffect(()=>{t&&i({...t,location:t.location||"",description:t.description||""})},[t]);const o=A=>{i(c=>({...c,due_date:A}))},l=()=>{if(!a.title)return alert("Podaj tytu");const A=a.due_date,c=a.due_time||"00:00",d=new Date(`${A}T${c}:00`),h={title:a.title,description:a.description||"",team:a.team||"media",due_date:d.toISOString(),location:a.location||"",status:a.status||"Do zrobienia"};a.id&&(h.id=a.id),r(h),e()};return Ht.createPortal(s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20 dark:border-gray-700 relative",children:[s.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:s.jsx(Nt,{size:20,className:"text-gray-500"})}),s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[a.id?s.jsx(fg,{size:24,className:"text-blue-600"}):s.jsx(Wt,{size:24,className:"text-blue-600"}),a.id?"Edytuj Zadanie":"Nowe Zadanie"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tytu"}),s.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500/20 outline-none",value:a.title,onChange:A=>i({...a,title:A.target.value}),placeholder:"Co jest do zrobienia?"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Kategoria"}),s.jsx(Pt,{value:a.team,onChange:A=>i({...a,team:A}),options:Object.entries(Ao).filter(([A])=>A!=="program").map(([A,c])=>({value:A,label:c.label}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Miejsce"}),s.jsxs("div",{className:"relative",children:[s.jsx(XA,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{className:"w-full pl-9 pr-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white text-sm",value:a.location||"",onChange:A=>i({...a,location:A.target.value}),placeholder:"np. Biuro"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Data"}),s.jsx(Iw,{value:a.due_date,onChange:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Godzina"}),s.jsxs("div",{className:"relative",children:[s.jsx(Au,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"time",className:"w-full pl-9 pr-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white text-sm",value:a.due_time,onChange:A=>i({...a,due_time:A.target.value})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Opis"}),s.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white text-sm h-24 resize-none",value:a.description||"",onChange:A=>i({...a,description:A.target.value}),placeholder:"Szczegy zadania..."})]})]}),s.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[a.id&&n?s.jsxs("button",{onClick:()=>n(a.id),className:"text-red-500 hover:bg-red-50 px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1",children:[s.jsx(Zr,{size:16})," Usu"]}):s.jsx("div",{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition",children:"Anuluj"}),s.jsxs("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 flex items-center gap-2 shadow-lg shadow-blue-500/30 transition",children:[s.jsx(ju,{size:16})," Zapisz"]})]})]})]})}),document.body)},rB=({event:t,onClick:e})=>{const r=Ao[t.team]||Ao.media,n={blue:"bg-blue-100 text-blue-700 border-blue-200",orange:"bg-orange-100 text-orange-700 border-orange-200",pink:"bg-pink-100 text-pink-700 border-pink-200",purple:"bg-purple-100 text-purple-700 border-purple-200",yellow:"bg-yellow-100 text-yellow-700 border-yellow-200",teal:"bg-teal-100 text-teal-700 border-teal-200"},a=n[r.color]||n.orange;let i="";if(t.raw){if(t.raw.due_time&&t.raw.due_time.length===5)i=t.raw.due_time;else if(t.raw.due_date&&t.raw.due_date.includes("T")){const o=t.raw.due_date.split("T")[1].split(":");i=`${o[0]}:${o[1]}`}}return s.jsxs("div",{onClick:o=>{o.stopPropagation(),e(t)},className:`text-[10px] px-1.5 py-1 rounded-md border mb-1 cursor-pointer truncate flex items-center gap-1 transition hover:brightness-95 ${a}`,children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-50"}),s.jsx("span",{className:"truncate font-medium",children:t.title}),i&&s.jsx("span",{className:"ml-auto opacity-60 text-[9px]",children:i})]})};function fH(){const[t,e]=C.useState(new Date),[r,n]=C.useState([]),[a,i]=C.useState([]),[o,l]=C.useState(Object.keys(Ao)),[A,c]=C.useState({addTask:null,editProgram:null,selectType:null,selectCategory:null,addEvent:null}),[d,h]=C.useState("month"),[p,u]=C.useState([]);C.useEffect(()=>{v(),b(),y()},[t.getMonth()]);const y=async()=>{const{data:E}=await le.from("app_dictionaries").select("*").eq("category","event_category");E&&u(E)},b=async()=>{const{data:E}=await le.from("songs").select("*");E&&i(E)},v=async()=>{const{data:E}=await le.from("programs").select("*"),{data:z}=await le.from("tasks").select("*"),{data:K}=await le.from("events").select("*"),W=[];E==null||E.forEach(J=>W.push({id:J.id,type:"program",team:"program",title:J.title||"Naboestwo",date:new Date(J.date),raw:J})),K==null||K.forEach(J=>{if(!J.date)return;const re=new Date(J.date);isNaN(re.getTime())||W.push({id:J.id,type:"event",team:"program",title:J.title,date:re,raw:{...J,due_time:J.time||"10:00"}})}),z==null||z.forEach(J=>{if(!J.due_date)return;const re=new Date(J.due_date);if(isNaN(re.getTime()))return;let be="00:00",me=J.due_date.split("T")[0];if(J.due_date.includes("T")){const ae=J.due_date.split("T")[1],[X,ye]=ae.split(":");be=`${X}:${ye}`}W.push({id:J.id,type:"task",team:J.team||"media",title:J.title,date:re,status:J.status,raw:{...J,due_time:be,due_date:me}})}),n(W.filter(J=>J.date))},g=async E=>{let z=null;if(E.id){const{error:K}=await le.from("tasks").update(E).eq("id",E.id);z=K}else{const{error:K}=await le.from("tasks").insert([E]);z=K}z?(alert(`Bd zapisu: ${z.message}`),console.error(z)):v()},m=async E=>{confirm("Czy na pewno chcesz usun to zadanie?")&&(await le.from("tasks").delete().eq("id",E),c({...A,addTask:null}),v())},w=async()=>{v()},k=async E=>{let z=null;if(E.id){const{error:K}=await le.from("events").update(E).eq("id",E.id);z=K}else{const{error:K}=await le.from("events").insert([E]);z=K}z?(alert(`Bd zapisu wydarzenia: ${z.message}`),console.error(z)):v()},N=async E=>{confirm("Czy na pewno chcesz usun to wydarzenie?")&&(await le.from("events").delete().eq("id",E),c({...A,addEvent:null}),v())},S=E=>{c({...A,selectType:{date:E}})},U=()=>{var z;const E=(z=A.selectType)==null?void 0:z.date;c({...A,selectType:null,selectCategory:{date:E}})},Q=()=>{var z;const E=(z=A.selectType)==null?void 0:z.date;c({...A,selectType:null,addTask:{due_date:E,due_time:"10:00",team:"media"}})},L=async E=>{var K;const z=(K=A.selectCategory)==null?void 0:K.date;if(E.toLowerCase()==="naboestwo"){const{data:W,error:J}=await le.from("programs").insert([{date:z,schedule:[],zespol:{lider:"",piano:"",gitara_akustyczna:"",gitara_elektryczna:"",bas:"",wokale:"",cajon:"",notatki:"",absencja:""},atmosfera_team:{przygotowanie:"",witanie:""},produkcja:{naglosnienie:"",propresenter:"",social:"",host:""},scena:{prowadzenie:"",czytanie:"",kazanie:"",modlitwa:"",wieczerza:"",ogloszenia:""},szkolka:{mlodsza:"",srednia:"",starsza:""}}]).select().single();if(J){alert("Bd tworzenia naboestwa: "+J.message);return}c({...A,selectCategory:null,editProgram:W.id}),v()}else c({...A,selectCategory:null,addEvent:{date:z,category:E,title:"",time:"10:00"}})},V=E=>{E.type==="program"?c({...A,editProgram:E.id}):E.type==="event"?c({...A,addEvent:E.raw}):c({...A,addTask:E.raw})},F=()=>e(new Date(t.getFullYear(),t.getMonth()+1,1)),D=()=>e(new Date(t.getFullYear(),t.getMonth()-1,1)),{days:T,firstDay:G}=p3(t),ne=Array.from({length:T},(E,z)=>z+1),ce=Array.from({length:G}),ue=r.filter(E=>o.includes(E.team)),Y=()=>s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:["Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota","Niedziela"].map(E=>s.jsx("div",{className:"py-3 text-center text-xs font-bold text-gray-500 uppercase",children:E},E))}),s.jsxs("div",{className:"flex-1 grid grid-cols-7 auto-rows-fr bg-gray-200 dark:bg-gray-700 gap-px overflow-y-auto custom-scrollbar",children:[ce.map((E,z)=>s.jsx("div",{className:"bg-gray-50/50 dark:bg-gray-900/50"},`em-${z}`)),ne.map(E=>{const z=new Date(t.getFullYear(),t.getMonth(),E),K=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(E).padStart(2,"0")}`,W=ue.filter(J=>J.date.getDate()===E&&J.date.getMonth()===t.getMonth());return s.jsxs("div",{className:"bg-white dark:bg-gray-900 min-h-[100px] p-2 relative group hover:bg-gray-50 dark:hover:bg-gray-800/50 transition",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:`text-sm font-bold w-7 h-7 flex items-center justify-center rounded-full ${E===new Date().getDate()&&t.getMonth()===new Date().getMonth()?"bg-pink-600 text-white":"text-gray-700 dark:text-gray-300"}`,children:E}),s.jsx("button",{onClick:()=>S(K),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-400",children:s.jsx(Wt,{size:14})})]}),s.jsx("div",{className:"space-y-1 overflow-y-auto max-h-[100px] custom-scrollbar",children:W.map(J=>s.jsx(rB,{event:J,onClick:()=>V(J)},J.id))})]},E)}),Array.from({length:(42-(T+G))%7}).map((E,z)=>s.jsx("div",{className:"bg-gray-50/50 dark:bg-gray-900/50"},`end-${z}`))]})]}),Ae=()=>{const E=new Date(t),z=E.getDate()-E.getDay()+1,K=Array.from({length:7},(W,J)=>new Date(new Date(E).setDate(z+J)));return s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:K.map(W=>s.jsxs("div",{className:"py-3 text-center border-r border-gray-100 dark:border-gray-700/50 last:border-0",children:[s.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:W.toLocaleDateString("pl-PL",{weekday:"short"})}),s.jsx("div",{className:`text-lg font-bold w-8 h-8 rounded-full flex items-center justify-center mx-auto ${W.getDate()===new Date().getDate()&&W.getMonth()===new Date().getMonth()?"bg-pink-600 text-white":"text-gray-800 dark:text-white"}`,children:W.getDate()})]},W.toString()))}),s.jsx("div",{className:"flex-1 grid grid-cols-7 divide-x divide-gray-100 dark:divide-gray-700/50 overflow-y-auto custom-scrollbar bg-white dark:bg-gray-900",children:K.map(W=>{const J=`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}-${String(W.getDate()).padStart(2,"0")}`,re=ue.filter(be=>be.date.getDate()===W.getDate()&&be.date.getMonth()===W.getMonth());return s.jsxs("div",{className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-800/30 transition min-h-[200px]",children:[re.map(be=>s.jsx(rB,{event:be,onClick:()=>V(be)},be.id)),s.jsxs("button",{onClick:()=>S(J),className:"w-full mt-2 py-2 text-xs text-gray-300 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/20 border border-dashed border-gray-200 dark:border-gray-700 rounded-lg transition flex items-center justify-center gap-1",children:[s.jsx(Wt,{size:12})," Dodaj"]})]},W.toString())})})]})},fe=()=>{const E=ue.filter(K=>K.date.getDate()===t.getDate()&&K.date.getMonth()===t.getMonth()),z=Array.from({length:15},(K,W)=>W+8);return s.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-900 overflow-y-auto custom-scrollbar flex",children:[s.jsx("div",{className:"w-16 flex-shrink-0 border-r border-gray-100 dark:border-gray-700/50 bg-gray-50/50 dark:bg-gray-900",children:z.map(K=>s.jsxs("div",{className:"h-[80px] border-b border-gray-100 dark:border-gray-800 text-right pr-3 pt-2 text-xs text-gray-400 font-medium relative",children:[String(K).padStart(2,"0"),":00"]},K))}),s.jsxs("div",{className:"flex-1 relative min-h-[1200px]",children:[z.map(K=>s.jsx("div",{className:"h-[80px] border-b border-gray-100 dark:border-gray-800/50 w-full absolute",style:{top:(K-8)*80}},K)),E.map(K=>{var me;let W,J;K.raw.due_time?[W,J]=K.raw.due_time.split(":").map(Number):(W=K.date.getHours(),J=K.date.getMinutes());const be=((Math.max(8,W)-8)*60+J)/60*80;return s.jsxs("div",{onClick:()=>V(K),className:`absolute left-2 right-2 rounded-xl p-3 shadow-sm border cursor-pointer hover:shadow-md transition z-10 ${K.team==="program"?"bg-pink-50 border-pink-200 text-pink-800":"bg-blue-50 border-blue-200 text-blue-800"}`,style:{top:`${be}px`,height:"70px"},children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold opacity-70 mb-1",children:[s.jsx(Au,{size:12}),String(W).padStart(2,"0"),":",String(J).padStart(2,"0")]}),s.jsx("div",{className:"font-bold truncate",children:K.title}),s.jsx("div",{className:"text-xs opacity-60 truncate",children:(me=Ao[K.team])==null?void 0:me.label})]},K.id)}),t.getDate()===new Date().getDate()&&s.jsx("div",{className:"absolute w-full border-t-2 border-red-400 z-20 flex items-center",style:{top:`${((new Date().getHours()-8)*60+new Date().getMinutes())/60*80}px`},children:s.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full -ml-1"})})]})]})},we=()=>{const E=[...ue].sort((z,K)=>z.date-K.date);return s.jsx("div",{className:"flex-1 bg-white dark:bg-gray-900 overflow-y-auto custom-scrollbar p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-2",children:[E.map(z=>{var K,W,J,re;return s.jsxs("div",{onClick:()=>V(z),className:"flex items-center gap-4 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-100 dark:border-gray-800 last:border-0 cursor-pointer transition",children:[s.jsxs("div",{className:"w-16 text-center",children:[s.jsx("div",{className:"text-xs text-gray-400 uppercase font-bold",children:z.date.toLocaleDateString("pl-PL",{month:"short"})}),s.jsx("div",{className:"text-xl font-bold text-gray-800 dark:text-white",children:z.date.getDate()})]}),s.jsx("div",{className:`w-1 self-stretch rounded-full ${((K=Ao[z.team])==null?void 0:K.color)==="pink"?"bg-pink-500":"bg-gray-300"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200",children:z.title}),s.jsxs("div",{className:"text-xs text-gray-500 flex gap-3 mt-0.5",children:[s.jsx("span",{children:((W=Ao[z.team])==null?void 0:W.label)||((J=z.raw)==null?void 0:J.category)}),((re=z.raw)==null?void 0:re.due_time)&&s.jsxs("span",{children:[" ",z.raw.due_time]})]})]})]},z.id)}),E.length===0&&s.jsx("div",{className:"text-center text-gray-400 py-10",children:"Brak wydarze w tym miesicu"})]})})};return s.jsxs("div",{className:"h-[calc(100vh-3rem)] flex flex-col gap-4",children:[s.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/30 rounded-lg text-pink-600 dark:text-pink-400",children:s.jsx(en,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Kalendarz"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Zarzdzanie wydarzeniami i zadaniami"})]})]}),s.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-xl",children:[{id:"month",icon:aw,label:"Miesic"},{id:"week",icon:AL,label:"Tydzie"},{id:"day",icon:fL,label:"Dzie"},{id:"list",icon:mg,label:"Lista"}].map(E=>s.jsxs("button",{onClick:()=>h(E.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 transition ${d===E.id?"bg-white dark:bg-gray-800 text-pink-600 dark:text-pink-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(E.icon,{size:14})," ",E.label]},E.id))})]}),s.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[s.jsxs("div",{className:"w-64 flex-shrink-0 flex flex-col gap-6",children:[s.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"font-bold text-lg text-gray-800 dark:text-white capitalize",children:t.toLocaleDateString("pl-PL",{month:"long",year:"numeric"})}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:D,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:s.jsx(Ei,{size:16})}),s.jsx("button",{onClick:F,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:s.jsx(Fi,{size:16})})]})]}),s.jsx("div",{className:"grid grid-cols-7 text-center text-xs text-gray-400 mb-2",children:["Pon","Wt","r","Czw","Pt","Sob","Nd"].map(E=>s.jsx("div",{className:"py-1",children:E.charAt(0)},E))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[ce.map((E,z)=>s.jsx("div",{},`e-${z}`)),ne.map(E=>s.jsx("div",{onClick:()=>e(new Date(t.getFullYear(),t.getMonth(),E)),className:`h-8 w-8 flex items-center justify-center text-sm rounded-full cursor-pointer hover:bg-pink-50 dark:hover:bg-gray-700 ${E===t.getDate()?"bg-pink-600 text-white font-bold":"text-gray-700 dark:text-gray-300"}`,children:E},E))]})]}),s.jsxs("div",{className:"flex-1 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"font-bold text-gray-500 uppercase text-xs mb-4 tracking-wider",children:"Twoje Kalendarze"}),s.jsx("div",{className:"space-y-2",children:Object.entries(Ao).map(([E,z])=>s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition select-none",children:[s.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-300 text-pink-600 focus:ring-pink-500 rounded cursor-pointer accent-pink-600",checked:o.includes(E),onChange:()=>l(K=>K.includes(E)?K.filter(W=>W!==E):[...K,E])}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:z.label})]},E))}),s.jsxs("button",{onClick:()=>S(new Date().toISOString().split("T")[0]),className:"w-full mt-6 py-3 bg-gradient-to-r from-pink-600 to-orange-600 text-white font-bold rounded-xl shadow-lg shadow-pink-500/30 flex items-center justify-center gap-2 hover:shadow-pink-500/50 transition transform hover:-translate-y-0.5",children:[s.jsx(Wt,{size:18})," Dodaj"]})]})]}),s.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-900/50 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 flex flex-col overflow-hidden",children:[d==="month"&&Y(),d==="week"&&Ae(),d==="day"&&fe(),d==="list"&&we()]})]}),A.selectType&&s.jsx(cH,{date:A.selectType.date,onClose:()=>c({...A,selectType:null}),onSelectTask:Q,onSelectEvent:U}),A.selectCategory&&s.jsx(dH,{date:A.selectCategory.date,categories:p,onClose:()=>c({...A,selectCategory:null}),onSelectCategory:L}),A.addEvent&&s.jsx(uH,{initialEvent:A.addEvent,category:A.addEvent.category,onClose:()=>c({...A,addEvent:null}),onSave:k,onDelete:N}),A.addTask&&s.jsx(hH,{initialTask:A.addTask,onClose:()=>c({...A,addTask:null}),onSave:g,onDelete:m}),A.editProgram&&s.jsx(AH,{eventId:A.editProgram,onClose:()=>c({...A,editProgram:null}),onSave:w,songs:a})]})}function gH(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e,t]),r}function nB({label:t,value:e,onChange:r,placeholder:n="Wybierz dat",compact:a=!1}){const[i,o]=C.useState(!1),[l,A]=C.useState(e?new Date(e):new Date),c=C.useRef(null),d=gH(c,i);C.useEffect(()=>{e&&A(new Date(e))},[e]),C.useEffect(()=>{if(!i)return;function S(U){c.current&&!c.current.contains(U.target)&&(U.target.closest(".portal-datepicker")||o(!1))}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[i]);const h=S=>{S.stopPropagation(),A(new Date(l.getFullYear(),l.getMonth()-1,1))},p=S=>{S.stopPropagation(),A(new Date(l.getFullYear(),l.getMonth()+1,1))},u=S=>{const U=new Date(l.getFullYear(),l.getMonth(),S),Q=U.getFullYear(),L=String(U.getMonth()+1).padStart(2,"0"),V=String(U.getDate()).padStart(2,"0");r(`${Q}-${L}-${V}`),o(!1)},y=(S,U)=>new Date(S,U+1,0).getDate(),b=(S,U)=>{const Q=new Date(S,U,1).getDay();return Q===0?6:Q-1},v=y(l.getFullYear(),l.getMonth()),g=b(l.getFullYear(),l.getMonth()),m=Array.from({length:v},(S,U)=>U+1),w=Array.from({length:g},(S,U)=>U),k=l.toLocaleDateString("pl-PL",{month:"long",year:"numeric"}),N=e?new Date(e).toLocaleDateString("pl-PL"):"";return s.jsxs("div",{className:"relative w-full",children:[t&&s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1 ml-1",children:t}),s.jsx("div",{ref:c,onClick:()=>o(!i),className:`w-full ${a?"px-2 py-1 text-xs h-[26px]":"px-4 py-3"} border rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm cursor-pointer flex justify-between items-center transition-all
          ${i?"border-pink-500 ring-2 ring-pink-500/20 dark:border-pink-400":"border-gray-200/50 dark:border-gray-700/50 hover:border-pink-300 dark:hover:border-pink-600"}
        `,children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(en,{size:a?14:16,className:"text-gray-400"}),s.jsx("span",{className:N?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:N||n})]})}),i&&d.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-datepicker fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 animate-in fade-in zoom-in-95 duration-100",style:{top:d.top,left:d.left,width:"280px"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:h,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Ei,{size:18})}),s.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 capitalize",children:k}),s.jsx("button",{onClick:p,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:s.jsx(Fi,{size:18})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Pn","Wt","r","Cz","Pt","So","Nd"].map(S=>s.jsx("div",{className:"text-center text-[10px] font-bold text-gray-400 uppercase",children:S},S))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[w.map(S=>s.jsx("div",{},`blank-${S}`)),m.map(S=>{const U=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(S).padStart(2,"0")}`,Q=e===U,L=new Date().toDateString()===new Date(l.getFullYear(),l.getMonth(),S).toDateString();return s.jsx("button",{onClick:()=>u(S),className:`h-8 w-8 rounded-lg text-xs font-medium transition flex items-center justify-center
                    ${Q?"bg-pink-600 text-white shadow-md shadow-pink-500/30":L?"bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 border border-pink-100 dark:border-pink-800":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                  `,children:S},S)})]})]}),document.body)]})}function pH(t,e){const[r,n]=C.useState({top:0,left:0,width:0});return C.useEffect(()=>{if(e&&t.current){const a=()=>{const i=t.current.getBoundingClientRect();n({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})};return a(),window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}}},[e,t]),r}const mH=({options:t,value:e,onChange:r,placeholder:n="Wybierz..."})=>{const[a,i]=C.useState(!1),o=C.useRef(null),l=pH(o,a);C.useEffect(()=>{if(!a)return;function d(h){o.current&&!o.current.contains(h.target)&&(h.target.closest(".portal-table-select")||i(!1))}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[a]);const A=t.find(d=>d.value===e),c=A?A.label:n;return s.jsxs("div",{ref:o,className:"relative w-full",children:[s.jsxs("div",{onClick:()=>i(!a),className:`w-full min-h-[32px] px-2 py-1 bg-white dark:bg-gray-800 border rounded-lg text-xs cursor-pointer flex items-center justify-between transition
          ${a?"border-pink-500 ring-1 ring-pink-500/20":"border-gray-200 dark:border-gray-700 hover:border-pink-300 dark:hover:border-pink-500"}
        `,children:[s.jsx("span",{className:`truncate ${A?"text-gray-800 dark:text-gray-200":"text-gray-400 dark:text-gray-500 italic"}`,children:c}),s.jsx(tn,{size:12,className:`text-gray-400 transition-transform ${a?"rotate-180":""}`})]}),a&&l.width>0&&Ht.createPortal(s.jsxs("div",{className:"portal-table-select fixed z-[9999] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-in fade-in zoom-in-95 duration-100",style:{top:l.top,left:l.left,width:Math.max(l.width,150)},children:[t.map((d,h)=>{const p=d.value===e;return s.jsxs("div",{onClick:()=>{r(d.value),i(!1)},className:`px-3 py-1.5 text-xs cursor-pointer transition flex items-center justify-between
                  ${p?"bg-pink-50 dark:bg-pink-900/30 text-pink-600 dark:text-pink-300 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}
                `,children:[s.jsx("span",{children:d.label}),p&&s.jsx(Un,{size:12})]},h)}),t.length===0&&s.jsx("div",{className:"p-2 text-gray-400 text-xs text-center",children:"Brak opcji"})]}),document.body)]})},xH=({programs:t,speakers:e,series:r,onUpdateProgram:n})=>{const[a,i]=C.useState({}),o=t.reduce((b,v)=>{if(!v.date)return b;const g=new Date(v.date),m=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}`;return b[m]||(b[m]=[]),b[m].push(v),b},{}),l=Object.keys(o).sort().reverse();C.useEffect(()=>{const b=new Date().toISOString().slice(0,7);i(v=>({...v,[b]:!0}))},[]);const A=b=>{i(v=>({...v,[b]:!v[b]}))},c=b=>{const[v,g]=b.split("-");return new Date(v,g-1).toLocaleDateString("pl-PL",{month:"long",year:"numeric"}).replace(/^\w/,w=>w.toUpperCase())},d=b=>new Date(b).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"}),h=[{value:"",label:"-- Wybierz --"},...e.map(b=>({value:b.id,label:b.name}))],p=[{value:"",label:"-- Wybierz --"},...r.map(b=>({value:b.id,label:b.name}))],u=async(b,v,g)=>{const m=t.find(N=>N.id===b);if(!m)return;const k={...m.teaching||{},[v]:g};await n(b,{teaching:k})},y=[{key:"speaker_id",label:"Mwca",type:"select",options:h},{key:"series_id",label:"Seria",type:"select",options:p},{key:"title",label:"Tytu kazania",type:"text"},{key:"scripture",label:"Fragment",type:"text"},{key:"main_point",label:"Gwna myl",type:"text"},{key:"notes",label:"Notatki",type:"text"}];return s.jsxs("div",{className:"space-y-4",children:[l.map(b=>{const v=a[b];return s.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm relative z-0 transition-all duration-300 ${v?"mb-8":"mb-0"}`,children:[s.jsxs("button",{onClick:()=>A(b),className:`w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 flex justify-between items-center transition border-b border-gray-200 dark:border-gray-700 ${v?"rounded-t-2xl":"rounded-2xl"}`,children:[s.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-100 text-sm uppercase tracking-wider",children:c(b)}),v?s.jsx(Ui,{size:18,className:"text-gray-500 dark:text-gray-400"}):s.jsx(tn,{size:18,className:"text-gray-500 dark:text-gray-400"})]}),v&&s.jsx("div",{className:"overflow-x-auto pb-4 bg-white dark:bg-gray-900 rounded-b-2xl",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-max",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800 text-xs text-gray-500 dark:text-gray-400 uppercase border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"p-3 font-semibold w-24 min-w-[90px]",children:"Data"}),y.map(g=>s.jsx("th",{className:"p-3 font-semibold min-w-[130px]",children:g.label},g.key))]})}),s.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-800 relative",children:o[b].sort((g,m)=>new Date(g.date)-new Date(m.date)).map(g=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition relative",children:[s.jsx("td",{className:"p-3 font-medium text-gray-700 dark:text-gray-300 font-mono text-xs",children:d(g.date)}),y.map(m=>{var w,k;return s.jsx("td",{className:"p-2 relative",children:m.type==="select"?s.jsx(mH,{options:m.options,value:((w=g.teaching)==null?void 0:w[m.key])||"",onChange:N=>u(g.id,m.key,N||null)}):s.jsx("input",{className:"w-full bg-transparent border-b border-transparent hover:border-gray-300 dark:hover:border-gray-600 focus:border-pink-500 text-xs p-1 outline-none transition placeholder-gray-300 dark:placeholder-gray-600 text-gray-700 dark:text-gray-300",placeholder:"Wpisz...",defaultValue:((k=g.teaching)==null?void 0:k[m.key])||"",onBlur:N=>u(g.id,m.key,N.target.value)})},m.key)})]},g.id))})]})})]},b)}),l.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-dashed border-gray-200 dark:border-gray-700",children:'Brak programw naboestw. Dodaj programy w module "Programy".'})]})};function yH({speakers:t,onAdd:e,onEdit:r,onDelete:n}){const[a,i]=C.useState(!1),[o,l]=C.useState(null),[A,c]=C.useState(!1),[d,h]=C.useState({name:"",email:"",bio:"",photo_url:""}),p=C.useRef(null),u=()=>{h({name:"",email:"",bio:"",photo_url:""}),l(null),i(!0)},y=g=>{h({name:g.name,email:g.email||"",bio:g.bio||"",photo_url:g.photo_url||""}),l(g),i(!0)},b=async g=>{var w;const m=(w=g.target.files)==null?void 0:w[0];if(m){c(!0);try{const k=m.name.split(".").pop(),S=`teaching/speakers/${`speaker_${Date.now()}_${Math.random().toString(36).substring(7)}.${k}`}`,{error:U}=await le.storage.from("public-assets").upload(S,m);if(U)throw U;const{data:Q}=le.storage.from("public-assets").getPublicUrl(S);h(L=>({...L,photo_url:Q.publicUrl}))}catch(k){console.error("Upload error:",k),alert("Bd przesyania zdjcia")}c(!1)}},v=async()=>{if(!d.name.trim())return alert("Podaj imi i nazwisko mwcy");o?await r(o.id,d):await e(d),i(!1)};return s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Mwcy"}),s.jsxs("button",{onClick:u,className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white px-4 py-2 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj mwc"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(g=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-2xl p-4 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[g.photo_url?s.jsx("img",{src:g.photo_url,alt:g.name,className:"w-16 h-16 rounded-full object-cover"}):s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center text-white text-xl font-bold",children:g.name.charAt(0)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100 truncate",children:g.name}),g.email&&s.jsxs("a",{href:`mailto:${g.email}`,className:"text-sm text-pink-500 hover:text-pink-600 flex items-center gap-1 truncate",children:[s.jsx(xg,{size:12}),g.email]}),g.bio&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mt-1",children:g.bio})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4 justify-end",children:[s.jsx("button",{onClick:()=>y(g),className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:s.jsx(ZA,{size:16})}),s.jsx("button",{onClick:()=>n(g.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:s.jsx(Zr,{size:16})})]})]},g.id)),t.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-gray-500 dark:text-gray-400",children:"Brak mwcw. Dodaj pierwszego mwc."})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 w-full max-w-md border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:o?"Edytuj mwc":"Dodaj mwc"}),s.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:s.jsx(Nt,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative group",children:[d.photo_url?s.jsx("img",{src:d.photo_url,alt:"",className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-700 shadow-lg"}):s.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center text-white text-3xl font-bold border-4 border-white dark:border-gray-700 shadow-lg",children:d.name?d.name.charAt(0).toUpperCase():"?"}),s.jsx("button",{onClick:()=>{var g;return(g=p.current)==null?void 0:g.click()},disabled:A,className:"absolute bottom-0 right-0 bg-pink-500 text-white p-2 rounded-full shadow-lg hover:bg-pink-600 transition",children:A?s.jsx(kl,{size:16,className:"animate-spin"}):s.jsx(pg,{size:16})})]}),s.jsx("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:b}),s.jsx("span",{className:"text-xs text-gray-400 mt-2",children:"Kliknij aby doda zdjcie"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Imi i nazwisko *"}),s.jsx("input",{type:"text",value:d.name,onChange:g=>h({...d,name:g.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white",placeholder:"Jan Kowalski"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Adres e-mail"}),s.jsx("input",{type:"email",value:d.email,onChange:g=>h({...d,email:g.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white",placeholder:"jan.kowalski@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Bio / Opis"}),s.jsx("textarea",{value:d.bio,onChange:g=>h({...d,bio:g.target.value}),rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white resize-none",placeholder:"Krtki opis mwcy..."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl",children:"Anuluj"}),s.jsx("button",{onClick:v,className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl font-medium",children:o?"Zapisz":"Dodaj"})]})]})})]})}function bH({series:t,programs:e,speakers:r,onAdd:n,onEdit:a,onDelete:i}){var S;const[o,l]=C.useState(!1),[A,c]=C.useState(null),[d,h]=C.useState(null),[p,u]=C.useState(!1),[y,b]=C.useState({name:"",description:"",scripture:"",start_date:"",end_date:"",graphics:[]}),v=()=>{b({name:"",description:"",scripture:"",start_date:"",end_date:"",graphics:[]}),c(null),l(!0)},g=(U,Q)=>{Q==null||Q.stopPropagation(),b({name:U.name,description:U.description||"",scripture:U.scripture||"",start_date:U.start_date||"",end_date:U.end_date||"",graphics:U.graphics||[]}),c(U),l(!0)},m=async U=>{const Q=Array.from(U.target.files||[]);if(Q.length!==0){u(!0);try{const L=[];for(const V of Q){const F=V.name.split(".").pop(),T=`teaching/series/${`series_${Date.now()}_${Math.random().toString(36).substring(7)}.${F}`}`,{error:G}=await le.storage.from("public-assets").upload(T,V);if(G)throw G;const{data:ne}=le.storage.from("public-assets").getPublicUrl(T);L.push({name:V.name,url:ne.publicUrl})}b(V=>({...V,graphics:[...V.graphics,...L]}))}catch(L){console.error("Upload error:",L),alert("Bd przesyania pliku")}u(!1)}},w=U=>{b(Q=>({...Q,graphics:Q.graphics.filter((L,V)=>V!==U)}))},k=async()=>{if(!y.name.trim())return alert("Podaj nazw serii");A?await a(A.id,y):await n(y),l(!1)},N=U=>e.filter(Q=>{var L;return((L=Q.teaching)==null?void 0:L.series_id)===U}).sort((Q,L)=>new Date(Q.date)-new Date(L.date));if(d){const U=N(d.id);return s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-purple-600 to-pink-600",children:[((S=d.graphics)==null?void 0:S[0])&&s.jsx("img",{src:d.graphics[0].url,alt:"",className:"w-full h-full object-cover opacity-50"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.jsx("button",{onClick:()=>h(null),className:"absolute top-4 left-4 p-2 bg-white/20 backdrop-blur-sm rounded-xl text-white hover:bg-white/30 transition",children:s.jsx(rL,{size:20})}),s.jsxs("div",{className:"absolute bottom-4 left-6 right-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-1",children:d.name}),d.scripture&&s.jsx("p",{className:"text-pink-200 font-medium",children:d.scripture})]}),s.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:s.jsx("button",{onClick:Q=>g(d,Q),className:"p-2 bg-white/20 backdrop-blur-sm rounded-xl text-white hover:bg-white/30 transition",children:s.jsx(ZA,{size:18})})})]}),s.jsxs("div",{className:"p-6",children:[d.description&&s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:d.description}),(d.start_date||d.end_date)&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-6",children:[s.jsx(en,{size:16}),d.start_date&&new Date(d.start_date).toLocaleDateString("pl-PL"),d.start_date&&d.end_date&&" - ",d.end_date&&new Date(d.end_date).toLocaleDateString("pl-PL")]}),d.graphics&&d.graphics.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-3",children:"Grafiki serii"}),s.jsx("div",{className:"flex flex-wrap gap-3",children:d.graphics.map((Q,L)=>s.jsx("a",{href:Q.url,target:"_blank",rel:"noreferrer",className:"block",children:s.jsx("img",{src:Q.url,alt:Q.name,className:"w-32 h-32 rounded-xl object-cover hover:opacity-80 transition shadow-md"})},L))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-4",children:["Kazania w serii (",U.length,")"]}),U.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map((Q,L)=>{var F,D,T,G;const V=r.find(ne=>{var ce;return ne.id===((ce=Q.teaching)==null?void 0:ce.speaker_id)});return s.jsxs("div",{className:"group bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg hover:border-pink-300 dark:hover:border-pink-600 transition-all duration-300",children:[s.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-orange-500 px-4 py-3 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center text-white font-bold text-sm",children:L+1}),s.jsx("span",{className:"text-white/90 text-sm font-medium",children:new Date(Q.date).toLocaleDateString("pl-PL",{weekday:"short",day:"numeric",month:"short",year:"numeric"})})]})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 text-lg mb-2 line-clamp-2 min-h-[3.5rem]",children:((F=Q.teaching)==null?void 0:F.title)||"Bez tytuu"}),V&&s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[V.photo_url?s.jsx("img",{src:V.photo_url,alt:V.name,className:"w-8 h-8 rounded-full object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-400 to-orange-400 flex items-center justify-center text-white text-xs font-bold",children:V.name.charAt(0)}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:V.name})]}),((D=Q.teaching)==null?void 0:D.scripture)&&s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Rs,{size:14,className:"text-pink-500 shrink-0"}),s.jsx("span",{className:"text-sm text-pink-600 dark:text-pink-400 font-medium",children:Q.teaching.scripture})]}),((T=Q.teaching)==null?void 0:T.main_point)&&s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-3 bg-gray-100 dark:bg-gray-800 rounded-xl p-3 italic",children:['"',Q.teaching.main_point,'"']}),((G=Q.teaching)==null?void 0:G.notes)&&s.jsxs("div",{className:"mt-3 flex items-center gap-1 text-xs text-gray-400",children:[s.jsx(Cu,{size:12}),s.jsx("span",{children:"Zawiera notatki"})]})]})]},Q.id)})}):s.jsxs("div",{className:"text-center py-12 text-gray-400 bg-gray-50 dark:bg-gray-800 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[s.jsx(Rs,{size:40,className:"mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"Brak kaza przypisanych do tej serii"}),s.jsx("p",{className:"text-sm mt-1",children:'Przypisz kazania w zakadce "Grafik"'})]})]})]})]})}return s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Serie"}),s.jsxs("button",{onClick:v,className:"bg-gradient-to-r from-pink-600 to-orange-600 text-white px-4 py-2 rounded-xl font-medium hover:shadow-lg transition flex items-center gap-2",children:[s.jsx(Wt,{size:18})," Dodaj seri"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(U=>{const Q=N(U.id).length;return s.jsxs("div",{onClick:()=>h(U),className:"group cursor-pointer bg-gray-50 dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-xl hover:border-pink-300 dark:hover:border-pink-600 transition-all duration-300",children:[s.jsxs("div",{className:"h-40 bg-gradient-to-br from-purple-500 to-pink-500 relative overflow-hidden",children:[U.graphics&&U.graphics[0]?s.jsx("img",{src:U.graphics[0].url,alt:"",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Rs,{className:"text-white/50",size:48})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),s.jsxs("div",{className:"absolute bottom-3 left-3 right-3",children:[s.jsx("h3",{className:"font-bold text-white text-lg truncate",children:U.name}),U.scripture&&s.jsx("p",{className:"text-pink-200 text-sm truncate",children:U.scripture})]}),s.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:L=>g(U,L),className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-lg text-white hover:bg-white/30 transition",children:s.jsx(ZA,{size:14})}),s.jsx("button",{onClick:L=>{L.stopPropagation(),i(U.id)},className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-lg text-white hover:bg-red-500/80 transition",children:s.jsx(Zr,{size:14})})]})]}),s.jsxs("div",{className:"p-4",children:[U.description&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-3",children:U.description}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[(U.start_date||U.end_date)&&s.jsxs("span",{children:[U.start_date&&new Date(U.start_date).toLocaleDateString("pl-PL",{month:"short",year:"numeric"}),U.end_date&&` - ${new Date(U.end_date).toLocaleDateString("pl-PL",{month:"short",year:"numeric"})}`]}),s.jsxs("span",{className:"bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 px-2 py-0.5 rounded-full font-medium",children:[Q," ",Q===1?"kazanie":Q<5?"kazania":"kaza"]})]})]})]},U.id)}),t.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-gray-500 dark:text-gray-400",children:"Brak serii. Dodaj pierwsz seri nauczania."})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:A?"Edytuj seri":"Dodaj seri"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:s.jsx(Nt,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Nazwa serii *"}),s.jsx("input",{type:"text",value:y.name,onChange:U=>b({...y,name:U.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white",placeholder:"Np. Fundamenty wiary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Fragment biblijny"}),s.jsx("input",{type:"text",value:y.scripture,onChange:U=>b({...y,scripture:U.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white",placeholder:"Np. List do Rzymian 1-8"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Opis serii"}),s.jsx("textarea",{value:y.description,onChange:U=>b({...y,description:U.target.value}),rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white resize-none",placeholder:"Krtki opis serii..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(nB,{label:"Data rozpoczcia",value:y.start_date,onChange:U=>b({...y,start_date:U})}),s.jsx(nB,{label:"Data zakoczenia",value:y.end_date,onChange:U=>b({...y,end_date:U})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Grafiki"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.graphics.map((U,Q)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:U.url,alt:"",className:"w-20 h-20 rounded-lg object-cover"}),s.jsx("button",{onClick:()=>w(Q),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition",children:s.jsx(Nt,{size:12})})]},Q))}),s.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-pink-500 transition",children:[s.jsx(pg,{size:20,className:"text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500",children:p?"Przesyanie...":"Dodaj grafiki"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:m,disabled:p})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl",children:"Anuluj"}),s.jsx("button",{onClick:k,className:"px-4 py-2 bg-gradient-to-r from-pink-600 to-orange-600 text-white rounded-xl font-medium",children:A?"Zapisz":"Dodaj"})]})]})})]})}function wH(){const{userRole:t}=Ho(),[e,r]=C.useState("wall"),[n,a]=C.useState(!0),[i,o]=C.useState({email:"",name:""}),[l,A]=C.useState([]),[c,d]=C.useState([]),[h,p]=C.useState([]);C.useEffect(()=>{y(),u()},[]);const u=async()=>{const{data:{user:S}}=await le.auth.getUser();if(S){const{data:U}=await le.from("app_users").select("full_name").eq("email",S.email).single();o({email:S.email,name:(U==null?void 0:U.full_name)||S.email})}},y=async()=>{a(!0);try{const[S,U,Q]=await Promise.all([le.from("teaching_speakers").select("*").order("name"),le.from("teaching_series").select("*").order("start_date",{ascending:!1}),le.from("programs").select("*").order("date",{ascending:!1})]);S.data&&A(S.data),U.data&&d(U.data),Q.data&&p(Q.data)}catch(S){console.error("Error fetching data:",S)}a(!1)},b=async S=>{const{error:U}=await le.from("teaching_speakers").insert([S]);if(U){alert("Bd: "+U.message);return}y()},v=async(S,U)=>{const{error:Q}=await le.from("teaching_speakers").update(U).eq("id",S);if(Q){alert("Bd: "+Q.message);return}y()},g=async S=>{if(!confirm("Usun tego mwc?"))return;const{error:U}=await le.from("teaching_speakers").delete().eq("id",S);if(U){alert("Bd: "+U.message);return}y()},m=async S=>{const{error:U}=await le.from("teaching_series").insert([S]);if(U){alert("Bd: "+U.message);return}y()},w=async(S,U)=>{const{error:Q}=await le.from("teaching_series").update(U).eq("id",S);if(Q){alert("Bd: "+Q.message);return}y()},k=async S=>{if(!confirm("Usun t seri?"))return;const{error:U}=await le.from("teaching_series").delete().eq("id",S);if(U){alert("Bd: "+U.message);return}y()},N=async(S,U)=>{p(Q=>Q.map(L=>L.id===S?U.teaching?{...L,...U,teaching:{...L.teaching,...U.teaching}}:{...L,...U}:L)),await le.from("programs").update(U).eq("id",S)};return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(kl,{className:"animate-spin text-pink-600",size:40})}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-orange-600 dark:from-pink-400 dark:to-orange-400 bg-clip-text text-transparent",children:"Nauczanie"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-2 inline-flex gap-2",children:[s.jsxs("button",{onClick:()=>r("wall"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="wall"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Cu,{size:16,className:"inline mr-2"}),"Tablica"]}),s.jsxs("button",{onClick:()=>r("schedule"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="schedule"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(en,{size:16,className:"inline mr-2"}),"Grafik"]}),s.jsxs("button",{onClick:()=>r("series"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="series"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Rs,{size:16,className:"inline mr-2"}),"Serie"]}),ha("teaching","speakers",t)&&s.jsxs("button",{onClick:()=>r("speakers"),className:`px-6 py-2.5 rounded-xl font-medium transition text-sm ${e==="speakers"?"bg-gradient-to-r from-pink-600 to-orange-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(ta,{size:16,className:"inline mr-2"}),"Mwcy"]})]}),e==="wall"&&s.jsx("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx(o3,{ministry:"Nauczanie",currentUserEmail:i.email,currentUserName:i.name})}),e==="schedule"&&s.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Grafik Nauczania"})}),s.jsx(xH,{programs:h,speakers:l,series:c,onUpdateProgram:N})]}),e==="series"&&s.jsx(bH,{series:c,programs:h,speakers:l,onAdd:m,onEdit:w,onDelete:k}),e==="speakers"&&s.jsx(yH,{speakers:l,onAdd:b,onEdit:v,onDelete:g})]})}function vH(){const[t,e]=C.useState(null),[r,n]=C.useState(!0),[a,i]=C.useState(localStorage.getItem("theme")==="dark");C.useEffect(()=>{a?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[a]);const o=()=>i(!a);if(C.useEffect(()=>{(async()=>{try{const{data:d}=await le.auth.getSession();d!=null&&d.session&&e(d.session)}catch(d){console.error("Auth error:",d)}finally{n(!1)}})();const c=le.auth.onAuthStateChange((d,h)=>{e(h)});return()=>{var d;(d=c==null?void 0:c.data)!=null&&d.subscription&&c.data.subscription.unsubscribe()}},[]),r)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"adowanie..."})]})});const l=window.location.pathname==="/reset-password"||window.location.hash.includes("type=recovery");return!t&&!l?s.jsx(QL,{}):l?s.jsx(P1,{children:s.jsxs(Q1,{children:[s.jsx(Mn,{path:"/reset-password",element:s.jsx(y2,{})}),s.jsx(Mn,{path:"*",element:s.jsx(y2,{})})]})}):s.jsx(P1,{children:s.jsx(Y8,{children:s.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[s.jsx(UL,{}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(LL,{user:t.user,darkMode:a,toggleTheme:o}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:s.jsxs(Q1,{children:[s.jsx(Mn,{path:"/",element:s.jsx(WM,{})}),s.jsx(Mn,{path:"/calendar",element:s.jsx(fH,{})}),s.jsx(Mn,{path:"/members",element:s.jsx(ci,{resource:"module:members",children:s.jsx(XM,{})})}),s.jsx(Mn,{path:"/worship",element:s.jsx(ci,{resource:"module:worship",children:s.jsx(I9,{})})}),s.jsx(Mn,{path:"/media",element:s.jsx(ci,{resource:"module:media",children:s.jsx(z9,{})})}),s.jsx(Mn,{path:"/atmosfera",element:s.jsx(ci,{resource:"module:atmosfera",children:s.jsx(H9,{})})}),s.jsx(Mn,{path:"/kids",element:s.jsx(ci,{resource:"module:kids",children:s.jsx(J9,{})})}),s.jsx(Mn,{path:"/home-groups",element:s.jsx(ci,{resource:"module:homegroups",children:s.jsx(Y9,{})})}),s.jsx(Mn,{path:"/finance",element:s.jsx(ci,{resource:"module:finance",children:s.jsx(Z9,{})})}),s.jsx(Mn,{path:"/teaching",element:s.jsx(ci,{resource:"module:teaching",children:s.jsx(wH,{})})}),s.jsx(Mn,{path:"/settings",element:s.jsx(ci,{resource:"module:settings",children:s.jsx(tH,{})})}),s.jsx(Mn,{path:"/profile",element:s.jsx(rH,{})}),s.jsx(Mn,{path:"*",element:s.jsx(NC,{to:"/",replace:!0})})]})})]})]})})})}Xm.createRoot(document.getElementById("root")).render(s.jsx(Sn.StrictMode,{children:s.jsx(vH,{})}));export{or as _,BH as c,rS as g};
